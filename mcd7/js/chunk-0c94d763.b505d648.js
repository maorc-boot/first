(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c94d763"],{"1b5b":function(t,e,i){"use strict";const s="/mcd-eval/action";e["a"]={executionMonitoring:{queryCampSmsDetail:s+"/tactics/smsmonitor/queryCampSmsDetail.do",getReceiver:s+"/mcpSupervision/getReceiver.do",addReceiver:s+"/mcpSupervision/addReceiver.do",getMcpChannelList:s+"/mcpSupervision/getMcpChannelList.do",setSendSms:s+"/mcpSupervision/setSendSms.do",getMonitorConfByChannelId:s+"/mcpSupervision/getMonitorConfByChannelId.do",insertOrUpdateMonitorConf:s+"/mcpSupervision/insertOrUpdateMonitorConf.do",getSupervisionRecordCount:s+"/mcpSupervision/getSupervisionRecordCount.do",getVisitRecord:s+"/mcpSupervision/getVisitRecord.do",getSupervisionRecord:s+"/mcpSupervision/getSupervisionRecord.do",queryInterfaceMonitorCount:s+"/mcpSupervision/queryInterfaceMonitorCount.do",queryInterfaceMonitorList:s+"/mcpSupervision/queryInterfaceMonitorList.do"}}},7504:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tab-for-em-setting-other-wrap"},[e("div",{staticClass:"card-item-box overflow-hd"},t._l(t.settingList,(function(i,s){return e("div",{key:s+"settingList"},[e("EmEditCell",{attrs:{item:i},on:{refresh:t.getSettingList}})],1)})),0)])},r=[],o=(i("14d9"),i("0fea")),n=i("5e05"),a=i("1b5b"),l=function(){var t=this,e=t._self._c;return t.isEdit?e("div",{staticClass:"em-edit-cell-wrap fe-p-24 mt-24 ml-10 mr-10 bg border-radius-4"},[e("div",{staticClass:"top"},[e("span",{staticClass:"title"},[t._v(t._s(t.item.title||"标题"))]),e("p",{staticClass:"btn-box"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.edit}},[t._v("编辑")])],1)]),e("div",{staticClass:"con"},[e("p",{staticClass:"em-p"},[t._v("短信接收人")]),e("div",{staticClass:"em-con"},t._l(t.item.RECEIVER,(function(i,s){return e("p",{key:s+"RECEIVER",staticClass:"em-con-i"},[t._v(" "+t._s(i.value&&i.value)+" ")])})),0)]),e("div",{staticClass:"con"},[e("p",{staticClass:"em-p"},[t._v(" 短信内容 "),e("span",[t._v(t._s(t.item.CONTENT.length)+"/140")])]),e("div",{staticClass:"em-txt"},[t._v(t._s(t.item.CONTENT))])])]):e("div",{staticClass:"em-edit-cell-wrap fe-p-24 mt-24 ml-10 mr-10 bg border-radius-4"},[e("div",{staticClass:"top"},[e("span",{staticClass:"title"},[t._v(t._s(t.item.title||"标题"))]),e("p",{staticClass:"btn-box"},[e("el-button",{attrs:{size:"mini"},on:{click:t.cancel}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.ok(t.item)}}},[t._v("完成")])],1)]),e("div",{staticClass:"con"},[e("p",{staticClass:"em-p"},[t._v("短信接收人")]),e("div",{staticClass:"em-ipt"},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"hide-required-asterisk":!0}},[e("el-form-item",{staticClass:"phone",attrs:{prop:"phone",label:""}},[e("el-input",{ref:"phone",attrs:{type:"age",minlength:"11",maxlength:"11",size:"mini",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextInputToTwo(e)}},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",t._n(e))},expression:"form.phone"}})],1),e("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.add}},[t._v("添加")])],1)],1)]),e("el-form",{ref:"submitForm",attrs:{model:t.submitForm,"hide-required-asterisk":!0}},[e("div",{staticClass:"em-con"},t._l(t.submitForm.RECEIVER,(function(i,s){return e("el-form-item",{key:s+"RECEIVER",staticClass:"em-con-ipt",attrs:{label:"",prop:"RECEIVER."+s+".value"}},[e("el-input",{attrs:{maxlength:"11"},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"i.value"}},[e("i",{staticClass:"el-input__icon el-icon-close cursor-pointer",attrs:{slot:"suffix"},on:{click:function(e){return t.clearableItem(s)}},slot:"suffix"})])],1)})),1),e("div",{staticClass:"con edit-con"},[e("p",{staticClass:"em-p"},[t._v(" 短信内容 "),e("span",[t._v(t._s(t.submitForm.CONTENT.length)+"/140")])]),e("div",{staticClass:"em-txt"},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入短信内容",maxlength:"140",autosize:{minRows:1,maxRows:2},"show-word-limit":"",clearable:""},model:{value:t.submitForm.CONTENT,callback:function(e){t.$set(t.submitForm,"CONTENT",e)},expression:"submitForm.CONTENT"}})],1)])])],1)},m=[];i("d9e2");const c=a["a"].executionMonitoring.addReceiver;var u={name:"EmEditCell",props:{item:Object},data(){let t=(t,e,i)=>{let s=/^1[34578]\d{9}$/;e?s.test(e)?i():i(new Error("格式错误")):i(new Error("不能为空"))},e=(t,e,i)=>{let s=/^1[34578][0-9]$/;e?s.test(e)?i():i(new Error("格式错误")):i(new Error("不能为空"))},i=(t,e,i)=>{let s=/^\d{4}$/;e?s.test(e)?i():i(new Error("格式错误")):i(new Error("不能为空"))};return{isEdit:!0,form:{phone1:"",phone2:"",phone3:""},rules:{phone:[{required:!0,validator:t,trigger:"blur"}],phone1:[{required:!0,validator:e,trigger:"blur"}],phone2:[{required:!0,validator:i,trigger:"blur"}],phone3:[{required:!0,validator:i,trigger:"blur"}]},submitForm:{RECEIVER:[],CONTENT:""}}},methods:{edit(){this.isEdit=!1;let t=JSON.stringify(this.item.RECEIVER),e=JSON.stringify(this.item.CONTENT);this.submitForm.RECEIVER=JSON.parse(t),this.submitForm.CONTENT=JSON.parse(e)},nextInputToTwo(t){t&&(t.target.blur(),this.$refs.phone2.focus())},nextInputToThree(t){t&&(t.target.blur(),this.$refs.phone3.focus())},cancel(){this.isEdit=!0,this.$refs.form.resetFields()},ok(t){let e=this.submitForm.RECEIVER.length,i=this.submitForm.CONTENT;if(e<=0)this.$message.error("至少添加一个短信接收人");else if(""!==i){if(e>0){for(let t=0;t<e;t++){if(""===this.submitForm.RECEIVER[t].value)return void this.$message.error("短信接收人不能为空");{let e=/^1\d{10}$/;if(!e.test(this.submitForm.RECEIVER[t].value))return void this.$message.error("请输入正确的手机号码")}}let i={receivers:this.formatToStr(this.submitForm.RECEIVER),smsContent:this.submitForm.CONTENT,type:t.TYPE};Object(o["i"])(c,i).then(()=>{this.isEdit=!0,this.$refs.form.resetFields(),this.$emit("refresh","")})}}else this.$message.error("短信内容不能为空")},formatToStr(t){let e=[];return t&&t.forEach(t=>{e.push(t.value)}),e.join(",")},clearableItem(t){this.submitForm.RECEIVER.splice(t,1)},add(){this.$refs.form.validate(t=>{if(t){let t=""+this.form.phone;this.submitForm.RECEIVER.push({value:t}),this.form.phone=""}})}}},p=u,d=(i("7917"),i("2877")),E=Object(d["a"])(p,l,m,!1,null,null,null),h=E.exports;const f=n["a"].common.getSysEnumByTypeAndParentId,v=a["a"].executionMonitoring.getReceiver;var C={name:"TabForEmSettingOther",components:{EmEditCell:h},data(){return{settingList:[]}},created(){this.getSettingList("")},methods:{getSettingList(t){let e={type:t};Object(o["i"])(v,e).then(t=>{let e=t,i={enumType:"iop_monitor_type"};Object(o["i"])(f,i).then(t=>{this.formatToArray(e),this.settingList=this.formatToName(e,t)})})},formatToName(t,e){let i=[];return t.forEach(t=>{e.forEach(e=>{e.enumKey===t.TYPE&&(t.title=e.enumValue,i.push(t))})}),i},formatToArray(t){t.forEach(t=>{t.title="",t.RECEIVER=t.RECEIVER.split(",");let e=[];t.RECEIVER.forEach(t=>{if(""!==t){let i={};i.value=t,e.push(i)}}),t.RECEIVER=e})}}},b=C,g=Object(d["a"])(b,s,r,!1,null,null,null);e["default"]=g.exports},7917:function(t,e,i){"use strict";i("b333")},b333:function(t,e,i){}}]);