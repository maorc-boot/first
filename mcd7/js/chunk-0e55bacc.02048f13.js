(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e55bacc"],{"30b9":function(e,a,t){"use strict";const r="/eval-svc";a["a"]={effectAppraisal:{dayEffect:r+"/home/eval/day/effect",monthEffect:r+"/home/eval/month/effect",getCityList:r+"/home/eval/getCityList",activityList:r+"/evaluate/activity/list",productList:r+"/mtl-eval-info-plan/queryPage",exportProduct:r+"/mtl-eval-info-plan/export",channelList:r+"/evaluate/channel/list",getTdList:"/eval-svc/td/eval/list",exportTdEvalListData:"/eval-svc/td/eval/exportTdEvalListData",exportOrderChannelDMData:"/eval-svc/reportform/download/exportOrderChannelDMData",exportOrderProductDMData:"/eval-svc/reportform/download/exportOrderProductDMData",getPlanChannelReportList:"/eval-svc/reportform/download/getPlanChannelReportList",getPlanOrderReportList:"/eval-svc/reportform/download/getPlanOrderReportList"},enterprise:{exportMarketingData:"/eval-svc/action/jx/enterpriseMarketing/exportMarketingData",getDimGrid:"/eval-svc/action/jx/enterpriseMarketing/getDimGrid",getDimGroups:"/eval-svc/action/jx/enterpriseMarketing/getDimGroups",getDimManager:"/eval-svc/action/jx/enterpriseMarketing/getDimManager",queryMarketingList:"/eval-svc/action/jx/enterpriseMarketing/queryMarketingList",saveCase:"/eval-svc/action/jx/enterpriseMarketing/saveCase"}}},9630:function(e,a,t){"use strict";t("aa48")},a582:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e._self._c;return a("div",{staticClass:"template-wrap-content"},[a("div",{staticClass:"searchParams-part"},[a("div",{staticClass:"searchParams-left"},[a("div",{staticClass:"search-input"},[a("label",[e._v("策略编号：")]),a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入策略编号",clearable:""},model:{value:e.searchParams.campsegKey,callback:function(a){e.$set(e.searchParams,"campsegKey","string"===typeof a?a.trim():a)},expression:"searchParams.campsegKey"}})],1),a("div",{staticClass:"search-input"},[a("label",[e._v("地市：")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.getDepList},model:{value:e.searchParams.cityId,callback:function(a){e.$set(e.searchParams,"cityId",a)},expression:"searchParams.cityId"}},e._l(e.cityList,(function(e){return a("el-option",{key:e.id+e.name,attrs:{label:e.name,value:e.id}})})),1)],1),a("div",{staticClass:"search-input"},[a("label",[e._v("部门：")]),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.searchParams.deptId,callback:function(a){e.$set(e.searchParams,"deptId",a)},expression:"searchParams.deptId"}},e._l(e.depList,(function(e){return a("el-option",{key:e.deptId,attrs:{label:e.title,value:e.deptId}})})),1)],1),a("div",{staticClass:"search-input"},[a("label",[e._v("创建人：")]),a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入创建人",clearable:""},model:{value:e.searchParams.createUser,callback:function(a){e.$set(e.searchParams,"createUser","string"===typeof a?a.trim():a)},expression:"searchParams.createUser"}})],1),a("div",{staticClass:"search-input"},[a("label",[e._v("预警时间：")]),a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:e.getDates},model:{value:e.queryTime,callback:function(a){e.queryTime=a},expression:"queryTime"}})],1)]),a("div",{staticClass:"searchParams-right"},[a("el-select",{on:{change:e.searchTableData},model:{value:e.type,callback:function(a){e.type=a},expression:"type"}},[a("el-option",{attrs:{value:"-1",label:"明细"}}),a("el-option",{attrs:{value:"0",label:"汇总"}})],1),a("div",[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.searchTableData}},[e._v("查询")])],1)],1)]),"-1"===e.type?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"template-table customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{label:"序号",type:"index","header-align":"center",align:"center",width:"45"}}),a("el-table-column",{attrs:{prop:"campsegId",label:"策略编号","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"campsegName",label:"策略名称","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"status",label:"处理状态","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"issuedCustomerNum",label:"下发数","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"contactRate",label:"接触率","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"marketSuccessRate",label:"营销成功率","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"warningTime",label:"预警时间","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"cityName",label:"地市","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"deptName",label:"部门","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"userName",label:"创建人","header-align":"center",align:"center"}})],1):a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"template-table customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{label:"序号",type:"index","header-align":"center",align:"center",width:"45"}}),a("el-table-column",{attrs:{prop:"total",label:"预警总数","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"warningTime",label:"预警时间","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"finished",label:"已处理","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"unfinished",label:"未处理","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"cityName",label:"地市","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"deptName",label:"部门","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"userName",label:"创建人","header-align":"center",align:"center"}})],1),a("el-pagination",{attrs:{"current-page":e.query.current,"page-sizes":[10,20,30,40],"page-size":e.query.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},l=[],s=t("0fea"),i=t("d370"),n=t("30b9"),c=t("a454"),o={data(){return{loading:!1,timeMode:"default",type:"-1",searchParams:{campsegKey:"",cityId:"",deptId:"",createUser:"",startDate:"",endDate:""},query:{current:1,size:10},queryTime:null,cityList:[],depList:[],total:0,tableData:[]}},computed:{url(){return"-1"==this.type?i["a"].mpapi.queryWarnDetailList:i["a"].mpapi.queryWarnSumList}},methods:{searchTableData(){this.query={...this.query,...this.searchParams},this.query.current=1,this.getTableData()},async getTableData(){try{this.loading=!0;const{records:e,total:a}=await Object(s["i"])(this.url,this.query);this.total=a,this.tableData=this.handleTableData(e)}catch(e){}finally{this.loading=!1}},handleTableData(e){let a=["待处理","处理待办成功","已发送emis待办","发送emis待办失败或异常"];return e.map(e=>({...e,marketSuccessRate:e.marketSuccessRate+"%",contactRate:e.contactRate+"%",status:a[+e.status]}))},handleSizeChange(e){this.query.current=1,this.query.size=e,this.getTableData()},handleCurrentChange(e){this.query.current=e,this.getTableData()},getDates(e){null!==e&&void 0!==e&&e.length?(this.searchParams.startDate=e[0],this.searchParams.endDate=e[1]):(this.searchParams.startDate="",this.searchParams.endDate="")},async getCityList(){try{const{cityList:e}=await Object(s["i"])(n["a"].effectAppraisal.getCityList);this.cityList=e}catch(e){}},async getDepList(e){let a={id:e};"-1"==e&&(a={cityId:e});try{const e=await Object(s["i"])(c["a"].department.selectDepartmentData,a);this.depList=e}catch(t){this.depList=[]}}},mounted(){this.searchTableData(),this.getCityList(),this.getDepList("-1")}},p=o,d=(t("9630"),t("2877")),h=Object(d["a"])(p,r,l,!1,null,"b2c6f7c0",null);a["default"]=h.exports},aa48:function(e,a,t){}}]);