(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10359184"],{"0453":function(e,t,s){},"21a7":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this;e._self._c;return e._m(0)},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"login_container"},[t("img",{attrs:{src:s("713b"),alt:""}})])}],a=(s("14d9"),s("0fea")),i=s("5e05"),r=s("bc3a"),c=s.n(r),d=s("0557"),l={name:"AutoLoginIop4",data(){return{}},created(){const{userId:e}=this.$route.query;e?this.loginFromIop4(e):alert("用户ID不能为空")},methods:{loginFromIop4(e){const t=this.$loading({lock:!0,text:"自动登录中,请稍后",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),s={clientId:"asiainfo_1",clientSecret:"123456",grantType:"password",userId:e};c()({url:d["a"].commonConfig.baseURL+"/auth-svc/login/iop4",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:s,timeout:3e3}).then(e=>{const{data:s,status:o}=e.data;if("SUCCESS"===o){for(let e in s)"token_type"==e&&(s[e]=s[e].charAt(0).toUpperCase()+s[e].slice(1)),window.sessionStorage.setItem(e,s[e]);window.sessionStorage.setItem("IOP_TOKEN",s.token_type+" "+s.access_token),t.close(),this.savePageLog(),sessionStorage.setItem("loginType","EMIS"),this.encryptUserId(s.userId),this.$router.push({path:"/Home"})}else alert(e.data.message),t.close(),window.close()}).catch(s=>{if(s.message.includes("timeout"))return this.loginFromIop4(e);alert("登录异常"),t.close(),window.close()})},async encryptUserId(e){try{const t=await Object(a["i"])(i["a"].common.encrypt+"?userId="+e);sessionStorage.setItem("desId",t)}catch{}},savePageLog(){Object(a["i"])(i["a"].common.savePageLog,{userId:window.sessionStorage.getItem("userId"),userName:window.sessionStorage.getItem("userNameCn"),logType:0})}}},u=l,g=(s("d156"),s("2877")),p=Object(g["a"])(u,o,n,!1,null,"3e760568",null);t["default"]=p.exports},"713b":function(e,t,s){e.exports=s.p+"img/login-left.26aec9ed.png"},d156:function(e,t,s){"use strict";s("0453")}}]);