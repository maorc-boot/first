(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19760c8c"],{"0365":function(e,t,a){"use strict";a("451a")},"271a":function(e,t,a){"use strict";var l=a("cb2d"),r=a("e330"),i=a("577e"),n=a("d6d6"),s=URLSearchParams,c=s.prototype,o=r(c.getAll),u=r(c.has),d=new s("a=1");!d.has("a",2)&&d.has("a",void 0)||l(c,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return u(this,e);var l=o(this,e);n(t,1);var r=i(a),s=0;while(s<l.length)if(l[s++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},"451a":function(e,t,a){},5494:function(e,t,a){"use strict";var l=a("83ab"),r=a("e330"),i=a("edd0"),n=URLSearchParams.prototype,s=r(n.forEach);l&&!("size"in n)&&i(n,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"88a7":function(e,t,a){"use strict";var l=a("cb2d"),r=a("e330"),i=a("577e"),n=a("d6d6"),s=URLSearchParams,c=s.prototype,o=r(c.append),u=r(c["delete"]),d=r(c.forEach),h=r([].push),p=new s("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&l(c,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return u(this,e);var l=[];d(this,(function(e,t){h(l,{key:t,value:e})})),n(t,1);var r,s=i(e),c=i(a),p=0,m=0,g=!1,b=l.length;while(p<b)r=l[p++],g||r.key===s?(g=!0,u(this,r.key)):m++;while(m<b)r=l[m++],r.key===s&&r.value===c||o(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},"9f22":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"outbound-content"},[t("el-tabs",{attrs:{type:"card"},model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[t("el-tab-pane",{attrs:{label:"外呼通话明细",name:"outboundDetail",lazy:!0}},[t("outboundDetail")],1),t("el-tab-pane",{attrs:{label:"通话明细查询",name:"callDetail",lazy:!0}},[t("callDetail")],1)],1)],1)},r=[],i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"template-wrap-content"},[t("div",{staticClass:"top-edit-part"},[t("div",{staticClass:"search-input"},[t("label",[e._v("地市：")]),t("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择"},on:{change:e.getCountyList},model:{value:e.searchParams.city,callback:function(t){e.$set(e.searchParams,"city",t)},expression:"searchParams.city"}},e._l(e.cityList,(function(e){return t("el-option",{key:e.cityId+""+e.cityName,attrs:{label:e.cityName,value:e.cityId}})})),1)],1),t("div",{staticClass:"search-input"},[t("label",[e._v("区县：")]),t("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择"},model:{value:e.searchParams.county,callback:function(t){e.$set(e.searchParams,"county",t)},expression:"searchParams.county"}},e._l(e.countyList,(function(e){return t("el-option",{key:e.countyId+e.countyName,attrs:{label:e.countyName,value:e.countyId}})})),1)],1),t("div",{staticClass:"search-input"},[t("label",[e._v("网格：")]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"140px"},attrs:{placeholder:"请输入网格名称",clearable:""},model:{value:e.searchParams.grid,callback:function(t){e.$set(e.searchParams,"grid","string"===typeof t?t.trim():t)},expression:"searchParams.grid"}})],1),t("div",{staticClass:"search-input"},[t("label",[e._v("渠道编码：")]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"140px"},attrs:{placeholder:"请输入渠道编码",clearable:""},model:{value:e.searchParams.channel,callback:function(t){e.$set(e.searchParams,"channel","string"===typeof t?t.trim():t)},expression:"searchParams.channel"}})],1),t("div",{staticClass:"search-input"},[t("label",[e._v("经理工号：")]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"140px"},attrs:{placeholder:"请输入经理工号",clearable:""},model:{value:e.searchParams.managerId,callback:function(t){e.$set(e.searchParams,"managerId","string"===typeof t?t.trim():t)},expression:"searchParams.managerId"}})],1),t("div",{staticClass:"search-input"},[t("label",[e._v("业务场景：")]),t("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择"},model:{value:e.searchParams.btp,callback:function(t){e.$set(e.searchParams,"btp",t)},expression:"searchParams.btp"}},e._l(e.businessList,(function(e){return t("el-option",{key:e.scenarioId+e.scenarioName,attrs:{label:e.scenarioName,value:e.scenarioId}})})),1)],1),t("div",{staticClass:"search-input"},[t("label",[e._v("唯一标识：")]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"140px"},attrs:{placeholder:"请输入唯一标识",clearable:""},model:{value:e.searchParams.onlyId,callback:function(t){e.$set(e.searchParams,"onlyId","string"===typeof t?t.trim():t)},expression:"searchParams.onlyId"}})],1),t("div",{staticClass:"search-input"},[t("label",[e._v("被叫号码：")]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"140px"},attrs:{placeholder:"请输入被叫号码",clearable:""},on:{input:e.toNum},model:{value:e.searchParams.calledPhone,callback:function(t){e.$set(e.searchParams,"calledPhone","string"===typeof t?t.trim():t)},expression:"searchParams.calledPhone"}})],1),t("div",{staticClass:"search-input"},[t("label",[e._v("外呼结果：")]),t("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择"},model:{value:e.searchParams.result,callback:function(t){e.$set(e.searchParams,"result",t)},expression:"searchParams.result"}},[t("el-option",{attrs:{value:"",label:"全部"}}),t("el-option",{attrs:{value:"1",label:"成功"}}),t("el-option",{attrs:{value:"2",label:"失败"}})],1)],1),t("div",{staticClass:"search-input"},[t("label",[e._v("外呼时间：")]),t("el-date-picker",{staticStyle:{width:"215px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-value":e.defaultDateRange},on:{change:e.dateChange},model:{value:e.queryTime,callback:function(t){e.queryTime=t},expression:"queryTime"}})],1),t("div",{staticClass:"btn-search"},[t("el-button",{attrs:{type:"primary"},on:{click:e.searchTable}},[e._v("查询")]),t("el-button",{attrs:{type:"primary"},on:{click:e.downloadTemplate}},[e._v("导出")])],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"template-table customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:600}},[t("el-table-column",{attrs:{prop:"scenarioName",label:"业务场景",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"city",label:"地市",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"county",label:"区县",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"managerid",label:"经理工号",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"managerName",label:"经理姓名",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"onlyId",label:"唯一标识",width:"150px","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"gridId",label:"网格编码","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"gridName",label:"网格名称","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"channelId",label:"渠道编码","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"channelName",label:"渠道名称","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"display",label:"外显号码","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"startTime",label:"开始时间","header-align":"center",width:"100px",align:"center"}}),t("el-table-column",{attrs:{prop:"endTime",label:"结束时间",width:"100px","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"duration",label:"通话时长","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"result",label:"外呼结果","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"callee",label:"被叫号码","header-align":"center",width:"100px",align:"center"}}),t("el-table-column",{attrs:{prop:"endType",label:"挂断类型","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"url",label:"录音文件","header-align":"center",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v(" 播放 ")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.query.current,"page-sizes":[10,20,30,40],"page-size":e.query.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],s=(a("88a7"),a("271a"),a("5494"),a("0fea")),c=a("b524"),o={name:"outboundDetail",data(){const e=new Date,t=new Date(e);return t.setDate(e.getDate()-7),{loading:!1,total:0,defaultDateRange:[this.formatDate(t),this.formatDate(e)],searchParams:{btp:"",calledPhone:"",channel:"",city:"",county:"",endTime:"",grid:"",managerId:"",onlyId:"",result:"",startTime:""},query:{pageNum:1,pageSize:10},queryTime:null,cityList:[],countyList:[],businessList:[],gridList:[],tableData:[],num:0,audio:"",powerNum:"",powerCityId:"",powerCounty:"",powerGridId:"",powerGridName:""}},methods:{formatDate(e){const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),l=e.getDate().toString().padStart(2,"0");return`${t}-${a}-${l}`},toNum(e){this.searchParams.calledPhone=e.replace(/^(0+)|[^\d]+/g,"")},dateChange(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},handleSizeChange(e){this.query.pageNum=1,this.query.pageSize=e,this.getTableData()},handleCurrentChange(e){this.query.pageNum=e,this.getTableData()},searchTable(){this.query={...this.query,...this.searchParams},this.queryTime&&(this.query.endTime=this.queryTime[1],this.query.startTime=this.queryTime[0]),this.query.pageNum=1,this.getTableData()},async getTableData(){try{this.loading=!0;const e=await Object(s["i"])(c["a"].callDetails.outboundCallQuery,this.query);this.tableData=(null===e||void 0===e?void 0:e.records)||[],this.total=e.total}catch(e){}finally{this.loading=!1}},async getCityList(){this.searchParams.city=this.powerCityId;try{const e=await Object(s["i"])(c["a"].callDetails.outboundCallCity);if(e.unshift({cityId:"",cityName:"全部"}),"1"===this.powerNum||""===this.powerNum)this.searchParams.city="",this.cityList=e;else if("2"===this.powerNum||"3"===this.powerNum||"4"===this.powerNum){const t=e.filter(e=>e.cityId===this.powerCityId);this.cityList=t}}catch(e){}},async getCountyList(e){this.searchParams.county=this.powerCounty;try{const t=await Object(s["i"])(c["a"].callDetails.outboundCallCounty,{cityId:e||("999"===this.powerCityId?"":this.powerCityId)});if(t.unshift({countyId:"",countyName:"全部"}),"3"===this.powerNum||"4"===this.powerNum){const e=t.filter(e=>e.countyId===this.powerCounty);this.countyList=e,"9999"===this.powerCounty?this.countyList=t:this.countyList=e}else this.countyList=t}catch(t){this.countyList=[{countyId:"",countyName:"全部"}]}},getGridName(){"4"===this.powerNum?this.searchParams.grid=this.powerGridName:this.searchParams.grid=""},async getBusinessList(){try{const e=await Object(s["i"])(c["a"].callDetails.outboundBusiness);e.unshift({scenarioId:"",scenarioName:"全部"}),this.businessList=e}catch(e){}},downloadTemplate(){Object(s["b"])(c["a"].callDetails.outboundCallExport,{...this.searchParams,pageNum:1,pageSize:99999}).then(({data:e})=>{const t=new Blob([e],{type:e.type}),a="外呼通话明细.xls",l=document.createElement("a");l.download=a,l.style.display="none",l.href=URL.createObjectURL(t),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)})},handleDelete(e){this.audio.src=e.url,this.audio.pause(),this.audio.play()},async getCustomerPermissions(){const e=await Object(s["i"])(c["a"].callDetails.outboundPermissions);this.powerNum=e[0].permission||"",this.powerCityId="999"===e[0].cityId?"":e[0].cityId,this.powerCounty="9999"===e[0].county?"":e[0].county,this.powerGridName=e[0].gridName}},created(){this.audio=new Audio,this.queryTime=this.defaultDateRange},async mounted(){this.getBusinessList(),await this.getCustomerPermissions(),this.getCityList(),this.getCountyList(),this.getGridName(),this.searchTable()}},u=o,d=(a("0365"),a("2877")),h=Object(d["a"])(u,i,n,!1,null,"a38666da",null),p=h.exports,m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"template-wrap-content"},[t("div",{staticClass:"top-edit-part"},[t("div",{staticClass:"search-input"},[t("label",[e._v("唯一标识：")]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"140px"},attrs:{placeholder:"请输入唯一标识",clearable:""},model:{value:e.searchParams.callQueryId,callback:function(t){e.$set(e.searchParams,"callQueryId","string"===typeof t?t.trim():t)},expression:"searchParams.callQueryId"}})],1),t("div",{staticClass:"btn-search"},[t("el-button",{attrs:{type:"primary"},on:{click:e.searchTable}},[e._v("查询")]),t("el-button",{attrs:{type:"primary"},on:{click:e.renewTemplate}},[e._v("更新明细")])],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"template-table customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:600}},[t("el-table-column",{attrs:{prop:"scenarioName",label:"业务场景",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"city",label:"地市",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"county",label:"区县",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"managerid",label:"经理工号",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"managerName",label:"经理姓名",fixed:"","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"onlyId",label:"唯一标识",width:"150px","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"gridId",label:"网格编码","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"gridName",label:"网格名称","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"channelId",label:"渠道编码","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"channelName",label:"渠道名称","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"display",label:"外显号码","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"startTime",label:"开始时间","header-align":"center",width:"100px",align:"center"}}),t("el-table-column",{attrs:{prop:"endTime",label:"结束时间",width:"100px","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"duration",label:"通话时长","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"result",label:"外呼结果","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"callee",label:"被叫号码","header-align":"center",width:"100px",align:"center"}}),t("el-table-column",{attrs:{prop:"endType",label:"挂断类型","header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"url",label:"录音文件","header-align":"center",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v(" 播放 ")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.query.current,"page-sizes":[10,20,30,40],"page-size":e.query.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},g=[],b={name:"callDetail",data(){return{loading:!1,tableData:[],total:0,query:{pageNum:1,pageSize:10},searchParams:{callQueryId:""},audio:""}},methods:{handleSizeChange(e){this.query.pageNum=1,this.query.pageSize=e,this.getTableData()},handleCurrentChange(e){this.query.pageNum=e,this.getTableData()},searchTable(){this.query={...this.query,...this.searchParams},this.query.pageNum=1,this.getTableData()},async getTableData(){try{this.loading=!0;const e=await Object(s["i"])(c["a"].callDetails.outboundCallQuery,this.query);this.tableData=(null===e||void 0===e?void 0:e.records)||[],this.total=e.total}catch(e){}finally{this.loading=!1}},async renewTemplate(){try{this.loading=!0;const e=await Object(s["i"])(c["a"].messageDetails.messageCallQuery,{callQueryId:this.searchParams.callQueryId});this.tableData=(null===e||void 0===e?void 0:e.records)||[],this.total=e.total}catch(e){}finally{this.loading=!1}},handleDelete(e){this.audio.src=e.url,this.audio.pause(),this.audio.play()}},created(){this.audio=new Audio},mounted(){this.getTableData()}},y=b,v=(a("d9b8"),Object(d["a"])(y,m,g,!1,null,"e6acbd44",null)),f=v.exports,w={components:{outboundDetail:p,callDetail:f},data(){return{tabActive:"outboundDetail"}}},C=w,x=(a("de3c"),Object(d["a"])(C,l,r,!1,null,"195fa0f4",null));t["default"]=x.exports},a0e9:function(e,t,a){},b524:function(e,t,a){"use strict";t["a"]={callDetails:{outboundCallQuery:"/plan-svc/api/jx/callDetails/queryCallDetailsList",outboundCallExport:"/plan-svc/api/jx/callDetails/getCallExportDataList",outboundCallCity:"/plan-svc/api/jx/term/getDimCity",outboundCallCounty:"/plan-svc/api/jx/term/getDimCounty",outboundCallGrid:"/plan-svc/api/jx/term/getDimGrid",outboundBusiness:"/plan-svc/api/jx/term/getScenario",outboundPermissions:"/plan-svc/api/jx/term/getUserPermissionConfig",outboundUserPermission:"/plan-svc/api/jx/term/getReportUserPermission"},messageDetails:{messageCallQuery:"/plan-svc/api/jx/callDetails/getCallHttp"},earlyDetails:{warningQuery:"/plan-svc/api/jx/trace/queryTouchTraceList",warningExport:"/plan-svc/api/jx/trace/exportTrace",warningReport:"/plan-svc/api/jx/term/getReportTraceAlarm"},energyDetails:{efficiencyQuery:"/plan-svc/api/jx/energy/queryAlarmEnergyList",efficiencyExport:"/plan-svc/api/jx/energy/exportEnergy",efficiencyReport:"/plan-svc/api/jx/term/getReportEnergyAlarm"},blackList:{blackQuery:"/plan-svc/jx/customizetitle/getCustomizeTitleList",batchImport:"/plan-svc/jx/customizetitle/batchImportCustomizeTitleData",batchDelete:"/plan-svc/jx/customizetitle/deleteCustTitleById"}}},d6d6:function(e,t,a){"use strict";var l=TypeError;e.exports=function(e,t){if(e<t)throw new l("Not enough arguments");return e}},d9b8:function(e,t,a){"use strict";a("fe60")},de3c:function(e,t,a){"use strict";a("a0e9")},edd0:function(e,t,a){"use strict";var l=a("13d2"),r=a("9bf2");e.exports=function(e,t,a){return a.get&&l(a.get,t,{getter:!0}),a.set&&l(a.set,t,{setter:!0}),r.f(e,t,a)}},fe60:function(e,t,a){}}]);