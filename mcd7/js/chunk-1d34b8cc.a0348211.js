(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d34b8cc"],{"0c24":function(e,t,a){"use strict";a("d9df")},"31b1":function(e,t,a){"use strict";const s="/plan-svc/api/action",l="/plan-svc/action",i="/approve-svc/",n="/element-svc/";t["a"]={channel:{queryIopTemplate:s+"/tactics/tacticsCreate/queryIopTemplate",queryTopics:s+"/topic/queryTopics",getTemplateData:i+"jx/cmpApprovalProcessConf/getApproveConfig",getApproveConfig:i+"cmpApprovalProcessConf/getApproveConfig",getNextApprovers:i+"jx/cmpApproveProcessInstance/getNodeApprover",saveChannel:s+"/tactics/tacticsCreate/save",deleteCustom:s+"/custgroup/custGroupManager/deleteCustom",getMoreMyCustom:s+"/custgroup/custGroupManager/getMoreMyCustom",viewCustGroupDetail:s+"/custgroup/custGroupManager/viewCustGroupDetail",queryMmsTemplates:l+"/mmsTemplates/queryMmsTemplates",deleteMmsTemplateLists:l+"/mmsTemplates/createTactics/deleteMmsTemplateLists",updateMmsTemplate:l+"/mmsTemplates/updateMmsTemplate",smsContentBatchDel:s+"/smsTemplates/smsContentBatchDel",smsContentDel:s+"/smsTemplates/smsContentDel",smsContentEdit:s+"/smsTemplates/smsContentEdit",smsContentSaveOrUpdate:s+"/smsTemplates/smsContentSaveOrUpdate",smsTemplateOffline:s+"/smsTemplates/smsTemplateOffline",smsTemplates:s+"/smsTemplates/smsTemplates",smsTemplateSaveOrUpdate:s+"/smsTemplates/smsTemplateSaveOrUpdate",delPlanExclusivity:n+"mcd-plan-exclusivity/delPlanExclusivity",exportPlanExcluTemplate:n+"mcd-plan-exclusivity/exportPlanExcluTemplate",getPlanExclusivityInfo:n+"mcd-plan-exclusivity/getPlanExclusivityInfo",getPlanExclusivityList:n+"mcd-plan-exclusivity/getPlanExclusivityList",queryPlanDefList:n+"mcd-plan-exclusivity/queryPlanDefList",queryPlanExclusivity:n+"mcd-plan-exclusivity/queryPlanExclusivity",saveOrUpdatePlanExclusivity:n+"mcd-plan-exclusivity/saveOrUpdatePlanExclusivity",savePlanExclusivity:n+"mcd-plan-exclusivity/savePlanExclusivity",updatePlanExclusivity:n+"mcd-plan-exclusivity/updatePlanExclusivity",uploadPlanExcluFile:n+"mcd-plan-exclusivity/uploadPlanExcluFile",approveRecord:n+"api/mcdDimMaterialApprove/jx/approveRecord",getMaterialApprover:n+"api/mcdDimMaterialApprove/jx/getMaterialApprover",commitProcess:"/approve-svc/cmpApproveProcessInstance/commitProcess",subMaterialApprove:n+"api/mcdDimMaterialApprove/jx/subMaterialApprove",queryCommunicationUsers:"/plan-svc/api/channelMaterial/jx/queryCommunicationUsers",queryCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/queryCommunicationTask",addCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTask",addCommunicationTaskBatch:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTaskBatch",communicationAppTask:"/approve-svc/jx/cmpApproveProcessInstance/communicationAppTask",queryChannelExecInfo:"/plan-svc/mcd/camp/channelExec/queryChannelExecInfo",queryChannelExecList:"/plan-svc/mcd/camp/channelExec/queryChannelExecList",deleteChannelPrompt:"/plan-svc/mcd/chan/prompt/deleteChannelPrompt",queryChannelPrompt:"/plan-svc/mcd/chan/prompt/queryChannelPrompt",saveOrUpdateChannelPrompt:"/plan-svc/mcd/chan/prompt/saveOrUpdateChannelPrompt",uploaChanPromptFile:"/plan-svc/mcd/chan/prompt/uploaChanPromptFile",chanAndPlanMarketingHistory:"/plan-svc/mcd/marketing/history/chanAndPlanMarketingHistory",custContactNumMarketingHistory:"/plan-svc/mcd/marketing/history/custContactNumMarketingHistory",custSuccessRateMarketingHistory:"/plan-svc/mcd/marketing/history/custSuccessRateMarketingHistory",planMarketingHistory:"/plan-svc/mcd/marketing/history/planMarketingHistory",caculateContactUserNum:"/pec-timing/mcd/user/contact/caculateContactUserNum",caculateOrderUserNum:"/pec-timing/mcd/user/contact/caculateOrderUserNum",queryCampScene:"/plan-svc/api/action/tactics/tacticsCreate/jx/queryCampScene"}}},"981a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"note-content"},[t("el-tabs",{attrs:{type:"card"},model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[t("el-tab-pane",{attrs:{label:"彩信任务模板",name:"MMSTask",lazy:!0}},[t("MMSTask")],1)],1)],1)},l=[],i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"template-wrap-content"},[t("div",{staticClass:"top-edit-part"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"250px"},attrs:{placeholder:"彩信任务编号/彩信任务主题"},model:{value:e.keywords,callback:function(t){e.keywords="string"===typeof t?t.trim():t},expression:"keywords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.keywordsSearch},slot:"suffix"})]),t("div",[t("el-button",{attrs:{type:"primary"},on:{click:e.addNoteTemplate}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",loading:e.multiDeleteLoading},on:{click:e.deleteDates}},[e._v("批量删除")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"template-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id",stripe:"",height:500},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"45"}}),t("el-table-column",{attrs:{label:"序号",type:"index","header-align":"center",align:"center",width:"60"}}),t("el-table-column",{attrs:{prop:"id",label:"彩信任务编号","header-align":"center",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"templateSubject",label:"彩信任务主题","header-align":"center",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"mmsAddress",label:"彩信地址","header-align":"center",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDetail(a.row)}}},[e._v("编辑")]),t("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.query.pageNum,"page-sizes":[10,20,30,40],"page-size":e.query.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1,"destroy-on-close":"","append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"彩信任务编号",prop:"mmsTemplateNum"}},[t("el-input",{attrs:{disabled:!e.addFlag},on:{input:e.toNum},model:{value:e.form.mmsTemplateNum,callback:function(t){e.$set(e.form,"mmsTemplateNum",t)},expression:"form.mmsTemplateNum"}})],1),t("el-form-item",{attrs:{label:"彩信任务主题",prop:"mmsTemplateSubject"}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":"",rows:4},model:{value:e.form.mmsTemplateSubject,callback:function(t){e.$set(e.form,"mmsTemplateSubject",t)},expression:"form.mmsTemplateSubject"}})],1),t("el-form-item",{attrs:{label:"彩信地址",prop:"mmsAddress"}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":"",rows:4},model:{value:e.form.mmsAddress,callback:function(t){e.$set(e.form,"mmsAddress",t)},expression:"form.mmsAddress"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:""},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addNote}},[e._v("确定")])],1)],1)],1)},n=[],r=a("0fea"),o=a("31b1"),c={name:"MMStask",data(){return{loading:!1,multiDeleteLoading:!1,keywords:"",query:{keywords:"",pageNum:1,pageSize:10},startPage:!1,total:0,tableData:[],multipleSelection:[],dialogFormVisible:!1,dialogTitle:"",addFlag:!1,form:{id:"",mmsTemplateNum:"",mmsTemplateSubject:"",mmsAddress:""},rules:{mmsTemplateNum:[{required:!0,message:"请输入彩信任务编号",trigger:"blur"}],mmsTemplateSubject:[{required:!0,message:"请输入彩信任务主题",trigger:"blur"}],mmsAddress:[{required:!0,message:"请输入彩信地址",trigger:"blur"}]}}},watch:{dialogFormVisible(e){!e&&(this.addFlag=!1)}},methods:{async getTableData(){try{this.loading=!0,this.startPage&&(this.query.pageNum=1);const{result:e,totalSize:t}=await Object(r["i"])(o["a"].channel.queryMmsTemplates,this.query);this.tableData=e,this.total=t}catch(e){}finally{this.loading=!1,this.startPage=!1}},keywordsSearch(){this.query.pageNum=1,this.query.keywords=this.keywords,this.getTableData()},async deleteDate(e){try{await Object(r["i"])(o["a"].channel.deleteMmsTemplateLists,{id:e}),this.$message({message:"删除成功！",type:"success"}),this.getTableData()}catch(t){}},deleteDates(){0!==this.multipleSelection.length?this.$confirm("您确认要删除所选模板吗?","提示",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{this.multiDeleteLoading=!0;try{await Promise.all(this.multipleSelection.map(e=>Object(r["i"])(o["a"].channel.deleteMmsTemplateLists,{id:e.id}))),this.$message({message:"删除成功！",type:"success"})}catch(e){this.$message({message:"删除失败！",type:"error"})}finally{this.multiDeleteLoading=!1,this.getTableData()}}).catch(()=>!1):this.$message({message:"请选择要删除的数据",type:"warning"})},handleDetail(e){this.form.id=e.id,this.form.mmsTemplateNum=e.id,this.form.mmsTemplateSubject=e.templateSubject,this.form.mmsAddress=e.mmsAddress,this.dialogTitle="编辑彩信模板",this.dialogFormVisible=!0},toNum(e){this.form.mmsTemplateNum=e.replace(/^(0+)|[^\d]+/g,"")},addNoteTemplate(){this.dialogTitle="新增彩信模板",this.form={mmsTemplateNum:"",mmsTemplateSubject:"",mmsAddress:""},this.addFlag=!0,this.dialogFormVisible=!0},addNote(){this.$refs["form"].validate(async e=>{if(e)try{let e=this.addFlag?{...this.form,flag:"add"}:this.form;const t=await Object(r["i"])(o["a"].channel.updateMmsTemplate,e);200==t.status?(this.$message({message:this.addFlag?"新增成功！":"修改成功！",type:"success"}),this.getTableData()):this.$message({message:t.message,type:"error"})}catch(t){return t}finally{this.dialogFormVisible=!1}})},handleDelete(e){this.$confirm("是否删除该模板?","提示",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{try{this.deleteDate(e.id)}catch(t){}}).catch(()=>{})},handleSizeChange(e){this.query.pageNum=1,this.query.pageSize=e,this.getTableData()},handleCurrentChange(e){this.query.pageNum=e,this.getTableData()},handleSelectionChange(e){this.multipleSelection=e}},mounted(){this.getTableData()}},m=c,p=(a("0c24"),a("2877")),u=Object(p["a"])(m,i,n,!1,null,"1e3f1b1c",null),d=u.exports,g={components:{MMSTask:d},data(){return{tabActive:"MMSTask"}}},h=g,y=Object(p["a"])(h,s,l,!1,null,null,null);t["default"]=y.exports},d9df:function(e,t,a){}}]);