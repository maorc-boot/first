(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd411"],{"2ae1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"auto-scenario-management-wrap fe-p-24 fe-m-24 bg"},[t("el-form",{ref:"searchForm",attrs:{model:e.search,"label-position":"right",inline:""}},[t("el-form-item",{attrs:{label:"",prop:"fuzzy"}},[t("el-input",{staticClass:"input-search",attrs:{placeholder:"请输入搜索内容"},model:{value:e.search.fuzzy,callback:function(t){e.$set(e.search,"fuzzy",t)},expression:"search.fuzzy"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.queryList},slot:"suffix"})])],1)],1),t("div",{staticClass:"query"},[t("QueryFormCell",{attrs:{labelWidth:e.labelWidth,defaultSizeForm:e.sizeForm,list:e.formList},on:{queryForm:e.queryForm}})],1),t("div",{staticClass:"list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{type:"index",label:"序号"}}),t("el-table-column",{attrs:{prop:"campsegId",label:"策略编号"}}),t("el-table-column",{attrs:{prop:"campsegName",label:"策略名称"}}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[20===a.row.campsegStatId?t("span",[e._v("草稿")]):30===a.row.campsegStatId?t("span",[e._v("已发布")]):40===a.row.campsegStatId?t("span",[e._v("执行中")]):50===a.row.campsegStatId?t("span",[e._v("执行完成")]):e._e()])]}}])}),t("el-table-column",{attrs:{label:"开始时间",prop:"startDate"}}),t("el-table-column",{attrs:{label:"结束时间",prop:"endDate"}}),t("el-table-column",{attrs:{prop:"modelId",label:"业务目标"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.detail(a.row)}}},[e._v("详情")]),20===a.row.campsegStatId?t("span",[t("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.edit(a.row)}}},[e._v("修改")]),t("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.release(a.row.campsegId)}}},[e._v("发布")])],1):t("span",[t("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.quote(a.row.campsegId)}}},[e._v("引用")])],1),t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-warning",iconColor:"#FAAD14",title:"确定删除？","cancel-button-type":"Primary"},on:{confirm:function(t){return e.deletes(a.row)}}},[t("el-link",{staticClass:"cursor-pointer text-sm",attrs:{slot:"reference",type:"primary",underline:!1},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),t("DetailForAutoScenarioManagement",{ref:"DetailForAutoScenarioManagement",attrs:{type:"0"}}),t("AddForAutoScenario",{ref:"AddForAutoScenario",attrs:{type:"0"},on:{submit:e.queryList}})],1)},l=[],s=(a("14d9"),a("0fea")),i=a("d370"),o=a("4e3f"),n=a("1dcf"),c=a("67e4"),u=a("12fc");i["a"].mpapi.findMcdAutoSceneList,i["a"].mpapi.deleteMcdAutoSceneDef;var d={name:"AutoScenarioManagement",components:{QueryFormCell:o["a"],DetailForAutoScenarioManagement:n["a"],AddForAutoScenario:c["a"]},data(){return{loading:!1,search:{fuzzy:""},labelWidth:"80px",sizeForm:{dateModel:[["",""]],radioModel:["","0"]},formList:[{label:"创建时间",values:[{label:"不限",value:""}],isDate:!0,dateType:"daterange"},{label:"策略状态",values:[{label:"全部",value:"0"},{label:"草稿",value:"20"},{label:"已发布",value:"30"},{label:"执行中",value:"40"},{label:"执行完成",value:"50"}],isDate:!1}],tableData:[],currentPage:1,total:0}},created(){this.queryList()},methods:{queryList(){this.loading=!0;let e=null,t=null;this.sizeForm.dateModel[0]&&(e=this.sizeForm.dateModel[0][0].replace(/-/g,"/"),t=this.sizeForm.dateModel[0][1].replace(/-/g,"/"));let a=this.sizeForm.radioModel[1],r={campStatId:a,keywords:this.search.fuzzy,startDate:e,endDate:t,size:this.pageSize,current:this.currentPage,type:"0"};Object(s["i"])(u["a"].mpapi.findMcdAutoSceneList,r).then(e=>{this.loading=!1;let{records:t,total:a}=e;this.tableData=t,this.total=a})},queryForm(e){let{form:t}=e;this.sizeForm.dateModel[0]=t.dateModel[0],this.queryList()},detail(e){this.$refs.DetailForAutoScenarioManagement.init(e),this.$refs.DetailForAutoScenarioManagement.dialogFormVisible=!0},edit(e){this.$refs.AddForAutoScenario.edit(e),this.$refs.AddForAutoScenario.dialogFormVisible=!0},release(e){Object(s["i"])(u["a"].mpapi.updateMcdAutoSceneDefStatId,{campsegId:e,campsegStatId:"30",type:"0"}).then(e=>{this.$message.success("发布成功"),this.queryList()})},quote(e){Object(s["i"])(u["a"].mpapi.quoteMcdAutoModel,{campsegId:e,type:"0"}).then(e=>{this.$message.success("引用成功"),this.queryList(),this.$router.push({name:"AutoScenarioTemplate"})})},deletes(e){let t=e.campsegId,a={campsegId:t,type:"0"};Object(s["i"])(u["a"].mpapi.deleteMcdAutoSceneDef,a).then(()=>{this.$message.success("删除成功"),this.queryList()})},handleCurrentChange(e){this.currentPage=e,this.queryList()}}},p=d,m=a("2877"),h=Object(m["a"])(p,r,l,!1,null,null,null);t["default"]=h.exports}}]);