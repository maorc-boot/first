(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230ab3"],{eced:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ChannelCustomize})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getDataList})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getNewDataList})),__webpack_require__.d(__webpack_exports__,"c",(function(){return QueryNodeData})),__webpack_require__.d(__webpack_exports__,"d",(function(){return TransformArray})),__webpack_require__.d(__webpack_exports__,"e",(function(){return TransformNewArray})),__webpack_require__.d(__webpack_exports__,"b",(function(){return NodeDataConversion})),__webpack_require__.d(__webpack_exports__,"k",(function(){return nodeDataTransformationJson})),__webpack_require__.d(__webpack_exports__,"f",(function(){return activityGroup})),__webpack_require__.d(__webpack_exports__,"g",(function(){return dataSorting})),__webpack_require__.d(__webpack_exports__,"l",(function(){return transformationData})),__webpack_require__.d(__webpack_exports__,"h",(function(){return fnUpdateActiveNodeList}));var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ec26"),getUId=()=>Object(uuid__WEBPACK_IMPORTED_MODULE_1__["a"])().split("-")[0];const data=[{id:1,label:"选产品",className:"product",content:"",assembly:"productDialog"},{id:2,label:"选客户",className:"content",content:"",assembly:"customerDialog"},{id:3,label:"选渠道",className:"channel",content:"",assembly:"channelDialog"},{id:8,label:"客户分箱",className:"Subbox",content:"",assembly:""},{id:5,label:"多波次",className:"Wellen",content:"",assembly:"multiwaveDdialog"}],ChannelCustomize=(e,n)=>{var a,l,t,c,o,u,r,m,x,E,v,i,s,f;let h=JSON.parse(JSON.stringify(n)),y=["901","801"];y.includes(e)&&(e="901");let d=!1;switch(e){case"901":return[{value:"推荐用语",key:h.execContent},{value:"标准化素材ID",key:h.channelExtConf.columnExt20},{value:"实时场景ID",key:h.cepEventId},{value:"实时场景名称",key:h.cepSceneName},{value:"取消推荐规则设置",key:"1"==h.channelExtConf.columnExt3?"是":"0"==h.channelExtConf.columnExt3?"否":""},{value:"取消推荐时间",key:h.channelExtConf.columnExt4?h.channelExtConf.columnExt4+"天":""},{value:"执行端口",key:h.channelExtConf.columnExt2},{value:"发送周期",key:h.updateCycleName},{value:"频次控制",key:`${(null===(a=h.frequency)||void 0===a?void 0:a.split("_")[1])||"-"}次 / ${(null===(l=h.frequency)||void 0===l?void 0:l.split("_")[0])||"-"}天`}];case"906":try{d=h.channelExtConf.columnExt19&&h.execContent.includes("</header>")}catch{d=!1}return[{value:"场景",key:h.channelExtConf.columnExt6},{value:"营销用语",key:d?"":h.execContent,isHtml:d}];case"960":let e=new Map([["-1","无回落"],["0","文本回落"],["1","视频回落"],["2","短小2.0回落"]]),n=e.get(null===(t=h.channelExtConf.columnExt9)||void 0===t?void 0:t.toString())||"-",y=new Map([["1","静态"],["2","主动动态"],["3","交互动态"],["4","空白"]]);const k="https://rcs.10086.cn/5g-csp/csp-manage";let _=h.channelExtConf.columnExt7,p=y.get(null===(c=h.channelExtConf.columnExt8)||void 0===c?void 0:c.toString())||"-";return[{value:"应用号",key:h.channelExtConf.columnExt2},{value:"模板编号",key:h.channelExtConf.columnExt5},{value:"模板名称",key:h.channelExtConf.columnExt6},{value:"模板类型",key:p},{value:"模板内容",key:_.startsWith(k)?"":_,imgUrl:!!_.startsWith(k)&&_,directShow:!0},{value:"标准化素材ID",key:h.channelExtConf.columnExt20},{value:"回落类型",key:n},{value:"事件场景ID",key:h.cepEventId},{value:"复杂事件场景",key:h.cepSceneName},{value:"取消推荐规则设置",key:"1"==h.channelExtConf.columnExt3?"是":"0"==h.channelExtConf.columnExt3?"否":""},{value:"取消推荐时间",key:h.channelExtConf.columnExt4?h.channelExtConf.columnExt4+"天":""},{value:"发送周期",key:h.updateCycleName},{value:"频次控制",key:`${(null===(o=h.frequency)||void 0===o?void 0:o.split("_")[1])||"-"}次 / ${(null===(u=h.frequency)||void 0===u?void 0:u.split("_")[0])||"-"}天`}];case"964":const C=new Map([["0","常量"],["1","个性变量"],["2","通用变量"]]),N=JSON.parse(h.channelExtConf.columnExt8||"[]"),b=N.map(e=>e.varName).join("，");return[{value:"应用号ID",key:h.channelExtConf.columnExt5},{value:"模板ID",key:h.channelExtConf.columnExt6},{value:"发送参数类型",key:C.get(h.channelExtConf.columnExt7+"")},{value:"变量",key:b},{value:"事件场景ID",key:h.cepEventId},{value:"实时事件场景",key:h.cepSceneName},{value:"取消推荐规则设置",key:"1"==h.channelExtConf.columnExt3?"是":"0"==h.channelExtConf.columnExt3?"否":""},{value:"取消推荐时间",key:h.channelExtConf.columnExt4?h.channelExtConf.columnExt4+"天":""},{value:"发送周期",key:h.updateCycleName},{value:"频次控制",key:`${(null===(r=h.frequency)||void 0===r?void 0:r.split("_")[1])||"-"}次 / ${(null===(m=h.frequency)||void 0===m?void 0:m.split("_")[0])||"-"}天`}];case"932":return[{value:"彩信任务主题",key:h.channelExtConf.columnExt5},{value:"彩信地址",key:h.channelExtConf.columnExt6},{value:"彩信任务编码",key:h.channelExtConf.columnExt2},{value:"标准化素材ID",key:h.channelExtConf.columnExt20},{value:"事件场景ID",key:h.cepEventId},{value:"实时事件场景",key:h.cepSceneName},{value:"取消推荐规则设置",key:"1"==h.channelExtConf.columnExt3?"是":"0"==h.channelExtConf.columnExt3?"否":""},{value:"取消推荐时间",key:h.channelExtConf.columnExt4?h.channelExtConf.columnExt4+"天":""},{value:"发送周期",key:h.updateCycleName},{value:"频次控制",key:`${(null===(x=h.frequency)||void 0===x?void 0:x.split("_")[1])||"-"}次 / ${(null===(E=h.frequency)||void 0===E?void 0:E.split("_")[0])||"-"}天`}];case"957":return[{value:"营销话术",key:h.channelExtConf.columnExt2},{value:"IVR营销音",key:h.channelExtConf.columnExt5},{value:"标准化素材ID",key:h.channelExtConf.columnExt20},{value:"项目层级二",key:h.channelExtConf.columnExt8},{value:"项目层级三",key:h.channelExtConf.columnExt9},{value:"营销（服务）目标客群提取规则",key:h.channelExtConf.columnExt10},{value:"任务描述及要求",key:h.channelExtConf.columnExt11},{value:"事件场景ID",key:h.cepEventId},{value:"实时事件场景",key:h.cepSceneName},{value:"取消推荐规则设置",key:"1"==h.channelExtConf.columnExt3?"是":"0"==h.channelExtConf.columnExt3?"否":""},{value:"取消推荐时间",key:h.channelExtConf.columnExt4?h.channelExtConf.columnExt4+"天":""},{value:"发送周期",key:h.updateCycleName},{value:"频次控制",key:`${(null===(v=h.frequency)||void 0===v?void 0:v.split("_")[1])||"-"}次 / ${(null===(i=h.frequency)||void 0===i?void 0:i.split("_")[0])||"-"}天`}];case"958":return[{value:"营销话术",key:h.channelExtConf.columnExt2},{value:"消息模板标号前缀",key:h.channelExtConf.columnExt5},{value:"实时事件类型",key:h.channelExtConf.columnExt6},{value:"标准化素材ID",key:h.channelExtConf.columnExt20},{value:"事件场景ID",key:h.cepEventId},{value:"实时事件场景",key:h.cepSceneName},{value:"取消推荐规则设置",key:"1"==h.channelExtConf.columnExt3?"是":"0"==h.channelExtConf.columnExt3?"否":""},{value:"取消推荐时间",key:h.channelExtConf.columnExt4?h.channelExtConf.columnExt4+"天":""},{value:"发送周期",key:h.updateCycleName},{value:"频次控制",key:`${(null===(s=h.frequency)||void 0===s?void 0:s.split("_")[1])||"-"}次 / ${(null===(f=h.frequency)||void 0===f?void 0:f.split("_")[0])||"-"}天`}];case"804":try{d=h.channelExtConf.columnExt19&&h.channelExtConf.columnExt2.includes("</header>")}catch{d=!1}return[{value:"营销用语",key:d?"":h.channelExtConf.columnExt2,isHtml:d},{value:"短信模板",key:h.channelExtConf.columnExt5},{value:"客群规则表述",key:h.channelExtConf.columnExt3},{value:"活动政策",key:h.channelExtConf.columnExt4}];case"924":return[{value:"营销用语",key:h.execContent},{value:"需求类型",key:"1"==h.channelExtConf.columnExt2?"业务办理":"2"==h.channelExtConf.columnExt2?"活动宣传":""},{value:"客服文档",key:"",fileUrl:h.channelExtConf.columnExt3},{value:"图片",key:"",imgUrl:h.channelExtConf.columnExt4},{value:"宣传文案",key:h.channelExtConf.columnExt7},{value:"链接",key:h.channelExtConf.columnExt6},{value:"承载渠道",key:h.channelExtConf.columnExt8},{value:"活动主题",key:h.channelExtConf.columnExt9},{value:"目标用户提取口径",key:h.channelExtConf.columnExt10},{value:"备注",key:h.channelExtConf.columnExt11}];case"811":return[{value:"营销用语",key:h.channelExtConf.columnExt2},{value:"项目层级二",key:h.channelExtConf.columnExt7},{value:"项目层级三",key:h.channelExtConf.columnExt8},{value:"营销（服务）目标客群提取规则",key:h.channelExtConf.columnExt9},{value:"外呼需求附件",key:"",fileUrl:h.channelExtConf.columnExt10},{value:"任务描述及要求",key:h.channelExtConf.columnExt11},{value:"标签属性（推送至触点标签属性）",key:h.channelExtConf.columnExt12},{value:"主任务类型",key:h.channelExtConf.columnExt14},{value:"事件场景ID",key:h.cepEventId},{value:"实时事件场景",key:h.cepSceneName},{value:"取消推荐规则设置",key:"1"==h.channelExtConf.columnExt3?"是":"0"==h.channelExtConf.columnExt3?"否":""},{value:"取消推荐时间",key:h.channelExtConf.columnExt4?h.channelExtConf.columnExt4+"天":""}];case"802":return[{value:"营销用语",key:h.channelExtConf.columnExt2},{value:"外呼类型",key:h.channelExtConf.columnExt3},{value:"地市",key:h.channelExtConf.columnExt9||"全部"},{value:"营销(服务)目标客户及提取原则",key:h.channelExtConf.columnExt4},{value:"任务描述及要求",key:h.channelExtConf.columnExt5},{value:"标准化素材ID",key:h.channelExtConf.columnExt20},{value:"外呼需求附件",key:"",fileUrl:h.channelExtConf.columnExt6}];case"809":return[{value:"营销用语",key:h.channelExtConf.columnExt2},{value:"短信内容",key:h.channelExtConf.columnExt3},{value:"任务类型名称",key:h.channelExtConf.columnExt5},{value:"标准化素材ID",key:h.channelExtConf.columnExt20},{value:"重点活动",key:"1"==h.channelExtConf.columnExt6?"是":"否"},{value:"加入抢单",key:"1"==h.channelExtConf.columnExt7?"是":"否"}];case"808":try{d=h.channelExtConf.columnExt19&&h.channelExtConf.columnExt2.includes("</header>")}catch{d=!1}return[{value:"运营类型",key:"1"==h.channelExtConf.columnExt9?"营销":"2"==h.channelExtConf.columnExt9?"预警":""},{value:"营销用语",key:d?"":h.channelExtConf.columnExt2,isHtml:d},{value:"短信内容",key:h.channelExtConf.columnExt5},{value:"任务类型",key:h.channelExtConf.columnExt7},{value:"事件场景ID",key:h.cepEventId},{value:"实时事件场景",key:h.cepSceneName},{value:"取消推荐规则设置",key:"1"==h.channelExtConf.columnExt3?"是":"0"==h.channelExtConf.columnExt3?"否":""},{value:"取消推荐时间",key:h.channelExtConf.columnExt4?h.channelExtConf.columnExt4+"天":""}];case"926":return[{value:"发现栏目-活动标题",key:h.channelExtConf.columnExt2},{value:"发现栏目-活动链接",key:h.channelExtConf.columnExt3},{value:"发现栏目-活动图片",key:"",imgUrl:h.channelExtConf.columnExt11},{value:"金钱币摇钱盒-活动标题",key:h.channelExtConf.columnExt5},{value:"金钱币摇钱盒-活动内容",key:h.channelExtConf.columnExt6},{value:"金钱币摇钱盒-活动链接",key:h.channelExtConf.columnExt7},{value:"消息推送-活动标题",key:h.channelExtConf.columnExt8},{value:"消息推送-活动内容",key:h.channelExtConf.columnExt9},{value:"消息推送-活动链接",key:h.channelExtConf.columnExt10}];case"968":return[{value:"素材ID",key:h.channelExtConf.columnExt2},{value:"素材名称",key:h.channelExtConf.columnExt3},{value:"素材信息",key:"",imgUrl:h.channelExtConf.columnExt4},{value:"链接",key:h.channelExtConf.columnExt6},{value:"描述",key:h.channelExtConf.columnExt5}];case"970":return[{value:"营销用语",key:h.execContent}];case"933":let w={};try{w=JSON.parse(h.channelExtConf.columnExt16)}catch{w={}}return[{value:"物料名称",key:h.channelExtConf.columnExt5},{value:"URL链接",key:h.channelExtConf.columnExt6},{value:"产品价格",key:h.channelExtConf.columnExt3},{value:"营销用语",key:w.columnExt1},{value:"素材ID",key:w.columnExt4},{value:"素材类别",key:w.columnExt10},{value:"素材信息",key:"",imgUrl:w.columnExt6||!1,directShow:!0},{value:"活动停止方式",key:1==w.columnExt11?"超过时间停止发送":"活动停止时间"},{value:"延后时间",key:w.columnExt12?w.columnExt12+"分钟":""},{value:"事件场景ID",key:h.cepEventId},{value:"实时事件场景",key:h.cepSceneName},{value:"取消推荐规则设置",key:"1"==w.columnExt2?"是":"0"==w.columnExt2?"否":""},{value:"取消推荐时间",key:w.columnExt2?w.columnExt3+"天":""}];case"916":return[{value:"营销用语",key:h.execContent},{value:"素材名称",key:h.channelExtConf.columnExt3}];case"917":return[{value:"营销用语",key:h.execContent},{value:"素材名称",key:h.channelExtConf.columnExt3}];case"919":return[{value:"营销用语",key:h.execContent},{value:"素材名称",key:h.channelExtConf.columnExt3}];case"920":return[{value:"营销用语",key:h.execContent},{value:"素材名称",key:h.channelExtConf.columnExt3}];default:return[{value:"营销用语",key:h.execContent}]}};function getDataList(e){var n={};return e.map(e=>{data.forEach(a=>{a.id===Math.floor(e)&&(n={...a,id:getUId(),cId:e+""})})}),n}function getNewDataList(e,n="",a=[],l=[]){return e.map((e,t)=>{let c=[];e.group.map(e=>{data.forEach(o=>{o.id===Math.floor(e)&&c.push({...o,wavePid:n,wavesRule:a[t],wavesDesc:l[t],id:getUId(),cId:e+""})})}),e.group=c,0===e.children.length&&null===e.children||getNewDataList(e.children,n,a,l)}),e}function ChangeArray(character){var newCharacter=eval("("+character+")");return newCharacter=newCharacter.map(e=>e.sort()),newCharacter}function QueryNodeData(e,n){return!1}function TransformArray(e){let n=[];return n=e.map(e=>e.map(e=>({id:e.id,cId:e.cId,assembly:e.assembly,NodeObj:[]}))),n}function TransformNewArray(e){var n=[];return e.map(e=>{var a=[];e.group.map(e=>{a.push({id:e.id,cId:e.cId,assembly:e.assembly,NodeObj:[]})}),n.push(a),0===e.children.length&&null===e.children||(n=[...n,...TransformNewArray(e.children)])}),n}function demandTransformNewArray(e){var n=[];return e.map(e=>{n.push({id:e.id,cId:e.cId,assembly:e.assembly,NodeObj:[]})}),n}function NodeDataConversion(e,n,a=null,l=null){var t={},c=null!==l?l.split(","):[null],o=[],u=[];return e.map((e,l)=>{if(o.push(demandTransformNewArray(e.group)),e.group.map((e,u)=>{n.map(r=>{var m,x,E;if(r.channels[0].channelConf.wavesChannelPid===a&&c[l]===r.channels[0].channelConf.wavesRuleId||1===n.length)switch(e.assembly){case"productDialog":e.content=fnUpdateActiveNodeList(processName(r.product.filter(e=>"product"===e.flag),"planName")),e.mutual=fnUpdateActiveNodeList(processName(r.product.filter(e=>"mutual"===e.flag),"planName")),e.homologous=fnUpdateActiveNodeList(processName(r.product.filter(e=>"homologous"===e.flag),"planName")),e.fuse=fnUpdateActiveNodeList(processName(r.product.filter(e=>"fuse"===e.flag),"planName")),o[l][u].NodeObj=r.product;break;case"customerDialog":e.content=fnUpdateActiveNodeList(processName(r.customer,"customGroupName")),o[l][u].NodeObj=r.customer;break;case"channelDialog":e.content=fnUpdateActiveNodeList(processName(r.channels,"channelName")),o[l][u].NodeObj=r.channels,t=r.channels[0];break;case"multiwaveDdialog":var v=(null===(m=r.channels[0].channelConf.wavesNo)||void 0===m?void 0:m.split(","))||[],i=(null===(x=r.channels[0].channelConf.wavesNoDesc)||void 0===x?void 0:x.split(","))||[],s=[];v.map((e,n)=>{s.push({waveNo:e.split("_")[0],waveRuleExp:e.split("_")[1],label:i[n]})}),i=i.map((e,n)=>{var a;return e.replace("N",null===(a=s[n])||void 0===a?void 0:a.waveRuleExp)}),e.wavePid=t.channelId+"-"+((null===(E=t.adivInfo)||void 0===E?void 0:E.adivId)||t.channelId+"1"),e.content=fnUpdateActiveNodeList(i),o[l][u].NodeObj=s;break}})}),0!==e.children.length&&null!==e.children){let a=JSON.parse(JSON.stringify(n));a.shift();let l=a.map(e=>e.channels[0].channelConf.wavesRuleId),c=l.join(",");u=NodeDataConversion(e.children,n,t.channelId+"-"+t.adivInfo.adivId,c)}}),[...o,...u]}function processName(e,n){return e.map(e=>e[n])}function nodeDataTransformationJson(e){var n=[];for(let a=0;a<e.length;a++){n[a]={};for(let l=0;l<e[a].length;l++)switch(e[a][l].assembly){case"productDialog":n[a].product=e[a][l].NodeObj;break;case"customerDialog":n[a].customer=e[a][l].NodeObj;break;case"channelDialog":n[a].channels=e[a][l].NodeObj;break;case"multiwaveDdialog":n[a].multiwave=e[a][l].NodeObj;break}}return n}function activityGroup(e){var n=groupBy(e.campSchemes,e=>e.campGroup),a=[];return Object.keys(n).forEach(e=>{var l={baseCampInfo:n[e][0].baseCampInfo,campSchemes:n[e]};a.push(l)}),a}function groupBy(e,n){const a={};return e.forEach((function(e){const l=JSON.stringify(n(e));a[l]=a[l]||[],a[l].push(e)})),a}function dataSorting(e){var n=[],a=[];for(const c in e){var l=[],t=[];for(const n in e[c])switch(e[c][n].assembly){case"productDialog":l=e[c][n];break;case"customerDialog":a=e[c][n];break;case"channelDialog":t=e[c][n];break;case"multiwaveDdialog":break}l.NodeObj.map(e=>{a.NodeObj.map(a=>{t.NodeObj.map(l=>{n.push({name:[e.planName,a.customGroupName,l.channelName,l.adivInfo.adivName],data:[e.planId,a.customGroupId,l.channelId,l.adivInfo.adivId],wavePid:l.channelConf.wavesChannelPid,wavesRuleId:l.channelConf.wavesRuleId,checked:!1})})})})}return n}function transformationData(e){var n=e;return n.map(e=>{e.group=e.group.map(e=>e.cId),0!==e.children.length&&null!==e.children&&transformationData(e.children)}),n}function fnUpdateActiveNodeList(e){e=[...new Set(e)];let n="";return e.map((e,a)=>{a<2&&(n+="  "+e)}),n+=e.length>=3?"...":"",n}const ChannelField=[{key:"adivId",name:"短信端口",value:["901","602"]},{key:"adivName",name:"短信类型",value:["901","602"]},{key:"channelName",name:"渠道名称",value:["601","602"]},{key:"adivName",name:"运营位名称",value:["601","610","602"]},{key:"execContent",name:"推荐用语",value:["601","610","901","602"]},{key:"smsContent",name:"短信用语",value:["601","602"]},{key:"extValue1",name:"打标用语",value:["601"]},{key:"materialDisplayUrl",name:"图片地址",value:["601","602"]},{key:"materialClickUrl",name:"图片跳转地址",value:["601","602"]},{key:"cepEventId",name:"复杂事件场景",value:["901"]},{key:"ifHaveVar",name:"流量激发活动",value:["901"],implement:e=>e?"是":"否"},{key:"executeTimeMonth",name:"月执行时间",value:["901"],implement:e=>{if(""===e||null===e)return"";const n=e.split("");for(var a=[],l=0;l<n.length;l++)"1"===n[l]&&a.push(l+1);return a.join(",")}},{key:"executeTimeWeek",name:"周执行时间",value:["901"],implement:e=>{if(""===e||null===e)return"";var n=["一","二","三","四","五","六","日"];const a=e.split("");for(var l=[],t=0;t<a.length;t++)"1"===a[t]&&l.push("星期"+n[t]);return l.join(",")}},{key:"executeTimeDay",name:"天执行时间",value:["901"],implement:e=>{if(""===e||null===e)return"";var n=getTimeList(24,30);n.push("23:30~00:00");const a=e.split("");for(var l=[],t=[],c=[],o=0;o<a.length;o++)"1"===a[o]&&(o<16?t.push(n[o]):o<32?c.push(n[o]):l.push(n[o]));return"凌晨(0点~8点)："+t.join(",")+"白天(8点~16点)："+c.join(",")+" 夜间(16点~24点)："+l.join(",")}},{key:"timeId",name:"时机选择",value:["601","610","901","602"]},{key:"timeDistindes",name:"时机描述",value:["601","610","901","602"]},{key:"updateCycleName",name:"周期性",value:["901","602"]}];function getTimeList(e,n){for(var a=60,l=[],t=[],c=0;c<e;c++){var o="";o=c<10?"0"+c:""+c;for(var u=0;u<a;u++)if(u%n===0){var r=u<10?":0"+u:":"+u;r=o+r,l.length>0&&t.push(l[l.length-1]+"~"+r),l.push(r)}}return t}}}]);