(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30dc17b0"],{"08b6":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"template-wrap-content"},[a("div",{staticClass:"top"},[a("span",{staticClass:"back",on:{click:e.back}},[a("i",{staticClass:"iconfont icongonggongtubiao-fanhui"}),e._v(" 返回 ")]),a("span",{staticClass:"title"},[e._v("标签配置")])]),e.labelTypeList.length>0?[a("div",{staticClass:"content"},e._l(e.labelTypeList,(function(t,l){return a("section",{key:t.MODULE_ID},[a("header",[e._v(e._s(t.MODULENAME))]),a("main",[a("div",{ref:"dragRef"+t.MODULE_ID,refInFor:!0,staticClass:"drag-content",class:{hidden:!t.labelList.length}},e._l(t.labelList,(function(s){return a("div",{key:s.customLabelId,staticClass:"drag-item",attrs:{draggable:"true","data-id":s.customLabelId}},[a("span",{staticClass:"text"},[e._v(e._s(s.customLabelName))]),a("span",{on:{click:function(a){return e.remove(l,s,t.labelList)}}},[a("i",{staticClass:"el-icon-close"})])])})),0),a("div",{staticClass:"add-btn"},[a("el-button",{on:{click:function(a){return e.showDialog(l)}}},[a("i",{staticClass:"el-icon-plus"})])],1)])])})),0),a("footer",[a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.save}},[e._v("保 存")])],1)]:a("div",[e.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"calc(100vh - 180px)"}}):a("el-empty")],1),e.labelTypeList.length?a("LabelList",{attrs:{dialogVisible:e.dialogVisible,labelList:e.labelTypeList[e.currentIndex].labelList},on:{"update:dialogVisible":function(a){e.dialogVisible=a},"update:dialog-visible":function(a){e.dialogVisible=a},add:e.addLabel}}):e._e()],2)},s=[],n=(t("14d9"),t("0fea")),i=t("89ff"),o=t("aa47"),r=function(){var e=this,a=e._self._c;return a("el-dialog",{attrs:{top:"10vh",width:"50%",title:"选择自定义标签",visible:e.dialogVisible,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(a){e.dialogVisible=a}}},[a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"140px","margin-right":"20px"},attrs:{placeholder:"请输入标签名称",clearable:""},model:{value:e.searchParams.customLabelName,callback:function(a){e.$set(e.searchParams,"customLabelName","string"===typeof a?a.trim():a)},expression:"searchParams.customLabelName"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.searchTable}},[e._v("搜索")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","max-height":"350"}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"45"}}),a("el-table-column",{attrs:{prop:"customLabelId",label:"标签编号",align:"center"}}),a("el-table-column",{attrs:{prop:"customLabelName",label:"标签名称",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return e.dialogVisible?[a("el-checkbox",{attrs:{disabled:e.labelList.some(e=>e.customLabelId==t.customLabelId),checked:e.checkedList.some(e=>e.customLabelId==t.customLabelId)},on:{change:function(a){return e.selectLabel(t)}}})]:void 0}}],null,!0)})],1),a("el-pagination",{attrs:{small:"","pageNum-page":e.query.pageNum,"page-sizes":[10,20,30,40],"page-size":e.query.pageSize,"pager-count":5,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){return e.$emit("update:dialogVisible",!1)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)},c=[],p={props:{dialogVisible:{type:Boolean,default:!1},labelList:{type:Array,default:()=>[]}},data(){return{loading:!1,searchParams:{customLabelName:""},query:{pageNum:1,pageSize:10},total:0,tableData:[],checkedList:[]}},watch:{dialogVisible(e){e&&(this.checkedList=JSON.parse(JSON.stringify(this.labelList)),this.tableData.length||this.getTableData(),this.$forceUpdate())}},methods:{searchTable(){this.query={...this.query,...this.searchParams},this.query.pageNum=1,this.getTableData()},async getTableData(){try{this.loading=!0;const{records:e,total:a}=await Object(n["g"])(i["a"].labelConfig.mcdCustomLabelDefGet,this.query);this.tableData=e,this.total=a}catch(e){}finally{this.loading=!1}},handleSizeChange(e){this.query.pageNum=1,this.query.pageSize=e,this.getTableData()},handleCurrentChange(e){this.query.pageNum=e,this.getTableData()},selectLabel(e){const a=this.checkedList.findIndex(a=>a.customLabelId==e.customLabelId);a>-1?this.checkedList.splice(a,1):this.checkedList.push(e)},save(){this.$emit("add",this.checkedList),this.$emit("update:dialogVisible",!1)}}},d=p,m=(t("ce0c"),t("2877")),u=Object(m["a"])(d,r,c,!1,null,"f4853fe2",null),f=u.exports,b={name:"CustomizeLabelConfigAddAndEdit",components:{LabelList:f},data(){return{loading:!1,saveLoading:!1,dialogVisible:!1,labelTypeList:[],currentIndex:0}},mounted(){this.selectSelfDefinedLabelConf()},methods:{initContainer(e){let a=this.$refs[e][0];o["a"].create(a,{animation:300})},async selectSelfDefinedLabelConf(){try{this.loading=!0;const e=await Object(n["g"])(i["a"].labelConfig.selectSelfDefinedLabelConf),a={customerDistributes:"首页-客户分布",careMessages:"关怀短信",majorMarketings:"重点营销",daiweiMessages:"代维短信"};let t=[];for(let l in e){const s=e[l]||[];let n=s.map(e=>({customLabelId:e.customLabelId,customLabelName:e.customLabelName}));t=[...t,{MODULE_ID:l,MODULENAME:a[l],labelList:n}]}this.labelTypeList=t,this.$nextTick(()=>{for(let e=0;e<this.labelTypeList.length;e++)this.initContainer("dragRef"+this.labelTypeList[e].MODULE_ID)})}catch(e){}finally{this.loading=!1}},remove(e,a,t){t.splice(t.indexOf(a),1),this.$set(this.labelTypeList[e],"labelList",t)},showDialog(e){this.currentIndex=e,this.dialogVisible=!0},addLabel(e){this.$set(this.labelTypeList[this.currentIndex],"labelList",e)},async save(){const e={};this.labelTypeList.forEach(a=>{let t=this.$refs["dragRef"+a.MODULE_ID][0].childNodes,l=[];for(let e of t){let a=e.getAttribute("data-id");l.push(a)}e[a.MODULE_ID]=l});try{this.saveLoading=!0;const a=await Object(n["m"])(i["a"].labelConfig.modifySelfDefinedLabelConf,e);this.$message.success(a.message)}catch(a){}finally{this.saveLoading=!1}},back(){this.$router.push("/CustomerCommunication/CustomizeLabelConfigurations")}}},g=b,v=(t("7956"),Object(m["a"])(g,l,s,!1,null,"4f7915c7",null));a["default"]=v.exports},7956:function(e,a,t){"use strict";t("9a6f")},"89ff":function(e,a,t){"use strict";a["a"]={bigSrceenConfig:{queryFrontSecondScreens:"/plan-svc/mcd/front/secondScreen/queryFrontSecondScreens",updateFrontSecondScreens:"/plan-svc/mcd/front/secondScreen/updateFrontSecondScreens"},blackList:{deleBlackList:"/plan-svc/customer/black/list/deleBlackList",downloadImpOrDelBlacklistTemplate:"/plan-svc/customer/black/list/downloadImpOrDelBlacklistTemplate",impOrDelBlacklistFile:"/plan-svc/customer/black/list/impOrDelBlacklistFile",queryBlackList:"/plan-svc/customer/black/list/queryBlackList",queryAllCitys:"/plan-svc/customer/black/list/queryAllCitys",createOrUpdate:"/plan-svc/mcd-hmh5-blacklist-task/createOrUpdate",delete:"/plan-svc/mcd-hmh5-blacklist-task/delete",listTask:"/plan-svc/mcd-hmh5-blacklist-task/listTask",getTaskDetailByTaskId:"/plan-svc/mcd-hmh5-blacklist-task/getTaskDetailByTaskId",submitBlacklist:"/plan-svc/mcd-hmh5-blacklist-task/submitBlacklist",getBlacklistApprover:"/plan-svc/mcd-hmh5-blacklist-task/getBlacklistApprover",approveBlacklistRecord:"/plan-svc/mcd-hmh5-blacklist-task/approveBlacklistRecord"},careRelation:{queryChannelByCityAndCounty:"/plan-svc/mcd/front/guardList/queryChannelByCityAndCounty",exportGuardUserList:"/plan-svc/mcd/front/guardList/exportGuardUserList",queryGuardUserList:"/plan-svc/mcd/front/guardList/queryGuardUserList"},messageTemplate:{approveSmsTemplateRecord:"/plan-svc/sms/template/approveSmsTemplateRecord",delCareSmsTemplate:"/plan-svc/sms/template/delCareSmsTemplate",deleteTemplateLabel:"/plan-svc/sms/template/deleteTemplateLabel",getCareSmsTemplate:"/plan-svc/sms/template/getCareSmsTemplate",getCareSmsTemplateApprover:"/plan-svc/sms/template/getCareSmsTemplateApprover",getCareSmsTemplateDetail:"/plan-svc/sms/template/getCareSmsTemplateDetail",getCustGroupVars:"/plan-svc/sms/template/getCustGroupVars",getLabelListDaiwei:"/plan-svc/sms/template/getLabelListDaiwei",getRelaLabels:"/plan-svc/sms/template/getRelaLabels",saveCareSmsTemplate:"/plan-svc/sms/template/saveCareSmsTemplate",saveOrUpdateRela:"/plan-svc/sms/template/saveOrUpdateRela",subCareSmsTemplateApprove:"/plan-svc/sms/template/subCareSmsTemplateApprove"},labelConfig:{mcdCustomLabelDefGet:"/plan-svc/mcdCustomLabelDef",mcdCustomLabelDefPut:"/plan-svc/mcdCustomLabelDef",commitProcess:"/plan-svc/mcdCustomLabelDef/commitProcess",getNodeApprover:"/plan-svc/mcdCustomLabelDef/getNodeApprover",modifySelfDefinedLabelConf:"/plan-svc/mcdCustomLabelDef/modifySelfDefinedLabelConf",selectSelfDefinedLabelConf:"/plan-svc/mcdCustomLabelDef/selectSelfDefinedLabelConf",selectSelfDefinedLabelConfDetail:"/plan-svc/mcdCustomLabelDef/selectSelfDefinedLabelConfDetail",mcdCustomLabelDef:"/plan-svc/mcdCustomLabelDef"},warningConfig:{mcdAppAlarmInfoGet:"/plan-svc/mcdAppAlarmInfo",mcdAppAlarmInfoPost:"/plan-svc/mcdAppAlarmInfo",mcdAppAlarmInfoPut:"/plan-svc/mcdAppAlarmInfo",mcdAppAlarmInfoDelete:"/plan-svc/mcdAppAlarmInfo",batchImportAutoClearAlarm:"/plan-svc/mcdAppAlarmInfo/batchImportAutoClearAlarm",commitProcess:"/plan-svc/mcdAppAlarmInfo/commitProcess",getNodeApprover:"/plan-svc/mcdAppAlarmInfo/getNodeApprover",queryDataSourceList:"/plan-svc/mcdAppAlarmInfo/queryDataSourceList",queryDataTableList:"/plan-svc/mcdAppAlarmInfo/queryDataTableList",querySourceTable:"/plan-svc/mcdAppAlarmInfo/querySourceTable",selectAlarmDetailById:"/plan-svc/mcdAppAlarmInfo/selectAlarmDetailById",selectAlarmType:"/plan-svc/mcdAppAlarmInfo/selectAlarmType",terminateAlarm:"/plan-svc/mcdAppAlarmInfo/terminateAlarm",queryHasRole:"/plan-svc/mcdAppAlarmInfo/queryHasRole",updateAlarmThreshold:"/plan-svc/mcdAppAlarmInfo/updateAlarmThreshold",queryAllCitys:"/plan-svc/mcdAppAlarmInfo/queryAllCitys"},customerCommunicationUseCondition:{exportCampsegHandleDetail:"/plan-svc/action/jx/onlinelChannel/exportCampsegHandleDetail",exportCampsegHandleSummary:"/plan-svc/action/jx/onlinelChannel/exportCampsegHandleSummary",exportChannelUsageList:"/plan-svc/action/jx/onlinelChannel/exportChannelUsageList",exportCityUsageList:"/plan-svc/action/jx/onlinelChannel/exportCityUsageList",exportCountyUsageList:"/plan-svc/action/jx/onlinelChannel/exportCountyUsageList",exportGridUsageList:"/plan-svc/action/jx/onlinelChannel/exportGridUsageList",exportOppoCampCityHandle:"/plan-svc/action/jx/onlinelChannel/exportOppoCampCityHandle",queryCampsegHandleDetail:"/plan-svc/action/jx/onlinelChannel/queryCampsegHandleDetail",queryCampsegHandleSummary:"/plan-svc/action/jx/onlinelChannel/queryCampsegHandleSummary",queryChannelUsageList:"/plan-svc/action/jx/onlinelChannel/queryChannelUsageList",queryCityUsageList:"/plan-svc/action/jx/onlinelChannel/queryCityUsageList",queryCountyUsageList:"/plan-svc/action/jx/onlinelChannel/queryCountyUsageList",queryGridUsageList:"/plan-svc/action/jx/onlinelChannel/queryGridUsageList",queryOppoCampCityHandle:"/plan-svc/action/jx/onlinelChannel/queryOppoCampCityHandle"},customerContactMaintainCondition:{reportSmsMessage:"/plan-svc/reportSmsMessage",export:"/plan-svc/reportSmsMessage/export"},customerCommunicationWarningCondition:{reportYjCityDetailNew:"/plan-svc/reportYjCityDetailNew",reportYjCityDetailNewExport:"/plan-svc/reportYjCityDetailNew/export",reportYjCountyDetailNew:"/plan-svc/reportYjCountyDetailNew",reportYjCountyDetailNewExport:"/plan-svc/reportYjCountyDetailNew/export",reportYjDetailInfo:"/plan-svc/reportYjDetailInfo",reportYjDetailInfoExport:"/plan-svc/reportYjDetailInfo/export",reportYjGridDetailNew:"/plan-svc/reportYjGridDetailNew",reportYjGridDetailNewExport:"/plan-svc/reportYjGridDetailNew/export",reportYjStaffDetailNew:"/plan-svc/reportYjStaffDetailNew",reportYjStaffDetailNewExport:"/plan-svc/reportYjStaffDetailNew/export"},jobNoQuery:{queryFrontStafferList:"/plan-svc/mcd/front/staffer/queryFrontStafferList"},problemFeedback:{addNewReply:"/plan-svc/mcdFeedbackQa/addNewReply",addNewReplyPicture:"/plan-svc/mcdFeedbackQa/addNewReplyPicture",downloadImage:"/plan-svc/mcdFeedbackQa/downloadImage",getAllRepliesByBusinessId:"/plan-svc/mcdFeedbackQa/getAllRepliesByBusinessId",getRecentlyReplyFeedback:"/plan-svc/mcdFeedbackQa/getRecentlyReplyFeedback",mcdManagerFeedback:"/plan-svc/mcdManagerFeedback"},proxyCustomerLabel:{mcdFrontCareSmsLabelGet:"/plan-svc/mcdFrontCareSmsLabel",mcdFrontCareSmsLabelPost:"/plan-svc/mcdFrontCareSmsLabel",mcdFrontCareSmsLabelPut:"/plan-svc/mcdFrontCareSmsLabel",mcdFrontCareSmsLabelDelete:"/plan-svc/mcdFrontCareSmsLabel"},noticeBoard:{mcdBulletinBoardGet:"/plan-svc/mcdBulletinBoard",mcdBulletinBoardPost:"/plan-svc/mcdBulletinBoard",mcdBulletinBoardPut:"/plan-svc/mcdBulletinBoard",mcdBulletinBoardDelete:"/plan-svc/mcdBulletinBoard",deleteImage:"/plan-svc/mcdBulletinBoard/deleteImage",downloadImage:"/plan-svc/mcdBulletinBoard/downloadImage",modifyBulletinStatus:"/plan-svc/mcdBulletinBoard/modifyBulletinStatus",uploadBulletinPictures:"/plan-svc/mcdBulletinBoard/uploadBulletinPictures"},mainPackageConfig:{queryFrontMainOffers:"/plan-svc/mcd/front/mainOfferInfo/queryFrontMainOffers",deleteMainOfferInfo:"/plan-svc/mcd/front/mainOfferInfo/deleteMainOfferInfo",getMainOfferInfoDetail:"/plan-svc/mcd/front/mainOfferInfo/getMainOfferInfoDetail",saveOrUpdateMainOffer:"/plan-svc/mcd/front/mainOfferInfo/saveOrUpdateMainOffer",updateMainOfferInfoStatus:"/plan-svc/mcd/front/mainOfferInfo/updateMainOfferInfoStatus"},keyMonitoring:{queryFrontKeyMonitors:"/plan-svc/mcd/front/keyMonitor/queryFrontKeyMonitors"}}},"9a6f":function(e,a,t){},ce0c:function(e,a,t){"use strict";t("f7a0")},f7a0:function(e,a,t){}}]);