(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3839fbc3"],{"08cc":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mailTable-layer",class:t.showByRow?"fs12":""},[e("div",{staticClass:"mailTable",style:t.styleObject},t._l(t.rowCount,(function(s,i){return e("el-row",{key:i},[t.isAarray(s)?e("el-row",{staticClass:"ArrayMailTable"},t._l(s,(function(s,i){return e("el-col",{key:i,staticClass:"ArrayMailTable-row",attrs:{span:12}},[e("el-col",{staticClass:"key",attrs:{span:8}},[t._v(t._s(s.key))]),e("el-col",{staticClass:"value",attrs:{span:16}},[t._v(t._s(t.DetailsFrom[s.value]))])],1)})),1):e("el-row",[e("el-col",{staticClass:"ArrayMailTable",attrs:{span:24}},[e("el-col",{staticClass:"key",attrs:{span:4}},[t._v(t._s(s.key))]),e("el-col",{staticClass:"value1",attrs:{span:20}},[t._v(t._s(t.DetailsFrom[s.value]))])],1)],1)],1)})),1)])},a=[],o=(s("14d9"),{data(){return{styleObject:{},s_showByRow:!0}},props:["tableData","tableStyle","showByRow","DetailsFrom"],computed:{isAarray:function(){return t=>Array.isArray(t)},rowCount:function(){let t=[],e=[...this.tableData];for(let s=0;s<e.length;s++){let i=[];e[s].iscolspan||(i.push(e[s]),s+1<e.length&&!e[s+1].iscolspan&&(i.push(e[s+1]),s++)),0!==i.length?(i.length<2&&i.push([]),t.push(i)):t.push(e[s])}return t}},created(){this.styleObject=this.tableStyle,void 0!==this.showByRow&&(this.s_showByRow=this.showByRow)}}),l=o,r=(s("5976"),s("2877")),u=Object(r["a"])(l,i,a,!1,null,"2becbdfc",null);e["a"]=u.exports},1173:function(t,e,s){},5976:function(t,e,s){"use strict";s("1173")},"67a1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"customer-layout"},[e("header",[e("div",{staticClass:"search"},[e("el-input",{attrs:{size:"mini",placeholder:"请输入客群名称或ID",clearable:""},model:{value:t.keyWords,callback:function(e){t.keyWords=e},expression:"keyWords"}}),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.searchData}},[t._v("搜索")])],1)]),e("main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t._l(t.customerList,(function(s){return e("div",{key:s.customGroupId,staticClass:"card",class:{active:t.selectCustomer.some(t=>t.customGroupId===s.customGroupId)},on:{click:function(e){return t.select(s)}}},[e("div",{staticClass:"customer-row"},[e("div",{staticClass:"title"},[t._v(t._s(s.customGroupName))]),e("div",{class:[3===s.updateCycle?"type":2===s.updateCycle?"updatetype2":1===s.updateCycle?"updatetype1":"",0==s.updateStatus?"outDate":""]},[t._v(" "+t._s(0==s.updateStatus?"离线":t.typeEumn[Number(s.updateCycle)-1])+" ")])]),e("div",{staticClass:"customer-row"},[e("span",[t._v("客户规模："+t._s(s.customNum)+" ")])]),e("div",{staticClass:"customer-row"},[e("div",[e("span",[t._v("创建人："+t._s(s.createUserName))])]),e("div",{staticClass:"customer-row"},[e("span",{staticStyle:{color:"#409eff"},on:{click:function(e){return e.stopPropagation(),t.viewDetail(s.customGroupId)}}},[t._v("详情>")])])])])})),0===t.customerList.length?e("el-empty"):t._e()],2),e("footer",[e("el-pagination",{attrs:{size:"mini",layout:"sizes, total, prev, pager, next","pager-count":5,"current-page":t.query.currentPage,"page-size":t.query.size,"page-sizes":[4,8,12,20,40],total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("BaseDialog",{attrs:{title:"客群详情",width:"800px","confirm-button-text":"关 闭","show-cancel-button":!1},on:{confirm:function(e){t.visible=!1},close:function(e){t.visible=!1}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.detailLoading,expression:"detailLoading"}],staticStyle:{"min-height":"300px"}},[t.detailLoading?t._e():e("VerticalTable",{attrs:{tableData:t.tableData,DetailsFrom:t.DetailsForm,tableStyle:{width:"100%"}}})],1)])],1)},a=[],o=(s("14d9"),s("0fea")),l=s("d370"),r=s("ea45"),u=s("08cc"),c={components:{BaseDialog:r["a"],VerticalTable:u["a"]},props:{isValidateNotComplete:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},selectList:{type:Array,default:()=>[]},initSize:{type:Number,default:4}},data(){return{loading:!1,source:null,customerGroupSource:0,keyWords:"",query:{isQryNotLimitCust:0,keyWords:"",current:1,size:this.initSize||4},total:0,customerList:[],selectCustomer:[],typeEumn:["一次性","月","日"],visible:!1,detailLoading:!1,tableData:[{key:"客户群编码：",value:"customGroupId"},{key:"客户群名称：",value:"customGroupName"},{key:"客户群描述：",value:"customGroupDesc",iscolspan:!0},{key:"客户群创建人：",value:"createUserId"},{key:"客户群周期：",value:"updateCycle"},{key:"客户群创建时间：",value:"createTime"},{key:"客户群失效日期：",value:"failTime"},{key:"客户群状态：",value:"customStatusId"},{key:"客户群接收日期：",value:"effectiveTime"},{key:"客户群规模：\t",value:"customNum"},{key:"有无带属性：",value:"hasCustomAttrs"},{key:"属性名称：",value:"customAttrs",iscolspan:!0}],DetailsForm:{}}},methods:{searchData(){this.query.keyWords=this.keyWords,this.query.current=1,this.getCustomerList()},handleSizeChange(t){this.query.current=1,this.query.size=t,this.getCustomerList()},handleCurrentChange(t){this.query.current=t,this.getCustomerList()},async getCustomerList(t){this.loading&&this.source&&this.source.cancel("取消请求"),this.source=this.$CancelToken.source();try{this.loading=!0;let t=0==this.customerGroupSource?l["a"].mpapi.getMoreMyCustomNew:l["a"].mpapi.getMoreMyCustomDna;const{records:e,total:s}=await Object(o["i"])(t,this.query,this.source.token,this.$retryDelay);e.forEach(t=>{t.customerNum=t.customNum,t.ruleLoading=!1,t.finalExpression=t.finalExpression||null,1==this.customerGroupSource&&(t.customSourceId="2")}),this.customerList=e,this.total=s,this.loading=!1}catch(s){var e;if(null!==(e=s.message)&&void 0!==e&&e.includes("timeout")&&!0!==t)return this.getCustomerList(!0);this.loading=!1}},async viewDetail(t){this.visible=!0;let e=0==this.customerGroupSource?l["a"].mpapi.viewCustGroupDetailNew:l["a"].mpapi.viewCustGroupDetailDna;this.detailLoading=!0;try{const s=await Object(o["i"])(e,{custgroupId:t});this.detailLoading=!1,this.DetailsForm=s,1==this.custgroupSource&&(this.DetailsForm.updateCycle=0),this.DetailsForm.updateCycle=this.typeEumn[+this.DetailsForm.updateCycle||0],1==this.DetailsForm.customStatusId?this.DetailsForm.customStatusId="有效":this.DetailsForm.customStatusId="无效"}catch(s){this.detailLoading=!1}},select(t){if(0==t.updateStatus)return this.$alert("该客户群处于离线状态，请重新选择！","提示",{confirmButtonText:"确定",customClass:"errorPrompt",callback:()=>{}});if(this.isValidateNotComplete&&null===t.columnNum)return this.$alert("该客户群未同步完成，请重新选择！","提示",{confirmButtonText:"确定",customClass:"errorPrompt",callback:()=>{}});let e;this.selectCustomer.some(e=>e.customGroupId===t.customGroupId)?(e="remove",this.selectCustomer=this.selectCustomer.filter(e=>e.customGroupId!==t.customGroupId)):(e="add",this.multiple?this.selectCustomer.push(t):this.selectCustomer=[t]),this.$emit("select",this.selectCustomer,{type:e,current:t})},clear(){this.selectCustomer=[]}},created(){this.query.size=this.initSize,this.selectCustomer=this.selectList,this.getCustomerList()}},n=c,d=(s("973a"),s("2877")),m=Object(d["a"])(n,i,a,!1,null,"a02fe78c",null);e["default"]=m.exports},"973a":function(t,e,s){"use strict";s("c2f6")},b62e:function(t,e,s){"use strict";s("bb6e")},bb6e:function(t,e,s){},c2f6:function(t,e,s){},ea45:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-dialog",{class:{"title-center":t.titleCenter},attrs:{title:t.title,visible:void 0===t.value?t.visible:t.value,width:t.width,top:t.top,"append-to-body":"","show-close":!1,"close-on-click-modal":!1,"destroy-on-close":t.destroyOnClose},on:{"update:visible":function(e){void 0===t.value?t.visible:t.value=e}}},[e("i",{staticClass:"el-icon-close",on:{click:t.close}}),t._t("default"),e("div",{style:{textAlign:t.footerPosition},attrs:{slot:"footer"},slot:"footer"},[t.showCancelButton?e("el-button",{on:{click:t.close}},[t._v(t._s(t.cancelButtonText))]):t._e(),t._t("footerBtn"),e("el-button",{attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.confirm}},[t._v(t._s(t.confirmButtonText))])],2)],2)},a=[],o={model:{prop:"value",event:"change"},props:{value:{type:void 0|Boolean},visible:{type:void 0|Boolean},titleCenter:{type:Boolean,default:!1},title:{type:String,required:!0},width:{type:String,default:"50%"},top:{type:void 0|String,default:void 0},confirmLoading:{type:Boolean,default:!1},confirmButtonText:{type:String,default:"确 认"},cancelButtonText:{type:String,default:"取 消"},showCancelButton:{type:Boolean,default:!0},footerPosition:{type:String,default:"center"},destroyOnClose:{type:Boolean,default:!0}},methods:{close(){void 0===this.value?this.$emit("close"):this.$emit("change",!1)},confirm(){this.$emit("confirm")}}},l=o,r=(s("b62e"),s("2877")),u=Object(r["a"])(l,i,a,!1,null,"1be2cb38",null);e["a"]=u.exports}}]);