(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bd73b44"],{"108d":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"query-form-cell-wrap"},[t("el-form",{ref:"form",attrs:{model:e.sizeForm,"label-width":e.labelWidth,size:"mini"}},e._l(e.list,(function(a,i){return t("el-form-item",{key:i+"list",attrs:{label:a.label+"："}},[Array.isArray(a.values)?t("div",{staticClass:"fe-d-flex"},[t("div",{staticClass:"radio-box"},[t("el-radio-group",{attrs:{size:"mini",disabled:a.disabled},on:{change:function(t){return e.radioChange(e.sizeForm.radioModel[i],i)}},model:{value:e.sizeForm.radioModel[i],callback:function(t){e.$set(e.sizeForm.radioModel,i,t)},expression:"sizeForm.radioModel[index]"}},e._l(a.values,(function(a,i){return t("el-radio-button",{key:i+"listValues",attrs:{label:a.value}},[e._v(e._s(a.label)+" ")])})),1),a.slot?e._t("default"):e._e()],2),t("div",{staticClass:"date-box"},["date"===a.dateType?t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"month"===a.dateType?t("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM",clearable:!0},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"daterange"===a.dateType?t("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"datetimerange"===a.dateType?t("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e()],1)]):t("div",{staticClass:"input-box"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入内容"},on:{change:e.inputChange},model:{value:e.sizeForm.radioModel[i],callback:function(t){e.$set(e.sizeForm.radioModel,i,t)},expression:"sizeForm.radioModel[index]"}})],1)])})),1)],1)},o=[],s={name:"QueryFormCell",props:{labelWidth:{type:String,default:()=>"85px"},defaultSizeForm:{type:Object,default:()=>({})},list:{type:Array,default:()=>[{label:"数据时间",values:[{label:"不限",value:"1"}],isDate:!0,dateType:"date"},{label:"接口类型",values:[{label:"不限",value:"不限"},{label:"文件接口",value:"文件接口"}],isDate:!1}]}},data(){return{sizeForm:{dateModel:["2021-05-08","",""],radioModel:["自定义","不限","不限"]}}},watch:{defaultSizeForm:{handler:function(e){this.sizeForm=e},deep:!0,immediate:!0}},methods:{radioChange(e,t){this.sizeForm.dateModel&&this.$set(this.sizeForm.dateModel,t,"date"===this.list[t].dateType?"":["",""]),this.$emit("queryForm",{index:t,value:e,form:this.sizeForm})},dateChange(e){e?(this.$set(this.sizeForm.dateModel,0,e),this.$emit("queryForm",{value:e,form:this.sizeForm})):this.$emit("emptyFrom",this.sizeForm)},inputChange(e){e&&this.$emit("queryForm",{value:e,form:this.sizeForm})}}},r=s,l=(a("1808"),a("2877")),c=Object(l["a"])(r,i,o,!1,null,null,null);t["a"]=c.exports},"12fc":function(e,t,a){"use strict";const i="/plan-svc/action",o="/plan-svc/api/action";t["a"]={mpapi:{getSysEnum:i+"/iop/common/getSysEnum",queryIopTemplate:i+"/iop/excellentTemplateManager/queryIopTemplate",exportStandardScene:i+"/iop/excellentTemplateManager/exportStandardScene",saveOrCancelExcellentTemplate:i+"/iop/excellentTemplateManager/saveOrCancelExcellentTemplate",uploadBeforeView:i+"/iop/excellentTemplateManager/uploadBeforeView",uploadTemplateToIop:i+"/iop/excellentTemplateManager/uploadTemplateToIop",updateDistributePersion:i+"/iop/approve/template/updateDistributePersion",queryActivityInfo:"/plan-svc/action/iop/approve/template/jx/queryActivityInfo",getActivityTemplate:i+"/iop/approve/template/getActivityTemplate",queryDistributePersion:i+"/iop/approve/template/queryDistributePersion",dismissAndRelatedCustomerGroups:o+"/tactics/tacticsManager/dismissAndRelatedCustomerGroups",getAllCustommerGroups:o+"/tactics/tacticsManager/getAllCustommerGroups",getUnityCampInfo:o+"/tactics/tacticsManager/getUnityCampInfo",getUnityTacticsDetail:o+"/tactics/tacticsManager/getUnityTacticsDetail",getWholeNetworkCampInfos:o+"/tactics/tacticsManager/getWholeNetworkCampInfos",isPopUps:o+"/tactics/tacticsManager/isPopUps",saveWholeNetwork:o+"/tactics/tacticsManager/saveWholeNetwork",searchUnityTactics:o+"/tactics/tacticsManager/jx/searchUnityTactics",unityRecomendDetail:o+"/tactics/tacticsManager/unityRecomendDetail",findMcdAutoSceneById:i+"/mcdAutoModel/findMcdAutoSceneById",getProduct:i+"/mcdAutoModel/getProduct",deleteMcdAutoSceneDef:i+"/mcdAutoModel/deleteMcdAutoSceneDef",findMcdAutoSceneByTable:i+"/mcdAutoModel/findMcdAutoSceneByTable",findMcdAutoSceneList:i+"/mcdAutoModel/findMcdAutoSceneList",queryChannelAdivList:i+"/mcdAutoModel/queryChannelAdivList",queryProductList:i+"/mcdAutoModel/queryProductList",querySmsChannelCount:i+"/mcdAutoModel/querySmsChannelCount",quoteMcdAutoModel:i+"/mcdAutoModel/quoteMcdAutoModel",saveMcdAutoSceneDef:i+"/mcdAutoModel/saveMcdAutoSceneDef",updateMcdAutoModel:i+"/mcdAutoModel/updateMcdAutoModel",updateMcdAutoSceneDef:i+"/mcdAutoModel/updateMcdAutoSceneDef",updateMcdAutoSceneDefStatId:i+"/mcdAutoModel/updateMcdAutoSceneDefStatId",queryTopics:i+"/topic/queryTopics",tacticsCreateQueryIopTemplate:o+"/tactics/tacticsCreate/queryIopTemplate",quickCreateTacticsByIopTemplate:o+"/tactics/quickTactics/quickCreateTacticsByIopTemplate",qucickApprove:o+"/tactics/quickTactics/qucickApprove"}}},1808:function(e,t,a){"use strict";a("4bb9")},"4bb9":function(e,t,a){},"67e4":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,title:"策略基本信息",visible:e.dialogFormVisible,width:"520px","before-close":e.beforeClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("div",{staticClass:"form-box fe-p-24"},[t("el-form",{ref:"form",attrs:{size:"small",model:e.form,rules:e.rules,"label-width":e.formLabelWidth}},[t("el-form-item",{attrs:{label:"策略名称：",prop:"campsegName"}},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入策略名称"},model:{value:e.form.campsegName,callback:function(t){e.$set(e.form,"campsegName",t)},expression:"form.campsegName"}})],1),t("el-form-item",{attrs:{label:"投放周期：",prop:"dateDate"}},[t("el-date-picker",{attrs:{"value-format":"yyyy/MM/dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.dateDate,callback:function(t){e.$set(e.form,"dateDate",t)},expression:"form.dateDate"}})],1),t("el-form-item",{attrs:{label:"策略描述：",prop:"campsegDesc"}},[t("el-input",{attrs:{placeholder:"请输入策略描述"},model:{value:e.form.campsegDesc,callback:function(t){e.$set(e.form,"campsegDesc",t)},expression:"form.campsegDesc"}})],1),t("el-form-item",{attrs:{label:"专题：",prop:"topicName"}},[t("el-select",{attrs:{placeholder:"请选择专题"},model:{value:e.form.topicName,callback:function(t){e.$set(e.form,"topicName",t)},expression:"form.topicName"}},e._l(e.topicNameList,(function(e,a){return t("el-option",{key:a+"topicName",attrs:{label:e.topicName,value:e.topicId}})})),1)],1),t("el-form-item",{attrs:{label:"营销模板：",prop:"activityName"}},[t("el-select",{attrs:{placeholder:"请选择营销模板"},model:{value:e.form.activityName,callback:function(t){e.$set(e.form,"activityName",t)},expression:"form.activityName"}},e._l(e.activityNameList,(function(e,a){return t("el-option",{key:a+"activityName",attrs:{label:e.activityName,value:e.activityId}})})),1)],1),t("el-form-item",{attrs:{label:"营销类型：",prop:"activityType"}},[t("el-select",{attrs:{placeholder:"请选择营销类型"},model:{value:e.form.activityType,callback:function(t){e.$set(e.form,"activityType",t)},expression:"form.activityType"}},e._l(e.activityTypeList,(function(e,a){return t("el-option",{key:a+"activityType",attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"营销活动目的：",prop:"activityObjective"}},[t("el-select",{attrs:{placeholder:"请选择营销活动目的"},model:{value:e.form.activityObjective,callback:function(t){e.$set(e.form,"activityObjective",t)},expression:"form.activityObjective"}},e._l(e.activityObjectiveList,(function(e,a){return t("el-option",{key:a+"activityObjective",attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"是否生成自动化模板：",prop:"createModel"}},[t("el-radio-group",{model:{value:e.form.createModel,callback:function(t){e.$set(e.form,"createModel",t)},expression:"form.createModel"}},[t("el-radio",{attrs:{label:"0"}},[e._v("是")]),t("el-radio",{attrs:{label:"1"}},[e._v("否")])],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{plain:""},on:{click:e.cancel}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])},o=[],s=(a("14d9"),a("0fea")),r=a("d370"),l=a("5e05"),c=a("12fc");r["a"].mpapi.tacticsCreateQueryIopTemplate,r["a"].mpapi.queryTopics,l["a"].common.getSysEnum,r["a"].mpapi.saveMcdAutoSceneDef;var d={name:"AddForAutoScenario",props:{type:{type:String,required:!1}},data(){return{dialogFormVisible:!1,form:{campsegName:"",dateDate:[],campsegDesc:"",topicName:"",activityName:"",activityType:"",activityObjective:"",createModel:"1"},campsegId:"",topicNameList:[],activityNameList:[],activityTypeList:[],activityObjectiveList:[],formLabelWidth:"160px",rules:{campsegName:[{required:!0,message:"请输入策略名称",trigger:"blur"}],dateDate:[{required:!0,message:"请选择投放周期",trigger:"change"}],campsegDesc:[{required:!0,message:"请输入策略描述",trigger:"blur"}],activityType:[{required:!0,message:"请选择营销类型",trigger:"change"}],activityObjective:[{required:!0,message:"请选择营销活动目的",trigger:"change"}],createModel:[{required:!0,message:"请选择是否创建自动化模板",trigger:"change"}]},modelId:"",dataDate:"",planId:""}},mounted(){},methods:{initData(e,t,a){this.modelId=e,this.dataDate=t,this.planId=a,this.init()},async init(){this.topicNameList=await Object(s["i"])(c["a"].mpapi.queryTopics),this.form.topicName=this.topicNameList[0].topicId,this.activityNameList=await Object(s["i"])(c["a"].mpapi.tacticsCreateQueryIopTemplate),this.activityTypeList=await Object(s["i"])(c["a"].mpapi.getSysEnum,{enumType:"activity_type"}),this.form.activityType=this.activityTypeList[0].enumKey,this.activityObjectiveList=await Object(s["i"])(c["a"].mpapi.getSysEnum,{enumType:"activity_objective"}),this.form.activityObjective=this.activityObjectiveList[0].enumKey},edit(e){this.init(),this.campsegId=e.campsegId,this.form.campsegName=e.campsegName,this.form.dateDate[0]=e.startDate,this.form.dateDate[1]=e.endDate,this.form.campsegDesc=e.campsegDesc,this.form.topicName=e.topicName,this.form.activityName=e.activityName,this.form.activityObjective=e.activityObjective},cancel(){this.reset()},confirm(){this.$refs.form.validate(e=>{if(e)switch(this.type){case"0":{let e={activityObjective:this.form.activityObjective,activityTemplateId:this.form.activityName,activityType:this.form.activityType,campsegDesc:this.form.campsegDesc,campsegId:this.campsegId,campsegName:this.form.campsegName,endDate:this.form.dateDate[1],startDate:this.form.dateDate[0],topicId:this.form.topicName,type:"0"};Object(s["i"])(c["a"].mpapi.updateMcdAutoSceneDef,e).then(e=>{this.$message({message:"修改成功",type:"success"}),this.reset(),this.$emit("submit")});break}case"1":{let e={activityObjective:this.form.activityObjective,activityTemplateId:this.form.activityName,activityType:this.form.activityType,campsegDesc:this.form.campsegDesc,campsegId:this.campsegId,campsegName:this.form.campsegName,endDate:this.form.dateDate[1],startDate:this.form.dateDate[0],topicId:this.form.topicName,type:"1"};Object(s["i"])(c["a"].mpapi.updateMcdAutoSceneDef,e).then(e=>{this.$message({message:"修改成功",type:"success"}),this.reset(),this.$emit("submit")});break}default:{let e={activityObjective:this.form.activityObjective,activityTemplateId:this.form.activityName,activityType:this.form.activityType,createModel:this.form.createModel,campsegDesc:this.form.campsegDesc,campsegName:this.form.campsegName,dataDate:this.dataDate,endDate:this.form.dateDate[1],modelId:this.modelId,planId:this.planId,startDate:this.form.dateDate[0],topicId:this.form.topicName};Object(s["i"])(c["a"].mpapi.saveMcdAutoSceneDef,e).then(()=>{this.$message.success("新增成功"),this.reset(),this.$router.push({name:"AutoScenarioManagement"})});break}}})},beforeClose(e){this.cancel(),e()},reset(){this.dialogFormVisible=!1,this.$refs.form.clearValidate(),this.$refs.form.resetFields()}}},m=d,n=(a("892e"),a("2877")),p=Object(n["a"])(m,i,o,!1,null,"6807d69d",null);t["a"]=p.exports},"892e":function(e,t,a){"use strict";a("db66")},a885:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"auto-scenario-wrap fe-p-24 fe-m-24 bg"},[t("div",{staticClass:"query"},[e._v(" 模型名称： "),t("el-select",{staticClass:"mb-10",attrs:{size:"mini",placeholder:"请选择模型"},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}},e._l(e.modelOptions,(function(e){return t("el-option",{key:e.enumId,attrs:{label:e.enumValue,value:e.enumKey}})})),1),t("QueryFormCell",{attrs:{labelWidth:e.labelWidth,defaultSizeForm:e.sizeForm,list:e.formList},on:{queryForm:e.queryForm}}),t("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:e.searchForm,"label-width":"75px",inline:!1,size:"mini"}},[t("el-form-item",{attrs:{label:"产品："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.product,callback:function(t){e.$set(e.searchForm,"product",t)},expression:"searchForm.product"}},e._l(e.options,(function(e){return t("el-option",{key:e.planId,attrs:{label:e.planName,value:e.planId}})})),1),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:e.queryList}},[e._v("查询")])],1)],1)],1),t("div",{staticClass:"add fe-m-tb-24 text-align-r"},[t("el-button",{attrs:{type:"success",size:"small"},on:{click:e.add}},[e._v("新增")])],1),t("div",{staticClass:"list"},[t("el-table",{attrs:{data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{prop:"phoneNo",label:"号码"}}),t("el-table-column",{attrs:{prop:"planName",label:"产品"}}),t("el-table-column",{attrs:{prop:"channelName",label:"渠道"}}),t("el-table-column",{attrs:{prop:"sendConntent",label:"话术"}})],1)],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),t("AddForAutoScenario",{ref:"AddForAutoScenario"})],1)},o=[],s=a("0fea"),r=a("d370"),l=a("108d"),c=a("67e4"),d=a("12fc");r["a"].mpapi.queryAutoModelEnum,r["a"].mpapi.findMcdAutoSceneById;var m={name:"AutoScenario",components:{QueryFormCell:l["a"],AddForAutoScenario:c["a"]},data(){return{searchForm:{product:""},modelOptions:[],modelValue:"",options:[],labelWidth:"85px",sizeForm:{dateModel:[""],radioModel:[""]},formList:[{label:"账期",values:[],isDate:!0,dateType:"month"}],addButton:!0,tableData:[],currentPage:1,total:0}},created(){this.init()},methods:{async init(){await Object(s["i"])(d["a"].mpapi.getSysEnum,{enumType:"auto_model"}).then(e=>{this.modelOptions=e,this.modelValue=this.modelOptions[0].enumKey})},search(){},queryList(){if(!this.sizeForm.dateModel[0])return void this.$message.error("请选择账期");let e={modelId:this.modelValue,dataDate:this.sizeForm.dateModel[0].replace(/-/g,""),planId:this.searchForm.product,size:this.pageSize,current:this.currentPage};Object(s["i"])(d["a"].mpapi.findMcdAutoSceneById,e).then(e=>{let{records:t,total:a}=e;this.total=a,this.tableData=t})},async queryForm(e){let{value:t}=e;await Object(s["i"])(d["a"].mpapi.getProduct,{dataDate:t.replace(/-/g,""),modelId:this.modelValue}).then(e=>{if("数据未导入"===e.message)return this.$message.error("该账期内无数据,请先导入数据"),this.sizeForm.dateModel[0]="",this.searchForm.product="",this.options="",void(this.addButton=!1);this.addButton=!0,this.options=[{planName:"全部",planId:"-1"}],this.options=this.options.concat(e),this.searchForm.product=this.options[0].planId})},add(){let e=this.modelValue,t=this.sizeForm.dateModel[0].replace(/-/g,""),a=this.searchForm.product;this.addButton?t?(this.$refs.AddForAutoScenario.dialogFormVisible=!0,this.$refs.AddForAutoScenario.initData(e,t,a)):this.$message.error("请先选择账期"):this.$message.error("查询不到指定产品,不能保存,请重试")},handleCurrentChange(e){this.currentPage=e,this.queryList()}}},n=m,p=a("2877"),u=Object(p["a"])(n,i,o,!1,null,null,null);t["default"]=u.exports},db66:function(e,t,a){}}]);