(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41d4d239"],{"27e2":function(e,t,s){},5703:function(e,t,s){"use strict";s("27e2")},"5d3e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("el-card",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},["info"!==this.$route.query.mode?t("el-breadcrumb-item",{attrs:{to:{path:"/5g/messagePlatform"}}},[e._v("模板管理")]):e._e(),t("el-breadcrumb-item",[e._v("模板详情")])],1),t("div",{staticClass:"detail-container"},[t("div",{staticClass:"left-part"},[t("div",{staticClass:"previewContainer"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"5G消息",name:"5G消息"}}),t("el-tab-pane",{attrs:{label:e.labelVal,name:e.labelVal}})],1),t("Detail",{attrs:{info:e.info,"nets-data":e.netsData,"tab-title":e.activeName}}),t("div",{staticClass:"description"},[t("div",{staticClass:"title"},[e._v("用户界面预览")]),t("div",{staticClass:"des"},[e._v("（实际效果以手机终端界面为准）")])])],1)]),t("div",{staticClass:"info-view"},[t("div",{staticStyle:{position:"absolute",left:"50px"}},[t("el-descriptions",{attrs:{title:"",column:1,size:"medium","label-class-name":"titles","content-class-name":"content"}},[t("el-descriptions-item",{attrs:{label:"模板名称"}},[e._v(e._s(e.info.templateName))]),t("el-descriptions-item",{attrs:{label:"模板序列号"}},[e._v(e._s(e.info.templateID))]),t("el-descriptions-item",{attrs:{label:"信息反馈编号"}},[e._v(e._s(e.info.infoCode))]),t("el-descriptions-item",{attrs:{label:"模版类型"}},[e._v(e._s(e.filterType(e.info.templateType)))]),t("el-descriptions-item",{attrs:{label:"场景标签"}},[e._v(e._s(e.info.tags))]),t("el-descriptions-item",{attrs:{label:"提交审核说明"}},[e._v(e._s(e.info.description))]),t("el-descriptions-item",{attrs:{label:"模版状态"}},[e._v(e._s(e.filterStatus(e.info.result)))]),t("el-descriptions-item",{attrs:{label:"模版有效期"}},[e._v(e._s(e.info.until))]),t("el-descriptions-item",{attrs:{label:"模版编辑时间"}},[e._v(e._s(e.info.updateTime))])],1)],1)])])],1)},i=[],l=s("0fea"),n=s("cf74"),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header11",style:e.styleObj,attrs:{align:"center"}},[t("div",{staticClass:"inp",staticStyle:{width:"260px","margin-top":"10px"},attrs:{align:"center"}},[t("div",{staticClass:"header"},[t("img",{staticClass:"pic",attrs:{src:e.image}}),t("p",{staticClass:"titleContent"},[e._v("甘肃移动5G消息与IOP平台(调测号)")])]),"5G消息"===e.tabTitle?t("div",{staticClass:"scrollView"},[t("el-carousel",{ref:"myCards",attrs:{"indicator-position":"none",autoplay:!1,arrow:e.carouselList.length>1?"always":"never"},on:{change:e.cardChange}},e._l(e.carouselList,(function(s,a){return t("el-carousel-item",{key:a,attrs:{name:"idx"}},[t("div",{staticClass:"carousel_container"},[3===e.status?t("span",[t("div",[t("el-image",{staticClass:"cpic",attrs:{src:"https://rcs.10086.cn/5g-csp/csp-dev"+s.media.thumbnailUrl,"preview-src-list":e.srcList}})],1),t("div",{staticStyle:{background:"#f3f3f3",width:"100%"}},[t("div",{staticClass:"card"},[t("p",[e._v(e._s(s.title))]),t("p",[e._v(e._s(s.description))])]),t("div",{staticClass:"outDiv"},e._l(s.suggestions||e.btnList,(function(s,a){return t("div",{key:a},[t("span",[e._v(e._s(e.handelContentShow(s)))])])})),0)])]):e._e(),2===e.status?t("span",[t("video",{attrs:{src:"https://rcs.10086.cn/5g-csp/csp-manage/file/down/z5joobQBFGfI0zP+Ao6vVIrxi1ajIWF0PhT1R73cEytGgQS+byaYivuzfnM+rN7PLTkp0AALKauBPopNetJPp2rDyPIG77ZMBdnnMBEvTCA=/1661846473658.mp4?encode=0",width:"160",height:"102",controls:"controls",poster:""}}),t("div",[t("el-image",{staticClass:"cpic",attrs:{src:e.cpic,"preview-src-list":e.srcList}})],1)]):e._e(),1===e.status?t("span",[t("div",{staticStyle:{"text-align":"left"}},[t("div",{staticClass:"itemText"},[t("span",[e._v(e._s(e.smsContent))])])])]):e._e()])])})),1),t("div",{staticClass:"menu"},e._l(e.menuList,(function(s,a){return t("div",{key:a},[t("el-popover",{attrs:{placement:"bottom",title:"",width:"200",trigger:"click"}},[t("div",{domProps:{innerHTML:e._s(e.popoverContent)}}),t("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.handelContentShow(s)))])])],1)})),0)],1):e._e(),"短信小程序2.0"===e.tabTitle?t("div",{staticClass:"scrollView"},[!1===e.isShowCard?t("div",[t("div",[t("el-image",{staticClass:"smspic",attrs:{src:e.cpic,"preview-src-list":e.srcList}})],1),t("div",[t("p",[e._v(e._s(e.aimSmsObj.title))]),t("p",[e._v(e._s(e.aimSmsObj.description))])]),t("div",{staticClass:"outDiv"})]):e._e(),!0===e.isShowCard?t("div",[t("div",{staticClass:"itemText"},[e._v(" "+e._s(e.itemText)+" "),t("span",[e._v(e._s(e.smsContent))]),e._v(" "+e._s(e.itemSign)+" ")]),t("div",{staticClass:"changeSms",on:{click:function(t){e.isShowCard=!1}}},[e._v("显示卡片")])]):e._e(),!1===e.isShowCard?t("div",{staticClass:"changeSms",on:{click:function(t){e.isShowCard=!0}}},[e._v("显示原文")]):e._e()]):e._e(),"视频短信"===e.tabTitle?t("div",{staticClass:"videoScrollView"},[t("div",{staticClass:"videoSms"},[e._v(e._s(e.videoSmsTitle))]),1===e.status?t("div",{staticClass:"video"},[t("video",{attrs:{src:"https://rcs.10086.cn/5g-csp/csp-manage/file/down/z5joobQBFGfI0zP+Ao6vVIrxi1ajIWF0PhT1R73cEytGgQS+byaYivuzfnM+rN7PLTkp0AALKauBPopNetJPp2rDyPIG77ZMBdnnMBEvTCA=/1661846473658.mp4?encode=0",width:"160",height:"102",controls:"controls",poster:"https://rcs.10086.cn/5g-csp/csp-manage/file/down/z5joobQBFGfI0zP+Ao6vVIF78_6mBen3djXUF19VWrDiPXQnmSgT0YYKDAFP_E73IYpIiuwGxECptBnX8zz2tkEw0vgfCmJmFkwZUDGVzng=/1661846493163.jpg?encode=0"}}),t("div",{staticClass:"duration"},[e._v("00:04"+e._s(e.time))])]):e._e(),t("div",{staticStyle:{"text-align":"left"}},[t("div",[t("el-image",{staticClass:"smspic",attrs:{src:e.cpic,"preview-src-list":e.srcList}})],1),t("div",{staticClass:"itemText"},[e._v(" "+e._s(e.itemText)+" "),t("span",[e._v(e._s(e.smsContent))]),e._v(" "+e._s(e.itemSign)+" ")])])]):e._e(),"文字短信"===e.tabTitle?t("div",{staticClass:"videoScrollView"},[t("div",{staticStyle:{"text-align":"left"}},[t("div",{staticClass:"itemText"},[t("p",[t("span",{domProps:{innerHTML:e._s(e.smsTemplate)}})])])])]):e._e()])])},c=[],o=(s("14d9"),s("cfcc")),m=s.n(o),d=s("dbbf"),p=s.n(d),h=s("73fe"),u=s.n(h);const v='<button class="tag" contenteditable="false">Chatbot H5链接（免登录）</button>',g='<button class="tag" contenteditable="false">Chatbot H5链接</button>';var f={props:{tabTitle:{type:String,default:""},info:{type:Object,default:()=>{}},netsData:{type:Array,default:()=>[]}},data(){return{styleObj:{width:"100%",height:"512px",background:"url("+u.a+") no-repeat center center",backgroundSize:"93% 100%",position:"relative"},image:m.a,cpic:p.a,elementList:[],srcList:[p.a],isShowCard:!1,isShowPopover:!1,popoverContent:"",videoSmsTitle:"移动话费余额提醒",status:null,time:"",contentsList:[],params:{},aimSmsObj:{},mediaObj:{},btnList:[],menuList:[],carouselList:[],smsTemplate:""}},watch:{info:{handler:function(e){var t,s,a;if(this.params=e,null!==(t=this.params)&&void 0!==t&&null!==(t=t.bodyTextTemplate)&&void 0!==t&&t.contents[0].message.generalPurposeCard){var{description:i,title:l,media:n,suggestions:r}=this.params.bodyTextTemplate.contents[0].message.generalPurposeCard.content;for(let e=0;e<(null===(c=this.params)||void 0===c||null===(c=c.dynamicParams)||void 0===c?void 0:c.length);e++){var c;l.indexOf(this.params.dynamicParams[e].paramName)>-1&&(l=l.replace("${"+this.params.dynamicParams[e].paramName+"}",this.params.dynamicParams[e].example)),i.indexOf(this.params.dynamicParams[e].paramName)>-1&&(i=i.replace("${"+this.params.dynamicParams[e].paramName+"}",this.params.dynamicParams[e].example))}this.aimSmsObj={description:i,title:l},this.mediaObj=n,this.btnList=r,this.carouselList.push({description:i,title:l,media:n,suggestions:r})}null!==(s=this.params)&&void 0!==s&&null!==(s=s.bodyTextTemplate)&&void 0!==s&&s.contents[0].message.generalPurposeCardCarousel&&(this.carouselList=this.params.bodyTextTemplate.contents[0].message.generalPurposeCardCarousel.content,this.carouselList.forEach(e=>{for(let s=0;s<(null===(t=this.params)||void 0===t||null===(t=t.dynamicParams)||void 0===t?void 0:t.length);s++){var t;e.title.indexOf(this.params.dynamicParams[s].paramName)>-1&&(e.title=e.title.replace("${"+this.params.dynamicParams[s].paramName+"}",this.params.dynamicParams[s].example)),e.description.indexOf(this.params.dynamicParams[s].paramName)>-1&&(e.description=e.description.replace("${"+this.params.dynamicParams[s].paramName+"}",this.params.dynamicParams[s].example))}}));const{contentType:o}=this.info;this.status=o,this.menuList=null===(a=this.params)||void 0===a||null===(a=a.bodyTextTemplate)||void 0===a?void 0:a.suggestions},deep:!0},tabTitle(e){switch(e){case"短信小程序2.0":break;case"视频短信":break;case"文字短信":if(this.smsTemplate.includes("SDATA[noLoginSmsShortLink]"))this.smsTemplate=this.smsTemplate.replace("SDATA[noLoginSmsShortLink]",v);else if(this.smsTemplate.includes("SDATA[mppSmsShortLink]"))this.smsTemplate=this.smsTemplate.replace("SDATA[mppSmsShortLink]",g);else if(this.smsTemplate=this.params.smsTemplate,this.smsTemplate.includes(":")){const e=this.smsTemplate.slice(this.smsTemplate.lastIndexOf(":")+1).split("]")[0],t=this.netsData.find(({tid:t})=>t===e).name;this.val1=t,this.customUrl=`<button class="tag" contenteditable="false">${this.val1}</button>`,this.smsTemplate=this.smsTemplate.replace("SDATA[customUrl:"+e+"]",this.customUrl)}else this.smsTemplate=this.params.smsTemplate;break;default:break}}},created(){},mounted(){},methods:{handelContentShow(e){let t="";return t=e.reply?e.reply.displayText:e.action.displayText,t},cardChange(e,t){}}},b=f,T=(s("5703"),s("2877")),_=Object(T["a"])(b,r,c,!1,null,null,null),y=_.exports,C={components:{Detail:y},data(){return{labelVal:"短信小程序2.0",activeName:"5G消息",activeIndex:"1",indexUrl:"",loading:!1,chatbotList:[],displayTemplateClass:!0,eleType:0,disabled0:!1,disabled1:!1,tipAddCard:"新增一个卡片",tipDelCard:"删除当前卡片",disabled:!1,selectElementVisible:!1,selectTabPosition:"left",selectTabPosition1:"top",selectName:"urlOrText",radio:"",filelist:[],num:1,selectEle:"",isShowMedia:!1,fatherActive:"",fatherQueryParam:{},textConent:"",isSelectImg:!1,queryObj:"",info:{},netsData:[]}},computed:{chatbotId(){return this.$store.state.chatbotId}},created(){this.queryObj=this.$route.query.queryObj,location.href.indexOf("index/")>-1?this.indexUrl="/index":this.indexUrl="";const e=new FormData;switch(e.append("name",""),Object(l["i"])("/msg5g-svc/combox/getNets",e).then(e=>{this.netsData=e||[]}),Object(l["i"])(n["a"].temapi.templateDetail,{chatbotId:this.chatbotId,templateId:this.queryObj.templateId}).then(e=>{this.info={...e.data}}),this.$route.query.queryObj.smsType){case"1":this.labelVal="短信小程序2.0";break;case"2":this.labelVal="视频短信";break;case"3":this.labelVal="文字短信";break;default:break}},mounted(){},methods:{filterStatus(e){const t={"-1":"未提交审核",0:"审批通过",1:"审批不通过",999:"审核中"};return t[e]||""},filterType(e){const t={1:"静态",2:"交互动态",3:"主动动态",4:"空白"};return t[e]||""},handleSelect(e,t){},handleClick(e,t){this.activeName=e.label},checkEle(e){this.radio=e}}},M=C,w=(s("a8e7"),Object(T["a"])(M,a,i,!1,null,null,null));t["default"]=w.exports},"73fe":function(e,t,s){e.exports=s.p+"img/iphone_bg.4e87e31d.png"},a8e7:function(e,t,s){"use strict";s("b750")},b750:function(e,t,s){},cf74:function(e,t,s){"use strict";const a="/msg5g-svc";t["a"]={temapi:{add:a+"/MsgTemplate/add",approve:a+"/MsgTemplate/approve",check:a+"/MsgTemplate/check",checkBatch:a+"/MsgTemplate/checkBatch",commit:a+"/MsgTemplate/commit",delete:a+"/MsgTemplate/delete",deleteBatch:a+"/MsgTemplate/deleteBatch",eles:a+"/MsgTemplate/eles",detail:a+"/MsgTemplate/detail",list:a+"/MsgTemplate/list",query5GTemplates:a+"/MsgTemplate/query5GTemplates",refresh:a+"/MsgTemplate/refresh",refreshBatch:a+"/MsgTemplate/refreshBatch",test:a+"/MsgTemplate/test",update:a+"/MsgTemplate/update",templateDetail:a+"/MsgTemplate/getTemplateDetail",eleAdd:a+"/MsgElement/add",eleCheck:a+"/MsgElement/check",eleCheckBatch:a+"/MsgElement/checkBatch",eleDelete:a+"/MsgElement/delete",eleDeleteBatch:a+"/MsgElement/deleteBatch",eleList:a+"/MsgElement/list",eleRefresh:a+"/MsgElement/refresh",eleRefreshBatch:a+"/MsgElement/refreshBatch",rename:a+"/MsgElement/rename",upload:a+"/MsgElement/upload",uploadBatch:a+"/MsgElement/uploadBatch",send:a+"/MsgSend/send",MenuCommit:a+"/MsgMenu/commit",MenuDelete:a+"/MsgMenu/delete",get:a+"/MsgMenu/get",query:a+"/MsgMenu/query",queryTemp:a+"/MsgMenu/queryTemp",save:a+"/MsgMenu/save",status:a+"/MsgMenu/getMenuStatus",all:a+"/MsgMenu/getMenuAll",cfgList:a+"/cfg/list",queryFiveKeywords:"/plan-svc/action/jx/msg5g_keywords/getFiveGKeywordsInfo",addFiveKeywords:"/plan-svc/action/jx/msg5g_keywords/updateFiveGKeywordsInfo",delFiveKeywords:"/plan-svc/action/jx/msg5g_keywords/deleteFiveGKeywordsInfo"}}},cfcc:function(e,t,s){e.exports=s.p+"img/1640852541299.a6f40623.jpeg"},dbbf:function(e,t,s){e.exports=s.p+"img/1661846435682.8fa9ddfe.jpg"}}]);