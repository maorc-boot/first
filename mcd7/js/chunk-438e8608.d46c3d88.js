(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-438e8608"],{2130:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"avoid-bother-customer-wrap fe-m-24 fe-p-24 bg"},[e("div",{staticClass:"search_box"},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入配置编号/名称查询"},model:{value:t.queryFrom.keyWords,callback:function(e){t.$set(t.queryFrom,"keyWords","string"===typeof e?e.trim():e)},expression:"queryFrom.keyWords"}},[e("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:function(e){return t.queryApproveInfo()}},slot:"suffix"})]),e("div",{staticClass:"btn_box"},[e("el-button",{attrs:{type:"success"},on:{click:t.configAdd}},[t._v("新建")])],1)],1),e("div",{staticClass:"list"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"cell-click":t.onCellClick}},[e("el-table-column",{attrs:{type:"index",label:"序号"}}),e("el-table-column",{attrs:{prop:"id",label:"配置编号","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"name",label:"配置名称","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"createBy",label:"创建人","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"createDate",label:"创建时间","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(e){return t.editHanlder(a.row,a.$index)}}},[t._v("编辑 ")]),e("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-warning",iconColor:"#FAAD14",title:"确定删除？","cancel-button-type":"Primary"},on:{confirm:function(e){return t.deleteHanlder(a.row,a.$index)}}},[e("el-link",{staticClass:"cursor-pointer text-sm mr-16",attrs:{slot:"reference",type:"danger",underline:!1},slot:"reference"},[t._v(" 删除")])],1),e("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(e){return t.lookHanlder(a.row,a.$index)}}},[t._v("预览 ")])]}}])})],1)],1),e("div",{staticClass:"pager"},[e("el-pagination",{attrs:{"current-page":t.pageData.current,"page-sizes":t.pageData.pageSizeList,"page-size":t.pageData.size,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t.dialogVisible?e("config-dialog",{attrs:{dialogVisible:t.dialogVisible,dialogTitle:t.dialogTitle,operationType:t.operationType,rowData:t.rowData},on:{"update:dialogVisible":function(e){t.dialogVisible=e},"update:dialog-visible":function(e){t.dialogVisible=e},Refresh:t.getConfigListData}}):t._e()],1)},l=[],i=a("0fea"),o=a("a454"),n=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,"before-close":t.closeHandler,width:"600px","append-to-body":""}},[e("el-form",{ref:"configFrom",attrs:{model:t.configData,"label-width":"120px",rules:t.cRule,disabled:"look"===t.operationType}},[e("el-form-item",{attrs:{label:"配置名称",prop:"name"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],model:{value:t.configData.name,callback:function(e){t.$set(t.configData,"name",e)},expression:"configData.name"}})],1)],1),t.configData.attrInfoList.length>0?e("div",{staticStyle:{width:"100%"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.configData.attrInfoList}},[e("el-table-column",{attrs:{prop:"attrId",label:"ID"}}),e("el-table-column",{attrs:{prop:"serialNumber",label:"序号"}}),e("el-table-column",{attrs:{prop:"attrName",label:"名称"}}),e("el-table-column",{attrs:{prop:"attrFormat",label:"格式"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("attrFormatJson")(e.row.attrFormat)))]}}],null,!1,3861129564)}),e("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.editBaseFormItem(a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.delBaseFormItem(a.row,a.$index)}}},[t._v("删除")])]}}],null,!1,2234387348)})],1)],1):t._e(),e("div",{staticClass:"name"},["look"!==t.operationType?e("el-button",{staticClass:"addButton",on:{click:t.addBaseFormItem}},[t._v("添加通用配置项+ ")]):t._e()],1),e("el-dialog",{attrs:{width:"550px",title:"新建通用配置项",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e},opened:t.dialogOpen}},[e("el-form",{ref:"configFrom",attrs:{model:t.attrData,"label-width":"120px",rules:t.rules}},[e("el-form-item",{attrs:{label:"序号",prop:"serialNumber"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{oninput:"value=value.replace(/^\\.+|[^\\d.]/g,'')"},model:{value:t.attrData.serialNumber,callback:function(e){t.$set(t.attrData,"serialNumber",e)},expression:"attrData.serialNumber"}})],1),e("el-form-item",{attrs:{label:"ID",prop:"attrId"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.attrData.attrId,callback:function(e){t.$set(t.attrData,"attrId",e)},expression:"attrData.attrId"}},t._l(t.idArr,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"运营位扩展名称",prop:"channelExtName"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],model:{value:t.attrData.channelExtName,callback:function(e){t.$set(t.attrData,"channelExtName",e)},expression:"attrData.channelExtName"}})],1),e("el-form-item",{attrs:{label:"名称",prop:"attrName"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],model:{value:t.attrData.attrName,callback:function(e){t.$set(t.attrData,"attrName",e)},expression:"attrData.attrName"}})],1),e("el-form-item",{attrs:{label:"格式",prop:"attrFormat"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.attrData.attrFormat,callback:function(e){t.$set(t.attrData,"attrFormat",e)},expression:"attrData.attrFormat"}},[e("el-option",{attrs:{value:1,label:"数字"}},[t._v("数字")]),e("el-option",{attrs:{value:2,label:"字符串"}},[t._v("字符串")])],1)],1),e("el-form-item",{attrs:{label:"分类",prop:"attrValueType"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.attrData.attrValueType,callback:function(e){t.$set(t.attrData,"attrValueType",e)},expression:"attrData.attrValueType"}},t._l(t.typeArr,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"长度",prop:"attrLength"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{oninput:"value=value.replace(/^\\.+|[^\\d.]/g,'')"},model:{value:t.attrData.attrLength,callback:function(e){t.$set(t.attrData,"attrLength",e)},expression:"attrData.attrLength"}})],1),e("el-form-item",{attrs:{label:"是否可为空",prop:"isNullable"}},[e("el-radio-group",{model:{value:t.attrData.isNullable,callback:function(e){t.$set(t.attrData,"isNullable",e)},expression:"attrData.isNullable"}},[t._l(t.requiredConfig,(function(a,r){return[e("el-radio",{key:r,attrs:{label:a.id,value:a.id}},[t._v(t._s(a.name))])]}))],2)],1),e("el-form-item",{attrs:{label:"是否只读",prop:"readOnly"}},[e("el-radio-group",{model:{value:t.attrData.readOnly,callback:function(e){t.$set(t.attrData,"readOnly",e)},expression:"attrData.readOnly"}},[t._l(t.readoption,(function(a,r){return[e("el-radio",{key:r,attrs:{label:a.id,value:a.id}},[t._v(t._s(a.name))])]}))],2)],1),5===t.attrData.attrValueType?e("el-form-item",{attrs:{label:"起始时间",prop:"valueFrom"}},[e("el-date-picker",{attrs:{format:"yyyy/MM/dd HH:mm","value-format":"yyyy/MM/dd HH:mm",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},on:{change:t.getChangeData},model:{value:t.attrData.dateValue,callback:function(e){t.$set(t.attrData,"dateValue",e)},expression:"attrData.dateValue"}})],1):t._e(),e("el-form-item",{attrs:{label:"数据来源URL",prop:"resoureUrl"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],model:{value:t.attrData.resoureUrl,callback:function(e){t.$set(t.attrData,"resoureUrl",e)},expression:"attrData.resoureUrl"}})],1),e("el-form-item",{attrs:{label:"描述",prop:"remark"}},[e("el-input",{model:{value:t.attrData.remark,callback:function(e){t.$set(t.attrData,"remark",e)},expression:"attrData.remark"}})],1)],1),"look"!=this.operationType?e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.saveInfo}},[t._v("保 存")])],1):t._e()],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("确 定")])],1)],1)],1)},s=[];a("14d9");const c={attrDesc:"",attrFormat:null,attrId:null,attrLength:null,attrName:null,attrValueType:null,isNullable:null,readOnly:null,remark:null,resoureUrl:null,dateValue:null,valueFrom:null,valueTo:null};var d={components:{},name:"ConfigDialog",props:{dialogTitle:{type:String,default:"添加配置"},dialogVisible:{type:Boolean,default:!1},operationType:{type:String,default:()=>"add"},rowData:{type:Object}},data(){return{submitBtn:!1,innerVisible:!1,optionVal:1,configData:{name:null,attrInfoList:[]},configInfo:c,attrData:{},cRule:{name:[{required:!0,message:"请输入配置名称",trigger:"blur"}]},rules:{serialNumber:[{required:!0,message:"请输入序号ID",trigger:"blur"}],attrId:[{required:!0,message:"请输入配置项ID",trigger:"blur"}],channelExtName:[{required:!0,message:"请输入运营位扩展名称",trigger:"blur"}],attrName:[{required:!0,message:"请输入配置项名称",trigger:"blur"}],attrFormat:[{required:!0,message:"请输入配置项格式",trigger:"blur"}],attrValueType:[{required:!0,message:"请选择类型",trigger:"blur"}],isNullable:[{required:!0,message:"请选择是否可为空",trigger:"blur"}],readOnly:[{required:!0,message:"请选择是否只读",trigger:"blur"}],attrLength:[{required:!0,message:"请输入配置长度",trigger:"blur"}]},formData:{},readoption:[{id:"1",name:"是"},{id:"0",name:"否"}],requiredConfig:[{id:1,name:"是"},{id:0,name:"否"}],idArr:[],typeArr:[{id:1,name:"输入框"},{id:2,name:"文本域"},{id:3,name:"下拉框"},{id:4,name:"单选日期"},{id:5,name:"多选日期"},{id:6,name:"单选框"},{id:7,name:"复选框"}]}},watch:{},filters:{attrFormatJson(t){return 1===t?"数字":"字符串"}},methods:{closeHandler(){this.configData.name=null,this.configData.attrInfoList=[],this.attrData=[],this.$emit("update:dialogVisible",!1)},dialogOpen(){this.getConfigIdSelect()},async getConfigData(){await Object(i["i"])(o["a"].scheduling.lookSchedulingInfo,this.rowData).then(t=>{this.configData=t,this.attrData=this.configData.attrInfoList,this.$forceUpdate()})},async getConfigIdSelect(){await Object(i["i"])(o["a"].scheduling.getConfigIdSelect).then(t=>{const e=[];t.map(t=>{e.push({name:t,id:t})}),this.idArr=e})},addBaseFormItem(){this.attrData=JSON.parse(JSON.stringify(this.configInfo)),this.innerVisible=!0},editBaseFormItem(t){this.attrData=JSON.parse(JSON.stringify(t)),this.innerVisible=!0},delBaseFormItem(t,e){this.configData.attrInfoList.splice(e,1)},getChangeData(){this.attrData.valueFrom=this.attrData.dateValue[0],this.attrData.valueTo=this.attrData.dateValue[1]},saveInfo(){this.$refs["configFrom"].validate(async t=>{if(t){let t=!1,e=0;this.configData.attrInfoList.forEach((a,r)=>{a.attrId===this.attrData.attrId&&(e=r,t=!0)}),t?(this.$set(this.configData.attrInfoList,e,this.attrData),this.$forceUpdate()):this.configData.attrInfoList.push(this.attrData),this.innerVisible=!1}})},async saveData(){await Object(i["i"])(o["a"].scheduling.editSchedInfo,this.configData).then(t=>{t&&(this.$message.success("操作成功"),this.$emit("update:dialogVisible",!1))})}},created(){("look"===this.operationType||"edit"===this.operationType)&&this.getConfigData()}},u=d,p=(a("33b3"),a("2877")),m=Object(p["a"])(u,n,s,!1,null,"f838f556",null),g=m.exports,f={name:"UserManage",components:{ConfigDialog:g},data(){return{operationType:"add",dialogVisible:!1,rowData:{},queryFrom:{keyWords:""},pageData:{current:1,size:10,pageSizeList:[10,20,30,40],total:0},loading:!1,dialogTitle:"",windowTitle:"",tableData:[{id:1,configId:123,configName:"新增配置1"}]}},created(){this.getConfigListData()},mounted(){},methods:{onCellClick(t,e,a,r){"配置名称"===e.label&&(this.dialogVisible=!0,this.dialogTitle="预览配置单",this.operationType="look")},initializationFrom(){this.pageData.current=1},async getConfigListData(){this.loading=!0,await Object(i["i"])(o["a"].scheduling.getSchedulingList,{name:this.queryFrom.keyWords,current:this.pageData.current,size:this.pageData.size}).then(t=>{this.tableData=t.records,this.pageData.total=t.total,this.loading=!1,this.initializationFrom()})},queryApproveInfo(){},configAdd(){this.dialogVisible=!0,this.dialogTitle="添加配置项",this.operationType="add"},lookHanlder(t){this.dialogVisible=!0,this.dialogTitle="预览配置项",this.operationType="look",this.rowData=t},editHanlder(t){this.dialogVisible=!0,this.dialogTitle="编辑配置项",this.operationType="edit",this.rowData=t},deleteHanlder(t){Object(i["i"])(o["a"].scheduling.deleteTaskExeList,{id:t.id}).then(t=>{this.$message({type:"success",message:t.message})})},handleSizeChange(t){this.pageData.size=t,this.queryApproveInfo()},handleCurrentChange(t){this.pageData.current=t,this.queryApproveInfo()}}},b=f,h=Object(p["a"])(b,r,l,!1,null,"b6a114d8",null);e["default"]=h.exports},"33b3":function(t,e,a){"use strict";a("99d0")},"99d0":function(t,e,a){}}]);