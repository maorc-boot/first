(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d1af648"],{"09e7":function(e,t,a){},"0c9a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"h5-app-wrap-content"},[t("van-search",{attrs:{placeholder:"产品/话术/内容模糊搜索",clearable:""},on:{search:e.onSearch,clear:e.clearSearch},scopedSlots:e._u([{key:"right-icon",fn:function(){return[t("van-button",{attrs:{type:"info"},nativeOn:{click:function(t){return e.onSearch.apply(null,arguments)}}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),t("main",{directives:[{name:"bottom-out",rawName:"v-bottom-out",value:e.loadMore,expression:"loadMore"}]},[e._l(e.list,(function(a,r){return t("div",{key:r,staticClass:"card"},[t("header",{on:{click:function(t){return t.stopPropagation(),e.gotoDetail(a)}}},[t("div",{staticClass:"van-ellipsis"},[e._v(e._s(a.scriptName))]),a.score>9?t("div",{staticClass:"excellent"},[t("span",{staticClass:"icon"},[e._v("荐")]),t("span",[e._v(e._s(a.score))])]):t("span",{staticClass:"score"},[e._v(e._s(a.score))])]),t("div",{staticClass:"content",on:{click:function(t){return t.stopPropagation(),e.gotoDetail(a)}}},[t("van-row",{attrs:{type:"flex"}},e._l(e.columnList,(function(r){return t("van-col",{key:r.prop,staticClass:"van-ellipsis",attrs:{span:"11"}},[t("label",[e._v(e._s(r.label+":"))]),t("span",[e._v(e._s(a[r.prop]))])])})),1)],1),t("hr"),t("footer",[t("div",[t("span",[e._v(e._s(a.createTime))])]),t("div",[t("van-icon",{attrs:{name:a.evaluate?"star":"star-o"},nativeOn:{click:function(t){return e.openEvaluate(a)}}}),t("van-icon",{attrs:{name:a.click?"good-job":"good-job-o"},nativeOn:{click:function(t){return e.like(a)}}})],1)])])})),t("div",{staticClass:"list-state"},[e.loading?t("van-loading",{attrs:{size:"24px",color:"#2f87ec"}},[e._v("加载中...")]):e._e(),e.finished&&e.list.length>3?t("span",[e._v("没有更多了")]):e._e(),e.loading||0!==e.list.length?e._e():t("van-empty",{attrs:{description:"暂无话术"}})],1)],2),t("van-dialog",{attrs:{"show-cancel-button":"",title:"话术评估","confirm-button-color":"#2f87ec","confirm-button-text":"提交","cancel-button-text":"取消","cancel-button-color":"#aaa","before-close":(t,a)=>e.confirmEvaluate(t,a)},model:{value:e.showEvalate,callback:function(t){e.showEvalate=t},expression:"showEvalate"}},[t("Evaluate",{ref:"evaRef",attrs:{show:e.showEvalate}})],1)],1)},l=[];a("14d9");const n=new Map,s={bind(e,{arg:t,value:a}){if(t){let a=e.querySelector(t)||document.querySelector(t);n.set(e,a||e)}else n.set(e,e);n.get(e)&&"function"===typeof a&&(e.__scroll_event__=e=>{const t=e.target,r=t.scrollHeight-t.scrollTop<=t.clientHeight;r&&a()},n.get(e).addEventListener("scroll",e.__scroll_event__))},unbind(e){n.get(e)&&n.get(e).removeEventListener("scroll",e.__scroll_event__)}};var i=a("ac7c"),o=a("0fea"),c=a("cdbb"),u=function(){var e=this,t=e._self._c;return t("van-form",{ref:"rateForm",attrs:{"validate-first":"","label-width":"3rem"}},[t("van-field",{attrs:{name:"syxStarNumber",label:"实用性",rules:[{required:!0,message:"请对实用性进行星级评价"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-rate",{attrs:{color:"#2f87ec"},model:{value:e.form.syxStarNumber,callback:function(t){e.$set(e.form,"syxStarNumber",t)},expression:"form.syxStarNumber"}})]},proxy:!0}])}),t("van-field",{attrs:{name:"tyxStarNumber",label:"通用性",rules:[{required:!0,message:"请对通用性进行星级评价"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-rate",{attrs:{color:"#2f87ec"},model:{value:e.form.tyxStarNumber,callback:function(t){e.$set(e.form,"tyxStarNumber",t)},expression:"form.tyxStarNumber"}})]},proxy:!0}])}),t("van-field",{attrs:{name:"zqxStarNumber",label:"准确性",rules:[{required:!0,message:"请对准确性进行星级评价"}]},scopedSlots:e._u([{key:"input",fn:function(){return[t("van-rate",{attrs:{color:"#2f87ec"},model:{value:e.form.zqxStarNumber,callback:function(t){e.$set(e.form,"zqxStarNumber",t)},expression:"form.zqxStarNumber"}})]},proxy:!0}])})],1)},p=[],d={props:{show:{type:Boolean,default:!1}},watch:{show(e){e||setTimeout(()=>{for(const e in this.form)this.form[e]=null;this.$refs.rateForm.resetValidation()},100)}},data(){return{form:{syxStarNumber:null,tyxStarNumber:null,zqxStarNumber:null}}},methods:{}},m=d,v=(a("d60f"),a("2877")),f=Object(v["a"])(m,u,p,!1,null,"0f974549",null),b=f.exports,h={directives:{bottomOut:s},components:{Evaluate:b},data(){return{SCRIPT_STATUS:i["g"],loading:!1,listLoadError:!1,keywords:"",query:{keywords:"",channelId:"809",current:1,size:10},total:0,list:[],columnList:[{label:"话术编码",prop:"scriptId"},{label:"话术类型",prop:"scriptTypeName"},{label:"产品编码",prop:"planId"},{label:"产品名称",prop:"planName"},{label:"内容类型",prop:"contentTypeName"},{label:"应用渠道",prop:"channelName"}],currentRow:{},showEvalate:!1}},watch:{$route(e,t){"ScriptLibH5"===e.name&&"ScriptInfoEdit"===t.name&&(this.query.current=1,this.getList())}},computed:{finished(){return this.list.length===this.total}},methods:{async getList(){try{1===this.query.current&&(this.list=[]),this.loading=!0;const{records:e,total:t}=await Object(o["l"])(c["a"].getScriptListInfo,this.query),a=this.convertEnumValue(e||[]);this.list=[...this.list,...a],this.total=t,this.listLoadError=!1}catch(e){this.listLoadError=!0}finally{this.loading=!1}},convertEnumValue(e){return e.map(e=>{var t,a;return{...e,scriptTypeName:null===(t=i["j"].find(t=>t.value==e.scriptType))||void 0===t?void 0:t.label,contentTypeName:null===(a=i["a"].find(t=>t.value==e.contentType))||void 0===a?void 0:a.label}})},onSearch(){this.query.keywords=this.keywords,this.query.current=1,this.getList()},clearSearch(){this.keywords="",this.onSearch()},loadMore(){this.loading||this.finished||(this.query.current+=this.listLoadError?0:1,this.getList())},gotoDetail(e){this.$router.push({name:"ScriptInfoDetail",query:{id:e.scriptId}})},openEvaluate(e){e.evaluate||(this.currentRow=e,this.showEvalate=!0)},async confirmEvaluate(e,t){if("cancel"===e)this.currentRow={},t();else try{const e=this.$refs.evaRef;await e.$refs.rateForm.validate();const a=e.form,r={...a,scriptId:this.currentRow.scriptId,scriptName:this.currentRow.scriptName},l=await Object(o["l"])(c["a"].getScriptAppraise,r);"SUCCESS"===l.status?(this.$toast.success("评价成功"),this.$set(this.currentRow,"evaluate",!0),t()):(this.$toast.fail(l.message),t(!1))}catch(a){t(!1)}},async like(e){if(!e.click)try{this.$toast.loading({message:"点赞中...",forbidClick:!0,duration:3e4});const t=await Object(o["l"])(c["a"].clickScript+"?scriptId="+e.scriptId);"SUCCESS"===t.status?(this.$toast.success(t.message||"点赞成功"),this.$set(e,"click",!0)):this.$toast.fail(t.message)}catch(t){}}},created(){this.getList()}},y=h,g=(a("d84a"),Object(v["a"])(y,r,l,!1,null,"18655db2",null));t["default"]=g.exports},"3eb0":function(e,t,a){},ac7c:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"j",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"i",(function(){return p})),a.d(t,"f",(function(){return d})),a.d(t,"g",(function(){return m})),a.d(t,"c",(function(){return v})),a.d(t,"b",(function(){return f}));const r={typeId:"",typeName:"",content:"",uploadType:"",uploadFileUrl:"",uploadFileName:"",linkUrl:"",isRich:!1,list:[]};function l(e={}){return{...r,...e}}const n=[{id:"0",name:"引导语",content:""},{id:"1",name:"卖点分析",content:""},{id:"2",name:"资费介绍",content:""},{id:"3",name:"挽留语",content:""},{id:"4",name:"必讲内容",content:""},{id:"5",name:"业务办理",content:""},{id:"6",name:"结束语",content:""},{id:"7",name:"备注信息",content:""}],s=[{label:"面对面营销语(富文本)+短信语",value:"1",marketingWords:[l({typeId:"1",typeName:"面对面营销语(富文本)",isRich:!0,list:n}),l({typeId:"4",typeName:"短信语"})]},{label:"面对面营销语(富文本)",value:"2",marketingWords:[l({typeId:"1",typeName:"面对面营销语(富文本)",isRich:!0,list:n})]},{label:"面对面营销语(文本)+短信语",value:"3",marketingWords:[l({typeId:"2",typeName:"面对面营销语(文本)",list:n}),l({typeId:"4",typeName:"短信语"})]},{label:"面对面营销语(文本)",value:"4",marketingWords:[l({typeId:"2",typeName:"面对面营销语(文本)",list:n})]},{label:"推荐语+短信语",value:"5",marketingWords:[l({typeId:"3",typeName:"推荐语"}),l({typeId:"4",typeName:"短信语"})]},{label:"短信语",value:"6",marketingWords:[l({typeId:"4",typeName:"短信语"})]},{label:"推荐语",value:"7",marketingWords:[l({typeId:"3",typeName:"推荐语"})]},{label:"图片",value:"8",marketingWords:[l({typeId:"5",typeName:"图片",uploadType:"1"})]},{label:"图片+推荐语",value:"9",marketingWords:[l({typeId:"5",typeName:"图片",uploadType:"1"}),l({typeId:"3",typeName:"推荐语"})]}],i=[{label:"标准话术",value:"1"},{label:"个性化话术",value:"2"}],o=[{label:"营销活动引⽤次数",value:"1",disabled:!1}],c=[{label:"营销接触率",value:"1",disabled:!1},{label:"营销办理率",value:"2",disabled:!1}],u=[{label:"点赞",value:"1",disabled:!1},{label:"预览",value:"2",disabled:!1}],p=[{label:"小于",value:"<"},{label:"大于",value:">"},{label:"区间",value:"between"}],d=[{label:"10086呼入弹屏",value:"804"},{label:"营业厅网台",value:"906"},{label:"智慧网格",value:"808"},{label:"和我信",value:"924"},{label:"客户通",value:"809"}],m=new Map([[0,"草稿"],[1,"审批通过"],[2,"审批中"],[3,"终止"],[4,"审批驳回"],[5,"审批失败"]]),v=[{label:"优秀话术",value:"1"},{label:"普通话术",value:"0"}],f=[{label:"手动",value:"0"},{label:"自动",value:"1"},{label:"外部系统",value:"2"}]},cdbb:function(e,t,a){"use strict";t["a"]={getConfigRulePermission:"/mkt-term-svc/eval/getConfigRulePermission",getTermRule:"/mkt-term-svc/eval/getTermRule",saveTermEval:"/mkt-term-svc/eval/saveTermEval",clickScript:"/mkt-term-svc/api/clickScript",delScript:"/mkt-term-svc/api/delScript",exportScript:"/mkt-term-svc/api/exportScript",getScriptAppraise:"/mkt-term-svc/api/getScriptAppraise",getScriptListInfo:"/mkt-term-svc/api/getScriptListInfo",getScriptPreview:"/mkt-term-svc/api/getScriptPreview",saveScript:"/mkt-term-svc/api/saveScript",uploadScriptMaterial:"/mkt-term-svc/api/uploadScriptMaterial",queryChannelIdAndPlan:"/mkt-term-svc/api/queryChannelIdAndPlan",getScriptName:"/mkt-term-svc/api/getScriptName",queryChannelContentType:"/mkt-term-svc/api/queryChannelContentType",approveRecord:"/mkt-term-svc/term/approveRecord",submitApprove:"/mkt-term-svc/term/submitApprove",qryApproveRejectOpinion:"/mkt-term-svc/term/qryApproveRejectOpinion"}},d60f:function(e,t,a){"use strict";a("09e7")},d84a:function(e,t,a){"use strict";a("3eb0")}}]);