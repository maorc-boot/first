(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e442712"],{"00fc":function(e,t,a){"use strict";a("a061")},"06fa":function(e,t,a){},"0a1b":function(e,t,a){},1108:function(e,t,a){"use strict";a("15c6")},"12fc":function(e,t,a){"use strict";const i="/plan-svc/action",r="/plan-svc/api/action";t["a"]={mpapi:{getSysEnum:i+"/iop/common/getSysEnum",queryIopTemplate:i+"/iop/excellentTemplateManager/queryIopTemplate",exportStandardScene:i+"/iop/excellentTemplateManager/exportStandardScene",saveOrCancelExcellentTemplate:i+"/iop/excellentTemplateManager/saveOrCancelExcellentTemplate",uploadBeforeView:i+"/iop/excellentTemplateManager/uploadBeforeView",uploadTemplateToIop:i+"/iop/excellentTemplateManager/uploadTemplateToIop",updateDistributePersion:i+"/iop/approve/template/updateDistributePersion",queryActivityInfo:"/plan-svc/action/iop/approve/template/jx/queryActivityInfo",getActivityTemplate:i+"/iop/approve/template/getActivityTemplate",queryDistributePersion:i+"/iop/approve/template/queryDistributePersion",dismissAndRelatedCustomerGroups:r+"/tactics/tacticsManager/dismissAndRelatedCustomerGroups",getAllCustommerGroups:r+"/tactics/tacticsManager/getAllCustommerGroups",getUnityCampInfo:r+"/tactics/tacticsManager/getUnityCampInfo",getUnityTacticsDetail:r+"/tactics/tacticsManager/getUnityTacticsDetail",getWholeNetworkCampInfos:r+"/tactics/tacticsManager/getWholeNetworkCampInfos",isPopUps:r+"/tactics/tacticsManager/isPopUps",saveWholeNetwork:r+"/tactics/tacticsManager/saveWholeNetwork",searchUnityTactics:r+"/tactics/tacticsManager/jx/searchUnityTactics",unityRecomendDetail:r+"/tactics/tacticsManager/unityRecomendDetail",findMcdAutoSceneById:i+"/mcdAutoModel/findMcdAutoSceneById",getProduct:i+"/mcdAutoModel/getProduct",deleteMcdAutoSceneDef:i+"/mcdAutoModel/deleteMcdAutoSceneDef",findMcdAutoSceneByTable:i+"/mcdAutoModel/findMcdAutoSceneByTable",findMcdAutoSceneList:i+"/mcdAutoModel/findMcdAutoSceneList",queryChannelAdivList:i+"/mcdAutoModel/queryChannelAdivList",queryProductList:i+"/mcdAutoModel/queryProductList",querySmsChannelCount:i+"/mcdAutoModel/querySmsChannelCount",quoteMcdAutoModel:i+"/mcdAutoModel/quoteMcdAutoModel",saveMcdAutoSceneDef:i+"/mcdAutoModel/saveMcdAutoSceneDef",updateMcdAutoModel:i+"/mcdAutoModel/updateMcdAutoModel",updateMcdAutoSceneDef:i+"/mcdAutoModel/updateMcdAutoSceneDef",updateMcdAutoSceneDefStatId:i+"/mcdAutoModel/updateMcdAutoSceneDefStatId",queryTopics:i+"/topic/queryTopics",tacticsCreateQueryIopTemplate:r+"/tactics/tacticsCreate/queryIopTemplate",quickCreateTacticsByIopTemplate:r+"/tactics/quickTactics/quickCreateTacticsByIopTemplate",qucickApprove:r+"/tactics/quickTactics/qucickApprove"}}},"13d5":function(e,t,a){"use strict";var i=a("23e7"),r=a("d58f").left,n=a("a640"),s=a("2d00"),o=a("605d"),l=!o&&s>79&&s<83,c=l||!n("reduce");i({target:"Array",proto:!0,forced:c},{reduce:function(e){var t=arguments.length;return r(this,e,t,t>1?arguments[1]:void 0)}})},"15c6":function(e,t,a){},"1a66":function(e,t,a){},"1b05":function(e,t,a){"use strict";a("9f80")},"20a2":function(e,t,a){},2508:function(e,t,a){"use strict";a("40a6")},"271a":function(e,t,a){"use strict";var i=a("cb2d"),r=a("e330"),n=a("577e"),s=a("d6d6"),o=URLSearchParams,l=o.prototype,c=r(l.getAll),d=r(l.has),u=new o("a=1");!u.has("a",2)&&u.has("a",void 0)||i(l,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return d(this,e);var i=c(this,e);s(t,1);var r=n(a),o=0;while(o<i.length)if(i[o++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},"2d02":function(e,t,a){"use strict";a("32ee")},"31b1":function(e,t,a){"use strict";const i="/plan-svc/api/action",r="/plan-svc/action",n="/approve-svc/",s="/element-svc/";t["a"]={channel:{queryIopTemplate:i+"/tactics/tacticsCreate/queryIopTemplate",queryTopics:i+"/topic/queryTopics",getTemplateData:n+"jx/cmpApprovalProcessConf/getApproveConfig",getApproveConfig:n+"cmpApprovalProcessConf/getApproveConfig",getNextApprovers:n+"jx/cmpApproveProcessInstance/getNodeApprover",saveChannel:i+"/tactics/tacticsCreate/save",deleteCustom:i+"/custgroup/custGroupManager/deleteCustom",getMoreMyCustom:i+"/custgroup/custGroupManager/getMoreMyCustom",viewCustGroupDetail:i+"/custgroup/custGroupManager/viewCustGroupDetail",queryMmsTemplates:r+"/mmsTemplates/queryMmsTemplates",deleteMmsTemplateLists:r+"/mmsTemplates/createTactics/deleteMmsTemplateLists",updateMmsTemplate:r+"/mmsTemplates/updateMmsTemplate",smsContentBatchDel:i+"/smsTemplates/smsContentBatchDel",smsContentDel:i+"/smsTemplates/smsContentDel",smsContentEdit:i+"/smsTemplates/smsContentEdit",smsContentSaveOrUpdate:i+"/smsTemplates/smsContentSaveOrUpdate",smsTemplateOffline:i+"/smsTemplates/smsTemplateOffline",smsTemplates:i+"/smsTemplates/smsTemplates",smsTemplateSaveOrUpdate:i+"/smsTemplates/smsTemplateSaveOrUpdate",delPlanExclusivity:s+"mcd-plan-exclusivity/delPlanExclusivity",exportPlanExcluTemplate:s+"mcd-plan-exclusivity/exportPlanExcluTemplate",getPlanExclusivityInfo:s+"mcd-plan-exclusivity/getPlanExclusivityInfo",getPlanExclusivityList:s+"mcd-plan-exclusivity/getPlanExclusivityList",queryPlanDefList:s+"mcd-plan-exclusivity/queryPlanDefList",queryPlanExclusivity:s+"mcd-plan-exclusivity/queryPlanExclusivity",saveOrUpdatePlanExclusivity:s+"mcd-plan-exclusivity/saveOrUpdatePlanExclusivity",savePlanExclusivity:s+"mcd-plan-exclusivity/savePlanExclusivity",updatePlanExclusivity:s+"mcd-plan-exclusivity/updatePlanExclusivity",uploadPlanExcluFile:s+"mcd-plan-exclusivity/uploadPlanExcluFile",approveRecord:s+"api/mcdDimMaterialApprove/jx/approveRecord",getMaterialApprover:s+"api/mcdDimMaterialApprove/jx/getMaterialApprover",commitProcess:"/approve-svc/cmpApproveProcessInstance/commitProcess",subMaterialApprove:s+"api/mcdDimMaterialApprove/jx/subMaterialApprove",queryCommunicationUsers:"/plan-svc/api/channelMaterial/jx/queryCommunicationUsers",queryCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/queryCommunicationTask",addCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTask",addCommunicationTaskBatch:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTaskBatch",communicationAppTask:"/approve-svc/jx/cmpApproveProcessInstance/communicationAppTask",queryChannelExecInfo:"/plan-svc/mcd/camp/channelExec/queryChannelExecInfo",queryChannelExecList:"/plan-svc/mcd/camp/channelExec/queryChannelExecList",deleteChannelPrompt:"/plan-svc/mcd/chan/prompt/deleteChannelPrompt",queryChannelPrompt:"/plan-svc/mcd/chan/prompt/queryChannelPrompt",saveOrUpdateChannelPrompt:"/plan-svc/mcd/chan/prompt/saveOrUpdateChannelPrompt",uploaChanPromptFile:"/plan-svc/mcd/chan/prompt/uploaChanPromptFile",chanAndPlanMarketingHistory:"/plan-svc/mcd/marketing/history/chanAndPlanMarketingHistory",custContactNumMarketingHistory:"/plan-svc/mcd/marketing/history/custContactNumMarketingHistory",custSuccessRateMarketingHistory:"/plan-svc/mcd/marketing/history/custSuccessRateMarketingHistory",planMarketingHistory:"/plan-svc/mcd/marketing/history/planMarketingHistory",caculateContactUserNum:"/pec-timing/mcd/user/contact/caculateContactUserNum",caculateOrderUserNum:"/pec-timing/mcd/user/contact/caculateOrderUserNum",queryCampScene:"/plan-svc/api/action/tactics/tacticsCreate/jx/queryCampScene"}}},"32ee":function(e,t,a){},"336a":function(e,t,a){"use strict";a("8f49")},3532:function(e,t,a){"use strict";a("06fa")},3623:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l}));const i=[{label:"主题营销类",value:"0"},{label:"AI辅助营销类",value:"1"},{label:"AI智能营销类",value:"2"}],r=[{label:"标签",value:"0"},{label:"客群",value:"1"},{label:"基础客群+标签",value:"2"}],n={Root:"营销主题",Scene:"场景",Product:"推荐产品",Channel:"推荐渠道",Customer:"推荐客群",AiHelp:"AI辅助推荐",AiIntelligent:"AI智能推荐",AiCustomer:"AI推荐客群",LabelOptimize:"AI瘦身",AiScene:"客群范围"},s="0",o=6,l=[null,"一","二","三","四","五","六","七","八","九","十"]},"3eeb":function(e,t,a){"use strict";a("20a2")},"3f74":function(e,t,a){},4038:function(e,t,a){"use strict";a("0a1b")},"40a6":function(e,t,a){},4339:function(e,t,a){"use strict";a("c885")},"4ddc":function(e,t,a){"use strict";a.d(t,"d",(function(){return w})),a.d(t,"f",(function(){return C})),a.d(t,"c",(function(){return D})),a.d(t,"e",(function(){return I})),a.d(t,"b",(function(){return x})),a.d(t,"a",(function(){return k}));a("13d5");var i=a("2b0e"),r=a("5a0c"),n=a.n(r),s=(a("d9e2"),a("f8c9"),a("14d9"),a("88a7"),a("271a"),a("5494"),a("8afd"));const o="undefined"!==typeof window,l=(Object.prototype.toString,e=>"string"===typeof e),c=()=>{};function d(e){Object(s["getCurrentInstance"])()&&Object(s["onUnmounted"])(e)}const u=o?window:void 0;o&&window.document,o&&window.navigator;function p(e){var t,a;const i=Object(s["unref"])(e);return null!==(a=null===(t=i)||void 0===t?void 0:t.$el)&&void 0!==a?a:i}function m(...e){let t,a,i,r;if(l(e[0])?([a,i,r]=e,t=u):[t,a,i,r]=e,!t)return c;let n=c;const o=Object(s["watch"])(()=>Object(s["unref"])(t),e=>{n(),e&&(e.addEventListener(a,i,r),n=()=>{e.removeEventListener(a,i,r),n=c})},{immediate:!0,flush:"post"}),p=()=>{o(),n()};return d(p),p}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function h(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(a[i[r]]=e[i[r]])}return a}function g(e,t,a={}){const{window:i=u}=a,r=h(a,["window"]);let n;const o=i&&"ResizeObserver"in i,l=()=>{n&&(n.disconnect(),n=void 0)},c=Object(s["watch"])(()=>p(e),e=>{l(),o&&i&&e&&(n=new i.ResizeObserver(t),n.observe(e,r))},{immediate:!0,flush:"post"}),m=()=>{l(),c()};return d(m),{isSupported:o,stop:m}}var v;(function(e){e["UP"]="UP",e["RIGHT"]="RIGHT",e["DOWN"]="DOWN",e["LEFT"]="LEFT",e["NONE"]="NONE"})(v||(v={}));function f({window:e=u,initialWidth:t=1/0,initialHeight:a=1/0}={}){if(!e)return{width:Object(s["ref"])(t),height:Object(s["ref"])(a)};const i=Object(s["ref"])(e.innerWidth),r=Object(s["ref"])(e.innerHeight);return m("resize",()=>{i.value=e.innerWidth,r.value=e.innerHeight},{passive:!0}),{width:i,height:r}}var y=a("0fea"),b=a("5c96");function w(e,t){return e?t?e+" 到 "+t:e:"-"}function C(e,t){return e&&t?n()(e).format("YYYY-MM-DD")+" 到 "+n()(t).format("YYYY-MM-DD"):""}function D(e,t){return(e||"")+"  "+(t||"")}function S({now:e,max:t,min:a}){if(void 0!==t&&void 0===a)return Math.min(e,t);if(void 0===t&&void 0!==a)return Math.max(e,a);if(void 0!==t&&void 0!==a){if(e>=a&&e<=t)return e;if(e<a)return a;if(e>t)return t}return e}function I({elementRef:e,reduce:t=0,maxHeight:a,minHeight:r}){const n=Object(i["ref"])(0);return g(e,e=>{const[i]=e,{height:s}=i.contentRect;n.value=S({now:s-t,max:a,min:r})}),n}function x(){return f()}async function k(e){const t=await Object(y["i"])("/preview-svc-group/api/fivePeriod/preview/checkCampsegPreviewed",e);if(t.length){const e="<p>部分策略已在预演计划中，请在对应预演计划进行预演或调整</p>",a=t.map(e=>`<p>策略${e.campsegId}被预演计划${e.code}占用</p>`).join("");b["Message"].warning({dangerouslyUseHTMLString:!0,message:e+a})}return!!t.length}},"4e3f":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"query-form-cell-wrap"},[t("el-form",{ref:"form",attrs:{model:e.sizeForm,"label-width":e.labelWidth,"label-position":e.labelPosition,size:"mini"}},e._l(e.list,(function(a,i){return t("el-form-item",{key:i+"list",class:{disabled:a.disabled},attrs:{"label-width":a.labelWidth||e.labelWidth,label:a.label+"："}},[Array.isArray(a.values)?t("div",{staticClass:"fe-d-flex"},[t("div",{staticClass:"radio-box"},[a.dateType?e._e():t("el-radio-group",{attrs:{size:"mini",disabled:a.disabled},on:{change:function(t){return e.radioChange(e.sizeForm.radioModel[i],i)}},model:{value:e.sizeForm.radioModel[i],callback:function(t){e.$set(e.sizeForm.radioModel,i,t)},expression:"sizeForm.radioModel[index]"}},e._l(a.values,(function(a,i){return t("el-radio-button",{key:i+"listValues",attrs:{label:a.value}},[e._v(e._s(a.label)+" ")])})),1)],1),t("div",{staticClass:"date-box"},["date"===a.dateType?t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"month"===a.dateType?t("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"daterange"===a.dateType?t("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"datetimerange"===a.dateType?t("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e()],1)]):t("div",{staticClass:"input-box"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入内容"},on:{change:e.inputChange},model:{value:e.sizeForm.radioModel[i],callback:function(t){e.$set(e.sizeForm.radioModel,i,t)},expression:"sizeForm.radioModel[index]"}})],1)])})),1)],1)},r=[],n={name:"QueryFormCell",props:{labelWidth:{type:String,default:()=>"82px"},labelPosition:{type:String,default:()=>"right"},defaultSizeForm:{type:Object,default:()=>({})},list:{type:Array,default:()=>[{label:"数据时间",values:[{label:"不限",value:"1"}],isDate:!0,dateType:"date"},{label:"接口类型",values:[{label:"不限",value:"不限"},{label:"文件接口",value:"文件接口"}],isDate:!1}]}},data(){return{sizeForm:{dateModel:["2021-05-08","",""],radioModel:["自定义","不限","不限","不限"]}}},watch:{defaultSizeForm:{handler:function(e){this.sizeForm=e},deep:!0,immediate:!0}},methods:{radioChange(e,t){this.sizeForm.dateModel&&this.$set(this.sizeForm.dateModel,t,"date"===this.list[t].dateType?"":["",""]),this.$emit("queryForm",{index:t,value:e,form:this.sizeForm})},dateChange(e){e?(this.$set(this.sizeForm.dateModel,0,e),this.$emit("queryForm",{value:e,form:this.sizeForm})):this.$emit("emptyFrom",this.sizeForm)},inputChange(e){e&&this.$emit("queryForm",{value:e,form:this.sizeForm})}}},s=n,o=(a("a28d"),a("2877")),l=Object(o["a"])(s,i,r,!1,null,null,null);t["a"]=l.exports},"512e":function(e,t,a){},5494:function(e,t,a){"use strict";var i=a("83ab"),r=a("e330"),n=a("edd0"),s=URLSearchParams.prototype,o=r(s.forEach);i&&!("size"in s)&&n(s,"size",{get:function(){var e=0;return o(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"54b1":function(e,t,a){"use strict";a("a235")},"5a0c":function(e,t,a){!function(t,a){e.exports=a()}(0,(function(){"use strict";var e=1e3,t=6e4,a=36e5,i="millisecond",r="second",n="minute",s="hour",o="day",l="week",c="month",d="quarter",u="year",p="date",m="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}},f=function(e,t,a){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(a)+e},y={s:f,z:function(e){var t=-e.utcOffset(),a=Math.abs(t),i=Math.floor(a/60),r=a%60;return(t<=0?"+":"-")+f(i,2,"0")+":"+f(r,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var i=12*(a.year()-t.year())+(a.month()-t.month()),r=t.clone().add(i,c),n=a-r<0,s=t.clone().add(i+(n?-1:1),c);return+(-(i+(a-r)/(n?r-s:s-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:l,d:o,D:p,h:s,m:n,s:r,ms:i,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",w={};w[b]=v;var C="$isDayjsObject",D=function(e){return e instanceof k||!(!e||!e[C])},S=function e(t,a,i){var r;if(!t)return b;if("string"==typeof t){var n=t.toLowerCase();w[n]&&(r=n),a&&(w[n]=a,r=n);var s=t.split("-");if(!r&&s.length>1)return e(s[0])}else{var o=t.name;w[o]=t,r=o}return!i&&r&&(b=r),r||!i&&b},I=function(e,t){if(D(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new k(a)},x=y;x.l=S,x.i=D,x.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var k=function(){function v(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[C]=!0}var f=v.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(h);if(i){var r=i[2]-1||0,n=(i[7]||"0").substring(0,3);return a?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,n)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,n)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return x},f.isValid=function(){return!(this.$d.toString()===m)},f.isSame=function(e,t){var a=I(e);return this.startOf(t)<=a&&a<=this.endOf(t)},f.isAfter=function(e,t){return I(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<I(e)},f.$g=function(e,t,a){return x.u(e)?this[t]:this.set(a,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,t){var a=this,i=!!x.u(t)||t,d=x.p(e),m=function(e,t){var r=x.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return i?r:r.endOf(o)},h=function(e,t){return x.w(a.toDate()[e].apply(a.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},g=this.$W,v=this.$M,f=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case u:return i?m(1,0):m(31,11);case c:return i?m(1,v):m(0,v+1);case l:var b=this.$locale().weekStart||0,w=(g<b?g+7:g)-b;return m(i?f-w:f+(6-w),v);case o:case p:return h(y+"Hours",0);case s:return h(y+"Minutes",1);case n:return h(y+"Seconds",2);case r:return h(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(e,t){var a,l=x.p(e),d="set"+(this.$u?"UTC":""),m=(a={},a[o]=d+"Date",a[p]=d+"Date",a[c]=d+"Month",a[u]=d+"FullYear",a[s]=d+"Hours",a[n]=d+"Minutes",a[r]=d+"Seconds",a[i]=d+"Milliseconds",a)[l],h=l===o?this.$D+(t-this.$W):t;if(l===c||l===u){var g=this.clone().set(p,1);g.$d[m](h),g.init(),this.$d=g.set(p,Math.min(this.$D,g.daysInMonth())).$d}else m&&this.$d[m](h);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[x.p(e)]()},f.add=function(i,d){var p,m=this;i=Number(i);var h=x.p(d),g=function(e){var t=I(m);return x.w(t.date(t.date()+Math.round(e*i)),m)};if(h===c)return this.set(c,this.$M+i);if(h===u)return this.set(u,this.$y+i);if(h===o)return g(1);if(h===l)return g(7);var v=(p={},p[n]=t,p[s]=a,p[r]=e,p)[h]||1,f=this.$d.getTime()+i*v;return x.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||m;var i=e||"YYYY-MM-DDTHH:mm:ssZ",r=x.z(this),n=this.$H,s=this.$m,o=this.$M,l=a.weekdays,c=a.months,d=a.meridiem,u=function(e,a,r,n){return e&&(e[a]||e(t,i))||r[a].slice(0,n)},p=function(e){return x.s(n%12||12,e,"0")},h=d||function(e,t,a){var i=e<12?"AM":"PM";return a?i.toLowerCase():i};return i.replace(g,(function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return x.s(t.$y,4,"0");case"M":return o+1;case"MM":return x.s(o+1,2,"0");case"MMM":return u(a.monthsShort,o,c,3);case"MMMM":return u(c,o);case"D":return t.$D;case"DD":return x.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(a.weekdaysMin,t.$W,l,2);case"ddd":return u(a.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(n);case"HH":return x.s(n,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return h(n,s,!0);case"A":return h(n,s,!1);case"m":return String(s);case"mm":return x.s(s,2,"0");case"s":return String(t.$s);case"ss":return x.s(t.$s,2,"0");case"SSS":return x.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(i,p,m){var h,g=this,v=x.p(p),f=I(i),y=(f.utcOffset()-this.utcOffset())*t,b=this-f,w=function(){return x.m(g,f)};switch(v){case u:h=w()/12;break;case c:h=w();break;case d:h=w()/3;break;case l:h=(b-y)/6048e5;break;case o:h=(b-y)/864e5;break;case s:h=b/a;break;case n:h=b/t;break;case r:h=b/e;break;default:h=b}return m?h:x.a(h)},f.daysInMonth=function(){return this.endOf(c).$D},f.$locale=function(){return w[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),i=S(e,t,!0);return i&&(a.$L=i),a},f.clone=function(){return x.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},v}(),M=k.prototype;return I.prototype=M,[["$ms",i],["$s",r],["$m",n],["$H",s],["$W",o],["$M",c],["$y",u],["$D",p]].forEach((function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,k,I),e.$i=!0),I},I.locale=S,I.isDayjs=D,I.unix=function(e){return I(1e3*e)},I.en=w[b],I.Ls=w,I.p={},I}))},"605d":function(e,t,a){"use strict";var i=a("da84"),r=a("c6b6");e.exports="process"===r(i.process)},6129:function(e,t,a){},6555:function(e,t,a){},"792c":function(e,t,a){},"88a7":function(e,t,a){"use strict";var i=a("cb2d"),r=a("e330"),n=a("577e"),s=a("d6d6"),o=URLSearchParams,l=o.prototype,c=r(l.append),d=r(l["delete"]),u=r(l.forEach),p=r([].push),m=new o("a=1&a=2&b=3");m["delete"]("a",1),m["delete"]("b",void 0),m+""!=="a=2"&&i(l,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return d(this,e);var i=[];u(this,(function(e,t){p(i,{key:t,value:e})})),s(t,1);var r,o=n(e),l=n(a),m=0,h=0,g=!1,v=i.length;while(m<v)r=i[m++],g||r.key===o?(g=!0,d(this,r.key)):h++;while(h<v)r=i[h++],r.key===o&&r.value===l||c(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},8914:function(e,t,a){"use strict";a("3f74")},"8afd":function(e,t,a){"use strict";a.r(t),a.d(t,"createApp",(function(){return c})),a.d(t,"Vue2",(function(){return s})),a.d(t,"isVue2",(function(){return r})),a.d(t,"isVue3",(function(){return n})),a.d(t,"install",(function(){return l})),a.d(t,"warn",(function(){return o})),a.d(t,"Fragment",(function(){return u})),a.d(t,"Transition",(function(){return p})),a.d(t,"TransitionGroup",(function(){return m})),a.d(t,"Teleport",(function(){return h})),a.d(t,"Suspense",(function(){return g})),a.d(t,"KeepAlive",(function(){return v})),a.d(t,"hasInjectionContext",(function(){return f}));a("d9e2");var i=a("2b0e");a.d(t,"Vue",(function(){return i["default"]})),a.d(t,"EffectScope",(function(){return i["EffectScope"]})),a.d(t,"computed",(function(){return i["computed"]})),a.d(t,"customRef",(function(){return i["customRef"]})),a.d(t,"defineAsyncComponent",(function(){return i["defineAsyncComponent"]})),a.d(t,"defineComponent",(function(){return i["defineComponent"]})),a.d(t,"del",(function(){return i["del"]})),a.d(t,"effectScope",(function(){return i["effectScope"]})),a.d(t,"getCurrentInstance",(function(){return i["getCurrentInstance"]})),a.d(t,"getCurrentScope",(function(){return i["getCurrentScope"]})),a.d(t,"h",(function(){return i["h"]})),a.d(t,"inject",(function(){return i["inject"]})),a.d(t,"isProxy",(function(){return i["isProxy"]})),a.d(t,"isReactive",(function(){return i["isReactive"]})),a.d(t,"isReadonly",(function(){return i["isReadonly"]})),a.d(t,"isRef",(function(){return i["isRef"]})),a.d(t,"isShallow",(function(){return i["isShallow"]})),a.d(t,"markRaw",(function(){return i["markRaw"]})),a.d(t,"mergeDefaults",(function(){return i["mergeDefaults"]})),a.d(t,"nextTick",(function(){return i["nextTick"]})),a.d(t,"onActivated",(function(){return i["onActivated"]})),a.d(t,"onBeforeMount",(function(){return i["onBeforeMount"]})),a.d(t,"onBeforeUnmount",(function(){return i["onBeforeUnmount"]})),a.d(t,"onBeforeUpdate",(function(){return i["onBeforeUpdate"]})),a.d(t,"onDeactivated",(function(){return i["onDeactivated"]})),a.d(t,"onErrorCaptured",(function(){return i["onErrorCaptured"]})),a.d(t,"onMounted",(function(){return i["onMounted"]})),a.d(t,"onRenderTracked",(function(){return i["onRenderTracked"]})),a.d(t,"onRenderTriggered",(function(){return i["onRenderTriggered"]})),a.d(t,"onScopeDispose",(function(){return i["onScopeDispose"]})),a.d(t,"onServerPrefetch",(function(){return i["onServerPrefetch"]})),a.d(t,"onUnmounted",(function(){return i["onUnmounted"]})),a.d(t,"onUpdated",(function(){return i["onUpdated"]})),a.d(t,"provide",(function(){return i["provide"]})),a.d(t,"proxyRefs",(function(){return i["proxyRefs"]})),a.d(t,"reactive",(function(){return i["reactive"]})),a.d(t,"readonly",(function(){return i["readonly"]})),a.d(t,"ref",(function(){return i["ref"]})),a.d(t,"set",(function(){return i["set"]})),a.d(t,"shallowReactive",(function(){return i["shallowReactive"]})),a.d(t,"shallowReadonly",(function(){return i["shallowReadonly"]})),a.d(t,"shallowRef",(function(){return i["shallowRef"]})),a.d(t,"toRaw",(function(){return i["toRaw"]})),a.d(t,"toRef",(function(){return i["toRef"]})),a.d(t,"toRefs",(function(){return i["toRefs"]})),a.d(t,"triggerRef",(function(){return i["triggerRef"]})),a.d(t,"unref",(function(){return i["unref"]})),a.d(t,"useAttrs",(function(){return i["useAttrs"]})),a.d(t,"useCssModule",(function(){return i["useCssModule"]})),a.d(t,"useCssVars",(function(){return i["useCssVars"]})),a.d(t,"useListeners",(function(){return i["useListeners"]})),a.d(t,"useSlots",(function(){return i["useSlots"]})),a.d(t,"version",(function(){return i["version"]})),a.d(t,"watch",(function(){return i["watch"]})),a.d(t,"watchEffect",(function(){return i["watchEffect"]})),a.d(t,"watchPostEffect",(function(){return i["watchPostEffect"]})),a.d(t,"watchSyncEffect",(function(){return i["watchSyncEffect"]}));var r=!0,n=!1,s=i["default"],o=i["default"].util.warn;function l(){}function c(e,t){var a,r={},n={config:i["default"].config,use:i["default"].use.bind(i["default"]),mixin:i["default"].mixin.bind(i["default"]),component:i["default"].component.bind(i["default"]),provide:function(e,t){return r[e]=t,this},directive:function(e,t){return t?(i["default"].directive(e,t),n):i["default"].directive(e)},mount:function(n,s){return a||(a=new i["default"](Object.assign({propsData:t},e,{provide:Object.assign(r,e.provide)})),a.$mount(n,s),a)},unmount:function(){a&&(a.$destroy(),a=void 0)}};return n}function d(e){return{setup(){throw new Error("[vue-demi] "+e+" is not supported in Vue 2. It's provided to avoid compiler errors.")}}}var u=d("Fragment"),p=d("Transition"),m=d("TransitionGroup"),h=d("Teleport"),g=d("Suspense"),v=d("KeepAlive");function f(){return!!Object(i["getCurrentInstance"])()}},"8f49":function(e,t,a){},"91d9":function(e,t,a){"use strict";a("a8de")},"9be9":function(e,t,a){},"9f54":function(e,t,a){"use strict";a("fd60")},"9f80":function(e,t,a){},a061:function(e,t,a){},a1be:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"product-container"},[t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabsClick},model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[t("el-tab-pane",{attrs:{label:"我的策略",name:"product",lazy:!0}},[t("div",[t("my-marketing",{attrs:{QueryFormList:e.QueryFormCell}})],1)]),t("el-tab-pane",{attrs:{label:"全部策略",name:"content",lazy:!0}},[t("all-marketing",{attrs:{QueryFormList:e.QueryFormCell}})],1),t("el-tab-pane",{attrs:{label:"我参与的策略",name:"participation",lazy:!0}},[t("Joinmarketing",{attrs:{QueryFormList:e.QueryFormCell}})],1),t("el-tab-pane",{attrs:{label:"策略预演",name:"preview",lazy:!0}},[t("MarketingRehearsal",{attrs:{QueryFormList:e.QueryFormCell}})],1),t("el-tab-pane",{attrs:{label:"我的主题",name:"theme",lazy:!0}},[t("Theme",{attrs:{QueryFormList:e.QueryFormCell}})],1),t("el-tab-pane",{attrs:{label:"我的模版",name:"template",lazy:!0}},[t("Template",{attrs:{QueryFormList:e.TemplateQueryFormCell}})],1)],1)],1)},r=[],n=(a("14d9"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"product-container"},[t("div",{staticClass:"product-search"},[t("div",{staticClass:"top-search-part"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入策略编号或名称"},model:{value:e.queryForm.keyWords,callback:function(t){e.$set(e.queryForm,"keyWords","string"===typeof t?t.trim():t)},expression:"queryForm.keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:function(t){return e.QuerykeyWords()}},slot:"suffix"})]),t("el-select",{staticClass:"input-search",attrs:{placeholder:"请选择策略类型",clearable:""},on:{change:e.QuerykeyWords},model:{value:e.queryForm.unityCampsegId,callback:function(t){e.$set(e.queryForm,"unityCampsegId",t)},expression:"queryForm.unityCampsegId"}},[t("el-option",{attrs:{label:"全部策略",value:"0"}}),t("el-option",{attrs:{label:"全网统一策略",value:"1"}})],1),t("el-select",{staticClass:"input-search",attrs:{placeholder:"请选择类型",clearable:""},on:{change:e.QuerykeyWords},model:{value:e.queryForm.campCreateType,callback:function(t){e.$set(e.queryForm,"campCreateType",t)},expression:"queryForm.campCreateType"}},[t("el-option",{attrs:{label:"手动",value:"1"}}),t("el-option",{attrs:{label:"导入",value:"2"}})],1),t("div",{staticClass:"event input-search",on:{click:function(t){return e.openSceneDilog(!0)}}},[e.queryForm.cepEventId?t("span",[e._v(e._s(e.queryForm.eventName))]):t("span",{staticClass:"placeholder"},[e._v("请选择事件")]),e.queryForm.cepEventId?t("i",{staticClass:"el-icon-circle-close",on:{click:e.clearEvent}}):e._e()]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入创建人"},model:{value:e.queryForm.creator,callback:function(t){e.$set(e.queryForm,"creator","string"===typeof t?t.trim():t)},expression:"queryForm.creator"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:function(t){return e.QuerykeyWords()}},slot:"suffix"})]),t("el-button",{attrs:{type:"primary",size:"mini",loading:e.exportLoading},on:{click:e.exportData}},[e._v("导出")])],1),t("div",{staticStyle:{padding:"20px 0 0 20px",background:"#F7F7F7",display:"flex","align-items":"center"}},[t("span",[t("label",{staticStyle:{"margin-right":"10px"}},[e._v("开始时间：")]),t("el-date-picker",{staticStyle:{width:"230px"},attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至"},on:{change:function(t){return e.dateChange("campStartDay",t)}},model:{value:e.queryTime1,callback:function(t){e.queryTime1=t},expression:"queryTime1"}})],1),t("span",[t("label",{staticStyle:{margin:"0 10px 0 30px"}},[e._v("结束时间：")]),t("el-date-picker",{staticStyle:{width:"230px"},attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至"},on:{change:function(t){return e.dateChange("campEndDay",t)}},model:{value:e.queryTime2,callback:function(t){e.queryTime2=t},expression:"queryTime2"}})],1)]),t("query-form-cell",{attrs:{list:e.QueryFormList,defaultSizeForm:e.sizeFrom},on:{queryForm:e.InquireAbout}})],1),t("div",{staticClass:"table-part"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"Mp-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"campsegId","row-class-name":e.tableRowClassName,load:e.queryChildren,lazy:!0,height:"calc(100% - 40px)","tree-props":{children:"children",hasChildren:"hasChild"}}},[t("el-table-column",{attrs:{label:"序号",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.index)+" ")]}}])}),t("el-table-column",{attrs:{prop:"",label:"策略编号及名称",width:"550","header-align":"center",align:"left","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.gotoDetail(a.row)}}},[a.row.isFocus?t("i",{staticClass:"el-icon-star-on",staticStyle:{color:"#2F87EC"}}):e._e(),e._v(" "+e._s(a.row.campsegId)+"  "+e._s(a.row.campsegName)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"address",label:"执行周期",align:"center","min-width":"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.subset?"":e.ValidationTimeRange(a.row.startDate)+"到"+e.ValidationTimeRange(a.row.endDate)))])]}}])}),t("el-table-column",{attrs:{label:"策略状态",align:"center","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"status-box"},[e.VerificationDatenoeName(a.row)?e._e():t("el-tooltip",{attrs:{content:"近1天内有活动策划任务到期",placement:"top"}},[t("i",{staticClass:"el-icon-warning"})]),t("StatusStep",{attrs:{status:a.row.campsegStatId,statusName:a.row.campsegStatName}})],1)]}}])}),t("el-table-column",{attrs:{prop:"createUsername",label:"创建人",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",fixed:"right",width:"300px",align:"left","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var i;return[t("el-button",{staticClass:"mr-10",on:{click:function(t){return e.copy(a.row)}}},[e._v("复制")]),0==a.row.isMy?[a.row.subset?t("div",[54===a.row.status||59===a.row.status?t("el-dropdown",{staticClass:"mr-10"},[t("el-button",[e._v(" 策略管控"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[59===a.row.status?t("el-dropdown-item",{nativeOn:{click:function(t){return e.StrategyContinue(a.row)}}},[e._v("继续")]):e._e(),54===a.row.status?t("el-dropdown-item",{nativeOn:{click:function(t){return e.StrategySuspend(a.row)}}},[e._v("暂停")]):e._e(),54===a.row.status?t("el-dropdown-item",{nativeOn:{click:function(t){return e.termination(a.row)}}},[e._v("终止")]):e._e()],1)],1):e._e()],1):t("div",{staticStyle:{display:"inline-block"}},[a.row.isActivityShow?t("el-dropdown",{staticClass:"mr-10"},[t("el-button",[e._v(" 策略管控"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a.row.isContinueShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.StrategyContinue(a.row)}}},[e._v("继续")]):e._e(),a.row.isStopShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.StrategySuspend(a.row)}}},[e._v("暂停")]):e._e(),a.row.isEndShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.termination(a.row)}}},[e._v(" 终止")]):e._e(),a.row.isDelayShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.Strategydelay(a.row)}}},[e._v("延期")]):e._e(),a.row.isReleaseShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.campRelease(a.row)}}},[e._v("发布")]):e._e()],1)],1):e._e(),a.row.isManageShow?t("el-dropdown",{staticClass:"mr-10",attrs:{size:"medium"}},[t("el-button",[e._v(" 管理"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a.row.isFocus?t("el-dropdown-item",{nativeOn:{click:function(t){return e.joinFocus(a.row)}}},[e._v("加入重点")]):e._e(),a.row.isReminShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.reminderApprove(a.row)}}},[e._v("催单")]):e._e(),a.row.isSubmitShow||a.row.ispreviewCamp&&"0"===a.row.previewCamp?t("el-dropdown-item",{nativeOn:{click:function(t){return e.Submit(a.row)}}},[e._v("提交 ")]):e._e(),a.row.isModifyShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.SceneModif(a.row)}}},[e._v("修改")]):e._e(),a.row.isDeleteShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.Delete(a.row)}}},[e._v("删除 ")]):e._e()],1)],1):e._e(),20==a.row.campsegStatId&&null!==(i=a.row.channelIds)&&void 0!==i&&i.includes("959")?t("el-button",{attrs:{loading:e.approveLoading},on:{click:function(t){return e.directApprove(a.row)}}},[e._v("一键审批")]):e._e()],1)]:e._e()]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryForm.current,"page-sizes":[10,20,30,40],"page-size":e.queryForm.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("ComplexScene",{ref:"SceneDialog",attrs:{title:"事件中心"},on:{addScene:e.addScene}}),t("span",{staticClass:"origin"},[t("el-dialog",{attrs:{title:"选择审批人",visible:e.dialogVisible,width:"450px",top:"30vh","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.nextNodesApproverloading,expression:"nextNodesApproverloading"}],staticClass:"Contact-mtp"},[t("el-form",{ref:"nextNodesApproverForm"},e._l(e.nextNodesList.nextNodesApprover,(function(a,i){return t("el-form-item",{key:i,attrs:{label:a.node.nodeName+"：",rules:[{required:!0,message:"请选择审批人",trigger:"blur"}]}},[t("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:e.ApproverUser[i],callback:function(t){e.$set(e.ApproverUser,i,t)},expression:"ApproverUser[index]"}},e._l(a.approverUser,(function(e,a){return t("el-option",{key:a,attrs:{label:e.userName,value:e.userId}})})),1)],1)})),1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.submitSaveLoading},on:{click:function(t){return e.KeptSumbit(!1)}}},[e._v("提 交")])],1)]),t("el-dialog",{attrs:{title:e.suspendtitle,visible:e.suspend,width:"500px",top:"30vh","destroy-on-close":!0,"append-to-body":""},on:{"update:visible":function(t){e.suspend=t}}},[t("div",{staticClass:"Contact-mtp"},[t("el-form",{ref:"terminationFrom",attrs:{"label-width":"80px",model:e.terminationFrom}},[t("el-form-item",{attrs:{label:e.suspendtitle,prop:"Reasons",rules:[{required:!0,message:"请输入"+e.suspendtitle,trigger:"blur"}]}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:500},placeholder:"请填写"+e.suspendtitle},model:{value:e.terminationFrom.Reasons,callback:function(t){e.$set(e.terminationFrom,"Reasons",t)},expression:"terminationFrom.Reasons"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.suspend=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.preservation}},[e._v("保 存")])],1)]),t("el-dialog",{attrs:{title:"策略复制",visible:e.CopyBullet,width:"400px",top:"30vh","append-to-body":""},on:{"update:visible":function(t){e.CopyBullet=t}}},[t("div",{staticClass:"CopyBullet"},[t("span",[e._v("确定要复制测试 "),t("span",{staticClass:"color"},[e._v("["+e._s(this.name)+"]")]),e._v(" 吗?")])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.CopyBullet=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.CopySumbit}},[e._v("保 存")])],1)]),t("el-dialog",{attrs:{title:"日期选择",visible:e.Strategydialog,width:"400px",top:"30vh","append-to-body":""},on:{"update:visible":function(t){e.Strategydialog=t}}},[t("div",{staticClass:"CopyBullet"},[t("el-form",{ref:"endDateFrom",attrs:{model:e.endDateFrom,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"日期选择",prop:"endDate",rules:[{required:!0,message:"请选择日期",trigger:"blur"}]}},[t("el-date-picker",{attrs:{placeholder:"选择日期时间","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","picker-options":e.expireTimeOption},model:{value:e.endDateFrom.endDate,callback:function(t){e.$set(e.endDateFrom,"endDate",t)},expression:"endDateFrom.endDate"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.Strategydialog=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateCampsegEndDate}},[e._v("保 存")])],1)]),t("delete-dialog",{ref:"Delete",attrs:{name:e.name,id:e.id,title:"策略"},on:{Dlete:e.strategylDelete}}),t("marketing-test",{ref:"MarketingText"}),t("preview",{ref:"previve"})],1)],1)}),s=[],o=(a("88a7"),a("271a"),a("5494"),a("4e3f")),l=a("0fea"),c=a("d370"),d=a("12fc"),u=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"系统提示",visible:e.dialogVisible,width:"412px",top:"25vh","append-to-body":"","close-on-click-modal":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"Dialog-center"},[t("p",[e._v("确定要删除"+e._s(e.title))]),t("span",[e._v("["+e._s(e.name)+"]?")])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"info"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.DleteCallback}},[e._v("确 定")])],1)])],1)},p=[],m={name:"DleteDialog",props:{name:String,title:String,id:String},data(){return{dialogVisible:!1}},methods:{showDelete(){this.dialogVisible=!0},DleteCallback(){this.$emit("Dlete",this.id),this.dialogVisible=!1}}},h=m,g=(a("dba2"),a("dead"),a("2877")),v=Object(g["a"])(h,u,p,!1,null,"88fd869c",null),f=v.exports,y=a("b893"),b=a("31b1"),w=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"营销测试",visible:e.dialogVisible,width:"1100px","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{rules:e.rules,size:"mini",inline:!0,model:e.formInline,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"测试号码",prop:"phoneNo"}},[t("el-input",{attrs:{placeholder:"测试号码"},model:{value:e.formInline.phoneNo,callback:function(t){e.$set(e.formInline,"phoneNo","string"===typeof t?t.trim():t)},expression:"formInline.phoneNo"}})],1),t("el-form-item",{attrs:{label:"渠道",prop:"channelId"}},[t("el-select",{attrs:{placeholder:"渠道"},model:{value:e.formInline.channelId,callback:function(t){e.$set(e.formInline,"channelId",t)},expression:"formInline.channelId"}},[t("el-option",{attrs:{label:e.Channeldata.CHANNEL_NAME,value:e.Channeldata.CHANNEL_ID}})],1)],1),t("el-form-item",{attrs:{label:"运营位",prop:"adivId"}},[t("el-select",{attrs:{placeholder:"运营位",disabled:""},model:{value:e.formInline.adivId,callback:function(t){e.$set(e.formInline,"adivId",t)},expression:"formInline.adivId"}},[t("el-option",{attrs:{label:e.Channeldata.ADIV_NAME,value:e.Channeldata.CHANNEL_ADIV_ID}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.Sumbit}},[e._v("保存测试账号")])],1)],1)],1),t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"300px"}},[t("el-table-column",{attrs:{prop:"PHONE_NO",label:"测试号码",width:"180"}}),t("el-table-column",{attrs:{prop:"CHANNEL_NAME",label:"渠道"}}),t("el-table-column",{attrs:{prop:"ADIV_NAME",label:"运营位"}}),t("el-table-column",{attrs:{prop:"address",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.Text(a.row)}}},[e._v("测试")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.DeletePhone(a.row)}}},[e._v("删除")])]}}])})],1)],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":e.pageData.pageSizeList,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)]),t("el-dialog",{attrs:{title:"测试结果",visible:e.result,width:"1000px",top:"25vh","append-to-body":""},on:{"update:visible":function(t){e.result=t}}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TextDataList,height:"250px"}},[t("el-table-column",{attrs:{prop:"PHONE_NO",label:"测试号码",width:"180"}}),t("el-table-column",{attrs:{prop:"CHANNEL_NAME",label:"策略名称"}}),t("el-table-column",{attrs:{prop:"ADIV_NAME",label:"产品名称"}}),t("el-table-column",{attrs:{prop:"address",label:"推荐用语",width:"180"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.result=!1}}},[e._v("关 闭")])],1)],1)],1)},C=[],D=(a("d9e2"),{data(){var e=(e,t,a)=>{let i=/^1[345789]\d{9}$/;i.test(t)?a():a(new Error("请输入11位手机号"))};return{dialogVisible:!1,tableData:[],formInline:{adivId:"",channelId:"",expirationDate:"1",phoneNo:""},Channeldata:{},pageData:{currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0},campsegId:"",result:!1,TextDataList:[],rules:{phoneNo:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"number",validator:e,message:"请输入11位有效手机号号码",trigger:["blur","change"]}],channelId:[{required:!0,message:"请选择渠道",trigger:"blur"}],adivId:[{required:!0,message:"请选择运营位",trigger:"blur"}]}}},methods:{TextShow(e){this.dialogVisible=!0,this.tableData=[],this.campsegId=e.CAMPSEG_ID,this.Channeldata=e.CHANNEL_AND_ADIV[0],this.formInline.adivId=this.Channeldata.CHANNEL_ADIV_ID,this.formInline.channelId=this.Channeldata.CHANNEL_ID,this.searchTestCampseg(this.Channeldata)},async Sumbit(){await Object(l["i"])(c["a"].mpapi.saveTestCampseg,this.formInline).then(e=>{200===e.status&&(this.$message.success("保存测试号码成功"),this.searchTestCampseg(this.Channeldata))})},Text(e){let t={adivId:e.CHANNEL_ID,campsegId:this.campsegId,channelId:e.CHANNEL_ID,expirationDate:e.EXPIRATION_DATE,phoneNo:e.PHONE_NO};this.$confirm("确定要测试吗?","系统提示",{confirmButtonText:"确定",cancelButtonText:"关 闭",type:"warning"}).then(async()=>{await Object(l["i"])(c["a"].mpapi.testCampsegForTest,t).then(e=>{this.TextDataList=e.result,this.TextTotal=e.totalSize,this.result=!0})}).catch(()=>{})},async DeletePhone(e){let t={adivId:e.ADIV_ID,channelId:e.CHANNEL_ID,expirationDate:"1",phoneNo:e.PHONE_NO};await Object(l["i"])(c["a"].mpapi.deleteTestCamp,t).then(e=>{200===e.status&&(this.$message.success("删除测试账号成功"),this.searchTestCampseg(this.Channeldata))})},async searchTestCampseg(e){let t={adivId:e.CHANNEL_ADIV_ID,channelId:e.CHANNEL_ID,expirationDate:"1",pageNum:this.pageData.currentPage,pageSize:this.pageData.pageSize};await Object(l["i"])(c["a"].mpapi.searchTestCampseg,t).then(e=>{this.tableData=e.result,this.Total=e.totalSize})},handleSizeChange(e){this.pageData.pageSize=e,this.searchTestCampseg(this.Channeldata)},handleCurrentChange(e){this.pageData.currentPage=e,this.searchTestCampseg(this.Channeldata)}}}),S=D,I=Object(g["a"])(S,w,C,!1,null,"ba727a4e",null),x=I.exports,k=a("c1df"),M=a.n(k),_=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"用户群触达规模预演",visible:e.dialogVisible,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{width:"100%"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.preData}},[t("el-table-column",{attrs:{prop:"campsegId",label:"子策划id"}}),t("el-table-column",{attrs:{prop:"channelId",label:"渠道id"}}),t("el-table-column",{attrs:{prop:"planId",label:"产品id"}}),t("el-table-column",{attrs:{prop:"custgroupId",label:"客群id"}}),t("el-table-column",{attrs:{prop:"previewTime",label:"预演日期"}}),t("el-table-column",{attrs:{prop:"status",label:"预演状态"}}),t("el-table-column",{attrs:{prop:"estimatedUsers",label:"预期触达用户数"}}),t("el-table-column",{attrs:{prop:"blackWhiteListNum",label:"黑白名单过滤数量"}}),t("el-table-column",{attrs:{prop:"exclusionNum",label:"产品互斥数量"}}),t("el-table-column",{attrs:{prop:"orderedNum",label:"已订购互斥数量"}}),t("el-table-column",{attrs:{prop:"frequencyNum",label:"频次控制数量"}}),t("el-table-column",{attrs:{prop:"actualUsers",label:"实际触达用户数"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},F=[],q={data(){return{dialogVisible:!1,campsegId:"",preData:null}},watch:{dialogVisible(e){e&&this.getInfo()}},methods:{PreviewShow(e){this.campsegId=e,this.dialogVisible=!0},getInfo(){Object(l["i"])(c["a"].mpapi.queryPreviewList,{campsegPid:"202112131505292976038"}).then(e=>{this.preData=e})}}},T=q,O=(a("ab00"),Object(g["a"])(T,_,F,!1,null,"82ed1d68",null)),N=O.exports,A=a("aedd"),L=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step-box"},e._l(5,(function(a,i){return t("div",{key:i,class:["out-circle",i<=e.index?"active":""],attrs:{"data-name":e.index==i?e.statusName:""}},[t("div",{staticClass:"inner-circle"}),t("div",{staticClass:"pointer"})])})),0)},j=[],$={name:"StatusStep",props:{status:{type:Number,default:20},statusName:{type:String,default:"草稿"}},computed:{index(){return 20==this.status?0:this.status>=40&&this.status<50?1:this.status>=30&&this.status<40?2:this.status>=50&&this.status<60?3:this.status>=90?4:0}},data(){return{statusList:Object.freeze([{label:"草稿",name:"20"},{label:"预演中",name:"31"},{label:"预演完成",name:"32"},{label:"预演失败",name:"33"},{label:"审批中",name:"40"},{label:"审批退回",name:"41"},{label:"测试中",name:"48"},{label:"测试不通过",name:"49"},{label:"待执行",name:"50"},{label:"执行中",name:"54"},{label:"暂停",name:"59"},{label:"完成",name:"90"},{label:"终止",name:"91"}])}},methods:{}},R=$,P=(a("4038"),Object(g["a"])(R,L,j,!1,null,"5f7908d5",null)),E=P.exports,z={props:["QueryFormList"],components:{QueryFormCell:o["a"],DeleteDialog:f,MarketingTest:x,Preview:N,ComplexScene:A["a"],StatusStep:E},data(){return{exportLoading:!1,queryTime1:null,queryTime2:null,sizeFrom:{radioModel:["",""]},tableData:[],queryForm:{cepEventId:"",eventName:"",unityCampsegId:"0",campCreateType:"",campStartDay:"",campEndDay:"",campsegStatId:"",isSelectMy:0,channelId:"",keyWords:"",creator:"",current:1,size:10},pageData:{total:0},option:"",dialogVisible:!1,Approved:[],id:"",name:"",currentRow:{},suspend:!1,terminationFrom:{Reasons:""},suspendtitle:"",CopyBullet:!1,endDateFrom:{endDate:""},Strategydialog:!1,expireTimeOption:{},Approval:[],loading:!1,nextNodesList:[],ApproverUser:[],TemplateData:{},nextNodesApproverloading:!1,value:"",options:[],approveLoading:!1,submitSaveLoading:!1}},computed:{},created(){this.fillDefaultData(),this.searchIMcdCamp()},methods:{fillDefaultData(){const e=this.$route.params;var t,a;2==e.tab&&e.queryParams&&(this.queryForm={...this.queryForm,...JSON.parse(this.$route.params.queryParams)},this.queryTime1=(null===(t=this.queryForm.campStartDay)||void 0===t?void 0:t.split(","))||null,this.queryTime2=(null===(a=this.queryForm.campEndDay)||void 0===a?void 0:a.split(","))||null,this.sizeFrom.radioModel=[this.queryForm.campsegStatId,this.queryForm.channelId])},async queryChildren(e,t,a){await Object(l["i"])(c["a"].mpapi.searchIMcdCamp,{pid:e.campsegId}).then(t=>{var i=t.records;i.map(t=>{t.subset=!0,t.campsegRootId=e.campsegId}),a(i)})},openSceneDilog(e){this.$refs["SceneDialog"].showDialog(e)},clearEvent(e){e.stopPropagation(),this.queryForm.cepEventId="",this.queryForm.eventName="",this.$refs["SceneDialog"].clearEvent(),this.QuerykeyWords()},addScene(e){this.queryForm.cepEventId=e.eventId,this.queryForm.eventName=e.eventName,this.QuerykeyWords()},ValidationTimeRange(e){return M()(e).format("YYYY-MM-DD")},async searchIMcdCamp(){try{this.loading=!0;const e=await Object(l["i"])(c["a"].mpapi.searchIMcdCampJx,this.queryForm);this.tableData=e.records;for(const t in e.records){this.tableData[t].index=Number(t)+1,this.tableData[t].hasChildren=!0;const a=parseInt(e.records[t].campsegStatId);"0"===e.records[t].isMy&&(20!==a&&41!==a&&40!==a&&32!==a||(this.tableData[t].isManageShow=!0,40===a&&(this.tableData[t].isReminShow=!0),41===a&&(this.tableData[t].isModifyShow=!0),20===a?(this.tableData[t].ispreviewCamp=!0,this.tableData[t].isModifyShow=!0,this.tableData[t].isDeleteShow=!0):32===a&&(this.tableData[t].isSubmitShow=!0,this.tableData[t].isModifyShow=!0,this.tableData[t].isDeleteShow=!0)),40!==a&&54!==a&&59!==a&&49!==a&&50!==a&&52!==a||(this.tableData[t].isActivityShow=!0,40===a&&(this.tableData[t].isDelayShow=!0),54===a&&(this.tableData[t].isEndShow=!0,this.tableData[t].isStopShow=!0,this.tableData[t].isDelayShow=!0,this.tableData[t].isTextShow=!0),59===a&&(this.tableData[t].isEndShow=!0,this.tableData[t].isContinueShow=!0,this.tableData[t].isDelayShow=!0),50===a&&(this.tableData[t].isEndShow=!0,this.tableData[t].isDelayShow=!0),52===a&&(this.tableData[t].isReleaseShow=!0)))}this.pageData.total=e.total}catch(e){}finally{this.loading=!1}},QuerykeyWords(){this.queryForm.current=1,this.searchIMcdCamp()},dateChange(e,t){this.queryForm[e]=t?t.join(","):"",this.QuerykeyWords()},InquireAbout({form:{radioModel:e}}){this.queryForm.campsegStatId=e[0],this.queryForm.channelId=e[1],this.queryForm.current=1,this.searchIMcdCamp()},emptyFrom(e){this.queryForm.campsegStatId=e.radioModel[1],this.queryForm.channelId=e.radioModel[2],this.queryForm.campStartDay="",this.queryForm.campEndDay="",this.queryForm.current=1,this.searchIMcdCamp()},async Submit(e){this.currentRow=e,this.ApproverUser=[],this.nextNodesApproverloading=!0,this.VerificationDate(e)&&(this.id=e.campsegId,null===e.approveFlowId?Object(l["i"])(b["a"].channel.getTemplateData).then(t=>{const a=e.channelIds,i={berv:t.berv,instanceId:null,nodeId:"",processId:t.processId,triggerParm:{channelId:a.join(",")}};this.getNextApprovers(i)}):this.getNextApprovers({instanceId:e.approveFlowId}),this.dialogVisible=!0)},getNextApprovers(e,t=!1){Object(l["i"])(b["a"].channel.getNextApprovers,e,void 0,this.$retryDelay).then(e=>{this.nextNodesList=e,this.nextNodesList.nextNodesApprover.map((e,t)=>{var a;this.ApproverUser[t]=(null===(a=e.approverUser[0])||void 0===a?void 0:a.userId)||""})}).catch(a=>{var i;null!==(i=a.message)&&void 0!==i&&i.includes("timeout")&&!0!==t&&this.getNextApprovers(e,!0)}).finally(()=>{this.nextNodesApproverloading=!1})},PreviewClick(e){this.$refs.previve.PreviewShow(e.campsegId)},Delete(e){this.id=e.campsegId,this.name=e.campsegName,this.$refs["Delete"].showDelete()},SceneModif(e){this.$router.push({path:"/MarketingPlanning/MpHome",query:{campId:e.campsegId}})},StrategySuspend(e){this.suspend=!0,this.id=e.campsegId,this.terminationFrom.Reasons="",this.suspendtitle="暂停原因"},async StrategyContinue(e){await Object(l["i"])(c["a"].mpapi.campRestart,{id:e.campsegId}).then(()=>{this.$message.success("策略启动成功"),this.searchIMcdCamp()})},termination(e){this.suspend=!0,this.id=e.campsegId,this.terminationFrom.Reasons="",this.suspendtitle="终止原因"},copy(e){this.id=e.campsegId,this.name=e.campsegName,this.CopyBullet=!0},Strategydelay(e){this.id=e.campsegId,this.Strategydialog=!0,this.EndTime=e.endDate,this.expireTimeOption={},this.endDateFrom.endDate="",this.expireTimeOption.disabledDate=t=>t.getTime()<new Date(e.endDate).getTime()},async campRelease(e){await Object(l["i"])(c["a"].mpapi.campRelease,{id:e.campsegId}).then(()=>{this.id="",this.$message.success("策略发布成功"),this.searchIMcdCamp()})},async joinFocus(e){},async reminderApprove(e){await Object(l["i"])(c["a"].mpapi.reminderApprove,{campsegRootId:e.campsegId}).then(e=>{"0"===e.remindFlag?this.$alert("不够30分钟不允许催单","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"}):"1"===e.remindFlag?this.$alert("操作失败,请重试","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"}):this.$message.success("催单成功")})},StrategyTest(e){this.$refs["MarketingText"].TextShow(e)},async CopySumbit(){await Object(l["i"])(c["a"].mpapi.copyCampseg,{campsegRootId:this.id}).then(()=>{this.id="",this.name="",this.$message.success("一键复制策略成功"),this.CopyBullet=!1,this.searchIMcdCamp()})},KeptSumbit(e=!1){if(this.ApproverUser.length!==this.nextNodesList.nextNodesApprover.length)this.$message.error("请选择审批人后在提交");else{var t,a=[];this.nextNodesList.nextNodesApprover.filter((e,t)=>{var i=this.ApproverUser[t],r=[];e.approverUser.map(e=>{i===e.userId&&r.push(e)}),a.push({approverUser:r,node:e.node})});const i={approveType:"IMCD",channelId:null===(t=this.currentRow.channelIds)||void 0===t?void 0:t.join(","),nodeId:this.nextNodesList.nodeId,processId:this.nextNodesList.processId,berv:this.nextNodesList.berv,businessId:this.id,submitStatus:1,nextNodesApprover:a};this.submitSaveLoading=!0,Object(l["i"])(c["a"].mpapi.subApprove,i,void 0,this.$retryDelay).then(e=>{this.$message.success("策略提交审批成功"),this.searchIMcdCamp(),this.dialogVisible=!1,this.id=""}).catch(t=>{var a;null!==(a=t.message)&&void 0!==a&&a.includes("timeout")&&!0!==e&&this.KeptSumbit(!0)}).finally(()=>{this.submitSaveLoading=!1})}},preservation(){this.$refs.terminationFrom.validate(async e=>{if(e){let e={id:this.id,pauseCommen:this.terminationFrom.Reasons};"暂停原因"===this.suspendtitle?await Object(l["i"])(c["a"].mpapi.campPause,e).then(()=>{this.id="",this.terminationFrom.Reasons="",this.$message.success("策略暂停成功"),this.suspend=!1,this.searchIMcdCamp()}):(e={id:this.id,cancelComment:this.terminationFrom.Reasons},await Object(l["i"])(c["a"].mpapi.campCancel,e).then(()=>{this.id="",this.terminationFrom.Reasons="",this.$message.success("策略终止成功"),this.suspend=!1,this.searchIMcdCamp()}))}})},async strategylDelete(e){await Object(l["i"])(c["a"].mpapi.delCampseg,{id:e}).then(()=>{this.id="",this.$message.success("策略删除成功"),this.searchIMcdCamp()})},updateCampsegEndDate(){this.$refs.endDateFrom.validate(async e=>{if(e){let e={id:this.id,endDate:this.endDateFrom.endDate+" 23:59:59"};return await Object(l["i"])(c["a"].mpapi.updateCampsegEndDate,e).then(()=>{this.id="",this.endDateFrom.endDate="",this.EndTime="",this.$message.success("延期成功"),this.Strategydialog=!1,this.searchIMcdCamp()}),!0}return!1})},VerificationDate(e){let t=Object(y["b"])(e.endDate);return!(t<0)||(this.$alert("提交策略已不在有效期，不允许操作","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"}),!1)},VerificationDatenoeName(e){if(90===e.campsegStatId||91===e.campsegStatId)return!0;let t=Object(y["b"])(e.endDate);return!(t<1&&t>=0)},tabsClick(e){this.queryForm.current=1,e.name},tableRowClassName(e){const t=e.rowIndex%2;return 0===t?"gray-row":""},handleSizeChange(e){this.queryForm.current=1,this.queryForm.size=e,this.searchIMcdCamp()},handleCurrentChange(e){this.queryForm.current=e,this.searchIMcdCamp()},async directApprove(e){this.approveLoading=!0;try{await Object(l["i"])(d["a"].mpapi.qucickApprove+"?campsegRootId="+e.campsegId);this.searchIMcdCamp()}catch(t){}finally{this.approveLoading=!1}},gotoDetail(e){let t={};t=e.campsegRootId?{campsegRootId:e.campsegRootId,campsegId:e.campsegId}:{campsegRootId:e.campsegId},this.$router.push({path:"/MarketingPlanning/MarketingDetails",query:{...t,backName:this.$router.currentRoute.name,tab:2,queryParams:JSON.stringify(this.queryForm)}})},async exportData(){try{this.exportLoading=!0;const{data:e}=await Object(l["b"])(c["a"].mpapi.exportCampJx,this.queryForm),t=new Blob([e],{type:e.type}),a="营销策略列表.xlsx";if("download"in document.createElement("a")){const e=document.createElement("a");e.download=a,e.style.display="none",e.href=URL.createObjectURL(t),document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}else navigator.msSaveBlob(t,a)}catch(e){}finally{this.exportLoading=!1}}}},U=z,V=(a("b394"),a("3532"),a("c56c"),a("fd11"),a("a6b6"),Object(g["a"])(U,n,s,!1,null,"6b90afbc",null)),W=V.exports,B=function(){var e=this,t=e._self._c;return t("div",{staticClass:"product-container"},[t("div",{staticClass:"product-search"},[t("div",{staticClass:"top-search-part"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入策略编号或名称"},model:{value:e.queryForm.keyWords,callback:function(t){e.$set(e.queryForm,"keyWords","string"===typeof t?t.trim():t)},expression:"queryForm.keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:function(t){return e.QuerykeyWords()}},slot:"suffix"})]),t("el-select",{staticClass:"input-search",attrs:{placeholder:"请选择策略类型",clearable:""},on:{change:e.QuerykeyWords},model:{value:e.queryForm.unityCampsegId,callback:function(t){e.$set(e.queryForm,"unityCampsegId",t)},expression:"queryForm.unityCampsegId"}},[t("el-option",{attrs:{label:"全部策略",value:"0"}}),t("el-option",{attrs:{label:"全网统一策略",value:"1"}})],1),t("el-select",{staticClass:"input-search",attrs:{placeholder:"请选择类型",clearable:""},on:{change:e.QuerykeyWords},model:{value:e.queryForm.campCreateType,callback:function(t){e.$set(e.queryForm,"campCreateType",t)},expression:"queryForm.campCreateType"}},[t("el-option",{attrs:{label:"手动",value:"1"}}),t("el-option",{attrs:{label:"导入",value:"2"}})],1),t("div",{staticClass:"event input-search",on:{click:function(t){return e.openSceneDilog(!0)}}},[e.queryForm.cepEventId?t("span",[e._v(e._s(e.queryForm.eventName))]):t("span",{staticClass:"placeholder"},[e._v("请选择事件")]),e.queryForm.cepEventId?t("i",{staticClass:"el-icon-circle-close",on:{click:e.clearEvent}}):e._e()]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入创建人"},model:{value:e.queryForm.creator,callback:function(t){e.$set(e.queryForm,"creator","string"===typeof t?t.trim():t)},expression:"queryForm.creator"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:function(t){return e.QuerykeyWords()}},slot:"suffix"})]),t("el-button",{attrs:{type:"primary",size:"mini",loading:e.exportLoading},on:{click:e.exportData}},[e._v("导出")])],1),t("div",{staticStyle:{padding:"20px 0 0 20px",background:"#F7F7F7",display:"flex","align-items":"center"}},[t("span",[t("label",{staticStyle:{"margin-right":"10px"}},[e._v("开始时间：")]),t("el-date-picker",{staticStyle:{width:"230px"},attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至"},on:{change:function(t){return e.dateChange("campStartDay",t)}},model:{value:e.queryTime1,callback:function(t){e.queryTime1=t},expression:"queryTime1"}})],1),t("span",[t("label",{staticStyle:{margin:"0 10px 0 30px"}},[e._v("结束时间：")]),t("el-date-picker",{staticStyle:{width:"230px"},attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至"},on:{change:function(t){return e.dateChange("campEndDay",t)}},model:{value:e.queryTime2,callback:function(t){e.queryTime2=t},expression:"queryTime2"}})],1)]),t("query-form-cell",{attrs:{list:e.QueryFormList,defaultSizeForm:e.sizeFrom},on:{queryForm:e.InquireAbout}})],1),t("div",{staticClass:"table-part"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"Mp-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"campsegId","row-class-name":e.tableRowClassName,load:e.queryChildren,lazy:!0,height:"calc(100% - 50px)","tree-props":{children:"children",hasChildren:"hasChild"}}},[t("el-table-column",{attrs:{label:"序号",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.index)+" ")]}}])}),t("el-table-column",{attrs:{label:"策略编号及名称",width:"550","header-align":"center",align:"left","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.gotoDetail(a.row)}}},[a.row.isFocus?t("i",{staticClass:"el-icon-star-on",staticStyle:{color:"#2F87EC"}}):e._e(),e._v(" "+e._s(a.row.campsegId)+"  "+e._s(a.row.campsegName)+" ")])]}}])}),t("el-table-column",{attrs:{label:"执行周期",align:"center","min-width":"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.subset?"":e.ValidationTimeRange(a.row.startDate)+" 到 "+e.ValidationTimeRange(a.row.endDate)))])]}}])}),t("el-table-column",{attrs:{prop:"campsegStatName",label:"策略状态","header-align":"left",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.campsegStatName)+" "),e.VerificationDatenoeName(a.row)?e._e():t("el-tooltip",{attrs:{content:"近1天内有活动策划任务到期",placement:"top"}},[t("i",{staticClass:"el-icon-warning",staticStyle:{"font-size":"15px",color:"rgba(46, 135, 235, 0.3) !important"}})])]}}])}),e._e(),t("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"300px",align:"left","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var i;return[a.row.subset?t("div",[54===a.row.status||59===a.row.status?t("el-dropdown",{staticClass:"mr-10"},[t("el-button",[e._v(" 策略管控"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[59===a.row.status?t("el-dropdown-item",{nativeOn:{click:function(t){return e.StrategyContinue(a.row)}}},[e._v("继续")]):e._e(),54===a.row.status?t("el-dropdown-item",{nativeOn:{click:function(t){return e.StrategySuspend(a.row)}}},[e._v("暂停")]):e._e(),54===a.row.status?t("el-dropdown-item",{nativeOn:{click:function(t){return e.termination(a.row)}}},[e._v("终止")]):e._e()],1)],1):e._e()],1):t("div",[t("el-button",{staticClass:"mr-10",on:{click:function(t){return e.copy(a.row)}}},[e._v("复制")]),a.row.isActivityShow?t("el-dropdown",{staticClass:"mr-10"},[t("el-button",[e._v(" 策略管控"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a.row.isContinueShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.StrategyContinue(a.row)}}},[e._v("继续")]):e._e(),a.row.isStopShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.StrategySuspend(a.row)}}},[e._v("暂停")]):e._e(),a.row.isEndShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.termination(a.row)}}},[e._v(" 终止")]):e._e(),a.row.isDelayShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.Strategydelay(a.row)}}},[e._v("延期")]):e._e(),a.row.isReleaseShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.campRelease(a.row)}}},[e._v("发布")]):e._e()],1)],1):e._e(),a.row.isManageShow?t("el-dropdown",{staticClass:"mr-10",attrs:{size:"medium"}},[t("el-button",[e._v(" 管理"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a.row.isFocus?t("el-dropdown-item",{nativeOn:{click:function(t){return e.joinFocus(a.row)}}},[e._v("加入重点")]):e._e(),a.row.isReminShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.reminderApprove(a.row)}}},[e._v("催单")]):e._e(),a.row.isSubmitShow||a.row.ispreviewCamp&&"0"===a.row.previewCamp?t("el-dropdown-item",{nativeOn:{click:function(t){return e.Submit(a.row)}}},[e._v("提交 ")]):e._e(),a.row.isModifyShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.SceneModif(a.row)}}},[e._v("修改")]):e._e(),a.row.isDeleteShow?t("el-dropdown-item",{nativeOn:{click:function(t){return e.Delete(a.row)}}},[e._v("删除 ")]):e._e()],1)],1):e._e(),20==a.row.campsegStatId&&null!==(i=a.row.channelIds)&&void 0!==i&&i.includes("959")?t("el-button",{attrs:{loading:e.approveLoading},on:{click:function(t){return e.directApprove(a.row)}}},[e._v("一键审批")]):e._e()],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryForm.current,"page-sizes":[10,20,30,40],"page-size":e.queryForm.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("ComplexScene",{ref:"SceneDialog",attrs:{title:"事件中心"},on:{addScene:e.addScene}}),t("span",{staticClass:"origin"},[t("el-dialog",{attrs:{title:"执行详情",visible:e.execute,width:"600px",top:"30vh","destroy-on-close":!0,"append-to-body":""},on:{"update:visible":function(t){e.execute=t}}},[t("div",{staticClass:"book"},[0!=e.implementationDetails.length?t("ul",{staticStyle:{margin:"20px"}},e._l(e.implementationDetails,(function(a){return t("li",{key:a.id,staticClass:"timeline"},[t("div",{staticClass:"timestamp"},[e._v(e._s(a.stepEndDate.split("T").join(" ")))]),t("div",{staticClass:"card"},[t("div",{staticClass:"title"},[t("span",{staticClass:"fzrName"},[e._v(" "+e._s(e.TransStepStatus(a.stepStatus)))])]),t("div",{staticClass:"cardConter"},[e._v(" "+e._s(a.stepDesc)+" ")])])])})),0):t("div",{staticClass:"LoggingNoData"},[t("span",[e._v("暂无数据")])])])]),t("el-dialog",{attrs:{title:"选择审批人",visible:e.dialogVisible,"show-close":!1,width:"450px",top:"30vh","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.nextNodesApproverloading,expression:"nextNodesApproverloading"}],staticClass:"Contact-mtp"},[t("el-form",{ref:"nextNodesApproverForm"},e._l(e.nextNodesList.nextNodesApprover,(function(a,i){return t("el-form-item",{key:i,attrs:{label:a.node.nodeName+"：",rules:[{required:!0,message:"请选择审批人",trigger:"blur"}]}},[t("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:e.ApproverUser[i],callback:function(t){e.$set(e.ApproverUser,i,t)},expression:"ApproverUser[index]"}},e._l(a.approverUser,(function(e,a){return t("el-option",{key:a,attrs:{label:e.userName,value:e.userId}})})),1)],1)})),1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.submitSaveLoading},on:{click:function(t){return e.KeptSumbit(!1)}}},[e._v("提 交")])],1)]),t("el-dialog",{attrs:{title:e.suspendtitle,visible:e.suspend,width:"500px",top:"30vh","destroy-on-close":!0,"append-to-body":""},on:{"update:visible":function(t){e.suspend=t}}},[t("div",{staticClass:"Contact-mtp"},[t("el-form",{ref:"terminationFrom",attrs:{"label-width":"80px",model:e.terminationFrom}},[t("el-form-item",{attrs:{label:e.suspendtitle,prop:"Reasons",rules:[{required:!0,message:"请输入"+e.suspendtitle,trigger:"blur"}]}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:500},placeholder:"请填写"+e.suspendtitle},model:{value:e.terminationFrom.Reasons,callback:function(t){e.$set(e.terminationFrom,"Reasons",t)},expression:"terminationFrom.Reasons"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.suspend=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.preservation}},[e._v("保 存")])],1)]),t("el-dialog",{attrs:{title:"策略复制",visible:e.CopyBullet,width:"400px",top:"30vh","append-to-body":""},on:{"update:visible":function(t){e.CopyBullet=t}}},[t("div",{staticClass:"CopyBullet"},[t("span",[e._v("确定要复制测试 "),t("span",{staticClass:"color"},[e._v("["+e._s(this.name)+"]")]),e._v(" 吗?")])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.CopyBullet=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.CopySumbit}},[e._v("保 存")])],1)]),t("el-dialog",{attrs:{title:"日期选择",visible:e.Strategydialog,width:"400px",top:"30vh","append-to-body":"","destroy-on-close":!0},on:{"update:visible":function(t){e.Strategydialog=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.expireLoading,expression:"expireLoading"}],staticClass:"CopyBullet"},[t("el-form",{ref:"endDateFrom",attrs:{model:e.endDateFrom,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"日期选择",prop:"endDate",rules:[{required:!0,message:"请选择日期",trigger:"blur"}]}},[t("el-date-picker",{attrs:{placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd","picker-options":e.expireTimeOption},on:{change:e.expireTimeChange},model:{value:e.endDateFrom.endDate,callback:function(t){e.$set(e.endDateFrom,"endDate",t)},expression:"endDateFrom.endDate"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.Strategydialog=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateCampsegEndDate}},[e._v("保 存")])],1)]),t("delete-dialog",{ref:"Delete",attrs:{name:e.name,id:e.id,title:"策略"},on:{Dlete:e.strategylDelete}}),t("marketing-test",{ref:"MarketingText"}),t("preview",{ref:"previve"})],1)],1)},Q=[],H={props:["QueryFormList"],components:{QueryFormCell:o["a"],DeleteDialog:f,MarketingTest:x,Preview:N,ComplexScene:A["a"]},data(){return{exportLoading:!1,queryTime1:null,queryTime2:null,sizeFrom:{radioModel:["",""]},tableData:[],queryForm:{cepEventId:"",eventName:"",unityCampsegId:"0",campCreateType:"",campStartDay:"",campEndDay:"",campsegStatId:"",isSelectMy:1,channelId:"",keyWords:"",creator:"",current:1,size:10},pageData:{total:0},option:"",dialogVisible:!1,Approved:[],id:"",name:"",currentRow:{},implementationDetails:[],suspend:!1,execute:!1,terminationFrom:{Reasons:""},suspendtitle:"",CopyBullet:!1,endDateFrom:{endDate:""},expireLoading:!1,delayTimeOption:{delayTimeFormat:"yyyy-MM-dd",delayTimeTamp:0},Strategydialog:!1,expireTimeOption:{},Approval:[],loading:!1,nextNodesList:[],ApproverUser:[],TemplateData:{},nextNodesApproverloading:!1,value:"",options:[],approveLoading:!1,submitSaveLoading:!1}},computed:{},created(){this.echoCondition(),this.searchIMcdCamp()},methods:{async queryChildren(e,t,a){await Object(l["i"])(c["a"].mpapi.searchIMcdCamp,{pid:e.campsegId}).then(t=>{var i=t.records;i.map(t=>{t.subset=!0,t.campsegRootId=e.campsegId}),a(i)})},echoCondition(){const e=this.$route.params;var t,a;1==e.tab&&e.queryParams&&(this.queryForm={...this.queryForm,...JSON.parse(this.$route.params.queryParams)},this.queryTime1=(null===(t=this.queryForm.campStartDay)||void 0===t?void 0:t.split(","))||null,this.queryTime2=(null===(a=this.queryForm.campEndDay)||void 0===a?void 0:a.split(","))||null,this.sizeFrom.radioModel=[this.queryForm.campsegStatId,this.queryForm.channelId])},openSceneDilog(e){this.$refs["SceneDialog"].showDialog(e)},clearEvent(e){e.stopPropagation(),this.queryForm.cepEventId="",this.queryForm.eventName="",this.$refs["SceneDialog"].clearEvent(),this.QuerykeyWords()},addScene(e){this.queryForm.cepEventId=e.eventId,this.queryForm.eventName=e.eventName,this.QuerykeyWords()},ValidationTimeRange(e){return M()(e).format("YYYY-MM-DD")},async searchIMcdCamp(){try{this.loading=!0;const e=await Object(l["i"])(c["a"].mpapi.searchIMcdCampJx,this.queryForm);this.tableData=e.records;for(const t in e.records){this.tableData[t].index=Number(t)+1;const a=parseInt(e.records[t].campsegStatId);20!==a&&41!==a&&40!==a&&32!==a&&33!==a||(this.tableData[t].isManageShow=!0,40===a&&(this.tableData[t].isReminShow=!0),41===a&&(this.tableData[t].isModifyShow=!0,this.tableData[t].isDeleteShow=!0),20===a?(this.tableData[t].ispreviewCamp=!0,this.tableData[t].isModifyShow=!0,this.tableData[t].isDeleteShow=!0):32===a?(this.tableData[t].isSubmitShow=!0,this.tableData[t].isModifyShow=!0,this.tableData[t].isDeleteShow=!0):33===a&&(this.tableData[t].isDeleteShow=!0,this.tableData[t].isModifyShow=!0)),40!==a&&54!==a&&59!==a&&49!==a&&50!==a&&52!==a||(this.tableData[t].isActivityShow=!0,40===a&&(this.tableData[t].isDelayShow=!0),54===a&&(this.tableData[t].isEndShow=!0,this.tableData[t].isStopShow=!0,this.tableData[t].isDelayShow=!0,this.tableData[t].isTextShow=!0),59===a&&(this.tableData[t].isEndShow=!0,this.tableData[t].isContinueShow=!0,this.tableData[t].isDelayShow=!0),50===a&&(this.tableData[t].isEndShow=!0,this.tableData[t].isDelayShow=!0),52===a&&(this.tableData[t].isReleaseShow=!0))}this.pageData.total=e.total}catch(e){}finally{this.loading=!1}},QuerykeyWords(){this.queryForm.current=1,this.searchIMcdCamp()},dateChange(e,t){this.queryForm[e]=t?t.join(","):"",this.QuerykeyWords()},InquireAbout({form:{radioModel:e}}){this.queryForm.campsegStatId=e[0],this.queryForm.channelId=e[1],this.queryForm.current=1,this.searchIMcdCamp()},emptyFrom(e){this.queryForm.campsegStatId=e.radioModel[1],this.queryForm.channelId=e.radioModel[2],this.queryForm.campStartDay="",this.queryForm.campEndDay="",this.queryForm.current=1,this.searchIMcdCamp()},async Submit(e){this.currentRow=e,this.ApproverUser=[],this.nextNodesApproverloading=!0,this.VerificationDate(e)&&(this.id=e.campsegId,null===e.approveFlowId?Object(l["i"])(b["a"].channel.getTemplateData).then(t=>{const a=e.channelIds,i={berv:t.berv,instanceId:null,nodeId:"",processId:t.processId,triggerParm:{channelId:a.join(",")}};this.getNextApprovers(i)}):this.getNextApprovers({instanceId:e.approveFlowId}),this.dialogVisible=!0)},getNextApprovers(e,t=!1){Object(l["i"])(b["a"].channel.getNextApprovers,e,void 0,this.$retryDelay).then(e=>{this.nextNodesList=e,this.nextNodesList.nextNodesApprover.map((e,t)=>{var a;this.ApproverUser[t]=(null===(a=e.approverUser[0])||void 0===a?void 0:a.userId)||""})}).catch(a=>{var i;null!==(i=a.message)&&void 0!==i&&i.includes("timeout")&&!0!==t&&this.getNextApprovers(e,!0)}).finally(()=>{this.nextNodesApproverloading=!1})},PreviewClick(e){this.$refs.previve.PreviewShow(e.campsegId)},Delete(e){this.id=e.campsegId,this.name=e.campsegName,this.$refs["Delete"].showDelete()},SceneModif(e){this.$router.push({path:"/MarketingPlanning/MpHome",query:{campId:e.campsegId}})},StrategySuspend(e){this.suspend=!0,this.id=e.campsegId,this.terminationFrom.Reasons="",this.suspendtitle="暂停原因"},async ExecuteCondition(e){await Object(l["i"])(c["a"].mpapi.searchCampStepMonitor,{campsegId:e}).then(e=>{this.execute=!0,this.implementationDetails=e})},async StrategyContinue(e){await Object(l["i"])(c["a"].mpapi.campRestart,{id:e.campsegId}).then(()=>{this.$message.success("策略启动成功"),this.searchIMcdCamp()})},termination(e){this.suspend=!0,this.id=e.campsegId,this.terminationFrom.Reasons="",this.suspendtitle="终止原因"},copy(e){this.id=e.campsegId,this.name=e.campsegName,this.CopyBullet=!0},async Strategydelay(e){this.id=e.campsegId,this.Strategydialog=!0,this.EndTime=e.endDate,this.expireTimeOption={},this.endDateFrom.endDate="",this.expireTimeOption.disabledDate=t=>t.getTime()<new Date(e.endDate).getTime();try{this.expireLoading=!0;const{campSchemes:t}=await Object(l["i"])(c["a"].mpapi.getCampInfo,{id:e.campsegId});let a=new Date(t[0].customer[0].failTime).getTime()||0,i=new Date(t[0].product[0].planEndDate).getTime()||0;a>i?0!==i&&(this.delayTimeOption.delayTimeFormat=`延期日期大于产品失效日期(${t[0].product[0].planEndDate})，请修改延期日期`,this.delayTimeOption.delayTimeTamp=i):0!==a&&(this.delayTimeOption.delayTimeFormat=`延期日期大于客户群失效日期(${t[0].customer[0].failTime})，请修改延期日期`,this.delayTimeOption.delayTimeTamp=a)}catch(t){this.delayTimeOption.delayTimeTamp=0}finally{this.expireLoading=!1}},expireTimeChange(e){""===e&&this.$message.error("请选择延期时间"),0!==this.delayTimeOption.delayTimeTamp&&new Date(e).getTime()>this.delayTimeOption.delayTimeTamp&&this.$message.error(this.delayTimeOption.delayTimeFormat)},async campRelease(e){await Object(l["i"])(c["a"].mpapi.campRelease,{campsegRootId:e.campsegId}).then(()=>{this.id="",this.$message.success("策略发布成功"),this.searchIMcdCamp()})},async joinFocus(e){},async reminderApprove(e){await Object(l["i"])(c["a"].mpapi.reminderApprove,{campsegRootId:e.campsegId}).then(e=>{"0"===e.remindFlag?this.$alert("不够30分钟不允许催单","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"}):"1"===e.remindFlag?this.$alert("操作失败,请重试","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"}):this.$message.success("催单成功")})},StrategyTest(e){this.$refs["MarketingText"].TextShow(e)},async CopySumbit(){await Object(l["i"])(c["a"].mpapi.copyCampseg,{campsegRootId:this.id}).then(()=>{this.id="",this.name="",this.$message.success("一键复制策略成功"),this.CopyBullet=!1,this.searchIMcdCamp()})},KeptSumbit(e=!1){if(this.ApproverUser.length!==this.nextNodesList.nextNodesApprover.length)this.$message.error("请选择审批人后在提交");else{var t,a=[];this.nextNodesList.nextNodesApprover.filter((e,t)=>{var i=this.ApproverUser[t],r=[];e.approverUser.map(e=>{i===e.userId&&r.push(e)}),a.push({approverUser:r,node:e.node})});const i={approveType:"IMCD",channelId:null===(t=this.currentRow.channelIds)||void 0===t?void 0:t.join(","),nodeId:this.nextNodesList.nodeId,processId:this.nextNodesList.processId,berv:this.nextNodesList.berv,businessId:this.id,submitStatus:1,nextNodesApprover:a};this.submitSaveLoading=!0,Object(l["i"])(c["a"].mpapi.subApprove,i,void 0,this.$retryDelay).then(e=>{this.$message.success("策略提交审批成功"),this.searchIMcdCamp(),this.dialogVisible=!1,this.id=""}).catch(t=>{var a;null!==(a=t.message)&&void 0!==a&&a.includes("timeout")&&!0!==e&&this.KeptSumbit(!0)}).finally(()=>{this.submitSaveLoading=!1})}},preservation(){this.$refs.terminationFrom.validate(async e=>{if(e){let e={id:this.id,pauseCommen:this.terminationFrom.Reasons};"暂停原因"===this.suspendtitle?await Object(l["i"])(c["a"].mpapi.campPause,e).then(()=>{this.id="",this.terminationFrom.Reasons="",this.$message.success("策略暂停成功"),this.suspend=!1,this.searchIMcdCamp()}):(e={id:this.id,cancelComment:this.terminationFrom.Reasons},await Object(l["i"])(c["a"].mpapi.campCancel,e).then(()=>{this.id="",this.terminationFrom.Reasons="",this.$message.success("策略终止成功"),this.suspend=!1,this.searchIMcdCamp()}))}})},async strategylDelete(e){await Object(l["i"])(c["a"].mpapi.delCampseg,{id:e}).then(()=>{this.id="",this.$message.success("策略删除成功"),this.searchIMcdCamp()})},updateCampsegEndDate(){this.$refs.endDateFrom.validate(async e=>{if(e){let e={id:this.id,endDate:this.endDateFrom.endDate+" 23:59:59"};return await Object(l["i"])(c["a"].mpapi.updateCampsegEndDate,e).then(()=>{this.id="",this.endDateFrom.endDate="",this.EndTime="",this.$message.success("延期成功"),this.Strategydialog=!1,this.searchIMcdCamp()}),!0}return!1})},VerificationDate(e){let t=Object(y["b"])(e.endDate);return!(t<0)||(this.$alert("提交策略已不在有效期，不允许操作","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"}),!1)},VerificationDatenoeName(e){if(90===e.campsegStatId||91===e.campsegStatId)return!0;let t=Object(y["b"])(e.endDate);return!(t<1&&t>=0)},tabsClick(e){this.queryForm.current=1,e.name},tableRowClassName(e){const t=e.rowIndex%2;return 0===t?"gray-row":""},handleSizeChange(e){this.queryForm.current=1,this.queryForm.size=e,this.searchIMcdCamp()},handleCurrentChange(e){this.queryForm.current=e,this.searchIMcdCamp()},TransStepStatus(e){return["未开始","结束","失败"][e]},async directApprove(e){this.approveLoading=!0;try{await Object(l["i"])(d["a"].mpapi.qucickApprove+"?campsegRootId="+e.campsegId);this.searchIMcdCamp()}catch(t){}finally{this.approveLoading=!1}},gotoDetail(e){let t={};t=e.campsegRootId?{campsegRootId:e.campsegRootId,campsegId:e.campsegId}:{campsegRootId:e.campsegId},this.$router.push({path:"/MarketingPlanning/MarketingDetails",query:{...t,backName:this.$router.currentRoute.name,tab:1,queryParams:JSON.stringify(this.queryForm)}})},async exportData(){try{this.exportLoading=!0;const{data:e}=await Object(l["b"])(c["a"].mpapi.exportCampJx,this.queryForm),t=new Blob([e],{type:e.type}),a="营销策略列表.xlsx";if("download"in document.createElement("a")){const e=document.createElement("a");e.download=a,e.style.display="none",e.href=URL.createObjectURL(t),document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}else navigator.msSaveBlob(t,a)}catch(e){}finally{this.exportLoading=!1}}}},J=H,Y=(a("ca67"),a("c599"),a("9f54"),a("c16e"),a("fc1c"),Object(g["a"])(J,B,Q,!1,null,"68d16ac6",null)),K=Y.exports,G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"template-wrap-content"},[t("div",{staticClass:"query-part"},[t("div",{staticClass:"search-input"},[t("label",[e._v("策略编号/名称：")]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"215px"},attrs:{placeholder:"请输入策略编号或名称",clearable:""},model:{value:e.query.campsegIdOrName,callback:function(t){e.$set(e.query,"campsegIdOrName","string"===typeof t?t.trim():t)},expression:"query.campsegIdOrName"}})],1),t("div",{staticClass:"search-input"},[t("label",[e._v("创建人：")]),t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"215px"},attrs:{placeholder:"请输入创建人",clearable:""},model:{value:e.query.createUserId,callback:function(t){e.$set(e.query,"createUserId","string"===typeof t?t.trim():t)},expression:"query.createUserId"}})],1),t("div",{staticClass:"search-input"},[t("label",[e._v("渠道：")]),t("el-select",{staticStyle:{width:"215px"},attrs:{placeholder:"请选择渠道",clearable:""},model:{value:e.query.channelId,callback:function(t){e.$set(e.query,"channelId",t)},expression:"query.channelId"}},e._l(e.channelList,(function(e){return t("el-option",{key:e.value+e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"search-input"},[t("label",{staticClass:"event-label"},[e._v("事件：")]),t("div",{staticClass:"event",on:{click:function(t){return e.openSceneDilog(!0)}}},[e.query.eventId?t("span",[e._v(e._s(e.query.eventName))]):t("span",{staticClass:"placeholder"},[e._v("请选择事件")]),e.query.eventId?t("i",{staticClass:"el-icon-circle-close",on:{click:e.clearEvent}}):e._e()])]),t("div",{staticClass:"search-input"},[t("label",[e._v("状态：")]),t("el-select",{staticStyle:{width:"215px"},attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.query.campsegStatId,callback:function(t){e.$set(e.query,"campsegStatId",t)},expression:"query.campsegStatId"}},e._l(e.QueryFormList[0].values,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:+e.value}})})),1)],1),t("div",{staticClass:"search-input"},[t("label",[e._v("参与类型：")]),t("el-select",{staticStyle:{width:"215px"},attrs:{placeholder:"请选择参与类型",clearable:""},model:{value:e.query.taskType,callback:function(t){e.$set(e.query,"taskType",t)},expression:"query.taskType"}},[t("el-option",{attrs:{label:"审批",value:"0"}}),t("el-option",{attrs:{label:"阅知",value:"1"}})],1)],1),t("div",{staticClass:"search-input"},[t("label",[e._v("活动时间：")]),t("el-date-picker",{staticStyle:{width:"215px"},attrs:{type:"daterange",size:"mini","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.changeDatePlan},model:{value:e.planTime,callback:function(t){e.planTime=t},expression:"planTime"}})],1),t("div",{staticClass:"search-input"},[t("label",[e._v("操作时间：")]),t("el-date-picker",{staticStyle:{width:"215px"},attrs:{type:"daterange",size:"mini","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.changeDateOpra},model:{value:e.opraTime,callback:function(t){e.opraTime=t},expression:"opraTime"}})],1),t("div",{staticClass:"btn"},[t("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"mini"},on:{click:e.searchData}},[e._v("查询")]),t("el-button",{attrs:{type:"success",size:"mini",loading:e.downloadLoading},on:{click:e.exportData}},[e._v("导出Excel")])],1)]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"template-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"campsegId","row-class-name":e.tableRowClassName,load:e.queryChildren,lazy:!0,height:"100%","tree-props":{children:"children",hasChildren:"hasChild"}}},[t("el-table-column",{attrs:{label:"序号",type:"index","header-align":"center",align:"center",width:"45"}}),t("el-table-column",{attrs:{prop:"campsegId",label:"策略编号及名称","header-align":"center",width:"550","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.gotoDetail(a.row)}}},[a.row.isFocus?t("i",{staticClass:"el-icon-star-on",staticStyle:{color:"#2F87EC"}}):e._e(),e._v(e._s(a.row.campsegId+" "+a.row.campsegName))])]}}])}),t("el-table-column",{attrs:{prop:"startDate",label:"执行周期","header-align":"center",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){var i,r;return[a.row.startDate?t("span",[e._v(e._s((null===(i=a.row.startDate)||void 0===i?void 0:i.split(" ")[0])+" 至 "+(null===(r=a.row.endDate)||void 0===r?void 0:r.split(" ")[0])))]):e._e()]}}])}),t("el-table-column",{attrs:{label:"状态",align:"center","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("div",{staticClass:"status-box"},[t("StatusStep",{attrs:{status:e.row.campsegStatId,statusName:e.row.campsegStatName}})],1)]}}])}),t("el-table-column",{attrs:{prop:"createUsername",label:"创建人","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.startDate?t("span",[e._v(" "+e._s(a.row.createUsername)+" ")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"taskType",label:"参与类型","header-align":"center",align:"center",createUsername:""},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.startDate?t("span",[e._v(" "+e._s(a.row.taskType)+" ")]):e._e()]}}])})],1),t("el-pagination",{attrs:{"current-page":e.query.current,"page-sizes":[10,20,30,40],"page-size":e.query.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("ComplexScene",{ref:"SceneDialog",attrs:{title:"事件中心"},on:{addScene:e.addScene}})],1)},Z=[],X=a("d39c"),ee={components:{ComplexScene:A["a"],StatusStep:E},props:["QueryFormList"],data(){return{loading:!1,query:{campsegIdOrName:"",channelId:"",campsegStatId:null,taskType:"",eventId:"",eventName:"",isSelectMy:2,createUserId:"",campStartDay:"",campEndDay:"",operateStartDay:"",operateEndDay:"",startDate:"",endDate:"",current:1,size:10},params:{},planTime:null,opraTime:null,channelList:[],total:0,tableData:[],downloadLoading:!1}},methods:{searchData(){this.query.current=1,this.params={...this.query},this.getTableData()},changeDatePlan(e){e?(this.query.campStartDay=e[0],this.query.campEndDay=e[1]):(this.query.campStartDay="",this.query.campEndDay="")},changeDateOpra(e){e?(this.query.operateStartDay=e[0],this.query.operateEndDay=e[1]):(this.query.operateStartDay="",this.query.operateEndDay="")},tableRowClassName(e){const t=e.rowIndex%2;return 0===t?"gray-row":""},async getTableData(){try{this.loading=!0;const{records:e,total:t}=await Object(l["i"])(c["a"].mpapi.searchIMcdMyParticipationCamp,this.params);this.tableData=e,this.total=t}catch(e){}finally{this.loading=!1}},handleData(e){},async queryChildren(e,t,a){try{const{records:t}=await Object(l["i"])(c["a"].mpapi.searchIMcdCamp,{pid:e.campsegId});t.map(t=>{t.campsegRootId=e.campsegId}),a(t)}catch(i){}},handleSizeChange(e){this.query.current=1,this.query.size=e,this.params={...this.params,current:1,size:e},this.getTableData()},handleCurrentChange(e){this.query.current=e,this.params={...this.params,current:e},this.getTableData()},async getChannelList(){try{const e=await Object(l["i"])(X["a"].seapi.queryOpelistData);this.channelList=e.map(e=>({label:e.channelName,value:e.channelId}))}catch(e){}},openSceneDilog(e){this.$refs["SceneDialog"].showDialog(e)},clearEvent(e){e.stopPropagation(),this.query.eventId="",this.query.eventName="",this.$refs["SceneDialog"].clearEvent()},addScene(e){this.query.eventId=e.eventId,this.query.eventName=e.eventName},async exportData(){this.downloadLoading=!0;try{const{data:e}=await Object(l["b"])(c["a"].mpapi.exportIMcdMyParticipationCamp,{...this.params,...this.query,loginUserId:sessionStorage.getItem("userId")}),t=new Blob([e],{type:e.type}),a="我参与的策略活动.xlsx";if("download"in document.createElement("a")){const e=document.createElement("a");e.download=a,e.style.display="none",e.href=URL.createObjectURL(t),document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}else navigator.msSaveBlob(t,a)}catch(e){}finally{this.downloadLoading=!1}},gotoDetail(e){let t={};t=e.campsegRootId?{campsegRootId:e.campsegRootId,campsegId:e.campsegId}:{campsegRootId:e.campsegId},this.$router.push({path:"/MarketingPlanning/MarketingDetails",query:{...t,backName:this.$router.currentRoute.name,tab:3,queryParams:JSON.stringify(this.query)}})}},created(){const e=this.$route.params;3==e.tab&&e.queryParams&&(this.query={...this.query,...JSON.parse(this.$route.params.queryParams)},this.params={...this.query}),this.getChannelList(),this.getTableData()}},te=ee,ae=(a("336a"),Object(g["a"])(te,G,Z,!1,null,"5bf6a489",null)),ie=ae.exports,re=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"rehearsal-home"},[t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabsClick},model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[t("el-tab-pane",{attrs:{label:"预演计划",name:"preview"}},[t("RehearsalPlan",{ref:"rehearsalPlanRef"})],1),t("el-tab-pane",{attrs:{label:"预演策略清单",name:"campsegList",lazy:!0}},[t("CampsegList",{ref:"campsegListRef"})],1)],1)],1)},ne=[],se=a("2b0e"),oe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"rehearsalPlanRef",staticClass:"rehearsal-plan"},[t("div",{staticClass:"rehearsal-plan__search"},[t("el-input",{staticClass:"input-search",staticStyle:{width:"300px"},attrs:{placeholder:"请输入预演ID或名称"},model:{value:e.queryForm.keyWords,callback:function(t){e.$set(e.queryForm,"keyWords","string"===typeof t?t.trim():t)},expression:"queryForm.keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.getTableData},slot:"suffix"})])],1),t("query-form-cell",{staticClass:"rehearsal-plan__form",attrs:{list:e.QueryFormCell,"default-size-form":e.sizeForm},on:{queryForm:e.QuerySelect}}),t("div",{staticClass:"rehearsal-plan__new"},[t("el-button",{attrs:{type:"primary"},on:{click:e.newRehearsal}},[e._v("新建预演计划")])],1),t("div",{staticClass:"rehearsal-plan__table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"code"}},[t("el-table-column",{attrs:{prop:"code",label:"预演ID",width:"180","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"name",label:"预演名称","min-width":"160","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"campsegNum",label:"策略数",width:"80"}}),t("el-table-column",{attrs:{prop:"previewCustomNum",label:"客户群规模",width:"120"}}),t("el-table-column",{attrs:{prop:"startTime",label:"预演开始时间",width:"150"}}),t("el-table-column",{attrs:{prop:"endTime",label:"预演结束时间",width:"150"}}),t("el-table-column",{attrs:{prop:"statusName",label:"预演状态",width:"80"}}),t("el-table-column",{attrs:{prop:"targetCustomNum",label:"可营销客户数",width:"100"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(2===t.status?t.targetCustomNum:"-")+" ")]}}])}),t("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return e._l(e.filterAction(a),(function(i,r){return t("el-button",{key:r,style:{color:i.color||"#2F87EC"},attrs:{slot:"reference",type:"text",size:"small"},on:{click:function(e){return i.callback(a)}},slot:"reference"},[e._v(e._s(i.label))])}))}}])})],1)],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":e.pageData.pageSizeList,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t(e.componentId,{tag:"components",attrs:{"preview-id":e.currRow.id},on:{closeDialog:e.onCloseDialog}})],1)},le=[];function ce(e){const t=Object(se["ref"])([]),a=Object(se["ref"])(!1),i=Object(se["ref"])({currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0}),r=window.sessionStorage.getItem("userId");function n(n=!0){n&&(i.value.currentPage=1),a.value=!0,Object(l["i"])("/preview-svc-group/api/fivePeriod/preview/previewList",{...e.value,userId:r,current:i.value.currentPage,size:i.value.pageSize}).then(e=>{t.value=e.records,i.value.total=e.total}).finally(()=>{a.value=!1})}function s(e){i.value.pageSize=e,n()}function o(e){i.value.currentPage=e,n(!1)}return{tableData:t,tableLoading:a,getTableData:n,pageData:i,handleSizeChange:s,handleCurrentChange:o}}var de=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-dialog",{ref:"rehearsalInfoRef",staticClass:"dialogClass",attrs:{title:e.dialogTitle,visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":"",width:"960px",top:"5vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("main",{staticClass:"rehearsal-info"},[t("el-form",{ref:"formRef",staticClass:"rehearsal-info__form",attrs:{model:e.rehearsalForm,rules:e.fromRules,size:"mini","label-position":"right","label-width":"120px"}},[t("div",{staticClass:"rehearsal-info__title"},[e._v("预演基础信息")]),e.previewId?t("el-form-item",{attrs:{label:"预演ID:",prop:"previewId"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.rehearsalForm.code,callback:function(t){e.$set(e.rehearsalForm,"code",t)},expression:"rehearsalForm.code"}})],1):e._e(),t("el-form-item",{attrs:{label:"预演名称:",prop:"previewName"}},[t("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入",maxlength:"30","show-word-limit":""},model:{value:e.rehearsalForm.previewName,callback:function(t){e.$set(e.rehearsalForm,"previewName",t)},expression:"rehearsalForm.previewName"}})],1),t("el-form-item",{attrs:{label:"预演策略数:"}},[t("div",[e._v(e._s(e.tableData.length)+" 个")])]),t("el-form-item",{attrs:{label:"预演客户规模:"}},[e._v(" "+e._s(e.customTotal)+" 人 ")]),t("div",{staticClass:"rehearsal-info__title"},[e._v("预演规则配置")]),t("el-form-item",{attrs:{label:"特殊名单:",prop:"specialListJson"}},[t("el-checkbox-group",{model:{value:e.rehearsalForm.specialListJson,callback:function(t){e.$set(e.rehearsalForm,"specialListJson",t)},expression:"rehearsalForm.specialListJson"}},e._l(e.specialList,(function(a,i){return t("el-checkbox",{key:i,attrs:{label:a.specialJsonStr.field}},[e._v(" "+e._s(a.name)+" ")])})),1)],1),t("el-form-item",{attrs:{label:"业务规则:",prop:"rule"}},[t("el-checkbox",{attrs:{"true-label":1,"false-label":"0"},model:{value:e.rehearsalForm.frequency,callback:function(t){e.$set(e.rehearsalForm,"frequency",t)},expression:"rehearsalForm.frequency"}},[e._v("频次过滤")]),t("el-checkbox",{attrs:{"true-label":1,"false-label":"0",disabled:1===e.rehearsalForm.productExclusion},model:{value:e.rehearsalForm.onOrder,callback:function(t){e.$set(e.rehearsalForm,"onOrder",t)},expression:"rehearsalForm.onOrder"}},[e._v("已订购")]),t("el-checkbox",{attrs:{"true-label":1,"false-label":"0"},model:{value:e.rehearsalForm.productExclusion,callback:function(t){e.$set(e.rehearsalForm,"productExclusion",t)},expression:"rehearsalForm.productExclusion"}},[e._v("产品互斥")])],1),t("el-form-item",{attrs:{label:"模型分析:"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.rehearsalForm.modelCode,callback:function(t){e.$set(e.rehearsalForm,"modelCode",t)},expression:"rehearsalForm.modelCode"}},e._l(e.modelList,(function(e){return t("el-option",{key:e.modelId,attrs:{label:e.modelName,value:e.modelId}})})),1)],1)],1),t("div",{staticClass:"rehearsal-info__action"},[t("el-button",{attrs:{type:"primary"},on:{click:e.openMarketing}},[e._v("添加策略")]),t("el-button",{attrs:{type:"primary"},on:{click:e.batchRemove}},[e._v("批量移除")])],1),t("div",{staticClass:"rehearsal-info__table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"campsegId"},on:{"selection-change":e.handleSelectionChange}},[e.batchRemoveShow?t("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),t("el-table-column",{attrs:{type:"index",width:"45",label:"序号",align:"center"}}),t("el-table-column",{attrs:{prop:"nameAndCode",label:"策略编码及名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"validityPeriod",label:"执行周期",width:"180"}}),t("el-table-column",{attrs:{prop:"campsegStatName",label:"策略状态",width:"80"}}),t("el-table-column",{attrs:{prop:"customTotal",label:"客户规模",width:"100"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleClick(a.row)}}},[e._v("移除")])]}}])})],1)],1)],1),t("div",{staticClass:"rehearsal-info-footer"},[t("el-button",{attrs:{type:"primary",loading:e.saveLoading,disabled:!e.tableData.length},on:{click:function(t){return e.formValidate("save")}}},[e._v("保存")]),t("el-button",{attrs:{type:"primary",loading:e.startRehearsalLoading,disabled:!e.tableData.length},on:{click:function(t){return e.formValidate("start")}}},[e._v("开始预演")])],1),t(e.componentId,{tag:"component",attrs:{"curr-data":e.tableData},on:{addMarketing:e.onAddMarketing}})],1)},ue=[],pe=(a("13d5"),a("4ddc"));function me(e){const t=Object(se["ref"])([]),a=Object(se["ref"])(!1),i=Object(se["ref"])([]),r=window.sessionStorage.getItem("userId");function n(e){const a=e.map(e=>e.campsegId).join(",");Object(l["i"])("/preview-svc-group/api/fivePeriod/preview/queryCampsegList",{userId:r,campsegIds:a,current:1,size:15}).then(e=>{t.value=e.records.map(e=>({...e,validityPeriod:Object(pe["f"])(e.startDate,e.endDate),nameAndCode:Object(pe["c"])(e.campsegId,e.campsegName)}))})}function s(){}function o(e){i.value=e}function c(e){p([e])}const d=Object(se["ref"])(!0);function u(){i.value.length?p(i.value):e.warning("最少选择1个营销活动")}function p(e){a.value=!0;const i=e.map(e=>e.campsegId);t.value=t.value.filter(e=>!i.includes(e.campsegId)),a.value=!1}return{tableData:t,tableLoading:a,onNewPreview:n,getTableData:s,handleSelectionChange:o,handleClick:c,batchRemoveShow:d,batchRemove:u}}function he(e,t,a){const i=window.sessionStorage.getItem("userId"),r=window.sessionStorage.getItem("userNameCn"),n=Object(se["ref"])(null),s=Object(se["ref"])({id:"",previewName:"",modelCode:"",specialListJson:[],frequency:0,onOrder:0,productExclusion:0,createUserId:i,createUserName:r}),o=Object(se["ref"])({previewName:[{required:!0,message:"请输入预演名称",trigger:"blur"}],specialListJson:[{required:!0,message:"特殊名单最少选一项",trigger:"change"}]}),c=Object(se["computed"])(()=>e.value.reduce((e,t)=>e+t.customTotal,0)),d=Object(se["ref"])([]),u=Object(se["ref"])([]),p=Object(se["ref"])([{code:"frequency",name:"频次过滤"},{code:"onOrder",name:"已订购"},{code:"productExclusion",name:"产品互斥"}]);function m(){Object(l["i"])("/preview-svc-group/api/fivePeriod/preview/querySpecialList").then(e=>{u.value=e.map(e=>({name:e.name,specialJsonStr:JSON.parse(e.specialJsonStr)}))}),Object(l["i"])("/preview-svc-group/api/jx/fivePeriod/preview/conf/queryModelList",{modelStat:"1"}).then(e=>{d.value=e})}function h(e){n.value.validate(async t=>{t&&("save"===e?f():"start"===e&&b())})}function g(){const e=u.value.filter(e=>s.value.specialListJson.includes(e.specialJsonStr.field)).map(e=>e.specialJsonStr);return JSON.stringify(e)}Object(se["watch"])(()=>s.value.productExclusion,e=>{1===e&&(s.value.onOrder=1)}),Object(se["onMounted"])(()=>{m()});const v=Object(se["ref"])(!1);function f(){v.value=!0;const i={...s.value,specialListJson:g(),previewCampsegs:e.value};Object(l["i"])("/preview-svc-group/api/fivePeriod/preview/savePreviewPlan",i).then(e=>{a.success("保存预演计划成功"),t("done")}).finally(()=>{v.value=!1})}const y=Object(se["ref"])(!1);function b(){y.value=!0;const i={...s.value,specialListJson:g(),previewCampsegs:e.value};Object(l["i"])("/preview-svc-group/api/jx/fivePeriod/preview/startPreviewPlan",i).then(e=>{a.success("保存预演计划成功"),t("done")}).finally(()=>{y.value=!1})}return{formRef:n,rehearsalForm:s,fromRules:o,customTotal:c,modelList:d,specialList:u,ruleList:p,formValidate:h,saveRehearsal:f,startRehearsal:b,saveloading:v,startRehearsalLoading:y}}var ge=a("5c96"),ve=Object(se["defineComponent"])({name:"RehearsalInfo",components:{AddMarketing:()=>a.e("chunk-144214cb").then(a.bind(null,"f6dc"))},props:{newPreview:{type:Array,default:()=>[]},previewId:{type:Number},processDone:{type:Function}},setup(e,{emit:t}){const{newPreview:i,previewId:r}=Object(se["toRefs"])(e),n=Object(se["ref"])(null),s=Object(pe["e"])({elementRef:n,reduce:700,minHeight:100}),o=Object(se["ref"])(null),{tableData:c,tableLoading:d,onNewPreview:u,getTableData:p,handleSelectionChange:m,handleClick:h,batchRemoveShow:g,batchRemove:v}=me(ge["Message"]),{formRef:f,rehearsalForm:y,fromRules:b,customTotal:w,modelList:C,specialList:D,ruleList:S,formValidate:I,saveRehearsal:x,saveLoading:k,startRehearsalLoading:M}=he(c,O,ge["Message"]);function _(e){Object(l["g"])("/preview-svc-group/api/jx/fivePeriod/preview/previewDetail/"+e).then(e=>{y.value={id:e.id,code:e.code,previewName:e.name,modelCode:e.modelCode,specialListJson:JSON.parse(e.specialInfo).reduce((e,t)=>(t.field&&e.push(t.field),e),[]),frequency:e.fqc,onOrder:e.orderedFilter,productExclusion:e.planExclusion,createUserId:e.createUser,createUserName:e.createUserName},c.value=e.previewCampsegs.map(e=>({...e,validityPeriod:Object(pe["f"])(e.startDate,e.endDate),nameAndCode:Object(pe["c"])(e.campsegId,e.campsegName)}))})}Object(se["onMounted"])(()=>{r.value&&_(r.value)});const F=Object(se["ref"])(!1),q=Object(se["computed"])(()=>r.value?"预演计划编排":"新建预演计划");function T(e){e(),O("close")}function O(t){e.processDone(t)}function N(){F.value=!1,setTimeout(()=>{o.value=()=>a.e("chunk-144214cb").then(a.bind(null,"f6dc"))},200)}function A(e){F.value=!0,e&&e.length&&(e=e.filter(e=>!c.value.some(t=>t.campsegId===e.campsegId)),c.value=c.value.concat(e))}return{rehearsalInfoRef:n,dialogVisible:F,dialogTitle:q,componentId:o,handleClose:T,formRef:f,rehearsalForm:y,fromRules:b,customTotal:w,modelList:C,specialList:D,ruleList:S,formValidate:I,saveRehearsal:x,saveLoading:k,startRehearsalLoading:M,tableHeight:s,tableData:c,tableLoading:d,getTableData:p,handleSelectionChange:m,handleClick:h,batchRemoveShow:g,batchRemove:v,openMarketing:N,onAddMarketing:A}}}),fe=ve,ye=(a("1b05"),Object(g["a"])(fe,de,ue,!1,null,"30991b12",null)),be=ye.exports;class we extends(se["default"].extend(be)){constructor(){super(),this.show=()=>{this.dialogVisible=!0},this.processDone=e=>{this.resolve(e),setTimeout(()=>{this.destroyThis()},300)}}destroyThis(){this.$destroy()}}let Ce;const De=e=>{Ce=new we,Object.assign(Ce,e),document.body.appendChild(Ce.$mount().$el)};function Se(e){return De(e),Ce.show(),new Promise((e,t)=>{Ce.reject=t,Ce.resolve=e})}function Ie(e,t){const i=Object(se["ref"])({}),r=[{label:"重新预演",status:[2,4],callback:u},{label:"计划详情",status:[0,1,2,4],callback:s},{label:"编排",status:[0,2,4],callback:o},{label:"开始预演",status:[0],callback:d},{label:"预演终止",status:[1],callback:c},{label:"删除",status:[0,2],callback:m,color:"red"}];function n(e){const t=r.filter(t=>t.status.includes(e.status));if(0===e.campsegNum){const e=t.findIndex(e=>"开始预演"===e.label);t.splice(e,1)}return t}function s(t){i.value=t,e.value=()=>a.e("chunk-5aa61fc7").then(a.bind(null,"9499"))}function o(e){Se({previewId:e.id}).then(e=>{"done"===e&&setTimeout(()=>{t()},1e3)})}function c(e){Object(l["g"])("/preview-svc-group/api/jx/fivePeriod/preview/previewStop/"+e.id).then(()=>{Object(ge["Message"])({message:"终止成功",type:"success",duration:500}),setTimeout(()=>{t()},1e3)})}function d(e){const t="确定要开始预演?";p(e,t)}function u(e){const t="确定要重新预演?";p(e,t)}function p(e,a){ge["MessageBox"].confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(l["g"])("/preview-svc-group/api/jx/fivePeriod/preview/restartPreviewPlan/"+e.id).then(()=>{Object(ge["Message"])({message:"预演成功",type:"success",duration:500}),setTimeout(()=>{t()},1e3)})})}function m(e){ge["MessageBox"].confirm("确定要删除该预演计划?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(l["g"])("/preview-svc-group/api/jx/fivePeriod/preview/delPreviewPlan/"+e.id).then(e=>{!0===e?(Object(ge["Message"])({message:"计划删除成功！",type:"success",duration:500}),setTimeout(()=>{t()},1e3)):ge["Message"].error(e.message)})})}return{currRow:i,filterAction:n}}function xe(){const e=Object(se["getCurrentInstance"])();return{route:e.proxy.$route,router:e.proxy.$router}}var ke=Object(se["defineComponent"])({name:"RehearsalPlan",components:{QueryFormCell:o["a"]},setup(){const{router:e}=xe(),t=Object(se["ref"])({keyWords:"",status:"-1"}),a=Object(se["ref"])([{label:"预演状态",values:[{label:"不限",value:"-1"},{label:"待预演",value:"0"},{label:"预演中",value:"1"},{label:"预演完成",value:"2"},{label:"预演失败",value:"4"}],isDate:!1}]),i=Object(se["ref"])({radioModel:["-1"]});function r(e){t.value.status=e.value,m()}function n(){i.value.radioModel=["-1"],t.value.status="-1",m()}Object(se["onMounted"])(()=>{n()});const s=Object(se["ref"])(null);function o(e){"refresh"===e&&m(),s.value=""}function l(){Se({selectedRows:[]}).then(e=>{"done"===e&&setTimeout(()=>{m()},1e3)})}const{height:c}=Object(pe["b"])(),d=Object(se["computed"])(()=>c.value-475),{tableData:u,tableLoading:p,getTableData:m,pageData:h,handleSizeChange:g,handleCurrentChange:v}=ce(t),{currRow:f,filterAction:y}=Ie(s,m);return{init:n,windowHeight:c,componentId:s,onCloseDialog:o,queryForm:t,QueryFormCell:a,sizeForm:i,QuerySelect:r,newRehearsal:l,tableHeight:d,tableData:u,tableLoading:p,getTableData:m,pageData:h,handleSizeChange:g,handleCurrentChange:v,currRow:f,filterAction:y}}}),Me=ke,_e=(a("2508"),Object(g["a"])(Me,oe,le,!1,null,"358a09cf",null)),Fe=_e.exports,qe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"product-container"},[t("div",{staticClass:"search_boxs"},[t("el-input",{staticClass:"input-search",staticStyle:{width:"300px"},attrs:{placeholder:"请输入策略编号或名称"},model:{value:e.queryForm.keyWords,callback:function(t){e.$set(e.queryForm,"keyWords","string"===typeof t?t.trim():t)},expression:"queryForm.keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.getTableData},slot:"suffix"})])],1),t("div",{staticClass:"selech-panel"},[t("query-form-cell",{attrs:{list:e.queryList,"default-size-form":e.sizeForm},on:{queryForm:e.formChange}})],1),t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"Mp-table",attrs:{data:e.tableData,"row-key":"rowKey","expand-row-keys":e.expandRowKeys},on:{"expand-change":e.handleExpandChange}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function({$index:a}){return[t("div",{staticClass:"inner-table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.innerTableLoading,expression:"innerTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.innerTableData[a]}},e._l(e.innerColumns,(function(e){return t("el-table-column",{key:e.type,attrs:{prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,"show-overflow-tooltip":""}})})),1)],1)]}}])}),t("el-table-column",{attrs:{prop:"nameAndCode",label:"策略编码及名称","min-width":"250","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",{staticClass:"click-cell",on:{click:function(t){return e.goPage(a)}}},[e._v(e._s(a.nameAndCode))])]}}])}),t("el-table-column",{attrs:{prop:"executeCycle",label:"执行周期","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"campsegStatName",label:"策略状态","min-width":"180"}}),t("el-table-column",{attrs:{prop:"customTotal",label:"客户群规模","min-width":"180"}}),t("el-table-column",{attrs:{prop:"targetCustomTotal",label:"预演触达客户","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(t.targetCustomTotal||"-")+" ")]}}])}),t("el-table-column",{attrs:{prop:"code",label:"关联预演ID","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",{staticClass:"click-cell",on:{click:function(t){return e.showDetail(a)}}},[e._v(e._s(a.code))])]}}])})],1)],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":e.pageData.pageSizeList,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t(e.componentId,{tag:"components",attrs:{"preview-id":e.currRow.previewId},on:{closeDialog:e.onCloseDialog}})],1)},Te=[],Oe=a("5e05");function Ne(e){const t=Object(se["ref"])({keyWords:"",campsegStatId:"",channelId:""}),a=Object(se["ref"])([{label:"策略状态",values:[{label:"不限",value:""}],isDate:!1},{label:"渠道",values:[{label:"不限",value:""}],isDate:!1}]),i=Object(se["ref"])({radioModel:["",""]});function r(){Object(l["i"])(Oe["a"].common.getSysEnum,{enumType:"CAMP_DIM_STATUS"}).then(e=>{a.value[0].values=[{label:"不限",value:""}],e.map(e=>{a.value[0].values.push({label:e.enumValue,value:e.enumKey})})})}function n(){Object(l["i"])(X["a"].seapi.getOnlineChannels,{onlineStatus:"1"}).then(e=>{a.value[1].values=[{label:"不限",value:""}],a.value[1].values.push(...e.map(e=>({label:e.channelName,value:e.channelId})))})}return Object(se["onBeforeMount"])(()=>{r(),n()}),{queryForm:t,queryList:a,sizeForm:i}}function Ae(e){const t=Object(se["ref"])([]),a=Object(se["ref"])(!1),i=Object(se["ref"])([]),r=Object(se["ref"])({currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0}),n=window.sessionStorage.getItem("userId");function s(s=!0){a.value=!0,s&&(r.value.currentPage=1),Object(l["i"])("/preview-svc-group/api/fivePeriod/preview/previewCampList",{...e.value,userId:n,current:r.value.currentPage,size:r.value.pageSize}).then(e=>{i.value=[],t.value=e.records.map((e,t)=>({...e,rowKey:t,executeCycle:Object(pe["f"])(e.startDate,e.endDate),nameAndCode:Object(pe["c"])(e.campsegId,e.campsegName)})),r.value.total=e.total}).finally(()=>{a.value=!1})}function o(e){r.value.pageSize=e,s()}function c(e){r.value.currentPage=e,s(!1)}return{tableData:t,tableLoading:a,expandRowKeys:i,pageData:r,getTableData:s,handleSizeChange:o,handleCurrentChange:c}}function Le(e){const t=Object(se["ref"])([]),a=Object(se["ref"])(!1),i=[{prop:"id_name",label:"子策略编码及名称",minWidth:200},{prop:"channelName",label:"渠道",minWidth:100},{prop:"previewCustomNum",label:"客户群规模",minWidth:100},{prop:"targetCustomNum",label:"可营销客户",minWidth:100}],r=Object(se["ref"])(i),n=Object(se["ref"])([]);function s(e){const t=e.toLowerCase().split("_"),a=t.map((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1));return a.join("")}function o(n){a.value=!0,Object(l["i"])("/preview-svc-group/api/fivePeriod/preview/previewResult",{campsegId:n.campsegId,previewId:n.previewId,oldRecord:0}).then(a=>{const o=[];a[0].specialInfoAll.forEach(e=>{o.push({prop:s(JSON.parse(e.specialJsonStr).field),label:e.name,width:"150"})});const l=[];for(let e=1;e<=10;e++)a[0][`defExtNum${e}Name`]&&l.push({prop:"defExtNum"+e,label:a[0][`defExtNum${e}Name`],width:"150"});r.value=[...i,...o,...l];const c=a.map(e=>({...e,id_name:Object(pe["c"])(e.childCampsegId,e.campsegName),executionCycle:Object(pe["f"])(e.startTime,e.endTime)})),d=e.value.findIndex(e=>e.rowKey===n.rowKey);t.value.splice(d,1,c)}).finally(()=>{a.value=!1})}function c(e,t){t.length<n.value.length?n.value=t:(n.value=t,o(e))}return Object(se["watch"])(e,e=>{const a=e.length;a>t.value.length&&(t.value=Array(a).fill([]))}),{innerTableData:t,innerColumns:r,innerTableLoading:a,currExpandedRows:n,getInnerTableData:o,handleExpandChange:c}}var je=Object(se["defineComponent"])({name:"rehearsalInventory",components:{QueryFormCell:o["a"]},setup(){const{router:e,route:t}=xe(),i=Object(se["ref"])(null);function r(e){"refresh"===e&&v(),i.value=""}const n=Object(se["ref"])({});function s(e){this.$router.push({path:"/MarketingPlanning/MarketingDetails",query:{campsegRootId:e.campsegId,backName:this.$router.currentRoute.name,goPreview:!0,tab:4}})}function o(e){n.value=e,i.value=()=>a.e("chunk-5aa61fc7").then(a.bind(null,"9499"))}const{queryForm:l,queryList:c,sizeForm:d}=Ne();function u(e){0===e.index?l.value.campsegStatId=e.value:1===e.index&&(l.value.channelId=e.value),v()}const{tableData:p,tableLoading:m,expandRowKeys:h,pageData:g,getTableData:v,handleSizeChange:f,handleCurrentChange:y}=Ae(l),{innerTableData:b,innerColumns:w,innerTableLoading:C,currExpandedRows:D,getInnerTableData:S,handleExpandChange:I}=Le(p);function x(){d.value.radioModel=["",""],l.value.campsegStatId="",l.value.channelId="",v()}return Object(se["onMounted"])(()=>{x()}),{init:x,componentId:i,onCloseDialog:r,currRow:n,goPage:s,showDetail:o,queryForm:l,queryList:c,sizeForm:d,formChange:u,tableData:p,tableLoading:m,expandRowKeys:h,pageData:g,getTableData:v,handleSizeChange:f,handleCurrentChange:y,innerTableData:b,innerColumns:w,innerTableLoading:C,currExpandedRows:D,getInnerTableData:S,handleExpandChange:I}}}),$e=je,Re=(a("ae81"),Object(g["a"])($e,qe,Te,!1,null,"043716e4",null)),Pe=Re.exports,Ee=Object(se["defineComponent"])({name:"MarketingRehearsal",components:{RehearsalPlan:Fe,CampsegList:Pe},setup(){const e=Object(se["ref"])("preview"),t=Object(se["ref"])(null),a=Object(se["ref"])(null);function i(i){"preview"===e.value?t.value.init():"campsegList"===e.value&&a.value.init()}function r(){e.value="preview",t.value.init()}return{tabActive:e,rehearsalPlanRef:t,campsegListRef:a,tabsClick:i,init:r}}}),ze=Ee,Ue=(a("e6de"),Object(g["a"])(ze,re,ne,!1,null,"e14f1d5c",null)),Ve=Ue.exports,We=function(){var e=this,t=e._self._c;return t("div",{staticClass:"product-container"},[t("div",{staticClass:"product-search"},[t("div",{staticClass:"top-search-part"},[t("div",[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入主题编号或名称"},model:{value:e.queryForm.themeKeywords,callback:function(t){e.$set(e.queryForm,"themeKeywords","string"===typeof t?t.trim():t)},expression:"queryForm.themeKeywords"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){return e.QuerykeyWords()}}},[e._v("搜索")])],1),t("el-button",{attrs:{icon:e.exportLoading?"el-icon-loading":"el-icon-upload2"},on:{click:e.exportData}},[e._v(" "+e._s(e.exportLoading?"正在导出":"导出列表")+" ")])],1),t("div",{staticStyle:{padding:"20px 0 0 20px",background:"#f7f7f7",display:"flex","align-items":"center"}},[t("span",[t("label",{staticStyle:{"margin-right":"10px"}},[e._v("开始时间：")]),t("el-date-picker",{staticStyle:{width:"230px","margin-right":"15px"},attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至"},on:{change:e.dateChange},model:{value:e.queryTime1,callback:function(t){e.queryTime1=t},expression:"queryTime1"}})],1),t("span",[t("label",{staticStyle:{"margin-right":"10px"}},[e._v("结束时间：")]),t("el-date-picker",{staticStyle:{width:"230px"},attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至"},on:{change:e.dateChange},model:{value:e.queryTime2,callback:function(t){e.queryTime2=t},expression:"queryTime2"}})],1)]),t("query-form-cell",{attrs:{list:e.QueryFormList,defaultSizeForm:e.sizeFrom},on:{queryForm:e.InquireAbout}})],1),t("div",{staticClass:"table-part"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"Mp-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id",height:"calc(100% - 40px)","tree-props":{children:"campList",hasChildren:"hasChildren"}}},[t("el-table-column",{attrs:{label:"序号",prop:"idx",align:"center",width:"80px"}}),t("el-table-column",{attrs:{prop:"",label:"主题编号及名称","header-align":"center",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(t){return e.gotoDetail(a.row)}}},[e._v(" "+e._s(a.row.campsegId?a.row.campsegId+" "+a.row.campsegName:a.row.themeId+" "+a.row.themeName)+" ")])]}}])}),t("el-table-column",{attrs:{label:"执行周期",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.startDate&&a.row.endDate?e.ValidationTimeRange(a.row.startDate)+"到"+e.ValidationTimeRange(a.row.endDate):"-"))])]}}])}),t("el-table-column",{attrs:{prop:"sceneTypeName",label:"所属场景",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s(a.row.campsegId?a.row.sceneName:a.row.sceneTypeName)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"campsegStatName",label:"状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s(a.row.campsegId?e.getCampStatusName(a.row):"-")+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){var i,r,n;return[a.campsegId?e._e():t("div",[t("el-button",{staticClass:"mr-10",on:{click:function(t){return e.copy(a)}}},[e._v("复制")]),t("el-dropdown",{staticClass:"mr-10",attrs:{size:"medium",disabled:!a.submittable&&!a.modifiable&&!a.deletable}},[t("el-button",[e._v(" 管理"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{disabled:!a.submittable},nativeOn:{click:function(t){return e.SubmitTheme(a)}}},[e._v("提交 ")]),a.submittable?e._e():[null!==(i=a.campList)&&void 0!==i&&i.some(t=>e.diffTime(t.endDate)<0)?t("el-tooltip",{staticClass:"preview-tip",attrs:{effect:"dark",content:"主题下的策略已过期",placement:"top-start"}},[t("i",{staticClass:"el-icon-info"})]):null!==(r=a.campList)&&void 0!==r&&r.every(e=>e.campsegStatId<=32)?t("el-tooltip",{staticClass:"preview-tip",attrs:{effect:"dark",content:"待预演完成才能提交审批",placement:"top-start"}},[t("i",{staticClass:"el-icon-info"})]):e._e()],t("el-dropdown-item",{attrs:{disabled:!a.modifiable},nativeOn:{click:function(t){return e.goToModifyTheme(a)}}},[e._v("修改")]),t("el-dropdown-item",{attrs:{disabled:!a.deletable},nativeOn:{click:function(t){return e.Delete(a)}}},[e._v("删除 ")])],2)],1),20==a.campsegStatId&&null!==(n=a.channelIds)&&void 0!==n&&n.includes("959")?t("el-button",{attrs:{loading:e.approveLoading},on:{click:function(t){return e.directApprove(a)}}},[e._v("一键审批")]):e._e()],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryForm.current,"page-sizes":[10,20,30,40],"page-size":e.queryForm.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("ComplexScene",{ref:"SceneDialog",attrs:{title:"事件中心"},on:{addScene:e.addScene}}),t("span",{staticClass:"origin"},[t("el-dialog",{attrs:{title:"选择审批人",visible:e.dialogVisible,width:"450px",top:"30vh","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.nextNodesApproverloading,expression:"nextNodesApproverloading"}],staticClass:"Contact-mtp"},[t("el-form",{ref:"nextNodesApproverForm"},e._l(e.nextNodesList.nextNodesApprover,(function(a,i){return t("el-form-item",{key:i,attrs:{label:a.node.nodeName+"：",rules:[{required:!0,message:"请选择审批人",trigger:"blur"}]}},[t("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:e.ApproverUser[i],callback:function(t){e.$set(e.ApproverUser,i,t)},expression:"ApproverUser[index]"}},e._l(a.approverUser,(function(e,a){return t("el-option",{key:a,attrs:{label:e.userName,value:e.userId}})})),1)],1)})),1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.submitSaveLoading},on:{click:function(t){return e.KeptSumbit(!1)}}},[e._v("提 交")])],1)]),t("el-dialog",{attrs:{title:e.suspendtitle,visible:e.suspend,width:"500px",top:"30vh","destroy-on-close":!0,"append-to-body":""},on:{"update:visible":function(t){e.suspend=t}}},[t("div",{staticClass:"Contact-mtp"},[t("el-form",{ref:"terminationFrom",attrs:{"label-width":"80px",model:e.terminationFrom}},[t("el-form-item",{attrs:{label:e.suspendtitle,prop:"Reasons",rules:[{required:!0,message:"请输入"+e.suspendtitle,trigger:"blur"}]}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:500},placeholder:"请填写"+e.suspendtitle},model:{value:e.terminationFrom.Reasons,callback:function(t){e.$set(e.terminationFrom,"Reasons",t)},expression:"terminationFrom.Reasons"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.suspend=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.preservation}},[e._v("保 存")])],1)]),t("el-dialog",{attrs:{title:"主题复制",visible:e.CopyBullet,width:"400px",top:"30vh","append-to-body":""},on:{"update:visible":function(t){e.CopyBullet=t}}},[t("div",{staticClass:"CopyBullet"},[t("span",[e._v("确定要复制主题“ "),t("span",{staticClass:"color"},[e._v("["+e._s(this.name)+"]")]),e._v(" ”吗?")])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.CopyBullet=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.CopySumbit}},[e._v("保 存")])],1)]),t("el-dialog",{attrs:{title:"日期选择",visible:e.Strategydialog,width:"400px",top:"30vh","append-to-body":""},on:{"update:visible":function(t){e.Strategydialog=t}}},[t("div",{staticClass:"CopyBullet"},[t("el-form",{ref:"endDateFrom",attrs:{model:e.endDateFrom,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"日期选择",prop:"endDate",rules:[{required:!0,message:"请选择日期",trigger:"blur"}]}},[t("el-date-picker",{attrs:{placeholder:"选择日期时间","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","picker-options":e.expireTimeOption},model:{value:e.endDateFrom.endDate,callback:function(t){e.$set(e.endDateFrom,"endDate",t)},expression:"endDateFrom.endDate"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.Strategydialog=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateCampsegEndDate}},[e._v("保 存")])],1)]),t("delete-dialog",{ref:"Delete",attrs:{name:e.name,id:e.id,title:"主题"},on:{Dlete:e.strategylDelete}}),t("marketing-test",{ref:"MarketingText"}),t("preview",{ref:"previve"})],1)],1)},Be=[],Qe=a("3623"),He={props:["QueryFormList"],components:{QueryFormCell:o["a"],DeleteDialog:f,MarketingTest:x,Preview:N,ComplexScene:A["a"]},computed:{campsegStatusList(){return this.QueryFormList[0].values||[]}},data(){return{diffTime:y["b"],exportLoading:!1,queryTime1:null,queryTime2:null,sizeFrom:{radioModel:["",""]},tableData:[],queryForm:{themeKeywords:"",campStartDay:"",campEndDay:"",campsegStatId:"",channelId:"",current:1,size:10,isSelectMy:1,keyWords:"",order:1,orderColumn:"",sceneClass:"",sceneFissionType:"",sceneId:"",sceneName:"",sceneType:"",themeCreateTime:"",themeId:"",campKeywords:"",themeUpdateTime:""},pageData:{total:0},option:"",dialogVisible:!1,Approved:[],id:"",name:"",currentRow:{},suspend:!1,terminationFrom:{Reasons:""},suspendtitle:"",CopyBullet:!1,endDateFrom:{endDate:""},Strategydialog:!1,expireTimeOption:{},Approval:[],loading:!1,nextNodesList:[],ApproverUser:[],TemplateData:{},nextNodesApproverloading:!1,value:"",options:[],approveLoading:!1,submitSaveLoading:!1}},created(){this.echoCondition(),this.searchIMcdCamp()},methods:{getCampStatusName(e){return Object(y["e"])(this.campsegStatusList,e.campsegStatId).label||""},openSceneDilog(e){this.$refs["SceneDialog"].showDialog(e)},clearEvent(e){e.stopPropagation(),this.queryForm.cepEventId="",this.queryForm.eventName="",this.$refs["SceneDialog"].clearEvent(),this.QuerykeyWords()},addScene(e){this.queryForm.cepEventId=e.eventId,this.queryForm.eventName=e.eventName,this.QuerykeyWords()},ValidationTimeRange(e){return M()(e).format("YYYY-MM-DD")},async searchIMcdCamp(){try{this.loading=!0;const e=await Object(l["i"])(c["a"].mpapi.searchThemeCampList,this.queryForm);e.records&&e.records.length&&e.records.forEach((e,t)=>{e.idx=t+1,e.campList.forEach((t,a)=>{t.id=`${e.id}_${a+1}`}),e.sceneTypeName=Object(y["e"])(Qe["f"],e.sceneType).label}),this.tableData=e.records,this.pageData.total=e.total}catch(e){}finally{this.loading=!1}},QuerykeyWords(){this.queryForm.current=1,this.searchIMcdCamp()},dateChange(){this.queryTime1?this.queryForm.campStartDay=this.queryTime1.join(","):this.queryForm.campStartDay="",this.queryTime2?this.queryForm.campEndDay=this.queryTime2.join(","):this.queryForm.campEndDay="",this.QuerykeyWords()},InquireAbout({form:{radioModel:e}}){this.queryForm.campsegStatId=e[0],this.queryForm.channelId=e[1],this.queryForm.current=1,this.searchIMcdCamp()},emptyFrom(e){this.queryForm.campsegStatId=e.radioModel[1],this.queryForm.channelId=e.radioModel[2],this.queryForm.campStartDay="",this.queryForm.campEndDay="",this.queryForm.current=1,this.searchIMcdCamp()},async SubmitTheme(e){this.currentRow=e,this.ApproverUser=[],this.nextNodesApproverloading=!0,this.id=e.themeId;const t=await Object(l["i"])(b["a"].channel.getTemplateData),a=e.channelIds,i={berv:t.berv,instanceId:null,nodeId:"",processId:t.processId,triggerParm:{channelId:a.join(",")}};this.getNextApprovers(i),this.dialogVisible=!0},async Submit(e){this.currentRow=e,this.ApproverUser=[],this.nextNodesApproverloading=!0,this.VerificationDate(e)&&(this.id=e.campsegId,null===e.approveFlowId?Object(l["i"])(b["a"].channel.getTemplateData).then(t=>{const a=e.channelIds,i={berv:t.berv,instanceId:null,nodeId:"",processId:t.processId,triggerParm:{channelId:a.join(",")}};this.getNextApprovers(i)}):this.getNextApprovers({instanceId:e.approveFlowId}),this.dialogVisible=!0)},getNextApprovers(e,t=!1){Object(l["i"])(b["a"].channel.getNextApprovers,e,void 0,this.$retryDelay).then(e=>{this.nextNodesList=e,this.nextNodesList.nextNodesApprover.map((e,t)=>{var a;this.ApproverUser[t]=(null===(a=e.approverUser[0])||void 0===a?void 0:a.userId)||""})}).catch(a=>{var i;null!==(i=a.message)&&void 0!==i&&i.includes("timeout")&&!0!==t&&this.getNextApprovers(e,!0)}).finally(()=>{this.nextNodesApproverloading=!1})},PreviewClick(e){this.$refs.previve.PreviewShow(e.campsegId)},Delete(e){this.id=e.themeId,this.name=e.themeName,this.$refs["Delete"].showDelete()},SceneModif(e){this.$router.push({path:"/MarketingPlanning/MpHome",query:{campId:e.campsegId}})},StrategySuspend(e){this.suspend=!0,this.id=e.campsegId,this.terminationFrom.Reasons="",this.suspendtitle="暂停原因"},async StrategyContinue(e){await Object(l["i"])(c["a"].mpapi.campRestart,{id:e.campsegId}).then(()=>{this.$message.success("策略启动成功"),this.searchIMcdCamp()})},termination(e){this.suspend=!0,this.id=e.campsegId,this.terminationFrom.Reasons="",this.suspendtitle="终止原因"},copy(e){this.id=e.themeId,this.name=e.themeName,this.CopyBullet=!0},Strategydelay(e){this.id=e.campsegId,this.Strategydialog=!0,this.EndTime=e.endDate,this.expireTimeOption={},this.endDateFrom.endDate="",this.expireTimeOption.disabledDate=t=>t.getTime()<new Date(e.endDate).getTime()},async campRelease(e){await Object(l["i"])(c["a"].mpapi.campRelease,{id:e.campsegId}).then(()=>{this.id="",this.$message.success("策略发布成功"),this.searchIMcdCamp()})},async joinFocus(e){},async reminderApprove(e){await Object(l["i"])(c["a"].mpapi.reminderApprove,{campsegRootId:e.campsegId}).then(e=>{"0"===e.remindFlag?this.$alert("不够30分钟不允许催单","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"}):"1"===e.remindFlag?this.$alert("操作失败,请重试","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"}):this.$message.success("催单成功")})},StrategyTest(e){this.$refs["MarketingText"].TextShow(e)},async CopySumbit(){await Object(l["i"])(c["a"].mpapi.copyTheme,{campsegRootId:this.id}).then(()=>{this.$message.success("一键复制策略成功")}).finally(()=>{this.id="",this.name="",this.CopyBullet=!1,this.searchIMcdCamp()})},KeptSumbit(e=!1){if(this.ApproverUser.length!==this.nextNodesList.nextNodesApprover.length)this.$message.error("请选择审批人后在提交");else{var t,a=[];this.nextNodesList.nextNodesApprover.filter((e,t)=>{var i=this.ApproverUser[t],r=[];e.approverUser.map(e=>{i===e.userId&&r.push(e)}),a.push({approverUser:r,node:e.node})});const i={approveType:"IMCD",channelId:null===(t=this.currentRow.channelIds)||void 0===t?void 0:t.join(","),nodeId:this.nextNodesList.nodeId,processId:this.nextNodesList.processId,berv:this.nextNodesList.berv,businessId:this.id,submitStatus:1,nextNodesApprover:a};this.submitSaveLoading=!0;const r=!!this.currentRow.themeId;Object(l["i"])(r?c["a"].mpapi.batchSubApprove:c["a"].mpapi.subApprove,i,void 0,this.$retryDelay).then(e=>{this.$message.success("策略提交审批成功"),this.searchIMcdCamp(),this.dialogVisible=!1,this.id=""}).catch(t=>{var a;null!==(a=t.message)&&void 0!==a&&a.includes("timeout")&&!0!==e&&this.KeptSumbit(!0)}).finally(()=>{this.submitSaveLoading=!1})}},preservation(){this.$refs.terminationFrom.validate(async e=>{if(e){let e={id:this.id,pauseCommen:this.terminationFrom.Reasons};"暂停原因"===this.suspendtitle?await Object(l["i"])(c["a"].mpapi.campPause,e).then(()=>{this.id="",this.terminationFrom.Reasons="",this.$message.success("策略暂停成功"),this.suspend=!1,this.searchIMcdCamp()}):(e={id:this.id,cancelComment:this.terminationFrom.Reasons},await Object(l["i"])(c["a"].mpapi.campCancel,e).then(()=>{this.id="",this.terminationFrom.Reasons="",this.$message.success("策略终止成功"),this.suspend=!1,this.searchIMcdCamp()}))}})},async strategylDelete(e){await Object(l["i"])(c["a"].mpapi.batchDelCampseg,{id:e}).then(()=>{this.$message.success("主题删除成功")}).finally(()=>{this.id="",this.name="",this.searchIMcdCamp()})},updateCampsegEndDate(){this.$refs.endDateFrom.validate(async e=>{if(e){let e={id:this.id,endDate:this.endDateFrom.endDate+" 23:59:59"};return await Object(l["i"])(c["a"].mpapi.updateCampsegEndDate,e).then(()=>{this.id="",this.endDateFrom.endDate="",this.EndTime="",this.$message.success("延期成功"),this.Strategydialog=!1,this.searchIMcdCamp()}),!0}return!1})},VerificationDate(e){let t=Object(y["b"])(e.endDate);return!(t<0)||(this.$alert("提交策略已不在有效期，不允许操作","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"}),!1)},VerificationDatenoeName(e){if(90===e.campsegStatId||91===e.campsegStatId)return!0;let t=Object(y["b"])(e.endDate);return!(t<1&&t>=0)},tabsClick(e){this.queryForm.current=1,e.name},handleSizeChange(e){this.queryForm.current=1,this.queryForm.size=e,this.searchIMcdCamp()},handleCurrentChange(e){this.queryForm.current=e,this.searchIMcdCamp()},async directApprove(e){this.approveLoading=!0;try{await Object(l["i"])(d["a"].mpapi.qucickApprove+"?campsegRootId="+e.campsegId);this.searchIMcdCamp()}catch(t){}finally{this.approveLoading=!1}},echoCondition(){const e=this.$route.params;var t,a;"5"===e.tab&&e.queryParams&&(this.queryForm={...this.queryForm,...JSON.parse(this.$route.params.queryParams)},this.queryTime1=(null===(t=this.queryForm.campStartDay)||void 0===t?void 0:t.split(","))||null,this.queryTime2=(null===(a=this.queryForm.campEndDay)||void 0===a?void 0:a.split(","))||null,this.sizeFrom.radioModel=[this.queryForm.campsegStatId,this.queryForm.channelId])},goToModifyTheme(e){const{sceneType:t,themeId:a}=e;let i="/AiCanvas/CreateScene";this.$router.push({path:i,query:{id:a,type:t,backName:this.$router.currentRoute.name,tab:5,queryParams:JSON.stringify(this.queryForm)}})},async gotoDetail(e){if(e.themeId&&!e.campsegId)this.$router.push({path:"/MarketingPlanning/CanvasDetails",query:{id:e.themeId,backName:this.$router.currentRoute.name,tab:5,queryParams:JSON.stringify(this.queryForm)}});else if(e.campsegId){let t={};t=e.campsegRootId?{campsegRootId:e.campsegRootId,campsegId:e.campsegId}:{campsegRootId:e.campsegId},this.$router.push({path:"/MarketingPlanning/MarketingDetails",query:{...t,backName:this.$router.currentRoute.name,tab:5,queryParams:JSON.stringify(this.queryForm)}})}},async exportData(){try{this.exportLoading=!0;const{data:e,headers:t}=await Object(l["b"])(c["a"].mpapi.exportThemeCamp,this.queryForm),a=t["content-disposition"];let i=a&&a.split("filename=")[1]||"";i=i?decodeURIComponent(i):"主题策略活动列表.xlsx";const r=new Blob([e],{type:e.type});if("download"in document.createElement("a")){const e=document.createElement("a");e.download=i,e.style.display="none",e.href=URL.createObjectURL(r),document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}else navigator.msSaveBlob(r,i)}catch(e){}finally{this.exportLoading=!1}}}},Je=He,Ye=(a("2d02"),a("1108"),a("91d9"),a("d202"),a("54b1"),Object(g["a"])(Je,We,Be,!1,null,"f4d0467e",null)),Ke=Ye.exports,Ge=function(){var e=this,t=e._self._c;return t("div",{staticClass:"product-container"},[t("div",{staticClass:"product-search"},[t("div",{staticClass:"top-search-part"},[t("div",[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入模板编号或名称"},model:{value:e.queryForm.keyWords,callback:function(t){e.$set(e.queryForm,"keyWords","string"===typeof t?t.trim():t)},expression:"queryForm.keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){return e.QuerykeyWords()}}},[e._v("搜索")])],1)]),t("query-form-cell",{attrs:{list:e.QueryFormList,defaultSizeForm:e.sizeForm},on:{queryForm:e.InquireAbout}})],1),t("div",{staticClass:"table-part"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"Mp-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"calc(100% - 50px)"}},[t("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t("el-table-column",{attrs:{prop:"",label:"模板编号及名称",align:"center",width:"450px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(t){return e.gotoDetail(a.row)}}},[e._v(" "+e._s(a.row.templateId)+"  "+e._s(a.row.templateName)+" ")])]}}])}),t("el-table-column",{attrs:{prop:"address",label:"创建时间",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.ValidationTimeRange(a.row.createTime)))])]}}])}),t("el-table-column",{attrs:{prop:"createUser",label:"创建人",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"sceneDesc",label:"场景说明",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"refCount",label:"引用次数",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"场景分类",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s(e.getSceneClassName(a.row))+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"mr-10",on:{click:function(t){return e.cite(a.row)}}},[e._v("一键引用")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryForm.current,"page-sizes":[10,20,30,40],"page-size":e.queryForm.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"可引用列表",visible:e.dialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.dialogVisible=t},close:e.citeCancel}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"citeTable",staticClass:"Mp-table",staticStyle:{width:"100%"},attrs:{data:e.tableData2},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t("el-table-column",{attrs:{prop:"CAMPSEG_NAME",label:"子场景活动",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{type:"selection",width:"50",align:"center",label:""}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitCite()}}},[e._v("确 定")])],1)],1)],1)},Ze=[],Xe={props:["QueryFormList"],components:{QueryFormCell:o["a"]},data(){return{sizeForm:{radioModel:[""]},tableData:[],tableData2:[],queryForm:{keyWords:"",sceneClass:"",isSelectMy:1,current:1,size:10},total:0,dialogVisible:!1,loading:!1,loading2:!1,multipleSelection:[],currentRow:null}},computed:{sceneClassList(){return this.QueryFormList[0].values||[]}},created(){this.echoCondition(),this.searchIMcdCamp()},methods:{echoCondition(){const e=this.$route.params;"6"===e.tab&&e.queryParams&&(this.queryForm={...this.queryForm,...JSON.parse(this.$route.params.queryParams)},this.sizeForm.radioModel=[this.queryForm.sceneClass])},getSceneClassName({sceneClass:e}){return Object(y["e"])(this.sceneClassList,e).label},async cite(e){this.dialogVisible=!0,this.tableData2=[],this.multipleSelection=[],this.currentRow=e;try{this.loading2=!0;const t=await Object(l["i"])(c["a"].mpapi.queryCampInfoByThemeIdOrTemplateId,{templateId:e.templateId});this.tableData2=t||[];const a=this.$refs.citeTable;a&&this.$nextTick(()=>{0==e.sceneType?a.clearSelection():a.toggleAllSelection()})}catch(t){}finally{this.loading2=!1}},handleSelectionChange(e){if(0!=this.currentRow.sceneType&&e.length<this.tableData2.length)return this.$message.error("AI营销类型仅支持全选！"),void this.$refs.citeTable.toggleAllSelection();this.multipleSelection=e},citeCancel(){this.currentRow=null},submitCite(){if(!this.multipleSelection.length)return void this.$message.error("请选择场景活动");this.dialogVisible=!1;const{sceneType:e,templateId:t}=this.currentRow;let a=this.multipleSelection.map(e=>e.SCENE_ID).join(",");0!=e&&(a=void 0);let i="/AiCanvas/CreateScene";this.$router.push({path:i,query:{scenes:a,id:t,type:e,isOneClickRef:1,backName:this.$router.currentRoute.name,tab:6,queryParams:JSON.stringify(this.queryForm)}})},handleSizeChange(e){this.queryForm.size=e,this.searchIMcdCamp()},handleCurrentChange(e){this.queryForm.current=e,this.searchIMcdCamp()},ValidationTimeRange(e){return M()(e).format("YYYY-MM-DD")},async searchIMcdCamp(){try{this.loading=!0;const e=await Object(l["i"])(c["a"].mpapi.queryTemplateList,{...this.queryForm});this.tableData=e.records,this.total=e.total}catch(e){}finally{this.loading=!1}},QuerykeyWords(){this.queryForm.current=1,this.searchIMcdCamp()},InquireAbout({form:{radioModel:e}}){this.queryForm.sceneClass=e[0],this.queryForm.current=1,this.searchIMcdCamp()},async getTemplateDetail(e){await Object(l["i"])(c["a"].mpapi.getTemplateDetailByTemplateId,{id:e.templateId})},async gotoDetail(e){this.$router.push({path:"/MarketingPlanning/CanvasDetails",query:{id:e.templateId,backName:this.$router.currentRoute.name,tab:6,queryParams:JSON.stringify(this.queryForm)}})}}},et=Xe,tt=(a("00fc"),Object(g["a"])(et,Ge,Ze,!1,null,"734839da",null)),at=tt.exports,it={components:{MyMarketing:K,AllMarketing:W,Joinmarketing:ie,MarketingRehearsal:Ve,Theme:Ke,Template:at},data(){return{tabActive:"",QueryList:[{label:"策略状态",values:[{label:"不限",value:""}],isDate:!1},{label:"归属渠道",values:[{label:"不限",value:""}],isDate:!1}],ChannelsList:[],templateQueryList:[{label:"场景分类",enumKey:"activity_type",values:[{label:"不限",value:""}],isDate:!1}]}},computed:{QueryFormCell(){let e=[...this.QueryList],t=this.ChannelsList.map(e=>({label:e.channelName,value:e.channelId}));return e[1].values=[...e[1].values,...t],e},TemplateQueryFormCell(){return this.templateQueryList}},created(){var e;if(this.searchSceneType(),this.searchCampsegStat(),this.getChannels(),null!==(e=this.$route.params)&&void 0!==e&&e.tab){let e=+this.$route.params.tab;switch(e){case 1:this.tabActive="product";break;case 2:this.tabActive="content";break;case 3:this.tabActive="participation";break;case 4:this.tabActive="preview";break;case 5:this.tabActive="theme";break;case 6:this.tabActive="template";break;default:this.tabActive="product";break}}else this.tabActive="product"},methods:{tabsClick(){},async searchCampsegStat(){await Object(l["i"])(Oe["a"].common.getSysEnum,{enumType:"CAMP_DIM_STATUS"}).then(e=>{e.map(e=>{this.QueryFormCell[0].values.push({label:e.enumValue,value:e.enumKey})})})},async getChannels(){await Object(l["i"])(X["a"].seapi.getOnlineChannels,{onlineStatus:"1"}).then(e=>{this.ChannelsList=e})},async searchSceneType(){const e="activity_type";await Object(l["i"])(Oe["a"].common.getSysEnum,{enumType:e}).then(t=>{const a=this.templateQueryList.find(t=>t.enumKey===e);t.forEach(e=>{a.values.push({label:e.enumValue,value:e.enumKey})})})}}},rt=it,nt=(a("4339"),a("3eeb"),Object(g["a"])(rt,i,r,!1,null,"05077f35",null));t["default"]=nt.exports},a235:function(e,t,a){},a28d:function(e,t,a){"use strict";a("cddb")},a640:function(e,t,a){"use strict";var i=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&i((function(){a.call(null,t||function(){return 1},1)}))}},a6b6:function(e,t,a){"use strict";a("d16e")},a8de:function(e,t,a){},ab00:function(e,t,a){"use strict";a("1a66")},ae81:function(e,t,a){"use strict";a("f872")},aedd:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"1000px",modal:!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"search_box"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入事件名称编码"},model:{value:e.queryForm.keyWords,callback:function(t){e.$set(e.queryForm,"keyWords","string"===typeof t?t.trim():t)},expression:"queryForm.keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:function(t){return e.searchList()}},slot:"suffix"})])],1),t("div",{staticClass:"content"},[t("div",{staticClass:"tree"},[t("div",{staticClass:"search_box"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",staticStyle:{width:"80%",margin:"0 auto"},attrs:{placeholder:"输入事件类型名称"},model:{value:e.keyWords,callback:function(t){e.keyWords="string"===typeof t?t.trim():t},expression:"keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.initChannel},slot:"suffix"})])],1),t("el-tree",{ref:"vueTree",attrs:{props:e.props,data:e.channelList,"node-key":"id",accordion:"","highlight-current":"","icon-class":"iconfont icongonggongtubiao-shouqi Treecolor"},on:{"node-click":e.TreeNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:a,data:i}){return t("div",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(a.label))]),t("span",[e._v(e._s(i.num))])])}}])})],1),t("div",{staticClass:"content-table"},[t("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.chainedData},on:{"row-click":e.singleElection}},[t("el-table-column",{attrs:{align:"center",width:"55",label:"选择"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{staticClass:"radio",attrs:{label:a.row.eventId},model:{value:e.templateSelection,callback:function(t){e.templateSelection=t},expression:"templateSelection"}},[e._v(" ")])]}}])}),t("el-table-column",{attrs:{prop:"eventId",label:"事件编码","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"eventName",label:"事件名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"firstClassName",label:"一级分类"}}),t("el-table-column",{attrs:{prop:"createUserName",label:"创建人"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":""}})],1)],1)]),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"current-page":e.queryForm.current,"page-size":e.queryForm.size,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)])],1)},r=[],n=a("0fea"),s=(a("d370"),a("5e05")),o=a("b893"),l={props:{title:{type:String,default:"复杂事件场景实例"}},data(){return{dialogVisible:!1,tagsList:[],queryForm:{keyWords:"",current:1,size:10,status:"1",classifyId:""},total:0,chainedData:[],props:{label:"label",children:"children",num:"num"},channelList:[],templateSelection:"",checkList:[],keyWords:""}},created(){this.getChainedList(this.queryForm),this.initChannel()},methods:{async getChainedList(e){let t=await Object(n["i"])(s["a"].common.getSceneList,e);this.chainedData=t.records,this.total=t.total},searchList(){this.getChainedList(this.queryForm)},showDialog(e){this.dialogVisible=e},handleCurrentChange(e){this.queryForm.current=e,this.getChainedList(this.queryForm)},handleSizeChange(e){this.queryForm.size=e,this.getChainedList(this.queryForm)},copyItem(e){},addItem(e){this.$set(this.tagsList,0,e)},handleClose(e){this.tagsList.splice(this.tagsList.indexOf(e),1)},async initChannel(){await Object(n["i"])(s["a"].common.getSceneTypeList,{keyWords:this.keyWords}).then(e=>{this.initAdivInfo(e)})},async initAdivInfo(e){let t=e.map(e=>({id:e.id,label:e.label,children:e.children,parentId:e.parentId}));t=[{label:"全部",id:"-1",parentId:"-2",children:t}],t.forEach(e=>{e.children=e.children.map(e=>({id:e.id,label:e.label,children:e.children,parentId:e.parentId}))}),this.channelList=Object(o["f"])(t,"id","parentId","children","-2")},TreeNodeClick(e){"全部"===e.label?(this.queryForm={...this.queryForm,classifyId:"",current:1},this.getChainedList(this.queryForm)):(this.queryForm={...this.queryForm,classifyId:e.id},this.getChainedList(this.queryForm))},singleElection(e){this.templateSelection=e.eventId,this.checkList=this.chainedData.filter(t=>t.eventId===e.eventId)},clearEvent(){this.templateSelection="",this.checkList=[],this.$forceUpdate()},submit(){this.$emit("addScene",this.checkList[0]),this.dialogVisible=!1}}},c=l,d=(a("8914"),a("2877")),u=Object(d["a"])(c,i,r,!1,null,"5a199ac2",null);t["a"]=u.exports},b394:function(e,t,a){"use strict";a("fba0")},b679:function(e,t,a){},c16e:function(e,t,a){"use strict";a("792c")},c56c:function(e,t,a){"use strict";a("6555")},c599:function(e,t,a){"use strict";a("9be9")},c885:function(e,t,a){},ca67:function(e,t,a){"use strict";a("d0ba")},cddb:function(e,t,a){},d0ba:function(e,t,a){},d16e:function(e,t,a){},d202:function(e,t,a){"use strict";a("b679")},d39c:function(e,t,a){"use strict";const i="/element-svc/api",r="/preview-svc",n="/mcd-web/action";t["a"]={seapi:{querylistEnumValue:"/element-svc/mcd-plan-label/queryLabelByKey",loadImage:i+"/mcdDimMaterial/loadImage",queryTableList:"/element-svc/api/jx/mcdPlanDef/queryPlanDefPageList",saveStatus:i+"/mcdPlanDef/updatePlanDefStatus",queryDetail:"/element-svc/api/jx/mcdPlanDef/getPlanDetailById",mcdChannelList:i+"/mcdDimMaterial/queryChannel",mcdContList:i+"/mcdDimMaterial/queryContact",mcdPositList:i+"/mcdDimMaterial/queryPosition",getChannels:i+"/mcdDimChannel/pagelistDimChannel",queryContactByChannelId:i+"/iop/operatingPositionManager/queryContactByChannelId.do",queryPosition:i+"/iop/template/queryPosition",getOnlineChannels:i+"/mcdDimChannel/listDimChannel  ",getOnlineChannelsByUser:i+"/mcdDimChannel/jx/listDimChannel",getSysDics:"/plan-svc/action/iop/common/getSysDics",queryDigitalProductContents:i+"/iopDigitalProduct/queryDigitalProductPageList",queryConentDetailById:i+"/iopDigitalProduct/getDigitalProduct",updateDigitalProuctStatus:i+"/iopDigitalProduct/updateDigitalProductStatus",queryMaterialInfo:i+"/mcdDimMaterial/queryMaterialPageList",deleteMaterById:i+"/mcdDimMaterial/deleteMaterial",queryMaterialById:i+"/mcdDimMaterial/getMaterial",saveOrUpdateMaterial:i+"/mcdDimMaterial/saveOrUpdateMaterial",uploadMaterImg:i+"/mcdDimMaterial/uploadMaterialPicture",uploadMaterVideo:i+"/mcdDimMaterial/uploadMaterialVideo",uploadMaterFile:i+"/mcdDimMaterial/uploadMaterialsFile",queryIopContactList:i+"/jx/mcdDimContact/pagelistMcdDimContact",queryContactDetailById:i+"/jx/mcdDimContact/getDimContactDetail",listAllChannelName:i+"/mcdDimChannel/listAllChannelNameAndId",deleteContactById:i+"/mcdDimContact/removeContact",saveOrUpdateContact:i+"/jx/mcdDimContact/saveOrUpdateContact",validateContactName:i+"/mcdDimContact/getValidateContactName",displayChannelList:"/element-svc/api/mcdDimChannel/jx/pagelistDimChannel",validateChannelName:i+"/mcdDimChannel/getValidateChannelName",saveOrUpdateChannel:"/element-svc/api/mcdDimChannel/jx/saveOrUpdateDimChannel",deleteChannelById:i+"/mcdDimChannel/removeDimChannel",channelDetail:i+"/mcdDimChannel/getDimChannel",customerLike:"/preview-svc/jx/chnPre/queryPreData",channelDetail:"/element-svc/mcd-dim-channel-desc/query",uploaChanPromptFile:"/element-svc/api/mcdDimChannel/jx/uploaChanPromptFile",downloadChanPromptFile:"/plan-svc/mcd/chan/prompt/downloadChanPromptFile",queryDimChannelInfo:"/element-svc/api/mcdDimChannel/jx/queryDimChannelInfo",queryChannelEValData:"/groupmarket/enterprise/queryChannelEValData",queryIopOperatingPosition:i+"/mcdDimAdivInfo/pagelistAdivInfo",deleteOperatingPositionById:i+"/mcdDimAdivInfo/removeAdivInfo",queryOperPositionDetail:i+"/mcdDimAdivInfo/getAdivInfo",queryOpelistData:i+"/mcdDimAdivInfo/listChannelInfoAndContactInfo",queryCampsegInfoWithThisPosId:i+"/mcdDimAdivInfo/listpageCampsegInfoWithThisAdivId",getConfigList:i+"/mcdDimAttrConf/queryConfigList",validateOperationName:i+"/mcdDimAdivInfo/getValidateAdivInfoName",getValidateAdivInfoId:i+"/jx/mcdDimAdivInfo/getValidateAdivInfoId",saveOrUpdateOperPosition:i+"/mcdDimAdivInfo/saveOrUpdateAdivInfo",getChannelScheduleList:n+"/channelview/getChannelScheduleList",querySensitiveCust:r+"/mcd-channel-sensitive-cust-conf/querySensitiveCust",saveSensitiveCust:r+"/mcd-channel-sensitive-cust-conf/saveSensitiveCust",deleteSensitiveCust:r+"/mcd-channel-sensitive-cust-conf/deleteSensitiveCust",batchDeleteSensitiveCust:r+"/mcd-channel-sensitive-cust-conf/batchDeleteSensitiveCust",pagelistApproveMaterial:i+"/mcdDimMaterialApprove/pagelistApproveMaterial",approveRecord:i+"/mcdDimMaterialApprove/approveRecord",pagelistMyMaterial:i+"/mcdDimMaterialTemplate/pagelistMyMaterial",pagelistExcellentMaterial:i+"/mcdDimMaterialTemplate/pagelistExcellentMaterial",pagelistHotSpotMaterial:i+"/mcdDimMaterialTemplate/pagelistHotSpotMaterial",updateMaterialStatus:i+"/mcdDimMaterial/updateMaterialStatus",getMaterialApprover:i+"/mcdDimMaterialApprove/getMaterialApprover",getCmpApprovalProcess:i+"/mcdDimMaterialApprove/getCmpApprovalProcess",subMaterialApprove:i+"/mcdDimMaterialApprove/subMaterialApprove",addExcellentMaterialLibrary:i+"/mcdDimMaterialTemplate/addExcellentMaterialLibrary",removeExcellentMaterialLibrary:i+"/mcdDimMaterialTemplate/removeExcellentMaterialLibrary",createExcellentMaterial:i+"/mcdDimMaterialTemplate/createExcellentMaterial",createHotSpotMaterial:i+"/mcdDimMaterialTemplate/createHotSpotMaterial",removeMyMaterial:i+"/mcdDimMaterialTemplate/removeMyMaterial",getIntell:i+"/mcdDimMaterial/getIntelligentMatchingMaterialList"}}},d44e:function(e,t,a){"use strict";var i=a("9bf2").f,r=a("1a2d"),n=a("b622"),s=n("toStringTag");e.exports=function(e,t,a){e&&!a&&(e=e.prototype),e&&!r(e,s)&&i(e,s,{configurable:!0,value:t})}},d58f:function(e,t,a){"use strict";var i=a("59ed"),r=a("7b0b"),n=a("44ad"),s=a("07fa"),o=TypeError,l=function(e){return function(t,a,l,c){var d=r(t),u=n(d),p=s(d);i(a);var m=e?p-1:0,h=e?-1:1;if(l<2)while(1){if(m in u){c=u[m],m+=h;break}if(m+=h,e?m<0:p<=m)throw new o("Reduce of empty array with no initial value")}for(;e?m>=0:p>m;m+=h)m in u&&(c=a(c,u[m],m,d));return c}};e.exports={left:l(!1),right:l(!0)}},d6d6:function(e,t,a){"use strict";var i=TypeError;e.exports=function(e,t){if(e<t)throw new i("Not enough arguments");return e}},dba2:function(e,t,a){"use strict";a("ffbf")},dead:function(e,t,a){"use strict";a("512e")},e62b:function(e,t,a){},e6de:function(e,t,a){"use strict";a("ef5c")},edd0:function(e,t,a){"use strict";var i=a("13d2"),r=a("9bf2");e.exports=function(e,t,a){return a.get&&i(a.get,t,{getter:!0}),a.set&&i(a.set,t,{setter:!0}),r.f(e,t,a)}},ef5c:function(e,t,a){},f872:function(e,t,a){},f8c9:function(e,t,a){"use strict";var i=a("23e7"),r=a("da84"),n=a("d44e");i({global:!0},{Reflect:{}}),n(r.Reflect,"Reflect",!0)},fba0:function(e,t,a){},fc1c:function(e,t,a){"use strict";a("e62b")},fd11:function(e,t,a){"use strict";a("6129")},fd60:function(e,t,a){},ffbf:function(e,t,a){}}]);