(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55550144"],{"8c2a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"avoid-bother-customer-wrap fe-m-24 fe-p-24 bg"},[e("div",{staticClass:"search_box"},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入部门编号/名称查询"},model:{value:t.queryFrom.keyWords,callback:function(e){t.$set(t.queryFrom,"keyWords","string"===typeof e?e.trim():e)},expression:"queryFrom.keyWords"}},[e("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:function(e){return t.queryListByKeyword()}},slot:"suffix"})]),e("div",{staticClass:"btn_box"},[e("el-button",{attrs:{type:"success"},on:{click:t.departmentAdd}},[t._v("新建")])],1)],1),e("div",{staticClass:"list"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"default-sort":{prop:"sortNum",order:"ascending"}}},[e("el-table-column",{attrs:{type:"index",label:"序号"}}),e("el-table-column",{attrs:{prop:"deptCode",label:"部门编号","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"title",label:"部门名称","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"cityName",label:"归属地市","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"parentId",label:"直属上级部门","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"primaryPerson",label:"负责人","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"sortNum",label:"排序号","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"notes",label:"部门描述","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(e){return t.lookHanlder(a.row)}}},[t._v("查看 ")]),e("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(e){return t.copyHanlder(a.row)}}},[t._v("复制部门 ")]),e("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(e){return t.editHanlder(a.row)}}},[t._v("编辑 ")]),e("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-warning",iconColor:"#FAAD14",title:"确定删除？","cancel-button-type":"Primary"},on:{confirm:function(e){return t.deleteHanlder(a.row)}}},[e("el-link",{staticClass:"cursor-pointer text-sm",attrs:{slot:"reference",type:"danger",underline:!1},slot:"reference"},[t._v(" 删除")])],1)]}}])})],1)],1),e("div",{staticClass:"pager"},[e("el-pagination",{attrs:{"current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizeList,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t.dialogVisible?e("department-dialog",{attrs:{dialogVisible:t.dialogVisible,dialogTitle:t.dialogTitle,operationType:t.operationType,rowData:t.rowData},on:{"update:dialogVisible":function(e){t.dialogVisible=e},"update:dialog-visible":function(e){t.dialogVisible=e},getDepartmentListData:t.getDepartmentListData}}):t._e()],1)},i=[],o=a("0fea"),l=a("a454"),s=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,"before-close":t.closeHandler,width:"400px","append-to-body":""}},[e("div",{staticClass:"Contact-mtp"},[e("el-form",{ref:"departmentFrom",attrs:{model:t.formData,"label-width":"120px",rules:t.rules}},[e("el-form-item",{attrs:{label:"部门编号",prop:"deptCode"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{maxlength:"20"},model:{value:t.formData.deptCode,callback:function(e){t.$set(t.formData,"deptCode",e)},expression:"formData.deptCode"}})],1),e("el-form-item",{attrs:{label:"部门ID",prop:"deptId"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{maxlength:"20"},model:{value:t.formData.deptId,callback:function(e){t.$set(t.formData,"deptId",e)},expression:"formData.deptId"}})],1),e("el-form-item",{attrs:{label:"部门名称",prop:"title"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{maxlength:"20"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),e("el-form-item",{attrs:{label:"归属地市",prop:"cityId"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.formData.cityId,callback:function(e){t.$set(t.formData,"cityId",e)},expression:"formData.cityId"}},t._l(t.cityArr,(function(t,a){return e("el-option",{key:a,attrs:{label:t.cityName,value:t.cityId}})})),1)],1),e("el-form-item",{attrs:{label:"直属上级部门",prop:"parentId"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.formData.parentId,callback:function(e){t.$set(t.formData,"parentId",e)},expression:"formData.parentId"}},t._l(t.parentArr,(function(t,a){return e("el-option",{key:a,attrs:{label:t.title,value:t.deptId}})})),1)],1),e("el-form-item",{attrs:{label:"负责人",prop:"primaryPerson"}},[e("el-input",{model:{value:t.formData.primaryPerson,callback:function(e){t.$set(t.formData,"primaryPerson",e)},expression:"formData.primaryPerson"}})],1),e("el-form-item",{attrs:{label:"排序号",prop:"sortNum"}},[e("el-input-number",{attrs:{min:0},model:{value:t.formData.sortNum,callback:function(e){t.$set(t.formData,"sortNum",e)},expression:"formData.sortNum"}})],1),e("el-form-item",{staticClass:"remarks",attrs:{label:"部门描述",prop:"notes"}},[e("el-input",{attrs:{type:"textarea",maxlength:"500",placeholder:"您可以输入500个字"},model:{value:t.formData.notes,callback:function(e){t.$set(t.formData,"notes",e)},expression:"formData.notes"}})],1)],1)],1),"look"!=this.operationType?e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeHandler}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保 存")])],1):t._e()])],1)},n=[],p=a("f9ae"),d={name:"departmentDialog",props:{dialogTitle:{type:String},dialogVisible:{type:Boolean,default:!1},operationType:{type:String,default:()=>"add"},rowData:{type:Object}},data(){return{formData:{},rules:{deptCode:[{required:!0,message:"请输入部门编号",trigger:"blur"}],deptId:[{required:!0,message:"请输入部门ID",trigger:"blur"}],title:[{required:!0,message:"请输入部门名称",trigger:"blur"}],type:[{required:!1,message:"请选择部门类型",trigger:"blur"}],cityId:[{required:!0,message:"请选择归属地市",trigger:"blur"}],parentId:[{required:!1,message:"请选择直属上级部门",trigger:"blur"}],primaryPerson:[{required:!1,message:"请输入负责人",trigger:"blur"}]},departmentTypeArr:[],cityArr:[],parentArr:[]}},methods:{closeHandler(){this.$emit("update:dialogVisible",!1)},getSelectDepartmentData(){Object(o["i"])(l["a"].department.selectDepartmentData).then(t=>{this.parentArr=t})},getCitySelectData(){Object(o["i"])(l["a"].user.citySelectData).then(t=>{this.cityArr=t})},getDepartmentInfo(){Object(o["i"])(l["a"].department.lookDepartmentInfo,{id:this.rowData.deptId}).then(t=>{this.formData=t})},async addDepartmentInfo(){this.$refs["departmentFrom"].validate(async t=>{t?await Object(o["i"])(l["a"].department.addDepartmentInfo,this.formData).then(t=>{this.$message.success("新增成功"),this.$emit("getDepartmentListData"),this.closeHandler()}):this.$alert("请填写必填项","校验失败",{confirmButtonText:"确定",customClass:"errorPrompt"})})},async copyDepartmentInfo(){this.$refs["departmentFrom"].validate(async t=>{t?await Object(o["i"])(l["a"].department.addDepartmentInfo,this.formData).then(t=>{this.$message.success("新增成功"),this.$emit("getDepartmentListData"),this.closeHandler()}):this.$alert("请填写必填项","校验失败",{confirmButtonText:"确定",customClass:"errorPrompt"})})},async editDepartmentInfo(){this.$refs["departmentFrom"].validate(async t=>{t?(this.formData.deptId=this.rowData.deptId,await Object(o["i"])(l["a"].department.editDepartmentInfo,this.formData).then(t=>{this.$message.success("编辑成功"),this.$emit("getDepartmentListData"),this.closeHandler()})):this.$alert("请填写必填项","校验失败",{confirmButtonText:"确定",customClass:"errorPrompt"})})},submit:Object(p["a"])((function(){"add"===this.operationType?this.addDepartmentInfo():(this.operationType,this.editDepartmentInfo())}))},created(){this.getCitySelectData(),this.getSelectDepartmentData(),"edit"!==this.operationType&&"look"!==this.operationType||this.getDepartmentInfo()}},m=d,c=(a("d512"),a("2877")),u=Object(c["a"])(m,s,n,!1,null,"ae9e616a",null),g=u.exports,f={name:"DepartmentManage",components:{DepartmentDialog:g},data(){return{operationType:"add",dialogVisible:!1,rowData:{},queryFrom:{keyWords:""},pageData:{currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0},loading:!1,dialogTitle:"",windowTitle:"",tableData:[]}},methods:{initializationFrom(){this.queryFrom.current=1},async getDepartmentListData(){this.loading=!0,await Object(o["i"])(l["a"].department.getDepartmentList,{keyWords:this.queryFrom.keyWords,current:this.pageData.currentPage,size:this.pageData.pageSize}).then(t=>{this.tableData=t.records,this.pageData.total=t.total,this.loading=!1,this.initializationFrom()})},queryApproveInfo(){this.getDepartmentListData()},queryListByKeyword(){this.pageData.currentPage=1,this.queryApproveInfo()},departmentAdd(){this.dialogVisible=!0,this.dialogTitle="添加部门",this.operationType="add"},copyHanlder(t){this.dialogVisible=!0,this.dialogTitle="复制部门",this.operationType="copy",this.rowData={roleIds:t.roleIds}},lookHanlder(t){this.dialogVisible=!0,this.dialogTitle="查看部门",this.operationType="look",this.rowData=t},editHanlder(t){this.dialogVisible=!0,this.dialogTitle="编辑部门",this.operationType="edit",this.rowData=t},deleteHanlder(t){Object(o["i"])(l["a"].department.deleteDepartmentList,{id:t.deptId}).then(t=>{"SUCCESS"===t.status&&this.getDepartmentListData(),this.$message({type:"删除成功"===t.message?"success":"error",message:t.message})})},handleSizeChange(t){this.pageData.pageSize=t,this.queryApproveInfo()},handleCurrentChange(t){this.pageData.currentPage=t,this.queryApproveInfo()}},created(){this.getDepartmentListData()},mounted(){}},h=f,D=Object(c["a"])(h,r,i,!1,null,"532bcddb",null);e["default"]=D.exports},d3d6:function(t,e,a){},d512:function(t,e,a){"use strict";a("d3d6")}}]);