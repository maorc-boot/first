(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56eb8c38"],{"358a":function(e,t,a){"use strict";a("f16b")},f16b:function(e,t,a){},f689:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flow-template-manage-wrap fe-p-24 fe-m-24 bg"},[t("div",{staticClass:"search_box"},[t("el-form",{ref:"search",attrs:{model:e.search,"label-width":"85px"}},[t("el-form-item",{attrs:{label:"请求地址:"}},[t("el-input",{staticClass:"input-search",attrs:{placeholder:"请输入请求地址"},model:{value:e.search.requestUrl,callback:function(t){e.$set(e.search,"requestUrl",t)},expression:"search.requestUrl"}})],1),t("el-form-item",{attrs:{label:"请求IP:"}},[t("el-input",{staticClass:"input-search",attrs:{placeholder:"请输入请求IP"},model:{value:e.search.clientAddress,callback:function(t){e.$set(e.search,"clientAddress",t)},expression:"search.clientAddress"}})],1),t("el-form-item",{attrs:{label:"日志类型:"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择日志类型"},on:{change:e.logChange},model:{value:e.search.logType,callback:function(t){e.$set(e.search,"logType",t)},expression:"search.logType"}},e._l(e.logTypes,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"用户ID:"}},[t("el-input",{staticClass:"input-search",attrs:{placeholder:"请输入用户ID"},model:{value:e.search.userId,callback:function(t){e.$set(e.search,"userId",t)},expression:"search.userId"}})],1),t("el-form-item",{attrs:{label:"请求时间:"}},[t("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0},on:{change:e.dateChange},model:{value:e.search.dateModel,callback:function(t){e.$set(e.search,"dateModel",t)},expression:"search.dateModel"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.queryForm}},[e._v("查询")])],1)],1)],1),t("div",{staticClass:"list"},[t("el-table",{attrs:{data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{prop:"requestUrl",label:"请求地址","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"requestType",label:"请求方式"}}),t("el-table-column",{attrs:{prop:"logType",label:"日志类型"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.logType?t("span",[e._v("登录")]):e._e(),1===a.row.logType?t("span",[e._v("登出")]):e._e(),2===a.row.logType?t("span",[e._v("点击一次菜单")]):e._e(),3===a.row.logType?t("span",[e._v("点击二次菜单")]):e._e(),4===a.row.logType?t("span",[e._v("详情查询")]):e._e(),5===a.row.logType?t("span",[e._v("列表查询")]):e._e(),6===a.row.logType?t("span",[e._v("新增")]):e._e(),7===a.row.logType?t("span",[e._v("修改")]):e._e(),8===a.row.logType?t("span",[e._v("删除")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"menuName",label:"菜单名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"userId",label:"用户id"}}),t("el-table-column",{attrs:{prop:"clientAddress",label:"请求IP","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"logTime",label:"请求时间","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{staticClass:"text-sm mr-16",attrs:{href:"#/SystemManage/LogDetails?id="+a.row.logId,type:"primary",underline:!1},on:{click:function(t){return e.detail(a.row)}}},[e._v("详情 ")])]}}])})],1)],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":e.pageData.pageSizeList,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},l=[],r=a("0fea"),o=a("a454");const i=o["a"].gatewayLog.gatewayList,n=o["a"].enumeration.listByEnumType;var c={name:"FlowTempManage",components:{},data(){return{isCreateVisible:!1,search:{userId:"",clientAddress:"",startTime:"",endTime:"",requestUrl:"",logType:"",dateModel:["",""]},logTypes:[],labelWidth:"85px",sizeForm:{radioModel:["",""]},tableData:[],pageData:{currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0}}},created(){this.getListByEnumType(),this.queryList()},methods:{logChange(){},dateChange(){this.search.dateModel?this.search.dateModel.forEach((e,t)=>{0===t?this.search.startTime=e:this.search.endTime=e}):(this.search.dateModel=[],this.search.startTime="",this.search.endTime="")},getListByEnumType(){Object(r["i"])(n,{enumType:"mcd_sys_log_type"}).then(e=>{this.logTypes=e})},detail(e){},queryList(){let e={current:this.pageData.currentPage,size:this.pageData.pageSize,userId:this.search.userId,clientAddress:this.search.clientAddress,startTime:this.search.startTime,endTime:this.search.endTime,requestUrl:this.search.requestUrl,logType:this.search.logType};Object(r["i"])(i,e).then(e=>{this.tableData=e.records,this.pageData.total=e.total})},queryForm(){this.queryList()},handleClose(){this.$refs.createTemplateModal.$refs.dropNode.cancelDropNode(),this.isCreateVisible=!1},handleCancle(){this.isCreateVisible=!1,this.$forceUpdate()},handleSizeChange(e){this.pageData.pageSize=e,this.queryList()},handleCurrentChange(e){this.pageData.currentPage=e,this.queryList()}}},p=c,h=(a("358a"),a("2877")),d=Object(h["a"])(p,s,l,!1,null,null,null);t["default"]=d.exports}}]);