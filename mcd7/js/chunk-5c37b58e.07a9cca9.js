(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c37b58e"],{"2bf5":function(e,t,a){"use strict";a("ceee")},"38c8":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"系统提示",visible:e.dialogVisible,width:"412px",top:"25vh","append-to-body":"","close-on-click-modal":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"Dialog-center"},[t("p",[e._v("确定要删除"+e._s(e.title))]),t("span",[e._v("["+e._s(e.name)+"]?")])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"info"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.DleteCallback}},[e._v("确 定")])],1)])],1)},l=[],n={name:"DleteDialog",props:{name:String,title:String,id:String},data(){return{dialogVisible:!1}},methods:{showDelete(){this.dialogVisible=!0},DleteCallback(){this.$emit("Dlete",this.id),this.dialogVisible=!1}}},r=n,o=(a("e259"),a("7b2b"),a("2877")),s=Object(o["a"])(r,i,l,!1,null,"3a86c304",null);t["a"]=s.exports},"44f7":function(e,t,a){},"4e3f":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"query-form-cell-wrap"},[t("el-form",{ref:"form",attrs:{model:e.sizeForm,"label-width":e.labelWidth,"label-position":e.labelPosition,size:"mini"}},e._l(e.list,(function(a,i){return t("el-form-item",{key:i+"list",class:{disabled:a.disabled},attrs:{"label-width":a.labelWidth||e.labelWidth,label:a.label+"："}},[Array.isArray(a.values)?t("div",{staticClass:"fe-d-flex"},[t("div",{staticClass:"radio-box"},[a.dateType?e._e():t("el-radio-group",{attrs:{size:"mini",disabled:a.disabled},on:{change:function(t){return e.radioChange(e.sizeForm.radioModel[i],i)}},model:{value:e.sizeForm.radioModel[i],callback:function(t){e.$set(e.sizeForm.radioModel,i,t)},expression:"sizeForm.radioModel[index]"}},e._l(a.values,(function(a,i){return t("el-radio-button",{key:i+"listValues",attrs:{label:a.value}},[e._v(e._s(a.label)+" ")])})),1)],1),t("div",{staticClass:"date-box"},["date"===a.dateType?t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"month"===a.dateType?t("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"daterange"===a.dateType?t("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"datetimerange"===a.dateType?t("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e()],1)]):t("div",{staticClass:"input-box"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入内容"},on:{change:e.inputChange},model:{value:e.sizeForm.radioModel[i],callback:function(t){e.$set(e.sizeForm.radioModel,i,t)},expression:"sizeForm.radioModel[index]"}})],1)])})),1)],1)},l=[],n={name:"QueryFormCell",props:{labelWidth:{type:String,default:()=>"82px"},labelPosition:{type:String,default:()=>"right"},defaultSizeForm:{type:Object,default:()=>({})},list:{type:Array,default:()=>[{label:"数据时间",values:[{label:"不限",value:"1"}],isDate:!0,dateType:"date"},{label:"接口类型",values:[{label:"不限",value:"不限"},{label:"文件接口",value:"文件接口"}],isDate:!1}]}},data(){return{sizeForm:{dateModel:["2021-05-08","",""],radioModel:["自定义","不限","不限","不限"]}}},watch:{defaultSizeForm:{handler:function(e){this.sizeForm=e},deep:!0,immediate:!0}},methods:{radioChange(e,t){this.sizeForm.dateModel&&this.$set(this.sizeForm.dateModel,t,"date"===this.list[t].dateType?"":["",""]),this.$emit("queryForm",{index:t,value:e,form:this.sizeForm})},dateChange(e){e?(this.$set(this.sizeForm.dateModel,0,e),this.$emit("queryForm",{value:e,form:this.sizeForm})):this.$emit("emptyFrom",this.sizeForm)},inputChange(e){e&&this.$emit("queryForm",{value:e,form:this.sizeForm})}}},r=n,o=(a("a28d"),a("2877")),s=Object(o["a"])(r,i,l,!1,null,null,null);t["a"]=s.exports},6785:function(e,t,a){"use strict";a("d5c8")},"7b2b":function(e,t,a){"use strict";a("9d0f")},"8d871":function(e,t,a){},"9d0f":function(e,t,a){},a28d:function(e,t,a){"use strict";a("cddb")},cddb:function(e,t,a){},ceee:function(e,t,a){},d39c:function(e,t,a){"use strict";const i="/element-svc/api",l="/preview-svc",n="/mcd-web/action";t["a"]={seapi:{querylistEnumValue:"/element-svc/mcd-plan-label/queryLabelByKey",loadImage:i+"/mcdDimMaterial/loadImage",queryTableList:"/element-svc/api/jx/mcdPlanDef/queryPlanDefPageList",saveStatus:i+"/mcdPlanDef/updatePlanDefStatus",queryDetail:"/element-svc/api/jx/mcdPlanDef/getPlanDetailById",mcdChannelList:i+"/mcdDimMaterial/queryChannel",mcdContList:i+"/mcdDimMaterial/queryContact",mcdPositList:i+"/mcdDimMaterial/queryPosition",getChannels:i+"/mcdDimChannel/pagelistDimChannel",queryContactByChannelId:i+"/iop/operatingPositionManager/queryContactByChannelId.do",queryPosition:i+"/iop/template/queryPosition",getOnlineChannels:i+"/mcdDimChannel/listDimChannel  ",getOnlineChannelsByUser:i+"/mcdDimChannel/jx/listDimChannel",getSysDics:"/plan-svc/action/iop/common/getSysDics",queryDigitalProductContents:i+"/iopDigitalProduct/queryDigitalProductPageList",queryConentDetailById:i+"/iopDigitalProduct/getDigitalProduct",updateDigitalProuctStatus:i+"/iopDigitalProduct/updateDigitalProductStatus",queryMaterialInfo:i+"/mcdDimMaterial/queryMaterialPageList",deleteMaterById:i+"/mcdDimMaterial/deleteMaterial",queryMaterialById:i+"/mcdDimMaterial/getMaterial",saveOrUpdateMaterial:i+"/mcdDimMaterial/saveOrUpdateMaterial",uploadMaterImg:i+"/mcdDimMaterial/uploadMaterialPicture",uploadMaterVideo:i+"/mcdDimMaterial/uploadMaterialVideo",uploadMaterFile:i+"/mcdDimMaterial/uploadMaterialsFile",queryIopContactList:i+"/jx/mcdDimContact/pagelistMcdDimContact",queryContactDetailById:i+"/jx/mcdDimContact/getDimContactDetail",listAllChannelName:i+"/mcdDimChannel/listAllChannelNameAndId",deleteContactById:i+"/mcdDimContact/removeContact",saveOrUpdateContact:i+"/jx/mcdDimContact/saveOrUpdateContact",validateContactName:i+"/mcdDimContact/getValidateContactName",displayChannelList:"/element-svc/api/mcdDimChannel/jx/pagelistDimChannel",validateChannelName:i+"/mcdDimChannel/getValidateChannelName",saveOrUpdateChannel:"/element-svc/api/mcdDimChannel/jx/saveOrUpdateDimChannel",deleteChannelById:i+"/mcdDimChannel/removeDimChannel",channelDetail:i+"/mcdDimChannel/getDimChannel",customerLike:"/preview-svc/jx/chnPre/queryPreData",channelDetail:"/element-svc/mcd-dim-channel-desc/query",uploaChanPromptFile:"/element-svc/api/mcdDimChannel/jx/uploaChanPromptFile",downloadChanPromptFile:"/plan-svc/mcd/chan/prompt/downloadChanPromptFile",queryDimChannelInfo:"/element-svc/api/mcdDimChannel/jx/queryDimChannelInfo",queryChannelEValData:"/groupmarket/enterprise/queryChannelEValData",queryIopOperatingPosition:i+"/mcdDimAdivInfo/pagelistAdivInfo",deleteOperatingPositionById:i+"/mcdDimAdivInfo/removeAdivInfo",queryOperPositionDetail:i+"/mcdDimAdivInfo/getAdivInfo",queryOpelistData:i+"/mcdDimAdivInfo/listChannelInfoAndContactInfo",queryCampsegInfoWithThisPosId:i+"/mcdDimAdivInfo/listpageCampsegInfoWithThisAdivId",getConfigList:i+"/mcdDimAttrConf/queryConfigList",validateOperationName:i+"/mcdDimAdivInfo/getValidateAdivInfoName",getValidateAdivInfoId:i+"/jx/mcdDimAdivInfo/getValidateAdivInfoId",saveOrUpdateOperPosition:i+"/mcdDimAdivInfo/saveOrUpdateAdivInfo",getChannelScheduleList:n+"/channelview/getChannelScheduleList",querySensitiveCust:l+"/mcd-channel-sensitive-cust-conf/querySensitiveCust",saveSensitiveCust:l+"/mcd-channel-sensitive-cust-conf/saveSensitiveCust",deleteSensitiveCust:l+"/mcd-channel-sensitive-cust-conf/deleteSensitiveCust",batchDeleteSensitiveCust:l+"/mcd-channel-sensitive-cust-conf/batchDeleteSensitiveCust",pagelistApproveMaterial:i+"/mcdDimMaterialApprove/pagelistApproveMaterial",approveRecord:i+"/mcdDimMaterialApprove/approveRecord",pagelistMyMaterial:i+"/mcdDimMaterialTemplate/pagelistMyMaterial",pagelistExcellentMaterial:i+"/mcdDimMaterialTemplate/pagelistExcellentMaterial",pagelistHotSpotMaterial:i+"/mcdDimMaterialTemplate/pagelistHotSpotMaterial",updateMaterialStatus:i+"/mcdDimMaterial/updateMaterialStatus",getMaterialApprover:i+"/mcdDimMaterialApprove/getMaterialApprover",getCmpApprovalProcess:i+"/mcdDimMaterialApprove/getCmpApprovalProcess",subMaterialApprove:i+"/mcdDimMaterialApprove/subMaterialApprove",addExcellentMaterialLibrary:i+"/mcdDimMaterialTemplate/addExcellentMaterialLibrary",removeExcellentMaterialLibrary:i+"/mcdDimMaterialTemplate/removeExcellentMaterialLibrary",createExcellentMaterial:i+"/mcdDimMaterialTemplate/createExcellentMaterial",createHotSpotMaterial:i+"/mcdDimMaterialTemplate/createHotSpotMaterial",removeMyMaterial:i+"/mcdDimMaterialTemplate/removeMyMaterial",getIntell:i+"/mcdDimMaterial/getIntelligentMatchingMaterialList"}}},d5c8:function(e,t,a){},db06:function(e,t,a){"use strict";a("8d871")},dc38:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"MaterHome"},[t("div",{staticClass:"search_box"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入运营位名称"},model:{value:e.queryFrom.keywords,callback:function(t){e.$set(e.queryFrom,"keywords","string"===typeof t?t.trim():t)},expression:"queryFrom.keywords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:function(t){return e.QuerykeyWords()}},slot:"suffix"})]),t("div",{staticClass:"btn_box"},[t("el-button",{attrs:{type:"success"},on:{click:e.MaterAdd}},[e._v("新建")])],1)],1),t("div",{staticClass:"selech-panel"},[t("div",{staticClass:"buttons-container"},[t("query-form-cell",{attrs:{list:e.QueryFormCell,defaultSizeForm:e.sizeForm},on:{queryForm:e.QuerySelect}})],1)]),t("div",{staticClass:"table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t("el-table-column",{attrs:{label:"运营位名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary",underline:!1,href:`#/SystemManage/OperDetails?adivId=${a.row.adivId}&channelId=${a.row.channelId}&contactId=${a.row.contactId}`}},[e._v(" "+e._s(a.row.adivName))])]}}])}),t("el-table-column",{attrs:{prop:"scheStarttime",label:"生效时间"}}),t("el-table-column",{attrs:{prop:"scheEndtime",label:"失效时间"}}),t("el-table-column",{attrs:{prop:"channelName",label:"归属渠道"}}),t("el-table-column",{attrs:{prop:"contactName",label:"归属触点"}}),t("el-table-column",{attrs:{prop:"adivSize",label:"运营位尺寸"}}),t("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return["1"===a.row.adivStatus?t("span",[e._v("占用")]):e._e(),"0"===a.row.adivStatus?t("span",[e._v("空闲")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"运营位类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("adivTypeJson")(t.row.adivType))+" ")]}}])}),t("el-table-column",{attrs:{prop:"excutingCampNo",label:"策略数"}}),t("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return["0"===a.row.adivStatus?t("div",[t("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.modify(a.row)}}},[e._v("修改 ")]),t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-warning",iconColor:"#FAAD14",title:"确定删除？","cancel-button-type":"Primary"},on:{confirm:function(t){return e.DeleteOtreationList(a.row,a.$index)}}},[t("el-link",{staticClass:"cursor-pointer text-sm",attrs:{slot:"reference",type:"danger",underline:!1},slot:"reference"},[e._v(" 删除")])],1)],1):e._e()]}}])})],1)],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":e.pageData.pageSizeList,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("div",[t("operation-dialog",{ref:"Dialog",attrs:{ChannelData:e.ChannelData},on:{Refresh:e.getMaterData}})],1),t("div",[t("delete-dialog",{ref:"Delete",attrs:{title:"运营位",id:e.DeleteID,name:e.DeleteName},on:{Dlete:e.Deleteposition}})],1)])},l=[],n=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"680px",top:"2vh","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog}},[t("div",{staticClass:"Contact-mtp"},[t("el-form",{ref:"OperactionFrom",attrs:{model:e.OperatinData,"label-width":"150px",rules:e.OperactionRules}},[t("el-form-item",{attrs:{label:"运营位ID：",prop:"adivId"}},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{disabled:"MaterAdd"!==e.isEditStatus},model:{value:e.OperatinData.adivId,callback:function(t){e.$set(e.OperatinData,"adivId",t)},expression:"OperatinData.adivId"}})],1),t("el-form-item",{attrs:{label:"运营位名称：",prop:"adivName"}},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],model:{value:e.OperatinData.adivName,callback:function(t){e.$set(e.OperatinData,"adivName",t)},expression:"OperatinData.adivName"}})],1),t("el-form-item",{attrs:{label:"运营位类型：",prop:"adivType"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:e.OperatinData.adivType,callback:function(t){e.$set(e.OperatinData,"adivType",t)},expression:"OperatinData.adivType"}},e._l(e.EnumByTypeList,(function(e){return t("el-option",{key:e.enumKey,attrs:{value:e.enumKey,label:e.enumValue}})})),1)],1),t("el-form-item",{attrs:{label:"归属渠道：",prop:"channelId"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},on:{change:e.queryContactByChannelId},model:{value:e.OperatinData.channelId,callback:function(t){e.$set(e.OperatinData,"channelId",t)},expression:"OperatinData.channelId"}},e._l(e.ChannelData,(function(e){return t("el-option",{key:e.channelId,attrs:{label:e.channelName,value:e.channelId}})})),1)],1),t("el-form-item",{attrs:{label:"归属触点：",prop:"contactId"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:e.OperatinData.contactId,callback:function(t){e.$set(e.OperatinData,"contactId",t)},expression:"OperatinData.contactId"}},e._l(e.ContactList,(function(e){return t("el-option",{key:e.contactId,attrs:{value:e.contactId,label:e.contactName}})})),1)],1),t("el-form-item",{attrs:{label:"配置id：",prop:"configId"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择",disabled:"MaterAdd"!==e.isEditStatus},model:{value:e.OperatinData.configId,callback:function(t){e.$set(e.OperatinData,"configId",t)},expression:"OperatinData.configId"}},e._l(e.ConfigData,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),t("el-form-item",{attrs:{label:"生效时间：",prop:"scheStarttime"}},[t("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.OperatinData.scheStarttime,callback:function(t){e.$set(e.OperatinData,"scheStarttime",t)},expression:"OperatinData.scheStarttime"}})],1),t("el-form-item",{attrs:{label:"失效时间：",prop:"scheEndtime"}},[t("el-date-picker",{staticStyle:{width:"300px"},attrs:{"value-format":"yyyy-MM-dd",type:"datetime",placeholder:"选择日期"},model:{value:e.OperatinData.scheEndtime,callback:function(t){e.$set(e.OperatinData,"scheEndtime",t)},expression:"OperatinData.scheEndtime"}})],1),t("el-form-item",{attrs:{label:"运营位尺寸(长)：",prop:"positionLong"}},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{oninput:"value=value.replace(/^\\.+|[^\\d.]/g,'')"},model:{value:e.OperatinData.positionLong,callback:function(t){e.$set(e.OperatinData,"positionLong",t)},expression:"OperatinData.positionLong"}})],1),t("el-form-item",{attrs:{label:"运营位尺寸(宽)：",prop:"positionWide"}},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{oninput:"value=value.replace(/^\\.+|[^\\d.]/g,'')"},model:{value:e.OperatinData.positionWide,callback:function(t){e.$set(e.OperatinData,"positionWide",t)},expression:"OperatinData.positionWide"}})],1),t("el-form-item",{attrs:{label:"状态：",prop:"adivStatus"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.OperatinData.adivStatus,callback:function(t){e.$set(e.OperatinData,"adivStatus",t)},expression:"OperatinData.adivStatus"}},[t("el-option",{attrs:{value:"1",label:"占用"}}),t("el-option",{attrs:{value:"0",label:"空闲"}})],1)],1),t("el-form-item",{attrs:{label:"执行类型：",prop:"execType"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:e.OperatinData.execType,callback:function(t){e.$set(e.OperatinData,"execType",t)},expression:"OperatinData.execType"}},[t("el-option",{attrs:{value:1e3,label:"线上主动 批量短信"}}),t("el-option",{attrs:{value:1001,label:"线上主动 实时短信"}}),t("el-option",{attrs:{value:1002,label:"线上主动 http接口"}}),t("el-option",{attrs:{value:2e3,label:"线上被动 实时接口 MCP"}}),t("el-option",{attrs:{value:3001,label:"线下主动 文件类型"}})],1)],1),t("el-form-item",{attrs:{label:"运营位内容：",prop:"adivContent"}},[t("el-input",{model:{value:e.OperatinData.adivContent,callback:function(t){e.$set(e.OperatinData,"adivContent",t)},expression:"OperatinData.adivContent"}})],1),t("el-form-item",{staticClass:"adivDesc",attrs:{label:"描述：",prop:"adivDesc"}},[t("el-input",{attrs:{type:"textarea",maxlength:"500",placeholder:"您可以输入500个字"},model:{value:e.OperatinData.adivDesc,callback:function(t){e.$set(e.OperatinData,"adivDesc",t)},expression:"OperatinData.adivDesc"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.onSumbit}},[e._v("保 存")])],1)])],1)},r=[],o=a("0fea"),s=a("d39c"),d=a("5e05"),c=a("f9ae"),p={props:["ChannelData"],name:"OperationDialog",data(){return{saveLoading:!1,dialogVisible:!1,OperatinData:{adivStatus:"0"},olbOperatinData:{},title:"",isEditStatus:"",ContactList:[],EnumByTypeList:[],ConfigData:[],OperactionRules:{adivId:[{required:!0,message:"请输入运营位ID",trigger:"blur"}],adivName:[{required:!0,message:"请选择运营位名称",trigger:"blur"}],adivType:[{required:!0,message:"请选择运营位类型",trigger:"blur"}],adivContent:[{required:!0,message:"请输入运营位内容",trigger:"blur"}],channelId:[{required:!0,message:"请选择归属渠道",trigger:"blur"}],contactId:[{required:!0,message:"请选择归属触点",trigger:"blur"}],configId:[{required:!1,message:"请选择配置id",trigger:"blur"}],scheStarttime:[{required:!0,message:"请选择生效时间",trigger:"blur"}],scheEndtime:[{required:!0,message:"请选择失效时间",trigger:"blur"}],adivStatus:[{required:!0,message:"请选择状态",trigger:"blur"}],execType:[{required:!0,message:"请选择执行类型",trigger:"blur"}],positionLong:[{required:!0,message:"请输入运营位尺寸(长)",trigger:"blur"}],positionWide:[{required:!0,message:"请输入运营位尺寸(宽)",trigger:"blur"}]}}},created(){this.getSysEnumByType()},methods:{async queryContactByChannelId(){await Object(o["i"])(s["a"].seapi.mcdContList,{channelId:this.OperatinData.channelId}).then(e=>{this.ContactList=e.contactInfoList})},async getSysEnumByType(){await Object(o["i"])(d["a"].common.getSysEnum,{enumType:"mcd_adiv_type"}).then(e=>{this.EnumByTypeList=e}),await Object(o["i"])(s["a"].seapi.getConfigList).then(e=>{this.ConfigData=e})},async validateOperationId(){let e;try{return await Object(o["i"])(s["a"].seapi.getValidateAdivInfoId,this.OperatinData)}catch(t){return e}},async validateOperationName(e){return await Object(o["i"])(s["a"].seapi.validateOperationName,this.OperatinData)},async saveOrUpdateOperPosition(e){this.saveLoading=!0,await Object(o["i"])(s["a"].seapi.saveOrUpdateOperPosition,e).then(e=>{this.saveLoading=!1,!0===e&&(this.$message.success("操作成功"),this.dialogVisible=!1,this.$emit("Refresh"))}).catch(e=>{this.saveLoading=!1})},closeDialog(){void 0!==this.$refs.OperactionFrom&&(this.$refs.OperactionFrom.clearValidate(),this.$refs.OperactionFrom.resetFields()),this.dialogVisible=!1},ShowPopup(e,t){this.isEditStatus=e,"modify"===e?(this.title="修改运营位","object"===typeof t&&this.queryDetail(t)):"MaterAdd"===e&&(this.title="新建运营位",this.OperatinData={},this.olbOperatinData={},this.OperatinData.adivStatus="0",this.OperatinData.adivCode=""),this.dialogVisible=!0},queryDetail(e){let t={adivId:e.adivId,channelId:e.channelId,contactId:e.contactId},a="";Object(o["i"])(s["a"].seapi.queryOperPositionDetail,t).then(e=>{if(a=e,a.adivSize){let e=a.adivSize.split("×");a.positionLong=Number(e[0]),a.positionWide=Number(e[1])}this.OperatinData=a,this.olbOperatinData=Object.assign({},a),this.queryContactByChannelId()})},onSumbit:Object(c["a"])((function(){this.$refs["OperactionFrom"].validate(async e=>{if(e){let e=Object.assign({},this.OperatinData);if(e.adivSize=`${e.positionLong}×${e.positionWide}`,e={...e,positionWide:void 0,positionLong:void 0},"MaterAdd"==this.isEditStatus){const e=await this.validateOperationId();if(void 0==e)return void this.$alert("运营位ID重复","校验失败",{confirmButtonText:"确定",customClass:"errorPrompt"})}this.validateOperationName(e).then(t=>{!0===t?this.saveOrUpdateOperPosition(e):this.$alert("运营位名称重复","校验失败",{confirmButtonText:"确定",customClass:"errorPrompt"})})}else this.$alert("请填写必须填写项","操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"})})}),10),ResetFrom(){this.$refs["OperationFrom"]&&this.$refs["OperationFrom"].resetFields(),this.OperatinData={name:null,positionType:null,content:void 0,channelId:void 0,contactId:void 0,startTime:void 0,endTime:void 0,status:"0",description:void 0},this.dialogVisible=!1}}},m=p,u=(a("6785"),a("2bf5"),a("2877")),h=Object(u["a"])(m,n,r,!1,null,"77916d7a",null),v=h.exports,g=a("38c8"),D=a("4e3f"),y={components:{OperationDialog:v,DeleteDialog:g["a"],QueryFormCell:D["a"]},data(){return{tableData:[],LabelData:[{label:"归属渠道",values:[{label:"不限",value:""}],isDate:!1},{label:"归属触点",values:[{label:"不限",value:""}],isDate:!1}],sizeForm:{radioModel:["",""]},queryFrom:{keywords:null,channelId:null,contactId:null},pageData:{currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0},DeleteName:"",DeleteID:"",contactId:null,channelId:"",ChannelData:[],ContactData:[]}},filters:{adivTypeJson(e){return"1"===e?"横幅":"3"===e?"弹窗":"4"===e?"全屏":"5"===e?"广告条":"7"===e?"文字链广告":"8"===e?"图文广告":"暂无"}},watch:{},computed:{QueryFormCell(){let e=[...this.LabelData],t=[...this.ChannelData],a=t.map(e=>({label:e.channelName,value:e.channelId}));a.unshift({label:"不限",value:""}),e[0].values=a;let i=[...this.ContactData],l=i.map(e=>({label:e.contactName,value:e.contactId}));return e[1].values=[{label:"不限",value:""},...l],e}},created(){this.getMaterData(),this.getChannels()},methods:{async getMaterData(){await Object(o["i"])(s["a"].seapi.queryIopOperatingPosition,{...this.queryFrom,size:this.pageData.pageSize,current:this.pageData.currentPage}).then(e=>{this.tableData=e.records,this.pageData.total=e.total})},async getChannels(){await Object(o["i"])(s["a"].seapi.queryOpelistData).then(e=>{this.ChannelData=e,this.$forceUpdate()})},changeChannel(){let e=[];this.contactList&&(e=this.contactList.map(e=>({label:e.contactName,value:e.contactId}))),this.LabelData[1].values=[{label:"不限",value:""},...e]},QuerykeyWords(){this.pageData.currentPage=1,this.getMaterData()},QuerySelect(e){this.contactList=[],this.queryFrom.channelId!==e.form.radioModel[0]&&(e.form.radioModel[1]=""),this.queryFrom.channelId=e.form.radioModel[0],this.queryFrom.contactId=e.form.radioModel[1],this.queryFrom.channelId?(this.ChannelData.forEach(e=>{e.channelId===this.queryFrom.channelId&&(this.contactList=e.contactList,this.$forceUpdate())}),this.changeChannel()):(this.contactList=[],this.LabelData[1].values=[{label:"不限",value:""}]),this.getMaterData()},modify(e){this.$refs["Dialog"].ShowPopup("modify",e)},MaterAdd(){this.$refs["Dialog"].ShowPopup("MaterAdd")},DeleteOtreationList(e,t){this.DeleteID=e.adivId,this.channelId=e.channelId,this.contactId=e.contactId,this.DeleteName=e.adivName,this.$refs["Delete"].showDelete()},async Deleteposition(e){await Object(o["i"])(s["a"].seapi.deleteOperatingPositionById,{adivId:e,channelId:this.channelId,contactId:this.contactId}).then(()=>{this.$message.success("删除成功"),this.pageData.currentPage=1,this.getMaterData()})},handleSizeChange(e){this.pageData.pageSize=e,this.getMaterData()},handleCurrentChange(e){this.pageData.currentPage=e,this.getMaterData()}}},f=y,b=(a("db06"),Object(u["a"])(f,i,l,!1,null,"563e2204",null));t["default"]=b.exports},e259:function(e,t,a){"use strict";a("44f7")}}]);