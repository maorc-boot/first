(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e4e3acd"],{"31b1":function(e,a,t){"use strict";const l="/plan-svc/api/action",s="/plan-svc/action",i="/approve-svc/",r="/element-svc/";a["a"]={channel:{queryIopTemplate:l+"/tactics/tacticsCreate/queryIopTemplate",queryTopics:l+"/topic/queryTopics",getTemplateData:i+"jx/cmpApprovalProcessConf/getApproveConfig",getApproveConfig:i+"cmpApprovalProcessConf/getApproveConfig",getNextApprovers:i+"jx/cmpApproveProcessInstance/getNodeApprover",saveChannel:l+"/tactics/tacticsCreate/save",deleteCustom:l+"/custgroup/custGroupManager/deleteCustom",getMoreMyCustom:l+"/custgroup/custGroupManager/getMoreMyCustom",viewCustGroupDetail:l+"/custgroup/custGroupManager/viewCustGroupDetail",queryMmsTemplates:s+"/mmsTemplates/queryMmsTemplates",deleteMmsTemplateLists:s+"/mmsTemplates/createTactics/deleteMmsTemplateLists",updateMmsTemplate:s+"/mmsTemplates/updateMmsTemplate",smsContentBatchDel:l+"/smsTemplates/smsContentBatchDel",smsContentDel:l+"/smsTemplates/smsContentDel",smsContentEdit:l+"/smsTemplates/smsContentEdit",smsContentSaveOrUpdate:l+"/smsTemplates/smsContentSaveOrUpdate",smsTemplateOffline:l+"/smsTemplates/smsTemplateOffline",smsTemplates:l+"/smsTemplates/smsTemplates",smsTemplateSaveOrUpdate:l+"/smsTemplates/smsTemplateSaveOrUpdate",delPlanExclusivity:r+"mcd-plan-exclusivity/delPlanExclusivity",exportPlanExcluTemplate:r+"mcd-plan-exclusivity/exportPlanExcluTemplate",getPlanExclusivityInfo:r+"mcd-plan-exclusivity/getPlanExclusivityInfo",getPlanExclusivityList:r+"mcd-plan-exclusivity/getPlanExclusivityList",queryPlanDefList:r+"mcd-plan-exclusivity/queryPlanDefList",queryPlanExclusivity:r+"mcd-plan-exclusivity/queryPlanExclusivity",saveOrUpdatePlanExclusivity:r+"mcd-plan-exclusivity/saveOrUpdatePlanExclusivity",savePlanExclusivity:r+"mcd-plan-exclusivity/savePlanExclusivity",updatePlanExclusivity:r+"mcd-plan-exclusivity/updatePlanExclusivity",uploadPlanExcluFile:r+"mcd-plan-exclusivity/uploadPlanExcluFile",approveRecord:r+"api/mcdDimMaterialApprove/jx/approveRecord",getMaterialApprover:r+"api/mcdDimMaterialApprove/jx/getMaterialApprover",commitProcess:"/approve-svc/cmpApproveProcessInstance/commitProcess",subMaterialApprove:r+"api/mcdDimMaterialApprove/jx/subMaterialApprove",queryCommunicationUsers:"/plan-svc/api/channelMaterial/jx/queryCommunicationUsers",queryCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/queryCommunicationTask",addCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTask",addCommunicationTaskBatch:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTaskBatch",communicationAppTask:"/approve-svc/jx/cmpApproveProcessInstance/communicationAppTask",queryChannelExecInfo:"/plan-svc/mcd/camp/channelExec/queryChannelExecInfo",queryChannelExecList:"/plan-svc/mcd/camp/channelExec/queryChannelExecList",deleteChannelPrompt:"/plan-svc/mcd/chan/prompt/deleteChannelPrompt",queryChannelPrompt:"/plan-svc/mcd/chan/prompt/queryChannelPrompt",saveOrUpdateChannelPrompt:"/plan-svc/mcd/chan/prompt/saveOrUpdateChannelPrompt",uploaChanPromptFile:"/plan-svc/mcd/chan/prompt/uploaChanPromptFile",chanAndPlanMarketingHistory:"/plan-svc/mcd/marketing/history/chanAndPlanMarketingHistory",custContactNumMarketingHistory:"/plan-svc/mcd/marketing/history/custContactNumMarketingHistory",custSuccessRateMarketingHistory:"/plan-svc/mcd/marketing/history/custSuccessRateMarketingHistory",planMarketingHistory:"/plan-svc/mcd/marketing/history/planMarketingHistory",caculateContactUserNum:"/pec-timing/mcd/user/contact/caculateContactUserNum",caculateOrderUserNum:"/pec-timing/mcd/user/contact/caculateOrderUserNum",queryCampScene:"/plan-svc/api/action/tactics/tacticsCreate/jx/queryCampScene"}}},"4b10":function(e,a,t){"use strict";t("5b01")},"4e3f":function(e,a,t){"use strict";var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"query-form-cell-wrap"},[a("el-form",{ref:"form",attrs:{model:e.sizeForm,"label-width":e.labelWidth,"label-position":e.labelPosition,size:"mini"}},e._l(e.list,(function(t,l){return a("el-form-item",{key:l+"list",class:{disabled:t.disabled},attrs:{"label-width":t.labelWidth||e.labelWidth,label:t.label+"："}},[Array.isArray(t.values)?a("div",{staticClass:"fe-d-flex"},[a("div",{staticClass:"radio-box"},[t.dateType?e._e():a("el-radio-group",{attrs:{size:"mini",disabled:t.disabled},on:{change:function(a){return e.radioChange(e.sizeForm.radioModel[l],l)}},model:{value:e.sizeForm.radioModel[l],callback:function(a){e.$set(e.sizeForm.radioModel,l,a)},expression:"sizeForm.radioModel[index]"}},e._l(t.values,(function(t,l){return a("el-radio-button",{key:l+"listValues",attrs:{label:t.value}},[e._v(e._s(t.label)+" ")])})),1)],1),a("div",{staticClass:"date-box"},["date"===t.dateType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(a){e.$set(e.sizeForm.dateModel,l,a)},expression:"sizeForm.dateModel[index]"}}):e._e(),"month"===t.dateType?a("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(a){e.$set(e.sizeForm.dateModel,l,a)},expression:"sizeForm.dateModel[index]"}}):e._e(),"daterange"===t.dateType?a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(a){e.$set(e.sizeForm.dateModel,l,a)},expression:"sizeForm.dateModel[index]"}}):e._e(),"datetimerange"===t.dateType?a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(a){e.$set(e.sizeForm.dateModel,l,a)},expression:"sizeForm.dateModel[index]"}}):e._e()],1)]):a("div",{staticClass:"input-box"},[a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入内容"},on:{change:e.inputChange},model:{value:e.sizeForm.radioModel[l],callback:function(a){e.$set(e.sizeForm.radioModel,l,a)},expression:"sizeForm.radioModel[index]"}})],1)])})),1)],1)},s=[],i={name:"QueryFormCell",props:{labelWidth:{type:String,default:()=>"82px"},labelPosition:{type:String,default:()=>"right"},defaultSizeForm:{type:Object,default:()=>({})},list:{type:Array,default:()=>[{label:"数据时间",values:[{label:"不限",value:"1"}],isDate:!0,dateType:"date"},{label:"接口类型",values:[{label:"不限",value:"不限"},{label:"文件接口",value:"文件接口"}],isDate:!1}]}},data(){return{sizeForm:{dateModel:["2021-05-08","",""],radioModel:["自定义","不限","不限","不限"]}}},watch:{defaultSizeForm:{handler:function(e){this.sizeForm=e},deep:!0,immediate:!0}},methods:{radioChange(e,a){this.sizeForm.dateModel&&this.$set(this.sizeForm.dateModel,a,"date"===this.list[a].dateType?"":["",""]),this.$emit("queryForm",{index:a,value:e,form:this.sizeForm})},dateChange(e){e?(this.$set(this.sizeForm.dateModel,0,e),this.$emit("queryForm",{value:e,form:this.sizeForm})):this.$emit("emptyFrom",this.sizeForm)},inputChange(e){e&&this.$emit("queryForm",{value:e,form:this.sizeForm})}}},r=i,n=(t("a28d"),t("2877")),o=Object(n["a"])(r,l,s,!1,null,null,null);a["a"]=o.exports},"5b01":function(e,a,t){},"7b5c":function(e,a,t){"use strict";var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"dialog-content"},[a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"250px","margin-right":"20px"},attrs:{placeholder:"请输入产品编码/产品名称"},model:{value:e.keyWords,callback:function(a){e.keyWords="string"===typeof a?a.trim():a},expression:"keyWords"}},[a("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.keywordsSearch},slot:"suffix"})]),a("br"),e.multiple?e._e():a("QueryFormCell",{attrs:{list:e.QueryList,defaultSizeForm:e.defaultSizeForm},on:{queryForm:e.queryForm}}),e.multiple?[a("span",{staticClass:"select-label"},[e._v("已选产品：")]),e._l(e.planList,(function(t){return a("el-tag",{key:t.planId,attrs:{type:"success",closable:""},on:{close:function(a){return e.removePlan(t)}}},[e._v(" "+e._s(t.planName)+" ")])}))]:e._e(),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"template-table customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:"350px"}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"60"}}),a("el-table-column",{attrs:{prop:"planName",label:"产品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"planId",label:"产品编号",align:"center"}}),a("el-table-column",{attrs:{label:"产品类别","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.QueryList[0].values.find(e=>e.value==t.row.planType)||{}).label))])]}}])}),a("el-table-column",{attrs:{label:"产品类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((e.QueryList[1].values.find(e=>e.value==t.row.planSrvType)||{}).label))])]}}])}),a("el-table-column",{attrs:{prop:"planStartDate",label:"生效时间",align:"center",width:"90"}}),a("el-table-column",{attrs:{prop:"planEndDate",label:"失效时间",align:"center",width:"90"}}),e.multiple?e._e():a("el-table-column",{attrs:{prop:"isUsed",label:"是否匹配",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"80",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e.multiple?[e.planList.some(e=>e.planId==t.planId)?a("span",{staticStyle:{color:"#aaa"}},[e._v("已选择")]):a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.selectProduct(t)}}},[e._v("添加")])]:[t.planId==e.currentProduct.planId?a("span",{staticStyle:{color:"#aaa"}},[e._v("已选择")]):a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.selectProduct(t)}}},[e._v("确认")])]]}}])})],1),a("el-pagination",{attrs:{"current-page":e.query.current,"page-sizes":[10,20,30,40],"page-size":e.query.size,"pager-count":5,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2)},s=[],i=t("0fea"),r=t("31b1"),n=t("4e3f"),o={props:{currentProduct:{type:Object,default:()=>{}},multiple:{type:Boolean,default:!1},limit:{type:Number,default:10},planList:{type:Array,default:()=>[]}},components:{QueryFormCell:n["a"]},data(){return{loading:!1,keyWords:"",query:{keyWords:"",current:1,size:10,planTypeId:"",planSrvType:""},QueryList:[{label:"产品类别",values:[{label:"不限",value:""},{label:"流量",value:"1"},{label:"新增",value:"2"},{label:"终端",value:"3"},{label:"两网",value:"4"},{label:"宽带",value:"5"},{label:"存量",value:"6"},{label:"政企",value:"7"},{label:"手机应用",value:"10"},{label:"个人基本策划",value:"101"},{label:"普通增值策划",value:"102"},{label:"虚拟类政策",value:"999"},{label:"其他",value:"9"}],isDate:!1},{label:"产品类型",values:[{label:"不限",value:""},{label:"单产品",value:"1"},{label:"政策",value:"2"},{label:"综合",value:"6"}],isDate:!1}],defaultSizeForm:{radioModel:["",""]},total:0,tableData:[]}},methods:{async getTableData(){try{this.loading=!0;let e=r["a"].channel.queryPlanDefList;const{records:a,total:t}=await Object(i["i"])(e,this.query);this.tableData=a,this.total=t}catch(e){}finally{this.loading=!1}},keywordsSearch(){this.query.current=1,this.query.keyWords=this.keyWords,this.getTableData()},queryForm(e){switch(e.index){case 0:this.query.planTypeId=e.value;break;case 1:this.query.planSrvType=e.value;break}this.query.current=1,this.getTableData()},selectProduct(e){if(!this.multiple)return void this.$emit("select",e);let a=[],t=JSON.parse(JSON.stringify(this.planList));if(t.some(a=>a.planId==e.planId))a=t.filter(a=>a.planId!=e.planId);else{if(this.planList.length>=this.limit)return void this.$message.warning(`最多选择${this.limit}个产品`);a=[...t,e]}this.$emit("select",a)},removePlan(e){this.selectProduct(e)},handleSizeChange(e){this.query.current=1,this.query.size=e,this.getTableData()},handleCurrentChange(e){this.query.current=e,this.getTableData()}},mounted(){this.getTableData()}},c=o,p=(t("4b10"),t("2877")),u=Object(p["a"])(c,l,s,!1,null,"6af90385",null);a["a"]=u.exports},a28d:function(e,a,t){"use strict";t("cddb")},cddb:function(e,a,t){}}]);