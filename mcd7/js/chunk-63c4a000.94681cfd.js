(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63c4a000"],{1988:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e._self._c;return a("div",{staticClass:"analysis-layout"},[e.loading?a("Loader",{attrs:{text:"AI分析中"}}):e._e(),e._m(0),e._l(e.rulesList,(function(t){return a("div",{key:t.id,staticClass:"grid"},[a("div",{staticClass:"grid-item"},[0==t.isForwardDire?a("div",{style:{width:t.width}},[a("span",[e._v(e._s(t.rate))])]):a("p",{staticClass:"handle"},[1==t.isExtend?[e.addList.some(e=>e.id==t.id)?a("span",{staticClass:"handle-add-return",on:{click:function(a){return e.handleAdd(t,0)}}},[e._v("已添加，撤回")]):a("span",{staticClass:"handle-add",on:{click:function(a){return e.handleAdd(t,1)}}},[e._v("+ 添加")])]:e._e()],2)]),a("div",{staticClass:"grid-item",class:[1==t.isExtend?"new-item":""]},[e._v(e._s(t.conditionDesc))]),a("div",{staticClass:"grid-item"},[1==t.isForwardDire?a("div",{style:{width:t.width}},[a("span",[e._v(e._s(t.rate))])]):a("p",{staticClass:"handle"},[0==t.isExtend&&e.canRemove?[e.addList.some(e=>e.id==t.id)?a("span",{staticClass:"handle-del-return",on:{click:function(a){return e.handleDel(t,0)}}},[e._v("已剔除，撤回")]):a("span",{staticClass:"handle-del",on:{click:function(a){return e.handleDel(t,1)}}},[e._v("- 剔除")])]:e._e()],2)])])})),e.loading||0!=e.rulesList.length?e._e():a("div",{staticClass:"error"},[e._v(e._s(e.error))])],2)},s=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"grid"},[a("div",{staticClass:"title"},[e._v("负向")]),a("div",{staticClass:"title"},[e._v("客群标签规则")]),a("div",{staticClass:"title"},[e._v("正向")])])}],l=(t("14d9"),t("0fea")),n=t("afd9"),d=t("82be"),r={components:{Loader:()=>t.e("chunk-4b92d70a").then(t.bind(null,"9267"))},props:{params:{type:Object,default:()=>{}},addList:{type:Array,default:()=>[]},canRemove:{type:Boolean,default:!0}},data(){return{loading:!1,rulesList:[],mockData:[{id:2,columnNum:2,columnName:"标签2",outCalType:"!=",tagValue:[{value:"7",valueCn:"果洛2",condition:"!="}],isForwardDire:1,correlation:.175,isExtend:0,valueType:1,valueList:[{id:117077,value:"1",condition:"=",count:92360,startValue:"",endValue:"",remark:"否",strValue:"N"}]}]}},methods:{async analysis(){try{this.loading=!0,this.error=null;const e=await Object(l["i"])(n["a"].queryAICustLoseWeightRes,this.params);if(null===e||void 0===e||!e.length)return this.$message.warning("未查询到相关规则，无法进行AI瘦身！");this.handleRules(e)}catch(e){this.error=e.message}finally{this.loading=!1}},handleRules(e){const a=Math.max(...e.map(e=>Math.abs(e.correlation)));let t=e.map(e=>{var t;let i,s;if(2==e.valueType){s=[];let a=e.tagValue[0],t=["()","(]","[)","[]"],l=t.includes(e.outCalType);i=`${e.columnName}${l?"介于":e.outCalType}${a.numVal1}${l?" - "+a.numVal2:""}`}else{var l;s=e.tagValue.map(e=>e.value);let a=e.tagValue.map(e=>Object(d["c"])({value:e.value,condition:e.condition,startValue:e.startValue,endValue:e.endValue,remark:e.valueCn})).join("，");i=`${e.columnName} ${null===(l=d["a"].find(a=>a.value==e.outCalType))||void 0===l?void 0:l.label}【${a}】`}return{...e,rate:e.correlation.toFixed(2)+"%",width:(Math.abs(e.correlation)/a*100).toFixed(2)+"%",calType:e.outCalType,valueList:(null===(t=e.valueList)||void 0===t?void 0:t.map(e=>({...e,label:Object(d["c"])(e)})))||[],conditionDesc:i,selectedValues:s}}),i=[];this.params.treeDetails.forEach(e=>{const a=t.find(a=>a.id==e.id);a&&i.push(a)}),i=[...i,...t.filter(e=>1==e.isExtend)],this.rulesList=i},handleAdd(e,a){this.$emit("add",e,a)},handleDel(e,a){this.$emit("remove",e,a)}},created(){this.analysis()}},o=r,u=(t("4e9e"),t("2877")),c=Object(u["a"])(o,i,s,!1,null,"7206b383",null);a["default"]=c.exports},3351:function(e,a,t){},"4e9e":function(e,a,t){"use strict";t("3351")}}]);