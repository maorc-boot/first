(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c140440"],{"271a":function(e,a,t){"use strict";var l=t("cb2d"),r=t("e330"),i=t("577e"),s=t("d6d6"),o=URLSearchParams,n=o.prototype,c=r(n.getAll),d=r(n.has),u=new o("a=1");!u.has("a",2)&&u.has("a",void 0)||l(n,"has",(function(e){var a=arguments.length,t=a<2?void 0:arguments[1];if(a&&void 0===t)return d(this,e);var l=c(this,e);s(a,1);var r=i(t),o=0;while(o<l.length)if(l[o++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},"30b9":function(e,a,t){"use strict";const l="/eval-svc";a["a"]={effectAppraisal:{dayEffect:l+"/home/eval/day/effect",monthEffect:l+"/home/eval/month/effect",getCityList:l+"/home/eval/getCityList",activityList:l+"/evaluate/activity/list",productList:l+"/mtl-eval-info-plan/queryPage",exportProduct:l+"/mtl-eval-info-plan/export",channelList:l+"/evaluate/channel/list",getTdList:"/eval-svc/td/eval/list",exportTdEvalListData:"/eval-svc/td/eval/exportTdEvalListData",exportOrderChannelDMData:"/eval-svc/reportform/download/exportOrderChannelDMData",exportOrderProductDMData:"/eval-svc/reportform/download/exportOrderProductDMData",getPlanChannelReportList:"/eval-svc/reportform/download/getPlanChannelReportList",getPlanOrderReportList:"/eval-svc/reportform/download/getPlanOrderReportList"},enterprise:{exportMarketingData:"/eval-svc/action/jx/enterpriseMarketing/exportMarketingData",getDimGrid:"/eval-svc/action/jx/enterpriseMarketing/getDimGrid",getDimGroups:"/eval-svc/action/jx/enterpriseMarketing/getDimGroups",getDimManager:"/eval-svc/action/jx/enterpriseMarketing/getDimManager",queryMarketingList:"/eval-svc/action/jx/enterpriseMarketing/queryMarketingList",saveCase:"/eval-svc/action/jx/enterpriseMarketing/saveCase"}}},"4e3f":function(e,a,t){"use strict";var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"query-form-cell-wrap"},[a("el-form",{ref:"form",attrs:{model:e.sizeForm,"label-width":e.labelWidth,"label-position":e.labelPosition,size:"mini"}},e._l(e.list,(function(t,l){return a("el-form-item",{key:l+"list",class:{disabled:t.disabled},attrs:{"label-width":t.labelWidth||e.labelWidth,label:t.label+"："}},[Array.isArray(t.values)?a("div",{staticClass:"fe-d-flex"},[a("div",{staticClass:"radio-box"},[t.dateType?e._e():a("el-radio-group",{attrs:{size:"mini",disabled:t.disabled},on:{change:function(a){return e.radioChange(e.sizeForm.radioModel[l],l)}},model:{value:e.sizeForm.radioModel[l],callback:function(a){e.$set(e.sizeForm.radioModel,l,a)},expression:"sizeForm.radioModel[index]"}},e._l(t.values,(function(t,l){return a("el-radio-button",{key:l+"listValues",attrs:{label:t.value}},[e._v(e._s(t.label)+" ")])})),1)],1),a("div",{staticClass:"date-box"},["date"===t.dateType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(a){e.$set(e.sizeForm.dateModel,l,a)},expression:"sizeForm.dateModel[index]"}}):e._e(),"month"===t.dateType?a("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(a){e.$set(e.sizeForm.dateModel,l,a)},expression:"sizeForm.dateModel[index]"}}):e._e(),"daterange"===t.dateType?a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(a){e.$set(e.sizeForm.dateModel,l,a)},expression:"sizeForm.dateModel[index]"}}):e._e(),"datetimerange"===t.dateType?a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(a){e.$set(e.sizeForm.dateModel,l,a)},expression:"sizeForm.dateModel[index]"}}):e._e()],1)]):a("div",{staticClass:"input-box"},[a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入内容"},on:{change:e.inputChange},model:{value:e.sizeForm.radioModel[l],callback:function(a){e.$set(e.sizeForm.radioModel,l,a)},expression:"sizeForm.radioModel[index]"}})],1)])})),1)],1)},r=[],i={name:"QueryFormCell",props:{labelWidth:{type:String,default:()=>"82px"},labelPosition:{type:String,default:()=>"right"},defaultSizeForm:{type:Object,default:()=>({})},list:{type:Array,default:()=>[{label:"数据时间",values:[{label:"不限",value:"1"}],isDate:!0,dateType:"date"},{label:"接口类型",values:[{label:"不限",value:"不限"},{label:"文件接口",value:"文件接口"}],isDate:!1}]}},data(){return{sizeForm:{dateModel:["2021-05-08","",""],radioModel:["自定义","不限","不限","不限"]}}},watch:{defaultSizeForm:{handler:function(e){this.sizeForm=e},deep:!0,immediate:!0}},methods:{radioChange(e,a){this.sizeForm.dateModel&&this.$set(this.sizeForm.dateModel,a,"date"===this.list[a].dateType?"":["",""]),this.$emit("queryForm",{index:a,value:e,form:this.sizeForm})},dateChange(e){e?(this.$set(this.sizeForm.dateModel,0,e),this.$emit("queryForm",{value:e,form:this.sizeForm})):this.$emit("emptyFrom",this.sizeForm)},inputChange(e){e&&this.$emit("queryForm",{value:e,form:this.sizeForm})}}},s=i,o=(t("a28d"),t("2877")),n=Object(o["a"])(s,l,r,!1,null,null,null);a["a"]=n.exports},"4eb7":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"enterprise-wrap-content"},[a("div",{staticClass:"search-part"},[a("el-form",{attrs:{inline:"","label-width":"140px"}},[a("el-form-item",{attrs:{label:"政企任务名称:"}},[a("el-input",{attrs:{placeholder:"请输入政企任务名称或编号",clearable:""},model:{value:e.searchParam.taskName,callback:function(a){e.$set(e.searchParam,"taskName",a)},expression:"searchParam.taskName"}})],1),a("el-form-item",{attrs:{label:"活动名称:"}},[a("el-input",{attrs:{placeholder:"请输入活动名称或编号",clearable:""},model:{value:e.searchParam.inputCamp,callback:function(a){e.$set(e.searchParam,"inputCamp",a)},expression:"searchParam.inputCamp"}})],1),a("el-form-item",{attrs:{label:"集团:"}},[a("el-input",{attrs:{placeholder:"请输入集团名称",clearable:""},model:{value:e.searchParam.inputGroupName,callback:function(a){e.$set(e.searchParam,"inputGroupName",a)},expression:"searchParam.inputGroupName"}})],1),a("el-form-item",{attrs:{label:"集团类型:"}},[a("el-select",{staticStyle:{width:"215px"},attrs:{placeholder:"请选择集团类型",clearable:""},model:{value:e.searchParam.selectGroupsType,callback:function(a){e.$set(e.searchParam,"selectGroupsType",a)},expression:"searchParam.selectGroupsType"}},[a("el-option",{attrs:{value:"A"}},[e._v("A")]),a("el-option",{attrs:{value:"B"}},[e._v("B")]),a("el-option",{attrs:{value:"C"}},[e._v("C")]),a("el-option",{attrs:{value:"D"}},[e._v("D")])],1)],1),a("el-form-item",{attrs:{label:"客户经理/网格经理:"}},[a("el-input",{attrs:{placeholder:"请输入客户经理或网格经理",clearable:""},model:{value:e.searchParam.inputManager,callback:function(a){e.$set(e.searchParam,"inputManager",a)},expression:"searchParam.inputManager"}})],1),a("el-form-item",{attrs:{label:"政企任务时间:"}},[a("el-date-picker",{staticStyle:{width:"215px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.queryTime,callback:function(a){e.queryTime=a},expression:"queryTime"}})],1),a("div",{staticClass:"btn-part"},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchData}},[e._v("查询")]),a("el-button",{on:{click:e.resetQuery}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",loading:e.exportLoading},on:{click:e.exportData}},[e._v("导出")])],1)],1),a("QueryFormCell",{attrs:{labelWidth:"55px",list:e.QueryFormList,defaultSizeForm:e.defaultSizeForm},on:{queryForm:e.queryFormChange}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"template-table customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"45"}}),a("el-table-column",{attrs:{prop:"taskName",label:"政企任务名称",align:"center",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskId",label:"政企任务ID",align:"center",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"campName",label:"活动名称",align:"center",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"campId",label:"活动ID",align:"center",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"cityName",label:"地市",align:"center",width:"90"}}),a("el-table-column",{attrs:{prop:"countyName",label:"区县",align:"center",width:"90"}}),a("el-table-column",{attrs:{prop:"gridName",label:"网格",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"groupsName",label:"集团名称",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"managerName",label:"客户经理/网格经理",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"groupsType",label:"集团类型",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"startTime",label:"政企任务开始时间",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"endTime",label:"政企任务结束时间",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"targetUserNum",label:"目标用户数",align:"center"}}),a("el-table-column",{attrs:{prop:"warmUpUserNum",label:"预热目标用户数",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"offlineCampCount",label:"驻场营销场次",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"intimeCampCount",label:"执行及时数",align:"center"}}),a("el-table-column",{attrs:{prop:"timelinessRatio",label:"执行及时率",align:"center"}}),a("el-table-column",{attrs:{prop:"issueUserNum",label:"下发数",align:"center"}}),a("el-table-column",{attrs:{prop:"countactUserNum",label:"接触数",align:"center"}}),a("el-table-column",{attrs:{prop:"contactRate",label:"接触成功率",align:"center"}}),a("el-table-column",{attrs:{prop:"sucessUserNum",label:"营销成功数",align:"center"}}),a("el-table-column",{attrs:{prop:"conversionRate",label:"营销成功率",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.openDialog(t.row.taskId)}}},[e._v("添加案例 ")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.query.pageNum,"page-sizes":[10,20,30,40],"page-size":e.query.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"添加案例",visible:e.dialogVisible,width:"50%","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(a){e.dialogVisible=a}}},[a("div",{staticStyle:{padding:"20px 50px"}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"案例名称:",prop:"caseName"}},[a("el-input",{model:{value:e.dialogForm.caseName,callback:function(a){e.$set(e.dialogForm,"caseName",a)},expression:"dialogForm.caseName"}})],1),a("el-form-item",{attrs:{label:"案例描述:",prop:"caseDes"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.caseDes,callback:function(a){e.$set(e.dialogForm,"caseDes",a)},expression:"dialogForm.caseDes"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.dialogLoading},on:{click:e.saveCase}},[e._v("确 定")])],1)])],1)},r=[],i=(t("88a7"),t("271a"),t("5494"),t("0fea")),s=t("30b9"),o=t("a454"),n=t("4e3f"),c={components:{QueryFormCell:n["a"]},data(){return{loading:!1,exportLoading:!1,dialogLoading:!1,defaultSizeForm:{radioModel:["-1","-1","-1","-1","-1"]},QueryFormList:[{label:"地市",values:[{label:"明细",value:"-1"},{label:"汇总",value:"0"}],isDate:!1},{disabled:!0,label:"区县",values:[{label:"明细",value:"-1"},{label:"汇总",value:"0"}],isDate:!1},{disabled:!0,labelWidth:"142px",label:"客户经理/网格经理",values:[{label:"明细",value:"-1"},{label:"汇总",value:"0"}],isDate:!1},{disabled:!0,label:"网格",values:[{label:"明细",value:"-1"},{label:"汇总",value:"0"}],isDate:!1},{disabled:!0,label:"集团",values:[{label:"明细",value:"-1"},{label:"汇总",value:"0"}],isDate:!1}],queryTime:null,searchParam:{cityId:"-1",countyId:"-1",managerId:"-1",gridId:"-1",groupsId:"-1",taskName:"",inputCamp:"",inputGroupName:"",startDay:"",endDay:"",inputManager:"",selectGroupsType:""},query:{pageNum:1,pageSize:10},tableData:[],total:0,dialogVisible:!1,dialogForm:{taskId:"",caseName:"",caseDes:""},rules:{caseName:[{required:!0,message:"请输入案例名称",trigger:"blur"}]}}},created(){this.getCityList(),this.searchData()},methods:{resetQuery(){this.searchParam={cityId:"-1",countyId:"-1",managerId:"-1",gridId:"-1",groupsId:"-1",taskName:"",inputCamp:"",inputGroupName:"",startDay:"",endDay:"",inputManager:"",selectGroupsType:""},this.queryTime=null,this.defaultSizeForm.radioModel=["-1","-1","-1","-1","-1"],this.QueryFormList.forEach((e,a)=>{a>0&&(e.disabled=!0)}),this.searchData(),this.$forceUpdate()},dateChange(e){e?(this.searchParam.startDay=e[0],this.searchParam.endDay=e[1]):(this.searchParam.startDay="",this.searchParam.endDay="")},queryFormChange({index:e,form:{radioModel:a}}){this.defaultSizeForm.radioModel=a;const t=a[e];if("-1"===t||"0"===t)for(let l=4;l>e;l--)this.QueryFormList[l].disabled=!0,this.defaultSizeForm.radioModel[l]="-1";else if(e<4){this.QueryFormList[e+1].disabled=!1;for(let a=e+1;a<=4;a++)this.defaultSizeForm.radioModel[a]="-1",a>e+1&&(this.QueryFormList[a].disabled=!0)}switch(e){case 0:this.searchParam.cityId=t,this.getCountyList();break;case 1:this.searchParam.countyId=t,this.getManagerList();break;case 2:this.searchParam.managerId=t,this.getGridList();break;case 3:this.searchParam.gridId=t,this.getGroupsList();break;case 4:this.searchParam.groupsId=t;break}this.searchData(),this.$forceUpdate()},async getCityList(){try{const{cityList:e}=await Object(i["i"])(s["a"].effectAppraisal.getCityList),a=e.map(e=>({label:e.name,value:e.id}))||[];this.$set(this.QueryFormList[0],"values",[...this.QueryFormList[0].values,...a])}catch(e){}},async getCountyList(){try{const e=await Object(i["i"])(o["a"].county.selectCountyByCityID,{cityId:this.searchParam.cityId}),a=e.map(e=>({label:e.countyName,value:e.countyId}))||[];this.$set(this.QueryFormList[1],"values",[{label:"明细",value:"-1"},{label:"汇总",value:"0"},...a])}catch(e){this.$set(this.QueryFormList[1],"values",[{label:"明细",value:"-1"},{label:"汇总",value:"0"}])}},async getManagerList(){try{const e=await Object(i["i"])(s["a"].enterprise.getDimManager,{cityId:this.searchParam.cityId,countyId:this.searchParam.countyId}),a=e.map(e=>({label:e.managerName,value:e.managerId}))||[];this.$set(this.QueryFormList[2],"values",[{label:"明细",value:"-1"},{label:"汇总",value:"0"},...a])}catch(e){this.$set(this.QueryFormList[2],"values",[{label:"明细",value:"-1"},{label:"汇总",value:"0"}])}},async getGridList(){try{const e=await Object(i["i"])(s["a"].enterprise.getDimGrid,{cityId:this.searchParam.cityId,countyId:this.searchParam.countyId,managerId:this.searchParam.managerId}),a=e.map(e=>({label:e.gridName,value:e.gridId}))||[];this.$set(this.QueryFormList[3],"values",[{label:"明细",value:"-1"},{label:"汇总",value:"0"},...a])}catch(e){this.$set(this.QueryFormList[3],"values",[{label:"明细",value:"-1"},{label:"汇总",value:"0"}])}},async getGroupsList(){try{const e=await Object(i["i"])(s["a"].enterprise.getDimGroups,{cityId:this.searchParam.cityId,countyId:this.searchParam.countyId,managerId:this.searchParam.managerId,gridId:this.searchParam.gridId}),a=e.map(e=>({label:e.groupsName,value:e.groupsId}))||[];this.$set(this.QueryFormList[4],"values",[{label:"明细",value:"-1"},{label:"汇总",value:"0"},...a])}catch(e){this.$set(this.QueryFormList[4],"values",[{label:"明细",value:"-1"},{label:"汇总",value:"0"}])}},searchData(){this.query.pageNum=1,this.query={...this.query,...this.searchParam},this.getTableData()},handleSizeChange(e){this.query.pageNum=1,this.query.pageSize=e,this.getTableData()},handleCurrentChange(e){this.query.pageNum=e,this.getTableData()},async getTableData(){try{this.loading=!0;const{records:e,total:a}=await Object(i["i"])(s["a"].enterprise.queryMarketingList,this.query);this.tableData=e,this.total=a}catch(e){}finally{this.loading=!1}},async exportData(){try{this.exportLoading=!0;const{data:e}=await Object(i["b"])(s["a"].enterprise.exportMarketingData,this.query);if(!e)return;const a=new Blob([e],{type:e.type}),t="政企任务评估.xls",l=document.createElement("a");l.download=t,l.style.display="none",l.href=URL.createObjectURL(a),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)}catch(e){}finally{this.exportLoading=!1}},openDialog(e){this.dialogVisible=!0,this.dialogForm.taskId=e},saveCase(){this.$refs.dialogForm.validate(async e=>{if(e)try{this.dialogLoading=!0;await Object(i["i"])(s["a"].enterprise.saveCase,this.dialogForm);this.$message.success("添加案例成功！"),this.dialogForm={caseName:"",caseUrl:"",caseDesc:""},this.dialogVisible=!1}catch(a){}finally{this.dialogLoading=!1}})}}},d=c,u=(t("a19c"),t("2877")),m=Object(u["a"])(d,l,r,!1,null,"12b4ad3c",null);a["default"]=m.exports},5494:function(e,a,t){"use strict";var l=t("83ab"),r=t("e330"),i=t("edd0"),s=URLSearchParams.prototype,o=r(s.forEach);l&&!("size"in s)&&i(s,"size",{get:function(){var e=0;return o(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"822a":function(e,a,t){},"88a7":function(e,a,t){"use strict";var l=t("cb2d"),r=t("e330"),i=t("577e"),s=t("d6d6"),o=URLSearchParams,n=o.prototype,c=r(n.append),d=r(n["delete"]),u=r(n.forEach),m=r([].push),p=new o("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&l(n,"delete",(function(e){var a=arguments.length,t=a<2?void 0:arguments[1];if(a&&void 0===t)return d(this,e);var l=[];u(this,(function(e,a){m(l,{key:a,value:e})})),s(a,1);var r,o=i(e),n=i(t),p=0,h=0,b=!1,g=l.length;while(p<g)r=l[p++],b||r.key===o?(b=!0,d(this,r.key)):h++;while(h<g)r=l[h++],r.key===o&&r.value===n||c(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},a19c:function(e,a,t){"use strict";t("822a")},a28d:function(e,a,t){"use strict";t("cddb")},cddb:function(e,a,t){},d6d6:function(e,a,t){"use strict";var l=TypeError;e.exports=function(e,a){if(e<a)throw new l("Not enough arguments");return e}},edd0:function(e,a,t){"use strict";var l=t("13d2"),r=t("9bf2");e.exports=function(e,a,t){return t.get&&l(t.get,a,{getter:!0}),t.set&&l(t.set,a,{setter:!0}),r.f(e,a,t)}}}]);