(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6eab18af"],{"12fc":function(t,e,a){"use strict";const r="/plan-svc/action",o="/plan-svc/api/action";e["a"]={mpapi:{getSysEnum:r+"/iop/common/getSysEnum",queryIopTemplate:r+"/iop/excellentTemplateManager/queryIopTemplate",exportStandardScene:r+"/iop/excellentTemplateManager/exportStandardScene",saveOrCancelExcellentTemplate:r+"/iop/excellentTemplateManager/saveOrCancelExcellentTemplate",uploadBeforeView:r+"/iop/excellentTemplateManager/uploadBeforeView",uploadTemplateToIop:r+"/iop/excellentTemplateManager/uploadTemplateToIop",updateDistributePersion:r+"/iop/approve/template/updateDistributePersion",queryActivityInfo:"/plan-svc/action/iop/approve/template/jx/queryActivityInfo",getActivityTemplate:r+"/iop/approve/template/getActivityTemplate",queryDistributePersion:r+"/iop/approve/template/queryDistributePersion",dismissAndRelatedCustomerGroups:o+"/tactics/tacticsManager/dismissAndRelatedCustomerGroups",getAllCustommerGroups:o+"/tactics/tacticsManager/getAllCustommerGroups",getUnityCampInfo:o+"/tactics/tacticsManager/getUnityCampInfo",getUnityTacticsDetail:o+"/tactics/tacticsManager/getUnityTacticsDetail",getWholeNetworkCampInfos:o+"/tactics/tacticsManager/getWholeNetworkCampInfos",isPopUps:o+"/tactics/tacticsManager/isPopUps",saveWholeNetwork:o+"/tactics/tacticsManager/saveWholeNetwork",searchUnityTactics:o+"/tactics/tacticsManager/jx/searchUnityTactics",unityRecomendDetail:o+"/tactics/tacticsManager/unityRecomendDetail",findMcdAutoSceneById:r+"/mcdAutoModel/findMcdAutoSceneById",getProduct:r+"/mcdAutoModel/getProduct",deleteMcdAutoSceneDef:r+"/mcdAutoModel/deleteMcdAutoSceneDef",findMcdAutoSceneByTable:r+"/mcdAutoModel/findMcdAutoSceneByTable",findMcdAutoSceneList:r+"/mcdAutoModel/findMcdAutoSceneList",queryChannelAdivList:r+"/mcdAutoModel/queryChannelAdivList",queryProductList:r+"/mcdAutoModel/queryProductList",querySmsChannelCount:r+"/mcdAutoModel/querySmsChannelCount",quoteMcdAutoModel:r+"/mcdAutoModel/quoteMcdAutoModel",saveMcdAutoSceneDef:r+"/mcdAutoModel/saveMcdAutoSceneDef",updateMcdAutoModel:r+"/mcdAutoModel/updateMcdAutoModel",updateMcdAutoSceneDef:r+"/mcdAutoModel/updateMcdAutoSceneDef",updateMcdAutoSceneDefStatId:r+"/mcdAutoModel/updateMcdAutoSceneDefStatId",queryTopics:r+"/topic/queryTopics",tacticsCreateQueryIopTemplate:o+"/tactics/tacticsCreate/queryIopTemplate",quickCreateTacticsByIopTemplate:o+"/tactics/quickTactics/quickCreateTacticsByIopTemplate",qucickApprove:o+"/tactics/quickTactics/qucickApprove"}}},"6af3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MaterHome"},[e("div",{staticClass:"query-from-cell"},[e("el-form",{ref:"queryFromRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.queryFrom,size:"small","label-width":"180px"}},[e("el-form-item",{attrs:{label:"策略编码：",prop:"strategyId"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"240px"},attrs:{placeholder:"策略编码",clearable:""},model:{value:t.queryFrom.strategyId,callback:function(e){t.$set(t.queryFrom,"strategyId",e)},expression:"queryFrom.strategyId"}})],1),e("el-form-item",{attrs:{label:"策略名称：",prop:"strategyName"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"240px"},attrs:{placeholder:"策略名称",clearable:""},model:{value:t.queryFrom.strategyName,callback:function(e){t.$set(t.queryFrom,"strategyName",e)},expression:"queryFrom.strategyName"}})],1),e("el-form-item",{attrs:{label:"营销策略类型：",prop:"strategyType"}},[e("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"营销策略类型",clearable:""},model:{value:t.queryFrom.strategyType,callback:function(e){t.$set(t.queryFrom,"strategyType",e)},expression:"queryFrom.strategyType"}},t._l(t.Tactics,(function(t){return e("el-option",{key:t.enumOrder,attrs:{label:t.enumValue,value:t.enumOrder}})})),1)],1),e("el-form-item",{attrs:{label:"产品编码及名称：",prop:"productCode"}},[e("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"240px"},attrs:{placeholder:"产品编码及名称",clearable:""},model:{value:t.queryFrom.productCode,callback:function(e){t.$set(t.queryFrom,"productCode",e)},expression:"queryFrom.productCode"}})],1),e("el-form-item",{attrs:{label:"策略生效时间：",prop:"strategyStartTime"}},[e("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"date",placeholder:"策略生效时间","value-format":"yyyy-MM-dd"},model:{value:t.queryFrom.strategyStartTime,callback:function(e){t.$set(t.queryFrom,"strategyStartTime",e)},expression:"queryFrom.strategyStartTime"}})],1),e("el-form-item",{attrs:{label:"策略失效时间：",prop:"strategyEndTime"}},[e("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"date",placeholder:"策略生效时间","value-format":"yyyy-MM-dd"},model:{value:t.queryFrom.strategyEndTime,callback:function(e){t.$set(t.queryFrom,"strategyEndTime",e)},expression:"queryFrom.strategyEndTime"}})],1),e("el-form-item",{staticClass:"right"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.queryList}},[t._v("查询")]),e("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:t.resetQueryForm}},[t._v("重置")])],1)],1)],1),e("div",{staticClass:"Table"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[e("el-table-column",{attrs:{type:"index",label:"序号"}}),e("el-table-column",{attrs:{prop:"strategyId",label:"策略编码"}}),e("el-table-column",{attrs:{prop:"strategyName",label:"策略名称"}}),e("el-table-column",{attrs:{prop:"strategyDesc",label:"策略描述"}}),e("el-table-column",{attrs:{prop:"strategyRange",label:"策略应用范围"}}),e("el-table-column",{attrs:{prop:"strategyTypeName",label:"营销策略类型"}}),e("el-table-column",{attrs:{prop:"approvalTime",label:"策略状态"},scopedSlots:t._u([{key:"default",fn:function(a){return["1"===a.row.strategyType?e("span",[t._v(" 已生效 ")]):t._e(),e("span",[t._v(" 已失效 ")])]}}])}),e("el-table-column",{attrs:{prop:"strategyStarttime",label:"策略生效时间"}}),e("el-table-column",{attrs:{prop:"strategyEndtime",label:"策略失效时间"}}),e("el-table-column",{attrs:{width:"180px",prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",{attrs:{underline:!1,type:"primary",href:"#/MarketingPlanning/UnifiedStrategyDetail?strategyId="+a.row.strategyId}},[t._v("查看")]),e("el-button",{staticStyle:{margin:"0 10px"},attrs:{type:"text"},on:{click:function(e){return t.WholeNetworkCampInfos(a.row.strategyId)}}},[t._v("一键调用")]),a.row.customGroupId?e("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-warning",iconColor:"#FAAD14",title:"确定解除？","cancel-button-type":"Primary"},on:{confirm:function(e){return t.correlation(a.row)}}},[e("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("解除客群")])],1):e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.correlation(a.row)}}},[t._v("关联客群")])]}}])})],1)],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"current-page":t.queryFrom.pageNum,layout:"total, prev, pager, next, jumper",total:t.Total},on:{"current-change":t.handleCurrentChange}})],1),e("custom-dialog",{ref:"customDialog",on:{submit:t.queryList}})],1)},o=[],s=a("0fea"),l=(a("d370"),a("12fc")),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"CustomDialog"},[e("el-dialog",{attrs:{title:"选择统一策略客群",visible:t.customDialogVisible,width:"60%","before-close":t.closeDilog},on:{"update:visible":function(e){t.customDialogVisible=e}}},[e("div",[e("div",{staticClass:"CustomDialog-hd",staticStyle:{"margin-bottom":"20px"}},[e("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入客群编码或名称"},model:{value:t.form.keyWords,callback:function(e){t.$set(t.form,"keyWords",e)},expression:"form.keyWords"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.queryList},slot:"append"})],1),e("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){t.form.keyWords=""}}},[t._v("清空")])],1),e("div",{staticClass:"CustomDialog-bd"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableList,stripe:"","header-cell-style":{background:"#edf1f4"}}},[e("el-table-column",{attrs:{label:"",width:"40"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-radio",{staticStyle:{color:"#fff","padding-left":"10px","margin-right":"-25px"},attrs:{label:a.$index},nativeOn:{change:function(e){return t.getCurrentRow(a.row)}},model:{value:t.currentRow,callback:function(e){t.currentRow=e},expression:"currentRow"}})]}}])}),e("el-table-column",{attrs:{type:"index"}}),e("el-table-column",{attrs:{property:"customGroupId",label:"客群编码"}}),e("el-table-column",{attrs:{property:"customGroupName",label:"客户群名称"}}),e("el-table-column",{attrs:{property:"customNum",label:"生成客户数"}}),e("el-table-column",{attrs:{property:"actualCustomNum",label:"推送成功客户数"}}),e("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v(" "+t._s(1===a.row.customStatusId?"有效":"无效")+" ")])]}}])})],1)],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"current-page":t.form.current,layout:"total, prev, pager, next, jumper",total:t.Total},on:{"current-change":t.handleCurrentChange}})],1)]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeDilog}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)])],1)},c=[],n={components:{},data(){return{submitForm:{strategyId:"",customGroupId:"",customGroupName:"",customNum:""},form:{keyWords:"",current:1},tableList:[],currentRow:null,customDialogVisible:!1,tableLoading:!1,Total:0}},computed:{},created(){this.queryList()},mounted(){},methods:{queryList(){this.tableLoading=!0,Object(s["i"])(l["a"].mpapi.getAllCustommerGroups,this.form).then(t=>{this.tableLoading=!1,this.tableList=t.records,this.Total=t.total})},handleCurrentChange(t){this.form.current=t,this.queryList()},getCurrentRow(t){this.submitForm.customGroupId=t.customGroupId,this.submitForm.customGroupName=t.customGroupName,this.submitForm.customNum=t.customNum},openDialog(t){this.submitForm.strategyId=t,this.customDialogVisible=!0},closeDilog(){this.currentRow=null,this.submitForm.strategyId="",this.customDialogVisible=!1},async submit(){this.currentRow||0===this.currentRow?await Object(s["i"])(l["a"].mpapi.dismissAndRelatedCustomerGroups,this.submitForm).then(t=>{"SUCCESS"===t.status?(this.$message({message:"关联客群成功",type:"success"}),this.customDialogVisible=!1,this.$emit("submit")):this.$message.error("关联客群失败")}):this.$message.error("请先选中客户群")}}},u=n,m=(a("743e"),a("2877")),p=Object(m["a"])(u,i,c,!1,null,"7facbe60",null),d=p.exports,y={components:{CustomDialog:d},data(){return{queryFrom:{current:1,strategyId:"",strategyName:"",strategyType:"",productCode:"",strategyStartTime:"",strategyEndTime:""},keyWords:"",tableData:[],Total:0,currentPage4:4,Tactics:[],loading:!1,customDialogVisible:!0}},created(){this.queryList(),this.queryEnumsByType()},methods:{Approval(t){this.$refs["approval"].ShowPopup()},async queryEnumsByType(){await Object(s["i"])(l["a"].mpapi.getSysEnum,{enumType:"iop_activity_type",parentId:""}).then(t=>{this.Tactics=t})},async queryList(){this.loading=!0,await Object(s["i"])(l["a"].mpapi.searchUnityTactics,this.queryFrom).then(t=>{this.loading=!1,this.tableData=t.records,this.Total=t.total})},handleCurrentChange(t){this.queryFrom.pageNum=t,this.queryList()},resetQueryForm(){this.$refs.queryFromRef.resetFields(),this.queryList()},async WholeNetworkCampInfos(t){await Object(s["i"])(l["a"].mpapi.getWholeNetworkCampInfos,{strategyId:t}).then(t=>{})},async correlation(t){t.customGroupId?await Object(s["i"])(l["a"].mpapi.dismissAndRelatedCustomerGroups,{strategyId:t.strategyId}).then(t=>{"SUCCESS"===t.status?(this.$message({message:"解除客群成功",type:"success"}),this.queryList()):this.$message.error("解除客群失败")}):this.$refs.customDialog.openDialog(t.strategyId)}}},g=y,b=(a("9466"),Object(m["a"])(g,r,o,!1,null,"1a31c7cc",null));e["default"]=b.exports},"71fa":function(t,e,a){},"743e":function(t,e,a){"use strict";a("be64")},9466:function(t,e,a){"use strict";a("71fa")},be64:function(t,e,a){}}]);