(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bbe38c8"],{"1cda":function(e,t,a){},"31b1":function(e,t,a){"use strict";const s="/plan-svc/api/action",l="/plan-svc/action",i="/approve-svc/",n="/element-svc/";t["a"]={channel:{queryIopTemplate:s+"/tactics/tacticsCreate/queryIopTemplate",queryTopics:s+"/topic/queryTopics",getTemplateData:i+"jx/cmpApprovalProcessConf/getApproveConfig",getApproveConfig:i+"cmpApprovalProcessConf/getApproveConfig",getNextApprovers:i+"jx/cmpApproveProcessInstance/getNodeApprover",saveChannel:s+"/tactics/tacticsCreate/save",deleteCustom:s+"/custgroup/custGroupManager/deleteCustom",getMoreMyCustom:s+"/custgroup/custGroupManager/getMoreMyCustom",viewCustGroupDetail:s+"/custgroup/custGroupManager/viewCustGroupDetail",queryMmsTemplates:l+"/mmsTemplates/queryMmsTemplates",deleteMmsTemplateLists:l+"/mmsTemplates/createTactics/deleteMmsTemplateLists",updateMmsTemplate:l+"/mmsTemplates/updateMmsTemplate",smsContentBatchDel:s+"/smsTemplates/smsContentBatchDel",smsContentDel:s+"/smsTemplates/smsContentDel",smsContentEdit:s+"/smsTemplates/smsContentEdit",smsContentSaveOrUpdate:s+"/smsTemplates/smsContentSaveOrUpdate",smsTemplateOffline:s+"/smsTemplates/smsTemplateOffline",smsTemplates:s+"/smsTemplates/smsTemplates",smsTemplateSaveOrUpdate:s+"/smsTemplates/smsTemplateSaveOrUpdate",delPlanExclusivity:n+"mcd-plan-exclusivity/delPlanExclusivity",exportPlanExcluTemplate:n+"mcd-plan-exclusivity/exportPlanExcluTemplate",getPlanExclusivityInfo:n+"mcd-plan-exclusivity/getPlanExclusivityInfo",getPlanExclusivityList:n+"mcd-plan-exclusivity/getPlanExclusivityList",queryPlanDefList:n+"mcd-plan-exclusivity/queryPlanDefList",queryPlanExclusivity:n+"mcd-plan-exclusivity/queryPlanExclusivity",saveOrUpdatePlanExclusivity:n+"mcd-plan-exclusivity/saveOrUpdatePlanExclusivity",savePlanExclusivity:n+"mcd-plan-exclusivity/savePlanExclusivity",updatePlanExclusivity:n+"mcd-plan-exclusivity/updatePlanExclusivity",uploadPlanExcluFile:n+"mcd-plan-exclusivity/uploadPlanExcluFile",approveRecord:n+"api/mcdDimMaterialApprove/jx/approveRecord",getMaterialApprover:n+"api/mcdDimMaterialApprove/jx/getMaterialApprover",commitProcess:"/approve-svc/cmpApproveProcessInstance/commitProcess",subMaterialApprove:n+"api/mcdDimMaterialApprove/jx/subMaterialApprove",queryCommunicationUsers:"/plan-svc/api/channelMaterial/jx/queryCommunicationUsers",queryCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/queryCommunicationTask",addCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTask",addCommunicationTaskBatch:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTaskBatch",communicationAppTask:"/approve-svc/jx/cmpApproveProcessInstance/communicationAppTask",queryChannelExecInfo:"/plan-svc/mcd/camp/channelExec/queryChannelExecInfo",queryChannelExecList:"/plan-svc/mcd/camp/channelExec/queryChannelExecList",deleteChannelPrompt:"/plan-svc/mcd/chan/prompt/deleteChannelPrompt",queryChannelPrompt:"/plan-svc/mcd/chan/prompt/queryChannelPrompt",saveOrUpdateChannelPrompt:"/plan-svc/mcd/chan/prompt/saveOrUpdateChannelPrompt",uploaChanPromptFile:"/plan-svc/mcd/chan/prompt/uploaChanPromptFile",chanAndPlanMarketingHistory:"/plan-svc/mcd/marketing/history/chanAndPlanMarketingHistory",custContactNumMarketingHistory:"/plan-svc/mcd/marketing/history/custContactNumMarketingHistory",custSuccessRateMarketingHistory:"/plan-svc/mcd/marketing/history/custSuccessRateMarketingHistory",planMarketingHistory:"/plan-svc/mcd/marketing/history/planMarketingHistory",caculateContactUserNum:"/pec-timing/mcd/user/contact/caculateContactUserNum",caculateOrderUserNum:"/pec-timing/mcd/user/contact/caculateOrderUserNum",queryCampScene:"/plan-svc/api/action/tactics/tacticsCreate/jx/queryCampScene"}}},"3add":function(e,t,a){"use strict";a("505b")},"45b6a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"note-content"},[t("el-tabs",{attrs:{type:"card"},model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[t("el-tab-pane",{attrs:{label:"推荐用语编辑",name:"RecommendedLanguage",lazy:!0}},[t("RecommendedLanguage")],1),t("el-tab-pane",{attrs:{label:"默认短信夹带",name:"default",lazy:!0}},[t("DefaultNote")],1)],1)],1)},l=[],i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"template-wrap-content"},[t("div",{staticClass:"top-edit-part"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"200px"},attrs:{placeholder:"模板编号/模板内容"},model:{value:e.keyWords,callback:function(t){e.keyWords="string"===typeof t?t.trim():t},expression:"keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.keywordsSearch},slot:"suffix"})]),t("div",[t("el-button",{attrs:{type:"primary"},on:{click:e.addNoteTemplate}},[e._v("新增")]),t("el-button",{attrs:{type:"primary"},on:{click:e.deleteDates}},[e._v("批量删除")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id",stripe:"",height:500},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"45"}}),t("el-table-column",{attrs:{label:"序号",type:"index","header-align":"center",align:"center",width:"45"}}),t("el-table-column",{attrs:{prop:"id",label:"模板编号","header-align":"center",align:"center",width:"140"}}),t("el-table-column",{attrs:{prop:"content",label:"模板内容"}}),t("el-table-column",{attrs:{label:"操作",width:"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDetail(a.row)}}},[e._v("编辑")]),t("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.query.current,"page-sizes":[10,20,30,40],"page-size":e.query.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1,"destroy-on-close":"","append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"模板编号",prop:"id"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),t("el-form-item",{attrs:{label:"模板内容",prop:"content"}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":"",rows:5},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:""},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.addNote}},[e._v("确定")])],1)],1)],1)},n=[],r=a("0fea"),o=a("31b1"),c={data(){return{loading:!1,editLoading:!1,keyWords:"",query:{keyWords:"",current:1,size:10},startPage:!1,total:0,tableData:[],multipleSelection:[],dialogFormVisible:!1,dialogTitle:"",form:{id:"",content:""},rules:{content:[{required:!0,message:"请输入模板内容",trigger:"blur"}]}}},methods:{async getTableData(){try{this.loading=!0,this.startPage&&(this.query.current=1);const{records:e,total:t}=await Object(r["i"])(o["a"].channel.smsContentEdit,this.query);this.tableData=e,this.total=t}catch(e){}finally{this.loading=!1,this.startPage=!1}},keywordsSearch(){this.query.current=1,this.query.keyWords=this.keyWords,this.getTableData()},deleteDates(){0!==this.multipleSelection.length?this.$confirm("您确认要删除所选模板吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const e=this.multipleSelection.map(e=>e.id),t=await Object(r["i"])(o["a"].channel.smsContentBatchDel,{ids:e});"SUCCESS"==t.status&&(this.$message({type:"success",message:"操作成功!"}),this.getTableData())}).catch(()=>!1):this.$message({message:"请选择要删除的数据",type:"warning"})},handleDetail(e){this.form={...e},this.dialogTitle="编辑短信模板",this.dialogFormVisible=!0},addNoteTemplate(){this.dialogTitle="新增短信模板",this.form={id:"",content:""},this.dialogFormVisible=!0},addNote(){this.$refs["form"].validate(async e=>{if(e)try{this.editLoading=!0;const e=await Object(r["i"])(o["a"].channel.smsContentSaveOrUpdate,this.form);"SUCCESS"==e.status&&(this.$message({type:"success",message:"操作成功!"}),this.getTableData(),this.dialogFormVisible=!1)}catch(t){}finally{this.editLoading=!1}})},handleDelete(e){this.$confirm("是否删除该模板?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{status:t}=await Object(r["i"])(o["a"].channel.smsContentDel,{id:e});"SUCCESS"==t&&(this.$message({type:"success",message:"操作成功!"}),this.getTableData())}).catch(()=>{})},handleSizeChange(e){this.query.current=1,this.query.size=e,this.getTableData()},handleCurrentChange(e){this.query.current=e,this.getTableData()},handleSelectionChange(e){this.multipleSelection=e}},mounted(){this.getTableData()}},m=c,p=(a("7fa27"),a("2877")),u=Object(p["a"])(m,i,n,!1,null,"ce997a74",null),d=u.exports,g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"template-wrap-content"},[t("div",{staticClass:"top-edit-part"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"200px"},attrs:{placeholder:"模板编号/模板内容"},model:{value:e.keyWords,callback:function(t){e.keyWords="string"===typeof t?t.trim():t},expression:"keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.keywordsSearch},slot:"suffix"})]),t("div",[t("el-button",{attrs:{type:"primary",loading:e.offlineLoading},on:{click:e.offlines}},[e._v("批量下线")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"template-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id",stripe:"",height:500},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"45"}}),t("el-table-column",{attrs:{label:"序号",type:"index","header-align":"center",align:"center",width:"45"}}),t("el-table-column",{attrs:{prop:"templateId",label:"模板编号","header-align":"center",align:"center",width:"140"}}),t("el-table-column",{attrs:{prop:"adivName",label:"运营位","header-align":"center",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"templateContent",label:"模板内容","header-align":"center",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"defaultMarkingContent",label:"短信夹带用语","header-align":"center",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"status",label:"状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:1==a.row.status?"success":"info"}},[e._v(" "+e._s(1==a.row.status?"已上线":"已下线")+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleStatus(a.row)}}},[e._v(e._s(1==a.row.status?"下线":"上线"))])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.query.current,"page-sizes":[10,20,30,40],"page-size":e.query.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"编辑模板",visible:e.dialogFormVisible,"close-on-click-modal":!1,"destroy-on-close":"","append-to-body":""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"模板编号",prop:"templateId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.templateId,callback:function(t){e.$set(e.form,"templateId",t)},expression:"form.templateId"}})],1),t("el-form-item",{attrs:{label:"运营位",prop:"adivName"}},[t("el-input",{attrs:{disabled:!!e.form.status},model:{value:e.form.adivName,callback:function(t){e.$set(e.form,"adivName",t)},expression:"form.adivName"}})],1),t("el-form-item",{attrs:{label:"模板内容",prop:"templateContent"}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":"",rows:4},model:{value:e.form.templateContent,callback:function(t){e.$set(e.form,"templateContent",t)},expression:"form.templateContent"}})],1),t("el-form-item",{attrs:{label:"短信夹带用语",prop:"defaultMarkingContent"}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":"",rows:4,placeholder:"请输入短信夹带用语"},model:{value:e.form.defaultMarkingContent,callback:function(t){e.$set(e.form,"defaultMarkingContent",t)},expression:"form.defaultMarkingContent"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:""},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.edit}},[e._v("确定")])],1)],1)],1)},h=[],y={data(){return{loading:!1,editLoading:!1,offlineLoading:!1,keyWords:"",query:{keyWords:"",current:1,size:10},startPage:!1,total:0,tableData:[],multipleSelection:[],dialogFormVisible:!1,form:{},rules:{templateId:[{required:!0,message:"请输入模板编号",trigger:"blur"}],adivName:[{required:!0,message:"请输入运营位",trigger:"blur"}],templateContent:[{required:!0,message:"请输入模板内容",trigger:"blur"}],defaultMarkingContent:[{required:!0,message:"请输入短信夹带用语",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},methods:{async getTableData(){try{this.loading=!0,this.startPage&&(this.query.current=1);const{records:e,total:t}=await Object(r["i"])(o["a"].channel.smsTemplates,this.query);this.tableData=e,this.total=t}catch(e){}finally{this.loading=!1,this.startPage=!1}},keywordsSearch(){this.query.current=1,this.query.keyWords=this.keyWords,this.getTableData()},offlines(){0!==this.multipleSelection.length?this.$confirm("您确认要下线所选模板吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{if(this.multipleSelection.every(e=>0==e.status))return void this.$message({message:"所选模板已下线",type:"warning"});const e=this.multipleSelection.map(e=>e.templateId);let t={templateIds:e,status:0};this.offlineLoading=!0;try{const e=await Object(r["i"])(o["a"].channel.smsTemplateOffline,t);"SUCCESS"==e.status&&(this.$message({message:"操作成功",type:"success"}),this.getTableData())}catch(a){}finally{this.offlineLoading=!1}}).catch(()=>!1):this.$message({message:"请选择要下线的模板",type:"warning"})},handleEdit(e){this.form={...e},this.dialogFormVisible=!0},edit(){this.$refs["form"].validate(async e=>{if(e){this.editLoading=!0;try{const e=await Object(r["i"])(o["a"].channel.smsTemplateSaveOrUpdate,this.form);"SUCCESS"==e.status&&(this.$message({message:"操作成功",type:"success"}),this.getTableData(),this.dialogFormVisible=!1)}catch(t){}finally{this.editLoading=!1}}})},handleStatus(e){this.$confirm(`您确认${1==e.status?"下":"上"}线该模板?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{let t={...e};t.status=1==e.status?0:1;const a=await Object(r["i"])(o["a"].channel.smsTemplateSaveOrUpdate,t);"SUCCESS"==a.status&&(this.$message({message:"操作成功",type:"success"}),this.getTableData())}).catch(()=>{})},handleSizeChange(e){this.query.current=1,this.query.size=e,this.getTableData()},handleCurrentChange(e){this.query.current=e,this.getTableData()},handleSelectionChange(e){this.multipleSelection=e}},mounted(){this.getTableData()}},f=y,v=(a("3add"),Object(p["a"])(f,g,h,!1,null,"4b4ece11",null)),b=v.exports,C={components:{RecommendedLanguage:d,DefaultNote:b},data(){return{tabActive:"RecommendedLanguage"}}},x=C,k=Object(p["a"])(x,s,l,!1,null,null,null);t["default"]=k.exports},"505b":function(e,t,a){},"7fa27":function(e,t,a){"use strict";a("1cda")}}]);