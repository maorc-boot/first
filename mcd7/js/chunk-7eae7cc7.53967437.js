(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eae7cc7"],{"047d":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e._self._c;return a("div",{staticClass:"template-wrap-content"},[a("div",{staticClass:"searchParams-part"},[a("div",{staticClass:"searchParams-left"},[a("div",{staticClass:"search-input"},[a("label",[e._v("活动名称：")]),a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"活动名称/编号",clearable:""},model:{value:e.searchParams.keyWordsCamp,callback:function(a){e.$set(e.searchParams,"keyWordsCamp","string"===typeof a?a.trim():a)},expression:"searchParams.keyWordsCamp"}})],1),a("div",{staticClass:"search-input"},[a("label",[e._v("产品名称：")]),a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"产品名称/编号",clearable:""},model:{value:e.searchParams.keyWordsPlan,callback:function(a){e.$set(e.searchParams,"keyWordsPlan","string"===typeof a?a.trim():a)},expression:"searchParams.keyWordsPlan"}})],1),a("div",{staticClass:"search-input"},[a("label",[e._v("地市：")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getCountyList},model:{value:e.searchParams.cityId,callback:function(a){e.$set(e.searchParams,"cityId",a)},expression:"searchParams.cityId"}},e._l(e.cityList,(function(t){return a("el-option-group",{key:t.value,attrs:{label:t.label}},e._l(t.options,(function(e){return a("el-option",{key:e.value+e.label,attrs:{label:e.label,value:e.value}})})),1)})),1)],1),a("div",{staticClass:"search-input"},[a("label",[e._v("区县：")]),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getGridList},model:{value:e.searchParams.countyId,callback:function(a){e.$set(e.searchParams,"countyId",a)},expression:"searchParams.countyId"}},e._l(e.countyList,(function(t){return a("el-option-group",{key:t.value,attrs:{label:t.label}},e._l(t.options,(function(e){return a("el-option",{key:e.value+e.label,attrs:{label:e.label,value:e.value}})})),1)})),1)],1),a("div",{staticClass:"search-input"},[a("label",[e._v("网格：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchParams.gridId,callback:function(a){e.$set(e.searchParams,"gridId",a)},expression:"searchParams.gridId"}},e._l(e.gridList,(function(t){return a("el-option-group",{key:t.value,attrs:{label:t.label}},e._l(t.options,(function(e){return a("el-option",{key:e.value+e.label,attrs:{label:e.label,value:e.value}})})),1)})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"default"===e.timeMode||"daterange"==e.timeMode,expression:"timeMode === 'default' || timeMode == 'daterange'"}],staticClass:"search-input"},[a("label",[e._v("活动时间：")]),a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"yyyy-MM-dd","value-format":"yyyyMMdd"},on:{change:e.getDates},model:{value:e.queryTime,callback:function(a){e.queryTime=a},expression:"queryTime"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"week"===e.timeMode,expression:"timeMode === 'week'"}],staticClass:"search-input"},[a("label",[e._v("活动时间：")]),a("el-date-picker",{attrs:{type:"date","value-format":"yyyyMMdd"},on:{change:e.changeTimeWeek},model:{value:e.queryTimeWeek,callback:function(a){e.queryTimeWeek=a},expression:"queryTimeWeek"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"monthrange"===e.timeMode,expression:"timeMode === 'monthrange'"}],staticClass:"search-input"},[a("label",[e._v("活动时间：")]),a("el-date-picker",{attrs:{type:"monthrange","unlink-panels":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"yyyy-MM","value-format":"yyyyMM"},on:{change:e.getDates},model:{value:e.queryTime,callback:function(a){e.queryTime=a},expression:"queryTime"}})],1)]),a("div",{staticClass:"searchParams-right"},[a("div",{staticClass:"time-part"},[a("el-radio-group",{on:{change:e.changeTimeMode},model:{value:e.timeMode,callback:function(a){e.timeMode=a},expression:"timeMode"}},[a("el-radio-button",{attrs:{label:"default"}},[e._v("默认")]),a("el-radio-button",{attrs:{label:"daterange"}},[e._v("日视图")]),a("el-radio-button",{attrs:{label:"week"}},[e._v("周视图")]),a("el-radio-button",{attrs:{label:"monthrange"}},[e._v("月视图")])],1)],1),a("div",[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.searchTableData}},[e._v("查询")]),a("el-button",{attrs:{type:"success"},on:{click:e.exportData}},[e._v("导出Excel")])],1)])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"template-table customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{label:"序号",type:"index","header-align":"center",align:"center",width:"45"}}),a("el-table-column",{attrs:{prop:"campsegName",label:"活动名称",width:"150","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"campsegRootId",label:"活动编号",width:"120","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"planName",label:"产品名称",width:"150","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"planId",label:"产品编号",width:"120","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"startDate",label:"开始时间",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"endDate",label:"结束时间",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"cityName",label:"地市","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"countyName",label:"区县",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"gridName",label:"网格",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"customerNum",label:"客户数",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"contactNum",label:"接触数",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"contactRate",label:"接触率",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"marketSuccessNum",label:"营销成功数",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"marketSuccessRate",label:"营销成功率",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"contactType",label:"接触类型",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"contactMode",label:"接触方式",width:"90","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"channelName",label:"渠道",width:"90","header-align":"center",align:"center"}}),e._e()],1),a("el-pagination",{attrs:{"current-page":e.query.current,"page-sizes":[10,20,30,40],"page-size":e.query.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},l=[],s=(t("88a7"),t("271a"),t("5494"),t("0fea")),i=t("d212"),n=t("30b9"),c=t("a454"),o=t("c1df"),d=t.n(o),m={name:"ActivityAppraisal",data(){return{loading:!1,timeMode:"default",searchParams:{keyWordsCamp:"",keyWordsPlan:"",cityId:"-1",countyId:"-1",gridId:"-1",contactType:"",contactMode:"",viewType:"",startDate:"",endDate:""},query:{current:1,size:10},queryTime:null,queryTimeWeek:null,cityList:[{label:"类别",options:[{value:"-1",label:"明细"},{value:"0",label:"汇总"}]},{label:"地市",options:[]}],countyList:[{label:"类别",options:[{value:"-1",label:"明细"},{value:"0",label:"汇总"}]},{label:"区县",options:[]}],gridList:[{label:"类别",options:[{value:"-1",label:"明细"},{value:"0",label:"汇总"}]},{label:"网格",options:[]}],total:0,tableData:[]}},methods:{searchTableData(){this.query={...this.query,...this.searchParams},this.query.current=1,this.getTableData()},async getTableData(){try{this.loading=!0;const{records:e,total:a}=await Object(s["i"])(i["a"].effectAppraisal.gridEval,this.query);this.total=a,this.tableData=e;let t=new Map([["1","短信"],["0","电话"]]),r=new Map([["1","线上"],["0","线下"]]);this.tableData.forEach(e=>{e.marketSuccessRate=e.marketSuccessRate+"%",e.contactRate=e.contactRate+"%",e.contactMode=t.get(e.contactMode)||"-",e.contactType=r.get(e.contactType)||"-"})}catch(e){}finally{this.loading=!1}},handleSizeChange(e){this.query.current=1,this.query.size=e,this.getTableData()},handleCurrentChange(e){this.query.current=e,this.getTableData()},changeTimeMode(e){if("default"==e)this.searchParams.viewType="",this.queryTime=null,this.searchParams.startDate="",this.searchParams.endDate="";else if("week"==e){this.searchParams.viewType="W";let e=d()(new Date).weekday(-7).startOf("week").add(1,"days").format("YYYYMMDD"),a=d()(new Date).weekday(-7).endOf("week").add(1,"days").format("YYYYMMDD");this.searchParams.startDate=e,this.searchParams.endDate=a,this.queryTimeWeek=e}else if("monthrange"==e){this.searchParams.viewType="M";let e=d()(new Date).startOf("month").format("YYYYMM"),a=d()(new Date).endOf("month").format("YYYYMM");this.searchParams.startDate=e,this.searchParams.endDate=a,this.queryTime=[e,a]}else if("daterange"==e){this.searchParams.viewType="D";let e=d()(new Date).subtract(1,"days").format("YYYYMMDD"),a=d()(new Date).format("YYYYMMDD");this.searchParams.startDate=e,this.searchParams.endDate=a,this.queryTime=[e,a]}this.searchTableData()},getDates(e){null!==e&&void 0!==e&&e.length?(this.timeMode,this.searchParams.startDate=e[0],this.searchParams.endDate=e[1]):(this.searchParams.startDate="",this.searchParams.endDate="")},changeTimeWeek(e){let a=d()(e).add(6,"days").format("YYYYMMDD");this.searchParams.startDate=e,this.searchParams.endDate=a},async getCityList(){try{const{cityList:e}=await Object(s["i"])(n["a"].effectAppraisal.getCityList);this.$set(this.cityList[1],"options",e.filter(e=>"0"!=e.id&&"-1"!=e.id).map(e=>({label:e.name,value:e.id})))}catch(e){}},async getCountyList(e){0==e?(this.searchParams.countyId=e,this.searchParams.gridId=e):(this.searchParams.countyId="-1",this.searchParams.gridId="-1");try{const a=await Object(s["i"])(c["a"].county.selectCountyByCityID,{cityId:e});this.$set(this.countyList[1],"options",a.filter(e=>"-1"!=e.countyId&&"0"!=e.countyId).map(e=>({label:e.countyName,value:e.countyId})))}catch(a){}},async getGridList(e){this.searchParams.gridId=0==e?e:"-1";try{let a={cityId:this.searchParams.cityId,countyId:e};const t=await Object(s["i"])(c["a"].grid.listByCountyID,a);this.$set(this.gridList[1],"options",t.filter(e=>"-1"!=e.gridId&&"0"!=e.gridId).map(e=>({label:e.gridName,value:e.gridId})))}catch(a){}},exportData(){Object(s["b"])(i["a"].effectAppraisal.gridExport,this.searchParams).then(({data:e})=>{const a=new Blob([e],{type:e.type}),t="智慧网格效果评估.xls",r=document.createElement("a");r.download=t,r.style.display="none",r.href=URL.createObjectURL(a),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)})}},mounted(){this.searchTableData(),this.getCityList()}},p=m,u=(t("dba8"),t("2877")),v=Object(u["a"])(p,r,l,!1,null,"c0bb5748",null);a["default"]=v.exports},"271a":function(e,a,t){"use strict";var r=t("cb2d"),l=t("e330"),s=t("577e"),i=t("d6d6"),n=URLSearchParams,c=n.prototype,o=l(c.getAll),d=l(c.has),m=new n("a=1");!m.has("a",2)&&m.has("a",void 0)||r(c,"has",(function(e){var a=arguments.length,t=a<2?void 0:arguments[1];if(a&&void 0===t)return d(this,e);var r=o(this,e);i(a,1);var l=s(t),n=0;while(n<r.length)if(r[n++]===l)return!0;return!1}),{enumerable:!0,unsafe:!0})},"30b9":function(e,a,t){"use strict";const r="/eval-svc";a["a"]={effectAppraisal:{dayEffect:r+"/home/eval/day/effect",monthEffect:r+"/home/eval/month/effect",getCityList:r+"/home/eval/getCityList",activityList:r+"/evaluate/activity/list",productList:r+"/mtl-eval-info-plan/queryPage",exportProduct:r+"/mtl-eval-info-plan/export",channelList:r+"/evaluate/channel/list",getTdList:"/eval-svc/td/eval/list",exportTdEvalListData:"/eval-svc/td/eval/exportTdEvalListData",exportOrderChannelDMData:"/eval-svc/reportform/download/exportOrderChannelDMData",exportOrderProductDMData:"/eval-svc/reportform/download/exportOrderProductDMData",getPlanChannelReportList:"/eval-svc/reportform/download/getPlanChannelReportList",getPlanOrderReportList:"/eval-svc/reportform/download/getPlanOrderReportList"},enterprise:{exportMarketingData:"/eval-svc/action/jx/enterpriseMarketing/exportMarketingData",getDimGrid:"/eval-svc/action/jx/enterpriseMarketing/getDimGrid",getDimGroups:"/eval-svc/action/jx/enterpriseMarketing/getDimGroups",getDimManager:"/eval-svc/action/jx/enterpriseMarketing/getDimManager",queryMarketingList:"/eval-svc/action/jx/enterpriseMarketing/queryMarketingList",saveCase:"/eval-svc/action/jx/enterpriseMarketing/saveCase"}}},5494:function(e,a,t){"use strict";var r=t("83ab"),l=t("e330"),s=t("edd0"),i=URLSearchParams.prototype,n=l(i.forEach);r&&!("size"in i)&&s(i,"size",{get:function(){var e=0;return n(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"88a7":function(e,a,t){"use strict";var r=t("cb2d"),l=t("e330"),s=t("577e"),i=t("d6d6"),n=URLSearchParams,c=n.prototype,o=l(c.append),d=l(c["delete"]),m=l(c.forEach),p=l([].push),u=new n("a=1&a=2&b=3");u["delete"]("a",1),u["delete"]("b",void 0),u+""!=="a=2"&&r(c,"delete",(function(e){var a=arguments.length,t=a<2?void 0:arguments[1];if(a&&void 0===t)return d(this,e);var r=[];m(this,(function(e,a){p(r,{key:a,value:e})})),i(a,1);var l,n=s(e),c=s(t),u=0,v=0,h=!1,y=r.length;while(u<y)l=r[u++],h||l.key===n?(h=!0,d(this,l.key)):v++;while(v<y)l=r[v++],l.key===n&&l.value===c||o(this,l.key,l.value)}),{enumerable:!0,unsafe:!0})},b983:function(e,a,t){},d212:function(e,a,t){"use strict";const r="/mcd-eval/action",l="/plan-svc/api",s="/element-svc/api";a["a"]={effectAppraisal:{queryActServiceTypeInfo:r+"/effectEvaluate/activity/queryActServiceTypeInfo.do",queryUserCityInfo:r+"/effectEvaluate/activity/queryUserCityInfo.do",queryChannelInfo:r+"/effectEvaluate/activity/queryChannelInfo.do",queryPlanTypeInfo:r+"/effectEvaluate/activity/queryPlanTypeInfo.do",queryActServiceTypeIndicatorInfo:r+"/effectEvaluate/activity/queryActServiceTypeIndicatorInfo.do",saveViewIndicatorInfo:r+"/effectEvaluate/activity/saveViewIndicatorInfo.do",listCampInfo:r+"/effectEvaluate/activity/listCampInfo.do",listPlanInfo:r+"/effectEvaluate/product/listPlanInfo.do",channelOrSceneAppraise:r+"/appraisal/channelOrSceneAppraise.do",pagelist:l+"/singleUser/pagelist",queryPage:"/eval-svc/eval5g/queryPage",export:"/eval-svc/eval5g/export",queryPageCloud:"/eval-svc/eval/5gcloud/queryPage",export5gCloudEvalListData:"/eval-svc/eval/5gcloud/export5gCloudEvalListData",exportIvr:"/eval-svc/reportIvr/export",queryPageIvr:"/eval-svc/reportIvr/queryPage",querySystemUsageCityList:l+"/action/systemUsage/querySystemUsageCityList",querySystemUsageDeptList:l+"/action/systemUsage/querySystemUsageDeptList",querySystemUsagePersonageList:l+"/action/systemUsage/querySystemUsagePersonageList",getUsageCityDetailList:l+"/action/systemUsage/getUsageCityDetailList",getUsageDeptDetailList:l+"/action/systemUsage/getUsageDeptDetailList",getUsagePersonageDetailList:l+"/action/systemUsage/getUsagePersonageDetailList",exportReport:"/eval-svc/report/export",queryPageReport:"/eval-svc/report/queryPage",batchDeleteMaterial:s+"/mcdDimMaterial/jx/batchDeleteMaterial",deleteMaterial:s+"/mcdDimMaterial/jx/deleteMaterial",getIntelligentMatchingMaterialList:s+"/mcdDimMaterial/jx/getIntelligentMatchingMaterialList",getMaterial:s+"/mcdDimMaterial/jx/getMaterial",loadImage:s+"/mcdDimMaterial/jx/loadImage",materialImportTemplateDownload:s+"/mcdDimMaterial/jx/materialImportTemplateDownload",queryChannel:s+"/mcdDimMaterial/jx/queryChannel",queryContact:s+"/mcdDimMaterial/jx/queryContact",queryMaterialPageList:s+"/mcdDimMaterial/jx/queryMaterialPageList",queryPosition:s+"/mcdDimMaterial/jx/queryPosition",removeMaterialById:s+"/mcdDimMaterial/jx/removeMaterialById",saveOrUpdateMaterial:s+"/mcdDimMaterial/jx/saveOrUpdateMaterial",updateMaterialStatus:s+"/mcdDimMaterial/jx/updateMaterialStatus",uploadMaterialPicture:s+"/mcdDimMaterial/jx/uploadMaterialPicture",uploadMaterialsFile:s+"/mcdDimMaterial/jx/uploadMaterialsFile",uploadMaterialVideo:s+"/mcdDimMaterial/jx/uploadMaterialVideo",exportMaterialsFile:s+"/mcdDimMaterial/jx/exportMaterialsFile",queryChart:"/eval-svc/home/eval/queryChart",monthEffect:"/eval-svc/home/eval/month/effect",dayEffect:"/eval-svc/home/eval/day/effect",getTacticsListByCityId:"/eval-svc/home/eval/getTacticsListByCityId",queryChannelRadarMap:"/eval-svc/eval/queryChannelRadarMap",queryMonitor:"/plan-svc/api/monitor/queryMonitor",getCaliberInfo:"/plan-svc/api/kpi/getCaliberInfo",updateCaliberInfo:"/plan-svc/api/kpi/updateCaliberInfo",queryChannelEval:"/eval-svc/evaluate/channel/jx/list",exportChannelEval:"/eval-svc/evaluate/channel/jx/exportChannelEval",campEval:"/eval-svc/eval/campEval",exportActivityEval:"/eval-svc/eval/export",exportEffectEval:"/eval-svc/effect/eval/exportEffectEval",getDetailByDrillDownType:"/eval-svc/effect/eval/getDetailByDrillDownType",queryEffectEvalAllCount:"/eval-svc/effect/eval/queryEffectEvalAllCount",gridExport:"/eval-svc/smart/grid/eval/export",gridEval:"/eval-svc/smart/grid/eval/gridEval",exportSmsSendHistory:"/plan-svc/mcd/sms/send/exportSmsSendHistory",querySmsSendHistory:"/plan-svc/mcd/sms/send/querySmsSendHistory",querySmsSendMonitory:"/plan-svc/mcd/sms/send/querySmsSendMonitory",smsSendHistoryTask:"/plan-svc/mcd/sms/send/smsSendHistoryTask",smsSendMonitorTask:"/plan-svc/mcd/sms/send/smsSendMonitorTask",smsSendTaskPause:"/plan-svc/mcd/sms/send/smsSendTaskPause",queryTask:"/plan-svc/mcd-camp-import-task/queryTask",batchImportCamp:"/plan-svc/mcd-camp-import-task/batchImportCamp",successRate:"/eval-svc/eval/home/successRate",sucess:"/eval-svc/eval/home/sucess",total:"/eval-svc/eval/home/total",dw88Camp:"/eval-svc/mcd/onlinel/report/dw88Camp",dwHeigh88City:"/eval-svc/mcd/onlinel/report/dwHeigh88City",getDateTime:"/eval-svc/mcd/onlinel/report/getDateTime",onlineReportDataExport:"/eval-svc/mcd/onlinel/report/onlineReportDataExport",stCamp85CityDm:"/eval-svc/mcd/onlinel/report/stCamp85CityDm",stCamp85HdDm:"/eval-svc/mcd/onlinel/report/stCamp85HdDm",stCamp86CityDm:"/eval-svc/mcd/onlinel/report/stCamp86CityDm",stCamp86HdDm:"/eval-svc/mcd/onlinel/report/stCamp86HdDm",qryTermEval:"/mkt-term-svc/api/qryTermEval"}}},d6d6:function(e,a,t){"use strict";var r=TypeError;e.exports=function(e,a){if(e<a)throw new r("Not enough arguments");return e}},dba8:function(e,a,t){"use strict";t("b983")},edd0:function(e,a,t){"use strict";var r=t("13d2"),l=t("9bf2");e.exports=function(e,a,t){return t.get&&r(t.get,a,{getter:!0}),t.set&&r(t.set,a,{setter:!0}),l.f(e,a,t)}}}]);