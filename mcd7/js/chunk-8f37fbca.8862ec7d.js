(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f37fbca"],{"0796":function(e,a,t){"use strict";t("29a7")},1573:function(e,a,t){},"258e":function(e,a,t){"use strict";t("1573")},"271a":function(e,a,t){"use strict";var i=t("cb2d"),r=t("e330"),l=t("577e"),n=t("d6d6"),s=URLSearchParams,o=s.prototype,c=r(o.getAll),p=r(o.has),u=new s("a=1");!u.has("a",2)&&u.has("a",void 0)||i(o,"has",(function(e){var a=arguments.length,t=a<2?void 0:arguments[1];if(a&&void 0===t)return p(this,e);var i=c(this,e);n(a,1);var r=l(t),s=0;while(s<i.length)if(i[s++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},"29a7":function(e,a,t){},"31b1":function(e,a,t){"use strict";const i="/plan-svc/api/action",r="/plan-svc/action",l="/approve-svc/",n="/element-svc/";a["a"]={channel:{queryIopTemplate:i+"/tactics/tacticsCreate/queryIopTemplate",queryTopics:i+"/topic/queryTopics",getTemplateData:l+"jx/cmpApprovalProcessConf/getApproveConfig",getApproveConfig:l+"cmpApprovalProcessConf/getApproveConfig",getNextApprovers:l+"jx/cmpApproveProcessInstance/getNodeApprover",saveChannel:i+"/tactics/tacticsCreate/save",deleteCustom:i+"/custgroup/custGroupManager/deleteCustom",getMoreMyCustom:i+"/custgroup/custGroupManager/getMoreMyCustom",viewCustGroupDetail:i+"/custgroup/custGroupManager/viewCustGroupDetail",queryMmsTemplates:r+"/mmsTemplates/queryMmsTemplates",deleteMmsTemplateLists:r+"/mmsTemplates/createTactics/deleteMmsTemplateLists",updateMmsTemplate:r+"/mmsTemplates/updateMmsTemplate",smsContentBatchDel:i+"/smsTemplates/smsContentBatchDel",smsContentDel:i+"/smsTemplates/smsContentDel",smsContentEdit:i+"/smsTemplates/smsContentEdit",smsContentSaveOrUpdate:i+"/smsTemplates/smsContentSaveOrUpdate",smsTemplateOffline:i+"/smsTemplates/smsTemplateOffline",smsTemplates:i+"/smsTemplates/smsTemplates",smsTemplateSaveOrUpdate:i+"/smsTemplates/smsTemplateSaveOrUpdate",delPlanExclusivity:n+"mcd-plan-exclusivity/delPlanExclusivity",exportPlanExcluTemplate:n+"mcd-plan-exclusivity/exportPlanExcluTemplate",getPlanExclusivityInfo:n+"mcd-plan-exclusivity/getPlanExclusivityInfo",getPlanExclusivityList:n+"mcd-plan-exclusivity/getPlanExclusivityList",queryPlanDefList:n+"mcd-plan-exclusivity/queryPlanDefList",queryPlanExclusivity:n+"mcd-plan-exclusivity/queryPlanExclusivity",saveOrUpdatePlanExclusivity:n+"mcd-plan-exclusivity/saveOrUpdatePlanExclusivity",savePlanExclusivity:n+"mcd-plan-exclusivity/savePlanExclusivity",updatePlanExclusivity:n+"mcd-plan-exclusivity/updatePlanExclusivity",uploadPlanExcluFile:n+"mcd-plan-exclusivity/uploadPlanExcluFile",approveRecord:n+"api/mcdDimMaterialApprove/jx/approveRecord",getMaterialApprover:n+"api/mcdDimMaterialApprove/jx/getMaterialApprover",commitProcess:"/approve-svc/cmpApproveProcessInstance/commitProcess",subMaterialApprove:n+"api/mcdDimMaterialApprove/jx/subMaterialApprove",queryCommunicationUsers:"/plan-svc/api/channelMaterial/jx/queryCommunicationUsers",queryCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/queryCommunicationTask",addCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTask",addCommunicationTaskBatch:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTaskBatch",communicationAppTask:"/approve-svc/jx/cmpApproveProcessInstance/communicationAppTask",queryChannelExecInfo:"/plan-svc/mcd/camp/channelExec/queryChannelExecInfo",queryChannelExecList:"/plan-svc/mcd/camp/channelExec/queryChannelExecList",deleteChannelPrompt:"/plan-svc/mcd/chan/prompt/deleteChannelPrompt",queryChannelPrompt:"/plan-svc/mcd/chan/prompt/queryChannelPrompt",saveOrUpdateChannelPrompt:"/plan-svc/mcd/chan/prompt/saveOrUpdateChannelPrompt",uploaChanPromptFile:"/plan-svc/mcd/chan/prompt/uploaChanPromptFile",chanAndPlanMarketingHistory:"/plan-svc/mcd/marketing/history/chanAndPlanMarketingHistory",custContactNumMarketingHistory:"/plan-svc/mcd/marketing/history/custContactNumMarketingHistory",custSuccessRateMarketingHistory:"/plan-svc/mcd/marketing/history/custSuccessRateMarketingHistory",planMarketingHistory:"/plan-svc/mcd/marketing/history/planMarketingHistory",caculateContactUserNum:"/pec-timing/mcd/user/contact/caculateContactUserNum",caculateOrderUserNum:"/pec-timing/mcd/user/contact/caculateOrderUserNum",queryCampScene:"/plan-svc/api/action/tactics/tacticsCreate/jx/queryCampScene"}}},4323:function(e,a,t){"use strict";var i=function(){var e=this,a=e._self._c;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"50%","append-to-body":""},on:{"update:visible":function(a){e.dialogVisible=a},close:function(a){return e.cancleDialog()}}},[a("div",{staticClass:"content"},[a("div",[a("label",[e._v(" "+e._s("渠道详情"===e.title?"渠道名称：":"触点名称："))]),a("span",[e._v(e._s(e.headNameList.channelName))])]),a("div",[a("label",[e._v("状态：")]),"1"===e.headNameList.onlineStatus?a("span",[e._v("上线")]):a("span",[e._v("未上线")])]),a("div",[a("label",[e._v("预演：")]),a("span",[e._v(e._s(1==e.headNameList.previewStatus?"支持预演":2==e.headNameList.previewStatus?"不支持预演":"强制预演"))])]),a("div",[a("label",[e._v("智能话术：")]),a("span",[e._v(e._s(1==e.headNameList.smartScript?"开启":"关闭"))])]),a("div",[a("label",[e._v("一客一策引擎：")]),a("span",[e._v(e._s(1==e.headNameList.isYkyce?"开启":"关闭"))])]),a("div",[a("label",[e._v("操作人员：")]),a("span",[e._v(e._s(e.headNameList.iopOperator))])]),a("div",[a("label",[e._v("描述：")]),a("span",[e._v(e._s(e.headNameList.iopDescription))])]),a("div",[a("label",[e._v("提示语：")]),a("span",[e._v(e._s(e.headNameList.promptWord))])]),a("div",[a("label",[e._v("附件：")]),a("el-link",{on:{click:e.download}},[e._v(e._s(e.headNameList.fileName))])],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleDialog}},[e._v("关闭")])],1)])],1)},r=[],l=(t("88a7"),t("271a"),t("5494"),t("0fea")),n=t("d39c"),s={props:{headNameList:Object,isHeadNameDialog:Boolean},data(){return{title:"",dialogVisible:!1}},watch:{isHeadNameDialog(){this.dialogVisible=this.isHeadNameDialog}},methods:{cancleDialog(){this.dialogVisible=!1},ShowPopup(e){"channel"===e?this.title="渠道详情":"cont"===e&&(this.title="触点详情"),this.dialogVisible=!0},async download(){if(this.headNameList.fileUploadUrl)try{const{data:e}=await Object(l["b"])(n["a"].seapi.downloadChanPromptFile,{fileUrlAndName:this.headNameList.fileUploadUrl}),a=new Blob([e],{type:e.type}),t=this.headNameList.fileName,i=document.createElement("a");i.download=t,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}catch(e){}}}},o=s,c=(t("258e"),t("2877")),p=Object(c["a"])(o,i,r,!1,null,"58259d23",null);a["a"]=p.exports},"4cef":function(e,a,t){"use strict";t("c784")},5414:function(e,a,t){e.exports=t.p+"img/pdf.8249fad0.png"},5494:function(e,a,t){"use strict";var i=t("83ab"),r=t("e330"),l=t("edd0"),n=URLSearchParams.prototype,s=r(n.forEach);i&&!("size"in n)&&l(n,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"56b3":function(e,a,t){e.exports=t.p+"img/txt.3756ec5e.png"},"7e34":function(e,a,t){},"88a7":function(e,a,t){"use strict";var i=t("cb2d"),r=t("e330"),l=t("577e"),n=t("d6d6"),s=URLSearchParams,o=s.prototype,c=r(o.append),p=r(o["delete"]),u=r(o.forEach),m=r([].push),d=new s("a=1&a=2&b=3");d["delete"]("a",1),d["delete"]("b",void 0),d+""!=="a=2"&&i(o,"delete",(function(e){var a=arguments.length,t=a<2?void 0:arguments[1];if(a&&void 0===t)return p(this,e);var i=[];u(this,(function(e,a){m(i,{key:a,value:e})})),n(a,1);var r,s=l(e),o=l(t),d=0,b=0,h=!1,f=i.length;while(d<f)r=i[d++],h||r.key===s?(h=!0,p(this,r.key)):b++;while(b<f)r=i[b++],r.key===s&&r.value===o||c(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},"8e8f":function(e,a,t){"use strict";var i=function(){var e=this,a=e._self._c;return a("el-dialog",{attrs:{title:"渠道提示配置",visible:e.dialogVisible,width:"40%","append-to-body":""},on:{"update:visible":function(a){e.dialogVisible=a}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formRef",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"提示语：",prop:"promptWord"}},[a("el-input",{attrs:{width:"60%",type:"textarea",rows:4,maxlength:"200","show-word-limit":""},model:{value:e.form.promptWord,callback:function(a){e.$set(e.form,"promptWord",a)},expression:"form.promptWord"}})],1),a("el-form-item",{attrs:{label:"附件："}},[a("input",{ref:"uploadRef",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.getFile}}),e.form.fileName?a("span",[e._v(" "+e._s(e.form.fileName+" ")+" "),a("i",{staticClass:"el-icon-close",on:{click:e.removeFile}})]):a("el-button",{attrs:{type:"primary",loading:e.uploadLoading},on:{click:e.upload}},[e._v("上传"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:""},on:{click:function(a){e.dialogVisible=!1}}},[e._v("取消")]),e.exist?a("el-button",{attrs:{type:"danger"},on:{click:e.delForm}},[e._v("删除")]):e._e(),a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.save}},[e._v("确定")])],1)],1)},r=[],l=t("0fea"),n=t("31b1"),s={name:"ChannelConfigDialog",data(){return{loading:!1,dialogVisible:!1,uploadLoading:!1,saveLoading:!1,exist:!1,form:{channelId:"",promptWord:"",fileName:"",fileUploadUrl:""},rules:{promptWord:[{required:!0,message:"请输入提示语",trigger:"blur"}]}}},methods:{async ShowPopup(e){var a;this.form={channelId:e,promptWord:"",fileName:"",fileUploadUrl:""},this.exist=!1,this.dialogVisible=!0,null===(a=this.$refs["formRef"])||void 0===a||a.clearValidate();try{this.loading=!0;const{records:a}=await Object(l["i"])(n["a"].channel.queryChannelPrompt,{channelId:e});this.exist=!!a.length,this.exist&&(this.form=a[0])}catch(t){}finally{this.loading=!1}},async getFile({target:e}){let a=e.files[0],t=new FormData;t.append("file",a),this.uploadLoading=!0;try{const{fileName:e,fileUrl:a}=await Object(l["j"])(n["a"].channel.uploaChanPromptFile,t);this.form.fileName=e,this.form.fileUploadUrl=a}catch(i){}finally{this.uploadLoading=!1}},upload(){this.$refs["uploadRef"].value=null,this.$refs["uploadRef"].click()},removeFile(){this.form.fileName="",this.form.fileUploadUrl=""},async save(){try{this.saveLoading=!0;const e=await Object(l["i"])(n["a"].channel.saveOrUpdateChannelPrompt,this.form);!0===e?(this.$message.success("保存成功"),this.dialogVisible=!1):this.$message.error("保存失败")}catch(e){}finally{this.saveLoading=!1}},async delForm(){try{const e=await Object(l["i"])(n["a"].channel.deleteChannelPrompt,{channelId:this.form.channelId});!0===e?(this.$message.success("删除成功"),this.dialogVisible=!1):this.$message.error("删除失败")}catch(e){}}}},o=s,c=(t("0796"),t("2877")),p=Object(c["a"])(o,i,r,!1,null,"51bfee89",null);a["a"]=p.exports},ad1e:function(e,a,t){},b1d3:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAAD2CAMAAABSv73pAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACalBMVEUAAABrbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG5rbG4AAACmE6HhAAAAzHRSTlMABSNUmPAeLPIlBHct5jU/SFNfTEBreAmFAJQBowOEswZQwwlF1Q075xIy+RcqHSMkHCwW9TQR4j4M0UcIv1IFr10Dn2oBkHYAgoQAdZIBaKEDXLEFUcIJRtMNPOURM/gXKx0jJB0rFvc0EeQ9DNJGCMFRBbFcA6FoAZJ1AISDAHaRAWmgA12vBVLACEfRDD3jETT2FiwcJCMdKhf5MxLmPA3URQnDUAayWwOiZ2wBk3QZxAEAhYEDfgV3y9m41mkC1CBiRxGqLWKrCQmv49X6AAAAAWJLR0QAiAUdSAAAAAlwSFlzAAAA/AAAAPwARztR4QAAA1xJREFUeNrt1WVz20AUheETql27KTllZmZmZmZmZmZmZmZmZmZu90e1ycS9bmNPM65k752c96tmr56RdiWAMcYYYzmvhMSk5BTjVrlcc3u8rqEzyu0O2+d3l/2rPK64U113G5PXBbj7zzu9fI67PTFxG5PfYXeCy+dSKuAsPDFWbmMKOgpPCo4NOPwqM0r7Q17IydHJbrr/gpvCDo4O/i+LxAJuihZzbHRwpCvuLHBTvIRSuClZShW8tMjLlNUETysn8vIVNMFRUeSVKmuCo4rIq1bTBEd1kdeoqQmOWiEfl9qa4KgTIq+rCY56IfL6muBo0FDkjTTB0biJyJtqgqNZc5G30ARHy1Yib60JjjZtRd5OExztO4i8oyY4OnUWeRdNcHTtJvLuPRTBgZ4i79VbExx9RN63nyY4+ot8wEBNcAwS+eAhmuAYKvJhwzXBMULkI0dpgmO0yMeM1QTHOJGb8ZrgmBAin6gJjkkh8sma4JgyVeTTNMExfYbIZ2qCY9Zskc/RBMfceSKfrwmOBQtFvkgTHIuXiHypJjiWLRf5Ck1wrFwl8tVrFMGBtSJft14THBtEvnGTJjg2i3zLVk1wbBP59h2a4Ngp8l27NcGxR+R792mCY7/IDxzUBMchkZvDmuA4EiI/qgmOYyHy45rgOHFS5Kc0wXH6jMjPaoLj3HmRX9AEx8VLIr+sCY4rV0V+TRMc12+I/Gbc4LeiWHv7jsjvxhp+L3P6/QdRLH74SOSPYwx/Ehz/9Fk0y5+LPMZwvPh955evouh13OBvjEPFGv72nVI43muF44NWOD5qhePTZ6Vw4MvXbzrh/xPhhBNuaYQTTrilEU444ZZGOOGEWxrhhBNuaYQTTrilEU444ZZGOOGEWxrhhBNuaYQTTrilEU444ZZGOOGEWxrhhBNuaYQTTrilEU444ZZGOOGEWxrhhBNuaYQTTrilEU444ZZGOOGEWxrhhBNuaYQTTrilEU444ZZGOOGEWxrhhBNuaYQTTrilEU444ZZGOOE5FZ6SeeF7vIER+hEJnpx5IRBvYYQCkeBJxmp5IOJWTjQ6ygJP8MablK28WV+GJ96mbOUJs4388UZlI3+4/e9LjTfrn6X6wp5cn+3P3B/enb7PbT6hXg8YY4wxltP6CRgictp+5LVmAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE2LTAxLTA4VDAwOjU5OjI3KzA4OjAwYw2MzAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNi0wMS0wOFQwMDo1OToyNyswODowMBJQNHAAAABjdEVYdHN2Zzpjb21tZW50ACBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE3LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIG+eZkEAAAAYdEVYdHN2Zzp0aXRsZQBEb2N1bWVudC1lbXB0ed4yOrcAAAAASUVORK5CYII="},b634:function(e,a,t){},b867:function(e,a,t){"use strict";t("b634")},bb30:function(e,a,t){"use strict";t("7e34")},c784:function(e,a,t){},d0c2:function(e,a,t){"use strict";t("ad1e")},d6d6:function(e,a,t){"use strict";var i=TypeError;e.exports=function(e,a){if(e<a)throw new i("Not enough arguments");return e}},ea05:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e._self._c;return a("div",{staticClass:"contact-store-content"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.tabActive,callback:function(a){e.tabActive=a},expression:"tabActive"}},[a("el-tab-pane",{attrs:{label:"触点管理",name:"channel",lazy:!0}},[a("ChannelManagement")],1),a("el-tab-pane",{attrs:{label:"运营位管理",name:"adiv",lazy:!0}},[a("OperationManagement")],1)],1)],1)},r=[],l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"MaterHome"},[a("div",{staticClass:"search_box"},[a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入触点名称"},model:{value:e.queryFrom.keywords,callback:function(a){e.$set(e.queryFrom,"keywords","string"===typeof a?a.trim():a)},expression:"queryFrom.keywords"}},[a("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:function(a){return e.QueryKeyWords()}},slot:"suffix"})]),a("div",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"success"},on:{click:e.MaterAdd}},[e._v("新建")])],1)],1),a("div",{staticClass:"selech-panel"},[a("div",{staticClass:"buttons-container"},[a("query-form-cell",{attrs:{defaultSizeForm:e.sizeForm,list:e.QueryList},on:{queryForm:e.QuerySelect,emptyFrom:e.emptyFrom}})],1)]),a("div",{staticClass:"execute-statistics"},[a("div",{staticClass:"label"},[e._v(" 执行情况统计 "),a("span",[e._v(e._s(e.queryFrom.startDate?e.queryFrom.startDate+"-"+e.queryFrom.endDate:""))])]),a("div",{staticClass:"body"},e._l(e.executeStatisticsData,(function(t){return a("div",{key:t.key,staticClass:"item"},[a("span",{staticClass:"value"},[e._v(e._s(t.value))]),a("span",{staticClass:"name"},[e._v(e._s(t.name))])])})),0)]),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"cell-style":e.cellStyle}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"channelName",label:"触点名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.channelClick(t.row)}}},[e._v(e._s(t.row.channelName))])]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.onlineStatus?a("span",[e._v("上线")]):a("span",[e._v("未上线")])]}}])}),a("el-table-column",{attrs:{prop:"isYkyce",label:"一客一策引擎"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isYkyce?a("span",[e._v("开启")]):a("span",[e._v("关闭")])]}}])}),a("el-table-column",{attrs:{prop:"iopOperator",label:"操作人员"}}),a("el-table-column",{attrs:{prop:"iopDescription",label:"描述"}}),a("el-table-column",{attrs:{label:"渠道归属"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(2==t.row.channelAffiliation?"外部合作方":"内部系统"))])]}}])}),a("el-table-column",{attrs:{label:"触点类型"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[a("span",[e._v(e._s(1==t.channelTypeZq?"政企":2==t.channelTypeZq?"大市场":"其他"))])]}}])}),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticClass:"text-sm mr-16",attrs:{type:"primary",underline:!1},on:{click:function(a){return e.modify(t.row)}}},[e._v("修改 ")]),a("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-warning",iconColor:"#FAAD14",title:"确定删除？","cancel-button-type":"Primary"},on:{confirm:function(a){return e.DeleteChanne(t.row)}}},[a("el-link",{staticClass:"cursor-pointer text-sm",attrs:{slot:"reference",type:"danger",underline:!1},slot:"reference"},[e._v(" 删除")])],1)]}}])})],1)],1),a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":e.pageData.pageSizeList,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("div",[a("channe-dialog",{ref:"Dialog",on:{Refresh:e.QueryKeyWords}})],1),a("div",[a("delete-dialog",{ref:"Delete",attrs:{name:e.name,id:e.channelId,title:"触点"},on:{Dlete:e.ChannelDelete}})],1),a("ChannelDetail",{ref:"hDialog",attrs:{headNameList:e.channelNameList}}),a("ChannelConfigDialog",{ref:"ConfigRef",on:{close:function(e){}}})],1)},n=[],s=t("38c8"),o=function(){var e=this,a=e._self._c;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"680px",top:"6vh","append-to-body":"","before-close":e.ResetFrom},on:{"update:visible":function(a){e.dialogVisible=a},close:e.ResetFrom}},[a("div",{staticClass:"Contact-mtp"},[a("el-form",{ref:"OperationFrom",attrs:{model:e.OperatinData,"label-width":"120px",rules:e.OperctionRules}},[a("el-form-item",{attrs:{label:"触点ID：",prop:"channelId"}},[a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{disabled:"修改触点"===e.title},model:{value:e.OperatinData.channelId,callback:function(a){e.$set(e.OperatinData,"channelId",a)},expression:"OperatinData.channelId"}})],1),a("el-form-item",{attrs:{label:"触点名称：",prop:"channelName"}},[a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{disabled:!1},model:{value:e.OperatinData.channelName,callback:function(a){e.$set(e.OperatinData,"channelName",a)},expression:"OperatinData.channelName"}})],1),a("el-form-item",{attrs:{label:"智能话术："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":1==e.OperatinData.smartScript?"开启":"关闭"},model:{value:e.OperatinData.smartScript,callback:function(a){e.$set(e.OperatinData,"smartScript",a)},expression:"OperatinData.smartScript"}})],1),a("el-form-item",{attrs:{label:"一客一策引擎："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":1==e.OperatinData.isYkyce?"开启":"关闭"},model:{value:e.OperatinData.isYkyce,callback:function(a){e.$set(e.OperatinData,"isYkyce",a)},expression:"OperatinData.isYkyce"}})],1),a("el-form-item",{attrs:{label:"状态：",prop:"onlineStatus"}},[a("el-select",{staticStyle:{width:"330px"},attrs:{placeholder:"请选择"},model:{value:e.OperatinData.onlineStatus,callback:function(a){e.$set(e.OperatinData,"onlineStatus",a)},expression:"OperatinData.onlineStatus"}},[a("el-option",{attrs:{value:"1",label:"上线"}},[e._v(" 上线 ")]),a("el-option",{attrs:{value:"0",label:"未上线"}},[e._v(" 未上线 ")])],1)],1),a("el-form-item",{attrs:{label:"预演：",prop:"previewStatus"}},[a("el-select",{staticStyle:{width:"330px"},model:{value:e.OperatinData.previewStatus,callback:function(a){e.$set(e.OperatinData,"previewStatus",a)},expression:"OperatinData.previewStatus"}},[a("el-option",{attrs:{value:1,label:"支持预演"}}),a("el-option",{attrs:{value:2,label:"不支持预演"}}),a("el-option",{attrs:{value:3,label:"强制预演"}})],1)],1),a("el-form-item",{attrs:{label:"操作人员：",prop:"iopOperator"}},[a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],model:{value:e.OperatinData.iopOperator,callback:function(a){e.$set(e.OperatinData,"iopOperator",a)},expression:"OperatinData.iopOperator"}})],1),a("el-form-item",{staticClass:"Description",attrs:{label:"触点描述：",prop:"iopDescription"}},[a("el-input",{attrs:{type:"textarea",maxlength:"500",placeholder:"您可以输入500个字"},model:{value:e.OperatinData.iopDescription,callback:function(a){e.$set(e.OperatinData,"iopDescription",a)},expression:"OperatinData.iopDescription"}})],1),a("el-form-item",{attrs:{label:"渠道归属：",prop:"channelAffiliation"}},[a("el-select",{staticStyle:{width:"330px"},attrs:{placeholder:"请选择"},model:{value:e.OperatinData.channelAffiliation,callback:function(a){e.$set(e.OperatinData,"channelAffiliation",a)},expression:"OperatinData.channelAffiliation"}},e._l(e.channelAffiliationList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"触点类型：",prop:"channelTypeZq"}},[a("el-select",{staticStyle:{width:"330px"},attrs:{placeholder:"请选择"},model:{value:e.OperatinData.channelTypeZq,callback:function(a){e.$set(e.OperatinData,"channelTypeZq",a)},expression:"OperatinData.channelTypeZq"}},e._l(e.channelTypeZqList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"Description",attrs:{label:"提示语：",prop:"promptWord"}},[a("el-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"您可以输入200个字",rows:4},model:{value:e.OperatinData.promptWord,callback:function(a){e.$set(e.OperatinData,"promptWord",a)},expression:"OperatinData.promptWord"}})],1),a("el-form-item",{staticClass:"file",attrs:{label:"附件："}},[a("input",{ref:"uploadRef",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.getFile}}),e.OperatinData.fileName?a("span",{staticClass:"file-pic"},[a("img",{attrs:{src:e.fileType,alt:"",width:"40",height:"40"},on:{click:e.downloadFile}}),a("span",{attrs:{title:e.OperatinData.fileName.length>11&&e.OperatinData.fileName},on:{click:e.downloadFile}},[e._v(" "+e._s(e.OperatinData.fileName.length>11?e.OperatinData.fileName.slice(0,8)+"...":e.OperatinData.fileName)+" ")]),a("i",{staticClass:"el-icon-close",on:{click:e.removeFile}})]):a("el-button",{attrs:{type:"primary",loading:e.uploadLoading},on:{click:e.upload}},[e._v("上传"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.ResetFrom}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSumbit}},[e._v("保 存")])],1)])],1)},c=[],p=(t("88a7"),t("271a"),t("5494"),t("f9ae")),u=t("0fea"),m=t("d39c"),d=t("fcff"),b=t.n(d),h=t("b1d3"),f=t.n(h),v=t("5414"),g=t.n(v),y=t("56b3"),G=t.n(y),A=t("f26a"),D=t.n(A),C={name:"ChanneDialog",data(){return{dialogVisible:!1,uploadLoading:!1,OperatinData:{},title:"",isModify:!1,OperctionRules:{channelId:[{required:!0,message:"请输入触点ID",trigger:"blur"},{max:4,message:"触点ID最多4位",trigger:"blur"}],channelName:[{required:!0,message:"请输入触点名称",trigger:"blur"}],onlineStatus:[{required:!0,message:"请选择状态",trigger:"blur"}],previewStatus:[{required:!0,message:"请选择状态",trigger:"blur"}],iopOperator:[{required:!0,message:"请输入操作人员",trigger:"blur"}],iopDescription:[{max:500,message:"最多输入500个字",trigger:"blur"}],channelAffiliation:[{required:!0,message:"请选择渠道归属",trigger:"blur"}],channelTypeZq:[{required:!0,message:"请选择触点类型",trigger:"blur"}]},fileType:f.a,channelAffiliationList:[{label:"内部系统",value:1},{label:"外部合作方",value:2}],channelTypeZqList:[{label:"政企",value:1},{label:"大市场",value:2},{label:"其他",value:0}]}},methods:{ShowPopup(e,a){"modify"===e?(this.title="修改触点","object"===typeof a&&(this.OperatinData=Object.assign({},a)),this.isModify=!0,a.fileName&&(this.fileType=this.getFileType(a.fileName))):"MaterAdd"===e&&(this.ResetFrom(),this.title="新增触点",this.isModify=!1),this.dialogVisible=!0},onSumbit:Object(p["a"])((function(){this.$refs["OperationFrom"].validate(async e=>{e&&(console.log,this.isModify?this.saveOrUpdateChannel(this.OperatinData):(this.OperatinData.channelCode="",await Object(u["i"])(m["a"].seapi.validateChannelName,this.OperatinData).then(e=>{e?this.saveOrUpdateChannel(this.OperatinData):this.$alert("触点ID或触点名称重复","校验失败",{confirmButtonText:"确定",customClass:"errorPrompt"})})))})})),async saveOrUpdateChannel(e){await Object(u["i"])(m["a"].seapi.saveOrUpdateChannel,{...e,channelType:this.OperatinData.onlineStatus}).then(e=>{e&&(this.$message.success("操作成功"),this.$emit("Refresh"),this.dialogVisible=!1)})},ResetFrom(){void 0!==this.$refs.OperationFrom&&(this.$refs.OperationFrom.clearValidate(),this.$refs.OperationFrom.resetFields()),this.OperatinData={channelId:null,channelName:null,onlineStatus:void 0,smartScript:0,isYkyce:0,previewStatus:2,operator:void 0,description:void 0,promptWord:void 0,fileName:void 0,fileUrl:void 0,channelAffiliation:void 0,channelTypeZq:void 0},this.dialogVisible=!1},async getFile({target:e}){let a=e.files[0],t=new FormData;t.append("file",a),this.uploadLoading=!0;try{const{fileName:e,fileUrl:a}=await Object(u["j"])(m["a"].seapi.uploaChanPromptFile,t);this.OperatinData.fileName=e,this.OperatinData.fileUploadUrl=a,this.fileType=this.getFileType(e)}catch(i){}finally{this.uploadLoading=!1}},upload(){this.$refs["uploadRef"].value=null,this.$refs["uploadRef"].click()},async downloadFile(){try{const{data:e}=await Object(u["b"])(m["a"].seapi.downloadChanPromptFile,{fileUrlAndName:this.OperatinData.fileUploadUrl}),a=new Blob([e],{type:e.type}),t=this.OperatinData.fileName,i=document.createElement("a");i.download=t,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}catch(e){}},removeFile(){this.OperatinData.fileName="",this.OperatinData.fileUploadUrl="",this.$forceUpdate()},getFileType(e){const a=e.substring(e.lastIndexOf(".")+1);switch(a){case"xls":case"xlsx":return b.a;case"pdf":return g.a;case"txt":return G.a;case"doc":case"docx":return D.a;default:return f.a}}}},O=C,x=(t("d0c2"),t("b867"),t("2877")),w=Object(x["a"])(O,o,c,!1,null,"3fce4847",null),k=w.exports,T=t("c1df"),N=t.n(T),S=t("8e8f"),F=t("4323"),M=t("4e3f"),P={components:{ChanneDialog:k,DeleteDialog:s["a"],ChannelConfigDialog:S["a"],ChannelDetail:F["a"],QueryFormCell:M["a"]},data(){return{loading:!1,tableData:[],queryFrom:{keywords:"",channelAffiliation:"",channelTypeZq:"",startDate:"",endDate:""},pageData:{currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0},name:"",channelId:"",channelNameList:{},ischannelNameDialog:!1,QueryList:[{label:"创建时间",values:[{label:"不限",value:""},{label:"近一周",value:"-7"},{label:"近一个月",value:"-30"}],isDate:!0,dateType:"daterange",leftCol:5,rightCol:19},{label:"渠道归属",values:[{label:"不限",value:""},{label:"内部系统",value:1},{label:"外部合作方",value:2}],isDate:!1},{label:"触点类型",values:[{label:"不限",value:""},{label:"政企",value:1},{label:"大市场",value:2},{label:"其他",value:0}],isDate:!1}],sizeForm:{radioModel:["","",""],dateModel:[[]]},executeStatisticsData:[{name:"线上累计活动数",key:"onlineSchemaNum",value:0},{name:"线上活动总目标数",key:"onlineUserNum",value:0},{name:"线下累计任务数",key:"offlineSchemaNum",value:0},{name:"线下任务集团客户数",key:"offlineGroupNum",value:0},{name:"线下任务集团成员数",key:"offlineUserNum",value:0}]}},mounted(){this.getMaterData()},methods:{async getMaterData(){this.loading=!0,await Object(u["i"])(m["a"].seapi.displayChannelList,{keywords:this.queryFrom.keywords,channelAffiliation:this.queryFrom.channelAffiliation,channelTypeZq:this.queryFrom.channelTypeZq,current:this.pageData.currentPage,size:this.pageData.pageSize}).then(e=>{this.loading=!1,this.tableData=[...e.records],this.pageData.total=e.total,this.queryChannelEValData()}).catch(()=>{this.loading=!1})},queryChannelEValData(){const{channelAffiliation:e,channelTypeZq:a,startDate:t,endDate:i}=this.queryFrom;let r=""!==t?N()(t).format("YYYY-MM-DD hh:mm:ss"):"",l=""!==i?N()(i).format("YYYY-MM-DD hh:mm:ss"):"";Object(u["i"])(m["a"].seapi.queryChannelEValData,{channelAffiliation:e,channelTypeZq:a,endTime:l,startTime:r}).then(e=>{"{}"!==JSON.stringify(e)?this.executeStatisticsData.forEach(a=>{a.value=e[a.key]}):this.executeStatisticsData.forEach(e=>{e.value=0})})},QueryKeyWords(){this.pageData.currentPage=1,this.getMaterData()},modify(e){this.$refs["Dialog"].ShowPopup("modify",e)},config(e){this.$refs["ConfigRef"].ShowPopup(e.channelId)},MaterAdd(){this.$refs["Dialog"].ShowPopup("MaterAdd")},DeleteChanne(e){this.channelId=e.channelId,this.name=e.channelName,this.$refs["Delete"].showDelete()},async ChannelDelete(e){await Object(u["i"])(m["a"].seapi.deleteChannelById,{channelId:e}).then(()=>{this.$message.success("删除成功"),this.queryFrom.current=1,this.queryFrom.size=10,this.getMaterData()})},handleSizeChange(e){this.pageData.pageSize=e,this.getMaterData()},handleCurrentChange(e){this.pageData.currentPage=e,this.getMaterData()},cellStyle(e){return"触点名称"===e.column.label?"color:#0080CC;cursor: pointer;":0},channelClick(e){this.channelNameList=e,this.$refs["hDialog"].ShowPopup("cont")},QuerySelect(e){this.pageData.currentPage=1;let a=e.form.dateModel[0];Array.isArray(a&&a.length>0)&&(this.queryFrom.startDate=a[0],this.queryFrom.endDate=a[1]),this.queryFrom.channelAffiliation=e.form.radioModel[1],this.queryFrom.channelTypeZq=e.form.radioModel[2],this.getMaterData()},emptyFrom(){}}},E=P,U=(t("bb30"),Object(x["a"])(E,l,n,!1,null,"44a10513",null)),L=U.exports,_=t("dc38"),q={components:{ChannelManagement:L,OperationManagement:_["default"]},data(){return{tabActive:"channel"}}},j=q,R=(t("4cef"),Object(x["a"])(j,i,r,!1,null,"fb275a0e",null));a["default"]=R.exports},edd0:function(e,a,t){"use strict";var i=t("13d2"),r=t("9bf2");e.exports=function(e,a,t){return t.get&&i(t.get,a,{getter:!0}),t.set&&i(t.set,a,{setter:!0}),r.f(e,a,t)}},f26a:function(e,a,t){e.exports=t.p+"img/word.6dc42442.png"},fcff:function(e,a,t){e.exports=t.p+"img/excel.2485de68.png"}}]);