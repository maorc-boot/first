(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-979dd2b6"],{"0009":function(e,t,a){},"0662":function(e,t,a){"use strict";a("384c")},"0835":function(e,t,a){"use strict";a("2ac7")},"0b96":function(e,t,a){},"0c0e":function(e,t,a){},"0d12":function(e,t,a){"use strict";a("edb2")},"108d":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"query-form-cell-wrap"},[t("el-form",{ref:"form",attrs:{model:e.sizeForm,"label-width":e.labelWidth,size:"mini"}},e._l(e.list,(function(a,i){return t("el-form-item",{key:i+"list",attrs:{label:a.label+"："}},[Array.isArray(a.values)?t("div",{staticClass:"fe-d-flex"},[t("div",{staticClass:"radio-box"},[t("el-radio-group",{attrs:{size:"mini",disabled:a.disabled},on:{change:function(t){return e.radioChange(e.sizeForm.radioModel[i],i)}},model:{value:e.sizeForm.radioModel[i],callback:function(t){e.$set(e.sizeForm.radioModel,i,t)},expression:"sizeForm.radioModel[index]"}},e._l(a.values,(function(a,i){return t("el-radio-button",{key:i+"listValues",attrs:{label:a.value}},[e._v(e._s(a.label)+" ")])})),1),a.slot?e._t("default"):e._e()],2),t("div",{staticClass:"date-box"},["date"===a.dateType?t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"month"===a.dateType?t("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM",clearable:!0},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"daterange"===a.dateType?t("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"datetimerange"===a.dateType?t("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[i],callback:function(t){e.$set(e.sizeForm.dateModel,i,t)},expression:"sizeForm.dateModel[index]"}}):e._e()],1)]):t("div",{staticClass:"input-box"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入内容"},on:{change:e.inputChange},model:{value:e.sizeForm.radioModel[i],callback:function(t){e.$set(e.sizeForm.radioModel,i,t)},expression:"sizeForm.radioModel[index]"}})],1)])})),1)],1)},s=[],r={name:"QueryFormCell",props:{labelWidth:{type:String,default:()=>"85px"},defaultSizeForm:{type:Object,default:()=>({})},list:{type:Array,default:()=>[{label:"数据时间",values:[{label:"不限",value:"1"}],isDate:!0,dateType:"date"},{label:"接口类型",values:[{label:"不限",value:"不限"},{label:"文件接口",value:"文件接口"}],isDate:!1}]}},data(){return{sizeForm:{dateModel:["2021-05-08","",""],radioModel:["自定义","不限","不限"]}}},watch:{defaultSizeForm:{handler:function(e){this.sizeForm=e},deep:!0,immediate:!0}},methods:{radioChange(e,t){this.sizeForm.dateModel&&this.$set(this.sizeForm.dateModel,t,"date"===this.list[t].dateType?"":["",""]),this.$emit("queryForm",{index:t,value:e,form:this.sizeForm})},dateChange(e){e?(this.$set(this.sizeForm.dateModel,0,e),this.$emit("queryForm",{value:e,form:this.sizeForm})):this.$emit("emptyFrom",this.sizeForm)},inputChange(e){e&&this.$emit("queryForm",{value:e,form:this.sizeForm})}}},l=r,o=(a("1808"),a("2877")),n=Object(o["a"])(l,i,s,!1,null,null,null);t["a"]=n.exports},1134:function(e,t,a){"use strict";a("8b7e")},"113b9":function(e,t,a){"use strict";a("ee2c")},"149e":function(e,t,a){},"15ea":function(e,t,a){},"166c":function(e,t,a){"use strict";a("3a71")},1808:function(e,t,a){"use strict";a("4bb9")},"1dc8":function(e,t,a){"use strict";a("fb26")},"1e83":function(e,t,a){"use strict";a("0c0e")},"28b3":function(e,t,a){},"2ac7":function(e,t,a){},"2bd1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"GEproductMarketing"},[t("div",{staticClass:"circuit-cont"},[t("div",{staticClass:"circuit-nav"},[t("div",{staticClass:"btnBox"},[t("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.nodeSave(0)}}},[e._v("保存")])],1)]),t("div",{staticClass:"circuit-case"},[t("div",{staticClass:"circuitCase"},[t("active-node",{ref:"activeNode",attrs:{ActiveNode:e.ActiveNodeList},on:{"Node-click":e.NodeClick}})],1),t("div",[e.Componentstate.productDialog?t("product-dialog",{ref:"productDialog",on:{DialogClose:e.DialogClose}}):e._e(),e.Componentstate.customerDialog?t("customer-dialog",{ref:"customerDialog",on:{DialogClose:e.DialogClose}}):e._e(),e.Componentstate.channelDialog?t("channel-dialog",{ref:"channelDialog",on:{DialogClose:e.DialogClose}}):e._e(),e.chBaseDdialog?t("channel-base-dialog",{key:e.componentKey,ref:"chBaseDdialog",attrs:{baseCampInfo:e.baseCampInfo,childrenSchemes:e.childrenSchemes},on:{DialogClose:e.DialogClosebase}}):e._e()],1)])])])},s=[],r=a("eced"),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"channelBaseDialog"},[t("mp-dialog",{attrs:{title:"策略基本信息配置",visible:e.visible,width:"700px",IsAscertain:!1},on:{"update:visible":function(t){e.visible=t},DialogClose:e.DialogClose}},[e.visible?t("div",{attrs:{slot:"Dialogcontent"},slot:"Dialogcontent"},[t("el-form",{ref:"baseFrom",staticClass:"base-form",attrs:{"label-width":"110px",model:e.baseFrom,rules:e.baseFromRules}},[t("el-form-item",{attrs:{label:"策略名称:",prop:"campsegName"}},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],model:{value:e.baseFrom.campsegName,callback:function(t){e.$set(e.baseFrom,"campsegName",t)},expression:"baseFrom.campsegName"}})],1),t("el-form-item",{attrs:{label:"投放周期:",prop:"dateList"}},[t("el-date-picker",{staticStyle:{width:"330px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.baseFrom.dateList,callback:function(t){e.$set(e.baseFrom,"dateList",t)},expression:"baseFrom.dateList"}})],1),t("el-form-item",{attrs:{label:"策略描述:",prop:"campsegDesc"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.baseFrom.campsegDesc,callback:function(t){e.$set(e.baseFrom,"campsegDesc",t)},expression:"baseFrom.campsegDesc"}})],1),t("el-form-item",{attrs:{label:"专题:"}},[t("el-select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择专题"},model:{value:e.baseFrom.topicId,callback:function(t){e.$set(e.baseFrom,"topicId",t)},expression:"baseFrom.topicId"}},e._l(e.topOption,(function(e){return t("el-option",{key:e.topicId,attrs:{label:e.topicName,value:e.topicId}})})),1)],1),t("el-form-item",{attrs:{label:"营销模板:"}},[t("el-select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择营销模板"},on:{change:e.changeTemplate},model:{value:e.baseFrom.activityTemplateId,callback:function(t){e.$set(e.baseFrom,"activityTemplateId",t)},expression:"baseFrom.activityTemplateId"}},e._l(e.iopTempOption,(function(e){return t("el-option",{key:e.activityTemplateid,attrs:{label:e.activityName,value:e.activityTemplateid}})})),1)],1),t("el-form-item",{attrs:{label:"营销类型:",prop:"activityType"}},[e.baseFrom.activityTemplateId?e._e():t("el-select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择营销类型"},model:{value:e.baseFrom.activityType,callback:function(t){e.$set(e.baseFrom,"activityType",t)},expression:"baseFrom.activityType"}},e._l(e.typeOption,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1),e.baseFrom.activityTemplateId?t("el-select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择营销类型",disabled:""},model:{value:e.baseFrom.activityType,callback:function(t){e.$set(e.baseFrom,"activityType",t)},expression:"baseFrom.activityType"}},e._l(e.typeOption,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1):e._e()],1),t("el-form-item",{attrs:{label:"营销活动目标:",prop:"activityObjective"}},[e.baseFrom.activityTemplateId?e._e():t("el-select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择营销活动目标"},model:{value:e.baseFrom.activityObjective,callback:function(t){e.$set(e.baseFrom,"activityObjective",t)},expression:"baseFrom.activityObjective"}},e._l(e.targetOption,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"策略流程数量:"}},[t("el-select",{staticStyle:{width:"230px"},attrs:{placeholder:"渠道流程"},on:{change:e.ChangeProcessNum},model:{value:e.baseFrom.processNum,callback:function(t){e.$set(e.baseFrom,"processNum",t)},expression:"baseFrom.processNum"}},[t("el-option",{attrs:{label:"全部",value:1}}),t("el-option",{attrs:{label:"多个",value:2}})],1)],1),1!==e.baseFrom.processNum?t("el-form-item",{attrs:{label:""}},[t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{"border-bottom":"solid 1px #d2d3da"},data:e.processNumList}},[t("el-table-column",{attrs:{label:"操作",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-checkbox",{model:{value:a.row.checked,callback:function(t){e.$set(a.row,"checked",t)},expression:"scope.row.checked"}})]}}],null,!1,4084092715)}),t("el-table-column",{attrs:{align:"center",prop:"name[0]",label:"产品","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,prop:"name[1]",label:"客户群"}}),t("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,prop:"name[2]",label:"渠道"}}),t("el-table-column",{attrs:{align:"center","show-overflow-tooltip":!0,prop:"name[3]",label:"运营位"}})],1)],1)]):e._e(),e._l(e.nextNodesList.nextNodesApprover,(function(a,i){return t("el-form-item",{key:i,attrs:{label:a.node.nodeName,rules:{required:!0,message:"审批人不能为空",trigger:"blur"},prop:"nextNodesList["+i+"].value"}},[t("el-select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择",multiple:null!==a.processVersionNum},on:{change:e.clone},model:{value:e.baseFrom.nextNodesList[i].value,callback:function(t){e.$set(e.baseFrom.nextNodesList[i],"value",t)},expression:"baseFrom.nextNodesList[index].value"}},e._l(a.approverUser,(function(e,a){return t("el-option",{key:a,attrs:{label:e.userName,value:e.userId}})})),1)],1)}))],2),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.sumbit}},[e._v(e._s(1===e.isSubmit?"提交审批":"保存草稿"))])],1)],1):e._e()])],1)},o=[],n=(a("14d9"),a("f9ae")),c=a("0fea"),m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"Dialog-center"},[t("transition",{attrs:{name:"slide-fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"Dialog",style:`width:${e.width};`},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("div",{staticClass:"TitleArea"},[e.TabsNav.data.length>0?t("div",[t("tabs-nav",{attrs:{TabsNav:e.TabsNav.data,active:e.TabsNav.default},on:{"tabs-click":e.TabsClick}})],1):e._e(),e.isReturn?t("div",{staticClass:"Return-Button"},[t("el-button",{attrs:{type:"text",icon:"el-icon-arrow-left",size:"medium"},on:{click:function(t){return e.DialogRetrun(t)}}},[e._v("返回")])],1):e._e(),""!=e.title?t("span",[e._v(" "+e._s(e.title)+" ")]):e._e()]),t("div",[e.isClose?t("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text",icon:"el-icon-close"},on:{click:e.DialogClock}}):e._e()],1)]),t("div",{staticClass:"cs"},[e._t("Dialogcontent")],2),e.IsAscertain?t("div",{staticClass:"UnifiedDete"},[t("el-button",{attrs:{type:"success"}},[e._v("确定")])],1):e._e()])],1)]),e.visible?t("div",{staticClass:"mask",attrs:{size:"medium"},on:{click:e.DialogClock}}):e._e()],1)},d=[],u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"TabsNav"},[t("ul",e._l(e.TabsNav,(function(a){return t("li",{key:a.id,class:a.id==e.activeIndex?"b":"",on:{click:function(t){return e.TabsClick(a)}}},[e._v(" "+e._s(a.label)+" ")])})),0)])},p=[],h={name:"TabsNavs",props:{TabsNav:{type:Array,default:()=>[]},active:{type:String,default:()=>""}},watch:{active:function(){this.activeIndex=this.active}},data(){return{activeIndex:this.active}},methods:{TabsClick(e){this.activeIndex=e.id,this.$emit("tabs-click",e)}}},v=h,b=(a("a642"),a("2877")),f=Object(b["a"])(v,u,p,!1,null,"6c29e10d",null),C=f.exports,g={name:"MpDialog",components:{TabsNav:C},props:{visible:{type:Boolean},isClose:{type:Boolean,default:()=>!0},title:{type:String,default:()=>""},width:{type:String,default:()=>"808px"},isReturn:{type:Boolean,default:()=>!1},IsAscertain:{type:Boolean,default:()=>!0},TabsNav:{type:Object,default:()=>({data:[],default:null})}},data(){return{}},methods:{DialogClock(){this.$emit("update:visible",!1),this.$emit("DialogClose")},DialogRetrun(e){this.$emit("dialog-retrun",e)},TabsClick(e){this.$emit("tabs-click",e)}}},y=g,D=(a("aa04"),a("cd39"),a("9b39"),a("f81e"),Object(b["a"])(y,m,d,!1,null,"bb2fd478",null)),I=D.exports,F=a("f3ba"),k=a("2f62"),S=a("31b1"),x=a("5e05"),_=a("d370");const L=x["a"].common.getSysEnum,T=(F["a"].home.getDicValueByKey,S["a"].channel.getNextApprovers,S["a"].channel.queryTopics,S["a"].channel.queryIopTemplate,S["a"].channel.saveChannel,S["a"].channel.getTemplateData);var N={name:"channelBaseDialog",components:{MpDialog:I},props:{baseCampInfo:{type:Object,default:()=>({})},childrenSchemes:{type:Array,default:()=>[]}},data(){return{visible:!1,SceneNodeData:[],typeOption:[],checked:"",targetOption:[],baseFrom:{campsegName:"",dateList:[],processNum:1},baseFromRules:{campsegName:[{required:!0,message:"请输入策略名称",trigger:"blur"}],dateList:[{required:!0,message:"请选择投放周期",trigger:"blur"}],campsegDesc:[{required:!0,message:"请输入策略描述",trigger:"blur"}],activityType:[{required:!0,message:"请选择营销类型",trigger:"blur"}],activityObjective:[{required:!0,message:"请选择营销目标",trigger:"blur"}]},ProcessItemList:[],iopTempOption:[],topOption:[],approverList:[],approveUserId:{},campInfoBO:{},processNumList:[],nextNodesList:{},TemplateData:{},ApproverUser:[],isSubmit:"",pickerOptions:{disabledDate(e){return e.getTime()<Date.now()-864e5}}}},computed:{...Object(k["b"])("MarkPl",["getNodeDataId","getNodeSameTypeData"]),ActiveNodeList:function(){return this.$store.state.MarkPl.ActiveNodeList}},created(){},mounted(){},methods:{clone(){this.baseFrom=Object.assign({},this.baseFrom)},getTemlate(){if("approveFlowId"in this.baseFrom&&null!==this.baseFrom.approveFlowId){var e={approveFlowId:this.baseFrom.approveFlowId};this.getNextApprovers(e)}else Object(c["i"])(T).then(e=>{this.TemplateData=e,this.getNextApprovers(e)})},async getNextApprovers(e){var t=this.getNodeSameTypeData("3"),a=[];t.map(e=>{e.map(e=>{a.push(e.channelId)})});var i={berv:e.berv,instanceId:e.approveFlowId,nodeId:"",processId:e.processId,triggerParm:{channelId:a.join(",")}};await Object(c["i"])(S["a"].channel.getNextApprovers,i).then(e=>{this.baseFrom.nextNodesList=[],e.nextNodesApprover.map(e=>{var t;this.baseFrom.nextNodesList.push({value:(null===(t=e.approverUser[0])||void 0===t?void 0:t.userId)||""})}),this.nextNodesList=e})},getOptionData(){this.SceneNodeData=this.$store.state.MarkPl.SceneNodeData,Object(c["i"])(L,{enumType:"activity_type"}).then(e=>{this.typeOption=e}),Object(c["i"])(L,{enumType:"activity_objective"}).then(e=>{this.targetOption=e}),this.processNumList=Object(r["g"])(this.SceneNodeData),"{}"!==JSON.stringify(this.baseCampInfo)?(this.baseFrom={...this.baseFrom,...this.baseCampInfo},this.baseFrom.dateList=[this.baseCampInfo.startDate,this.baseCampInfo.endDate],this.childrenSchemes.length!==this.processNumList.length&&(this.baseFrom.processNum=2),this.childrenSchemes.map(e=>{this.processNumList.map(t=>{e.data.join(",")===t.data.join(",")&&(t.checked=!0,t.campsegId=e.campsegId)})})):this.intiCampInfo()},ChangeProcessNum(){this.baseFrom.processNum=JSON.parse(JSON.stringify(this.baseFrom.processNum))},intiCampInfo(){var e=new Date(+new Date+288e5).toJSON().substr(0,19).replace("T"," ");this.baseFrom.campsegName="营销策略"+e},changeAppId(){this.approverList.forEach(e=>{(this.baseFrom.approveId=e.userId)&&(this.approveUserId.userId=e.userId,this.approveUserId.userName=e.userName)})},changeTemplate(){this.iopTempOption.forEach(e=>{(this.baseFrom.activityTemplateid=e.activityTemplateid)&&(this.baseFrom.activityType=e.activityType,this.baseFrom.activityObjective=e.activityObjective)})},save(){},DialogClose(){this.$emit("DialogClose")},sumbit:Object(n["a"])((function(){this.$refs.baseFrom.validate(async e=>{if(e){var t=JSON.parse(JSON.stringify(this.baseFrom));t.startDate=this.baseFrom.dateList[0],t.endDate=this.timeSet(this.baseFrom.dateList[1]),t.campDefType=5;var a={};if(1===this.isSubmit){var i=[];this.nextNodesList.nextNodesApprover.filter((e,t)=>{var a=this.baseFrom.nextNodesList[t],s=[];e.approverUser.map(e=>{Array.isArray(a.value)?a.value.map(t=>{t===e.userId&&s.push(e)}):a.value===e.userId&&s.push(e)}),i.push({approverUser:s,node:e.node})}),a={nodeId:this.nextNodesList.nodeId,processId:this.nextNodesList.processId,berv:this.nextNodesList.berv,submitStatus:1,instanceId:this.baseFrom.approveFlowId,nextNodesApprover:i}}var s=Object(r["k"])(this.SceneNodeData),l=[];if(1===this.baseFrom.processNum)o=this.processNumList;else var o=this.processNumList.filter(e=>e.checked);o.map(e=>{l.push({data:e.data})});var n={baseCampInfo:t,approveUserId:a,campSchemes:s,childrenSchemes:l,type:1,isSubmit:this.isSubmit},m=["策划保存草稿成功","策划提交审批成功"];try{const e=await Object(c["i"])(_["a"].mpapi.tacticsCreateSave,n);if("ERROR"===(null===e||void 0===e?void 0:e.status))return this.$alert(e.message,"操作失败",{confirmButtonText:"确定",customClass:"errorPrompt"});this.$alert(m[this.isSubmit],"操作成功",{confirmButtonText:"确定",customClass:"successPrompt",callback:e=>{this.$router.push({path:"/MarketingPlanning/MarketingMP"})}})}catch(d){}}})})),showMpDialog(e){this.$forceUpdate();for(let t=0;t<this.ActiveNodeList.length;t++)for(let e=0;e<this.ActiveNodeList[t].length;e++)if(""===this.ActiveNodeList[t][e].content)return this.$alert("请完善节点信息！","配置失败",{confirmButtonText:"确定",customClass:"errorPrompt"}),void this.$emit("DialogClose");this.isSubmit=e,this.getOptionData(),1===this.isSubmit&&this.getTemlate(),this.visible=!0},timeSet(e){var t,a=e.replace(/-/g,"/"),i=new Date(a),s=i.getFullYear()+"-",r=(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-",l=(i.getDate()<10?"0"+i.getDate():i.getDate())+"  ",o="23:",n="59:",c=59;return t=s+r+l+o+n+c,t}}},w=N,M=(a("6c4a"),Object(b["a"])(w,l,o,!1,null,"1c9f15af",null)),O=M.exports,P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ProductDialog"},[t("mp-dialog",{attrs:{title:"选渠道",visible:e.visible,width:"760px",IsAscertain:!1},on:{"update:visible":function(t){e.visible=t},DialogClose:e.DialogClose}},[t("div",{attrs:{slot:"Dialogcontent"},slot:"Dialogcontent"},[t("div",{staticClass:"Product"},[t("div",{staticClass:"Channel"},[t("select-button",{ref:"Selectbutton",attrs:{SelectBuList:e.SelectBuList},on:{selectClick:e.addTab}})],1),t("div",{staticClass:"TabsCenter"},[t("el-tabs",{attrs:{type:"card",closable:"","before-leave":e.beforeLeave},on:{"tab-remove":e.removeTab,"tab-click":e.TabClick},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,(function(a,i){return t("el-tab-pane",{key:a.channelId,attrs:{label:a.channelName,name:a.channelId}},[t("div",{staticClass:"TabPane"},[t(e.currentView[i],{ref:"Component"+a.channelId,refInFor:!0,tag:"component",attrs:{channelNewData:a},on:{saveChannelData:e.saveChannelData}})],1)])})),1)],1)]),e.editableTabs.length>0?t("div",{staticClass:"Product-button"},[t("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.ChannelSubmit}},[e._v("确定")])],1):e._e()])])],1)},$=[],A=a("3c7a"),j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"SelectList"},e._l(e.selectList,(function(a){return t("div",{key:a.channelId,staticClass:"Button",class:a.checked?"ButtonHover":"",on:{click:function(t){return e.selectClick(a)}}},[t("span",{attrs:{title:a.channelName}},[e._v(" "+e._s(a.channelName)+" ")]),a.checked?t("div",{staticClass:"ButtonHoverduoxuan"},[t("i",{staticClass:"iconfont icongonggongtubiao-duoxuan"})]):e._e()])})),0)},q=[],E={props:{SelectBuList:{type:Array,default:()=>[]}},mounted(){this.$watch("SelectBuList",e=>{this.selectList=e.map(e=>!0!==e.checked?{...e,checked:!1}:{...e})},{deep:!0})},data(){return{selectList:[]}},methods:{selectClick(e){e.checked=!0,this.$emit("selectClick",e)},Unhighlight(e){let t=[...this.selectList];this.selectList=t.map(t=>t.channelId===e?{...t,checked:!1}:{...t})}}},V=E,z=(a("6e35"),Object(b["a"])(V,j,q,!1,null,"44ccf63a",null)),B=z.exports,R=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"130px",model:e.CrmFrom,rules:e.CrmFromRules}},[t("el-form-item",{attrs:{label:"运营位：",prop:"adivInfo.adivId"}},[t("el-select",{attrs:{placeholder:"请选择运营位"},on:{change:e.changeAid},model:{value:e.CrmFrom.adivInfo.adivId,callback:function(t){e.$set(e.CrmFrom.adivInfo,"adivId",t)},expression:"CrmFrom.adivInfo.adivId"}},e._l(e.adivList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1),t("el-form-item",{attrs:{label:"营业厅归属地：",prop:"adivInfo.adivId"}},[t("el-select",{attrs:{placeholder:"请选择营业厅归属地"},on:{change:e.changeAid},model:{value:e.CrmFrom.adivInfo.adivId,callback:function(t){e.$set(e.CrmFrom.adivInfo,"adivId",t)},expression:"CrmFrom.adivInfo.adivId"}},e._l(e.attributionList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1),t("el-form-item",{attrs:{label:"推荐用语：",prop:"channelConf.execContent"}},[t("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":""},model:{value:e.CrmFrom.channelConf.execContent,callback:function(t){e.$set(e.CrmFrom.channelConf,"execContent",t)},expression:"CrmFrom.channelConf.execContent"}})],1),t("el-form-item",{attrs:{label:"短信用语：",prop:"channelConf.smsContent"}},[t("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":""},model:{value:e.CrmFrom.channelConf.smsContent,callback:function(t){e.$set(e.CrmFrom.channelConf,"smsContent",t)},expression:"CrmFrom.channelConf.smsContent"}})],1),t("el-form-item",{attrs:{label:"时机选择："}},[t("el-select",{attrs:{placeholder:"请选择"},on:{click:e.changeTime},model:{value:e.CrmFrom.channelConf.timeId,callback:function(t){e.$set(e.CrmFrom.channelConf,"timeId",t)},expression:"CrmFrom.channelConf.timeId"}},e._l(e.timeIdList,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"时机描述："}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":""},model:{value:e.CrmFrom.channelConf.timeDistindes,callback:function(t){e.$set(e.CrmFrom.channelConf,"timeDistindes",t)},expression:"CrmFrom.channelConf.timeDistindes"}})],1)],1)],1)},U=[];const G=x["a"].common.getSysEnum,W=x["a"].common.queryAdivInfo,H=x["a"].common.queryHallInfo;var K={props:["channelNewData"],data(){return{CrmFrom:{adivInfo:{},channelConf:{},channelId:"",channelName:"",attributionInfo:{}},CrmFromRules:{adivInfo:{adivId:[{required:!0,message:"请选择运营位",trigger:"change"}]},channelConf:{execContent:[{required:!0,message:"请输入推荐用语",trigger:"blur"}],smsContent:[{required:!0,message:"请输入短信用语",trigger:"blur"}]}},timeIdList:[],adivList:[],attributionList:[]}},mounted(){this.getOptionData(),this.CrmFrom=JSON.parse(JSON.stringify(this.channelNewData))},methods:{async getOptionData(){await Object(c["i"])(G,{enumType:"iop_time_id"}).then(e=>{this.timeIdList=e}),await Object(c["i"])(W,{channelId:this.CrmFrom.channelId}).then(e=>{this.adivList=e}),await Object(c["i"])(H,{}).then(e=>{this.attributionList=e})},changeAid(e){var t="";this.adivList.forEach(a=>{e===a.adivId&&(t=a.adivName)}),this.CrmFrom.adivInfo=Object.assign({},this.CrmFrom.adivInfo,{adivId:e,adivName:t})},changeAttribution(e){var t="";this.attributionList.forEach(a=>{e===a.adivId&&(t=a.attributionName)}),this.CrmFrom.attributionInfo=Object.assign({},this.CrmFrom.adivInfo,{adivId:e,attributionName:t})},changeTime(){this.timeIdList.forEach(e=>{e.enumKey===this.CrmFrom.timeId&&(this.CrmFrom.timeName=e.enumValue)})},SubInstall(){var e=!0;return this.$refs.CrmFrom.validate(t=>{t?(this.$emit("saveChannelData",this.CrmFrom),e=!0):e=!1}),e}},created(){}},J=K,Q=Object(b["a"])(J,R,U,!1,null,"7d281db8",null),Y=Q.exports,Z=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"110px",model:e.CrmFrom,rules:e.CrmFromRules}},[t("el-form-item",{attrs:{label:"运营位：",prop:"adivId"}},[t("el-select",{attrs:{placeholder:"请选择运营位"},model:{value:e.CrmFrom.adivId,callback:function(t){e.$set(e.CrmFrom,"adivId",t)},expression:"CrmFrom.adivId"}},e._l(e.timeIdList,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"外呼类型：",prop:"outCallType"}},[t("el-select",{attrs:{placeholder:"请选择外呼类型"},model:{value:e.CrmFrom.outCallType,callback:function(t){e.$set(e.CrmFrom,"outCallType",t)},expression:"CrmFrom.outCallType"}},e._l(e.callTypeList,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"推荐用语：",prop:"markingTerm"}},[t("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":""},model:{value:e.CrmFrom.markingTerm,callback:function(t){e.$set(e.CrmFrom,"markingTerm",t)},expression:"CrmFrom.markingTerm"}})],1),t("el-form-item",{attrs:{label:"时机选择："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.CrmFrom.timeId,callback:function(t){e.$set(e.CrmFrom,"timeId",t)},expression:"CrmFrom.timeId"}},e._l(e.timeIdList,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"时间描述："}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":""},model:{value:e.CrmFrom.timeDistindes,callback:function(t){e.$set(e.CrmFrom,"timeDistindes",t)},expression:"CrmFrom.timeDistindes"}})],1),t("el-form-item",[t("el-button",{on:{click:e.SubInstall}},[e._v("保存当前设置")])],1)],1)],1)},X=[];const ee=x["a"].common.getSysEnum,te=x["a"].common.queryAdivInfo;var ae={props:["channelId"],data(){return{CrmFrom:{},CrmFromRules:{adivId:[{required:!0,message:"请选择运营位",trigger:"blur,change"}],outCallType:[{required:!0,message:"请选择外呼类型",trigger:"blur,change"}],markingTerm:[{required:!0,message:"请输入推荐用语",trigger:"blur"}]},callTypeList:[],timeIdList:[],adivList:[]}},mounted(){this.getOptionData()},methods:{getOptionData(){Object(c["i"])(ee,{enumType:"iop_time_id"}).then(e=>{this.timeIdList=e}),Object(c["i"])(ee,{enumType:"E_610_OUT_CALL_TYPE"}).then(e=>{this.callTypeList=e}),Object(c["i"])(te,{channelId:this.channelId}).then(e=>{this.adivList=e})},SubInstall(){this.$refs.CrmFrom.validate(e=>{})}}},ie=ae,se=Object(b["a"])(ie,Z,X,!1,null,"5cc4a058",null),re=se.exports,le=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"110px",model:e.CrmFrom,rules:e.CrmFromRules}},[t("el-form-item",{attrs:{label:"运营位：",prop:"adivId"}},[t("el-select",{attrs:{placeholder:"请选择运营位"},on:{change:e.changeAid},model:{value:e.CrmFrom.adivId,callback:function(t){e.$set(e.CrmFrom,"adivId",t)},expression:"CrmFrom.adivId"}},e._l(e.adivList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1),t("el-form-item",{attrs:{label:"选择素材：",prop:"materialId"}},[t("el-select",{attrs:{placeholder:"请选择素材"},model:{value:e.CrmFrom.materialId,callback:function(t){e.$set(e.CrmFrom,"materialId",t)},expression:"CrmFrom.materialId"}},e._l(e.matList,(function(e){return t("el-option",{key:e.ID,attrs:{label:e.NAME,value:e.ID}})})),1),t("el-button",{staticClass:"ml-10",attrs:{type:"primary"},on:{click:e.showImage}},[e._v("预览")])],1),t("el-form-item",{attrs:{label:"推荐用语：",prop:"execContent"}},[t("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":""},model:{value:e.CrmFrom.execContent,callback:function(t){e.$set(e.CrmFrom,"execContent",t)},expression:"CrmFrom.execContent"}})],1),t("el-form-item",[t("el-button",{on:{click:e.SubInstall}},[e._v("保存当前设置")])],1)],1)],1)},oe=[];const ne=x["a"].common.queryAdivInfo,ce=x["a"].common.queryMaterialByChannel,me=x["a"].common.queryMaterialById;var de={props:["channelId"],data(){return{CrmFrom:{},CrmFromRules:{adivId:[{required:!0,message:"请选择运营位",trigger:"blur,change"}],materialId:[{required:!0,message:"请选择素材",trigger:"blur,change"}],execContent:[{required:!0,message:"请输入推荐用语",trigger:"blur"}]},matList:[],timeIdList:[],adivList:[]}},mounted(){this.getOptionData()},methods:{getOptionData(){Object(c["i"])(ne,{channelId:this.channelId}).then(e=>{this.adivList=e})},changeAid(){this.adivList.forEach(e=>{(this.CrmFrom.adivId=e.adivId)&&(this.CrmFrom.adivName=e.adivName)});let e="0",t={channelId:this.channelId,materialType:e,positionId:this.CrmFrom.adivId};Object(c["i"])(ce,t).then(e=>{this.matList=e})},showImage(){Object(c["i"])(me,{materialId:this.CrmFrom.materialId}).then(e=>{})},SubInstall(){this.$refs.CrmFrom.validate(e=>{})}}},ue=de,pe=Object(b["a"])(ue,le,oe,!1,null,"52930fa9",null),he=pe.exports,ve=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"110px",model:e.CrmFrom,rules:e.CrmFromRules}},[t("el-form-item",{attrs:{label:"运营位：",prop:"adivId"}},[t("el-select",{attrs:{placeholder:"请选择运营位"},on:{change:e.changeAid},model:{value:e.CrmFrom.adivId,callback:function(t){e.$set(e.CrmFrom,"adivId",t)},expression:"CrmFrom.adivId"}},e._l(e.adivList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1),t("el-form-item",{attrs:{label:"复杂事件场景："}},[t("el-button",{staticClass:"ml-10",attrs:{type:"primary"},on:{click:e.addCepClick}},[e._v("添加")])],1),t("el-form-item",{attrs:{label:"推荐用语：",prop:"execContent"}},[t("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":""},model:{value:e.CrmFrom.execContent,callback:function(t){e.$set(e.CrmFrom,"execContent",t)},expression:"CrmFrom.execContent"}})],1),t("el-form-item",[t("el-button",{on:{click:e.SubInstall}},[e._v("保存当前设置")])],1)],1)],1)},be=[];const fe=x["a"].common.queryAdivInfo,Ce=x["a"].common.queryMaterialByChannel,ge=F["a"].home.getDicValueByKey;var ye={props:["channelId"],data(){return{CrmFrom:{},CrmFromRules:{adivId:[{required:!0,message:"请选择运营位",trigger:"blur,change"}],materialId:[{required:!0,message:"请选择素材",trigger:"blur,change"}],execContent:[{required:!0,message:"请输入推荐用语",trigger:"blur"}]},matList:[],timeIdList:[],adivList:[]}},mounted(){this.getOptionData()},methods:{getOptionData(){Object(c["i"])(fe,{channelId:this.channelId}).then(e=>{this.adivList=e})},addCepClick(){Object(c["i"])(ge,{key:"MCD_CEP_EVENT_URL"}).then(e=>{})},changeAid(){this.adivList.forEach(e=>{(this.CrmFrom.adivId=e.adivId)&&(this.CrmFrom.adivName=e.adivName)});let e="0",t={channelId:this.channelId,materialType:e,positionId:this.CrmFrom.adivId};Object(c["i"])(Ce,t).then(e=>{this.matList=e})},SubInstall(){this.$refs.CrmFrom.validate(e=>{})}}},De=ye,Ie=Object(b["a"])(De,ve,be,!1,null,"779a4fc6",null),Fe=Ie.exports,ke=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"150px",model:e.CrmFrom,rules:e.CrmFromRules}},[t("el-form-item",{attrs:{label:"运营位：",prop:"adivId"}},[t("el-select",{attrs:{placeholder:"请选择运营位"},on:{change:e.changeAid},model:{value:e.CrmFrom.adivId,callback:function(t){e.$set(e.CrmFrom,"adivId",t)},expression:"CrmFrom.adivId"}},e._l(e.adivList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1),t("el-form-item",{attrs:{label:"发送类型：",prop:"sendType"}},[t("el-select",{attrs:{placeholder:"请选择发送类型"},model:{value:e.CrmFrom.sendType,callback:function(t){e.$set(e.CrmFrom,"sendType",t)},expression:"CrmFrom.sendType"}},e._l(e.typeList,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"视频短信产品编码：",prop:"videoSmsPlanId"}},[t("el-input",{model:{value:e.CrmFrom.videoSmsPlanId,callback:function(t){e.$set(e.CrmFrom,"videoSmsPlanId",t)},expression:"CrmFrom.videoSmsPlanId"}})],1),t("el-form-item",{attrs:{label:"彩信编码：",prop:"mmsId"}},[t("el-input",{model:{value:e.CrmFrom.mmsId,callback:function(t){e.$set(e.CrmFrom,"mmsId",t)},expression:"CrmFrom.mmsId"}})],1),t("el-form-item",{attrs:{label:"推荐用语：",prop:"execContent"}},[t("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":""},model:{value:e.CrmFrom.execContent,callback:function(t){e.$set(e.CrmFrom,"execContent",t)},expression:"CrmFrom.execContent"}})],1),t("el-form-item",[t("el-button",{on:{click:e.SubInstall}},[e._v("保存当前设置")])],1)],1)],1)},Se=[];const xe=x["a"].common.queryAdivInfo,_e=x["a"].common.getSysEnum;var Le={props:["channelId"],data(){return{CrmFrom:{},CrmFromRules:{adivId:[{required:!0,message:"请选择运营位",trigger:"blur,change"}],sendType:[{required:!0,message:"请选择发送类型",trigger:"blur,change"}],videoSmsPlanId:[{required:!0,message:"请填写视频短信产品编码",trigger:"blur"}],mmsId:[{required:!0,message:"请填写彩信编码",trigger:"blur"}],execContent:[{required:!0,message:"请输入推荐用语",trigger:"blur"}]},matList:[],typeList:[],adivList:[]}},mounted(){this.getOptionData()},methods:{getOptionData(){Object(c["i"])(xe,{channelId:this.channelId}).then(e=>{this.adivList=e}),Object(c["i"])(_e,{enumType:"E_608_SEND_TYPEd"}).then(e=>{this.typeList=e})},changeAid(){this.adivList.forEach(e=>{(this.CrmFrom.adivId=e.adivId)&&(this.CrmFrom.adivName=e.adivName)})},SubInstall(){this.$refs.CrmFrom.validate(e=>{})}}},Te=Le,Ne=Object(b["a"])(Te,ke,Se,!1,null,"4e56b8e3",null),we=Ne.exports,Me=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"150px",model:e.CrmFrom,rules:e.CrmFromRules}},[e.isadivInfo?t("adivInfo",{attrs:{CrmFrom:e.CrmFrom.adivInfo,FromData:e.CrmFrom},on:{"update:CrmFrom":function(t){return e.$set(e.CrmFrom,"adivInfo",t)},"update:crm-from":function(t){return e.$set(e.CrmFrom,"adivInfo",t)},getConfiguration:e.getConfiguration,getadivObj:e.getadivObj}}):e._e(),t("el-form-item",{attrs:{label:"优先级：",prop:"channelConf.priorityOrder"}},[t("div",{staticClass:"block"},[t("el-slider",{attrs:{"show-input":""},model:{value:e.CrmFrom.channelConf.priorityOrder,callback:function(t){e.$set(e.CrmFrom.channelConf,"priorityOrder",t)},expression:"CrmFrom.channelConf.priorityOrder"}})],1)]),1001===e.curAdivInfo.execType?t("el-form-item",{attrs:{label:"复杂事件场景：",prop:"channelConf.cepEventId"}},[void 0!==e.CrmFrom.channelConf.cepEventId?t("el-tag",{staticClass:"cepEventIdTag",attrs:{size:"medium"}},[e._v(e._s(e.CrmFrom.channelConf.cepEventId))]):e._e(),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.cepEventIdVisible=!0}}},[e._v("添加")])],1):e._e(),t("el-form-item",{attrs:{label:"流量激发活动：",prop:"channelConf.ifHaveVar"}},[t("el-radio-group",{model:{value:e.CrmFrom.channelConf.ifHaveVar,callback:function(t){e.$set(e.CrmFrom.channelConf,"ifHaveVar",t)},expression:"CrmFrom.channelConf.ifHaveVar"}},[t("el-radio",{attrs:{label:!0}},[e._v("是")]),t("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),t("el-form-item",{attrs:{label:"推荐用语：",prop:"channelConf.execContent"}},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{type:"textarea",rows:4,"show-word-limit":"",maxlength:500},model:{value:e.CrmFrom.channelConf.execContent,callback:function(t){e.$set(e.CrmFrom.channelConf,"execContent",t)},expression:"CrmFrom.channelConf.execContent"}})],1),e.CrmFrom.channelConf.ifHaveVar?t("el-form-item",{attrs:{label:"短信用语变量："}},[t("ul",{staticClass:"variableLabl"},e._l(e.variable,(function(a){return t("li",{key:a.label},[e._v(" "+e._s(a.name)+" ")])})),0)]):e._e(),t("el-form-item",{attrs:{label:"执行时间："}},[e.isadivInfo?t("ExecutionTime",{key:e.execution,attrs:{form:e.TimeForm},on:{onChange:e.onChange}},[t("el-button",[e._v("执行时间")])],1):e._e()],1),e.isadivInfo?t("configurationSheet",{ref:"configurationSheet",attrs:{CrmFrom:e.CrmFrom.channelConf},on:{configGsheet:e.configGsheet,"update:CrmFrom":function(t){return e.$set(e.CrmFrom,"channelConf",t)},"update:crm-from":function(t){return e.$set(e.CrmFrom,"channelConf",t)}}}):e._e()],1),t("el-dialog",{attrs:{title:"复杂事件实列",width:"1100px",visible:e.cepEventIdVisible,"append-to-body":"","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.cepEventIdVisible=t}}},[e.cepEventIdVisible?t("complexEvents",{ref:"complexEvents",attrs:{cepEventId:e.CrmFrom.channelConf.cepEventId}}):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.cepEventIdVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.SubEvents}},[e._v("保 存")])],1)],1)],1)},Oe=[],Pe=function(){var e=this,t=e._self._c;return t("div",e._l(e.attrInfoList,(function(a){return t("el-form-item",{key:a.attrId,attrs:{label:a.attrName+"：",prop:0===a.isNullable?"channelConf."+a.attrId:void 0,rules:0===a.isNullable?a.Rules:void 0}},[1===a.attrValueType?t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{maxlength:a.attrLength},model:{value:e.DataFrom[a.attrId],callback:function(t){e.$set(e.DataFrom,a.attrId,t)},expression:"DataFrom[item.attrId]"}}):e._e(),6===a.attrValueType?t("el-radio-group",{model:{value:e.DataFrom[a.attrId],callback:function(t){e.$set(e.DataFrom,a.attrId,t)},expression:"DataFrom[item.attrId]"}},e._l(a.dataSource,(function(a){return t("el-radio",{key:a.attrValueId,attrs:{label:a.attrValueId}},[e._v(e._s(a.attrValueName))])})),1):e._e(),7===a.attrValueType?t("el-checkbox-group",{model:{value:e.DataFrom[a.attrId],callback:function(t){e.$set(e.DataFrom,a.attrId,t)},expression:"DataFrom[item.attrId]"}},e._l(a.dataSource,(function(a){return t("el-checkbox",{key:a.attrValueId,attrs:{label:a.attrValueId}},[e._v(e._s(a.attrValueName))])})),1):e._e(),3===a.attrValueType?t("el-select",{attrs:{placeholder:"请选择"+a.attrName},model:{value:e.DataFrom[a.attrId],callback:function(t){e.$set(e.DataFrom,a.attrId,t)},expression:"DataFrom[item.attrId]"}},e._l(a.dataSource,(function(e){return t("el-option",{key:e.attrValueId,attrs:{label:e.attrValueName,value:e.attrValueId}})})),1):e._e(),4===a.attrValueType?t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.DataFrom[a.attrId],callback:function(t){e.$set(e.DataFrom,a.attrId,t)},expression:"DataFrom[item.attrId]"}}):e._e(),5===a.attrValueType?t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.DataFrom[a.attrId],callback:function(t){e.$set(e.DataFrom,a.attrId,t)},expression:"DataFrom[item.attrId]"}}):e._e(),2===a.attrValueType?t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{type:"textarea",rows:4,"show-word-limit":"",maxlength:a.attrLength},model:{value:e.DataFrom[a.attrId],callback:function(t){e.$set(e.DataFrom,a.attrId,t)},expression:"DataFrom[item.attrId]"}}):e._e()],1)})),1)},$e=[],Ae=(a("d9e2"),a("a454"));const je=(e,t,a)=>{const i=/^[1-9]\d*$/;i.test(t)?a():a(new Error("请输入数字"))};var qe={props:["CrmFrom"],data(){return{DataFrom:{},attrInfoList:[]}},mounted(){},methods:{async lookSchedulingInfo(e){this.attrInfoList=[],this.DataFrom={},void 0!==e&&""!==e&&void 0!==e&&"0"!==e&&await Object(c["i"])(Ae["a"].scheduling.lookSchedulingInfo,{id:e+""}).then(e=>{var t=[],a={};t=e.attrInfoList.map(async(e,t)=>{if(7===e.attrValueType?a[e.attrId]=this.CrmFrom[e.attrId]||[]:a[e.attrId]=this.CrmFrom[e.attrId]||"",null!==e.resoureUrl){var i=await Object(c["g"])(e.resoureUrl);e.dataSource=i,i.map(t=>{1===t.isDefaultValue&&(Array.isArray(a[e.attrId])?Array.isArray(this.CrmFrom[e.attrId])&&0===this.CrmFrom[e.attrId].length?a[e.attrId].push(t.attrValueId):a[e.attrId]=this.CrmFrom[e.attrId]:a[e.attrId]=this.CrmFrom[e.attrId]||t.attrValueId)})}return e.Rules=[],0===e.isNullable&&e.Rules.push({required:!0,message:e.attrName+"不能为空",trigger:"blur"}),1===e.attrFormat&&e.Rules.push({validator:je,trigger:"blur"}),e}),t.map(async e=>{await e.then(e=>{this.attrInfoList.push(e),this.attrInfoList=this.insertSort(this.attrInfoList)})}),this.DataFrom=Object.assign(a,this.DataFrom),this.$watch("DataFrom",e=>{this.$emit("configGsheet",e)},{deep:!0})})},insertSort(e){for(var t=e.length,a=1;a<t;a++){var i=e[a],s=a-1;while(s>=0&&e[s].serialNumber>i.serialNumber)e[s+1]=e[s],s--;e[s+1]=i}return e}}},Ee=qe,Ve=Object(b["a"])(Ee,Pe,$e,!1,null,"0de23f70",null),ze=Ve.exports,Be=function(){var e=this,t=e._self._c;return t("div",{staticClass:"complexEvents"},[t("div",{staticClass:"tree"},[t("el-tree",{ref:"vueTree",attrs:{props:e.props,data:e.channelList,"node-key":"id",accordion:"","highlight-current":"","icon-class":"iconfont icongonggongtubiao-shouqi Treecolor"},on:{"node-click":e.TreeNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:a}){return t("div",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(a.label))])])}}])})],1),t("div",{staticClass:"table"},[t("div",{staticClass:"search_box"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入事件编号或名称"},model:{value:e.queryForm.keyWords,callback:function(t){e.$set(e.queryForm,"keyWords","string"===typeof t?t.trim():t)},expression:"queryForm.keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.QuerykeyWords},slot:"suffix"})])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"Mp-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName,height:"calc(100vh - 470px)"}},[t("el-table-column",{attrs:{prop:"eventId",label:"事件编码"}}),t("el-table-column",{attrs:{prop:"eventName",label:"事件名称"}}),t("el-table-column",{attrs:{prop:"firstClassName",label:"一级分类"}}),t("el-table-column",{attrs:{prop:"secondClassName",label:"二级分类"}}),t("el-table-column",{attrs:{prop:"createUserName",label:"创建人"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t("el-table-column",{attrs:{prop:"approveTime",label:"审批时间"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:a.row.eventId},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(""))])]}}])})],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":e.pageData.size,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},Re=[],Ue={props:["cepEventId"],data(){return{queryForm:{classifyId:"",keyWords:"",status:""},tableData:[],loading:!1,props:{label:"text",children:"nodes",num:"num"},pageData:{currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0},channelList:[],radio:""}},mounted(){null!==this.cepEventId&&void 0!==this.cepEventId&&(this.radio=this.cepEventId),this.queryEvents(),this.queryCepEventTypeList()},methods:{queryCepEventTypeList(){Object(c["i"])(_["a"].mpapi.queryCepEventTypeList,{statTime:""}).then(e=>{this.channelList=[e],this.loading=!1})},queryEvents(){Object(c["i"])(_["a"].mpapi.queryEvents,{...this.queryForm,current:this.pageData.currentPage,size:this.pageData.pageSize}).then(e=>{this.tableData=e.records,this.loading=!1,this.pageData.total=e.total})},QuerykeyWords(){this.pageData.current=1,this.queryEvents()},tableRowClassName(e){const t=e.rowIndex%2;return 0===t?"gray-row":""},TreeNodeClick(e){},handleSizeChange(e){this.pageData.pageSize=e,this.queryEvents()},handleCurrentChange(e){this.pageData.currentPage=e,this.queryEvents()}}},Ge=Ue,We=(a("0662"),a("1134"),Object(b["a"])(Ge,Be,Re,!1,null,"7b3542d8",null)),He=We.exports,Ke=function(){var e=this,t=e._self._c;return t("div",[t("el-form-item",{attrs:{label:"运营位：",prop:"adivInfo.adivId"}},[t("el-select",{attrs:{placeholder:"请选择运营位"},on:{change:e.changeAid},model:{value:e.DataFrom.adivId,callback:function(t){e.$set(e.DataFrom,"adivId",t)},expression:"DataFrom.adivId"}},e._l(e.adivList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1)],1)},Je=[];const Qe=x["a"].common.queryAdivInfo;var Ye={props:["CrmFrom","FromData"],data(){return{DataFrom:{},adivList:[]}},mounted(){this.getAdivInfo()},methods:{async getAdivInfo(){await Object(c["i"])(Qe,{channelId:this.FromData.channelId}).then(e=>{this.adivList=e,this.DataFrom=this.CrmFrom,"adivId"in this.DataFrom&&""!==this.DataFrom.adivId&&this.changeAid(this.DataFrom.adivId,1)})},changeAid(e,t){var a="",i="",s={};this.adivList.forEach(t=>{e===t.adivId&&(a=t.adivName,i=t.configId,s=t)}),this.DataFrom=Object.assign({},this.DataFrom,{adivId:e,adivName:a}),this.$emit("update:CrmFrom",this.DataFrom),this.$emit("getConfiguration",{configid:i,zt:t}),this.$emit("getadivObj",s)}}},Ze=Ye,Xe=Object(b["a"])(Ze,Ke,Je,!1,null,"f78d1a16",null),et=Xe.exports,tt=function(){var e=this,t=e._self._c;return t("div",[t("el-popover",{attrs:{placement:"top-start",trigger:"click"}},[t("div",{staticClass:"ExcutionTime"},[t("div",{staticClass:"Time"},[t("div",{staticClass:"title"},[t("span",[e._v("月执行时间")]),t("span",[t("el-checkbox",{on:{change:function(t){return e.SelectAll(e.month,31,"Month")}},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},[e._v("全选")])],1)]),t("div",{staticClass:"MonthTable"},[t("ul",e._l(7,(function(e){return t("li",{key:e})})),0),t("ul",e._l(35,(function(a){return t("li",{key:a,class:e.isMonth(a)?"bg":"",on:{click:function(t){return e.SingleChoice(a,"Month")}}},[e._v(" "+e._s(a>31?"":a)+" ")])})),0),t("ul",e._l(7,(function(e){return t("li",{key:e})})),0)])]),t("div",{staticClass:"Time"},[t("div",{staticClass:"title"},[t("span",[e._v("周执行时间")]),t("span",[t("el-checkbox",{on:{change:function(t){return e.SelectAll(e.week,7,"Week")}},model:{value:e.week,callback:function(t){e.week=t},expression:"week"}},[e._v("全选")])],1)]),t("div",{staticClass:"WeekTable"},[t("ul",e._l(7,(function(a){return t("li",{key:a,class:e.isWeek(a)?"bg":"",on:{click:function(t){return e.SingleChoice(a,"Week")}}},[e._v(" 星期"+e._s(e.WeekList[a-1])+" ")])})),0)])]),t("div",{staticClass:"Time Day"},[t("div",{staticClass:"title"},[t("span",[e._v("天执行时间")]),t("span",[t("el-checkbox",{on:{change:function(t){return e.SelectAll(e.day,48,"Day")}},model:{value:e.day,callback:function(t){e.day=t},expression:"day"}},[e._v("全选")])],1)]),t("div",{staticClass:"DayTable"},[t("ul",[t("li",[t("div",[t("el-checkbox",{on:{change:function(t){return e.DaySelect(e.isbeforeDawn,16,"beforeDawn")}},model:{value:e.isbeforeDawn,callback:function(t){e.isbeforeDawn=t},expression:"isbeforeDawn"}},[e._v("凌晨(0点~8点)")])],1),t("ul",{staticClass:"DayTableTimeSlot"},e._l(e.beforeDawn,(function(a,i){return t("li",{key:a,class:e.isDay(i,0)?"bg":"",on:{click:function(t){return e.SingleChoice(i,"beforeDawn")}}},[e._v(e._s(a))])})),0)]),t("li",[t("div",[t("el-checkbox",{on:{change:function(t){return e.DaySelect(e.isDayList,16,"DayList")}},model:{value:e.isDayList,callback:function(t){e.isDayList=t},expression:"isDayList"}},[e._v("白天(8点~16点)")])],1),t("ul",{staticClass:"DayTableTimeSlot"},e._l(e.DayList,(function(a,i){return t("li",{key:a,class:e.isDay(i,16)?"bg":"",on:{click:function(t){return e.SingleChoice(i,"DayList")}}},[e._v(e._s(a))])})),0)]),t("li",[t("div",[t("el-checkbox",{on:{change:function(t){return e.DaySelect(e.isnight,16,"night")}},model:{value:e.isnight,callback:function(t){e.isnight=t},expression:"isnight"}},[e._v("夜间(16点~24点)")])],1),t("ul",{staticClass:"DayTableTimeSlot"},e._l(e.night,(function(a,i){return t("li",{key:a,class:e.isDay(i,32)?"bg":"",on:{click:function(t){return e.SingleChoice(i,"night")}}},[e._v(e._s(a))])})),0)])])])])]),e._t("default",null,{slot:"reference"})],2)],1)},at=[],it={props:["form"],data(){return{month:!1,week:!1,day:!1,isbeforeDawn:!1,isDayList:!1,isnight:!1,WeekList:["一","二","三","四","五","六","日"],TimeList:[],beforeDawn:[],night:[],DayList:[],isWeekSelect:"0000000",isMonthSelect:"0000000000000000000000000000000",isDaySelect:"000000000000000000000000000000000000000000000000"}},computed:{isWeek:function(){return e=>"1"===this.isWeekSelect[e-1]},isMonth:function(){return e=>"1"===this.isMonthSelect[e-1]},isDay:function(){return(e,t)=>"1"===this.isDaySelect[e+t]}},mounted(){var e=this.getTimeList(24,30);e.push("23:30~00:00"),this.beforeDawn=e.slice(0,16),this.DayList=e.slice(16,32),this.night=e.slice(32,48),""!==this.form.dayMask&&(this.isMonthSelect=this.form.dayMask,this.month=this.verificationStr(this.isMonthSelect)),""!==this.form.weekMask&&(this.isWeekSelect=this.form.weekMask,this.week=this.verificationStr(this.isWeekSelect)),""!==this.form.minute10Mask&&(this.isDaySelect=this.form.minute10Mask,this.day=this.verificationStr(this.isDaySelect),this.isbeforeDawn=this.verificationStr(this.isDaySelect.substring(0,16)),this.isDayList=this.verificationStr(this.isDaySelect.substring(16,32)),this.isnight=this.verificationStr(this.isDaySelect.substring(32,this.isDaySelect.length))),this.Change()},methods:{SelectAll(e,t,a){for(var i="",s=0;s<t;s++)i+=e?1:0;"Month"===a?this.isMonthSelect=i:"Week"===a?this.isWeekSelect=i:(this.isDaySelect=i,this.isbeforeDawn=this.day,this.isDayList=this.day,this.isnight=this.day),this.Change()},DaySelect(e,t,a){for(var i="",s=this.isDaySelect,r=0;r<t;r++)i+=e?1:0;this.isDaySelect="beforeDawn"===a?i+s.substring(16,s.length):"DayList"===a?s.substring(0,16)+i+s.substring(32,s.length):s.substring(0,32)+i,this.Change()},SingleChoice(e,t){"Month"===t?(this.isMonthSelect=this.replaceStr(this.isMonthSelect,e-1),this.month=this.verificationStr(this.isMonthSelect)):"Week"===t?(this.isWeekSelect=this.replaceStr(this.isWeekSelect,e-1),this.week=this.verificationStr(this.isWeekSelect)):"beforeDawn"===t?(this.isDaySelect=this.replaceStr(this.isDaySelect,e),this.isbeforeDawn=this.verificationStr(this.isDaySelect.substring(0,16)),this.day=this.verificationStr(this.isDaySelect)):"DayList"===t?(this.isDaySelect=this.replaceStr(this.isDaySelect,e+16),this.isDayList=this.verificationStr(this.isDaySelect.substring(16,32)),this.day=this.verificationStr(this.isDaySelect)):(this.isDaySelect=this.replaceStr(this.isDaySelect,e+32),this.isnight=this.verificationStr(this.isDaySelect.substring(32,this.isDaySelect.length)),this.day=this.verificationStr(this.isDaySelect)),this.Change()},Change(){var e={week:this.isWeekSelect,day:this.isDaySelect,Month:this.isMonthSelect};this.$emit("onChange",e)},verificationStr(e){const t=e.split("");var a=t.filter(e=>"1"!==e);return 0===a.length},replaceStr(e,t){const a=e.split("");return a[t]="1"===a[t]?"0":"1",a.join("")},getTimeList(e,t){for(var a=60,i=[],s=[],r=0;r<e;r++){var l="";l=r<10?"0"+r:""+r;for(var o=0;o<a;o++)if(o%t===0){var n=o<10?":0"+o:":"+o;n=l+n,i.length>0&&s.push(i[i.length-1]+"~"+n),i.push(n)}}return s}}},st=it,rt=(a("0d12"),Object(b["a"])(st,tt,at,!1,null,"311419f4",null)),lt=rt.exports;const ot=x["a"].common.getSysEnum;var nt={components:{configurationSheet:ze,adivInfo:et,complexEvents:He,ExecutionTime:lt},props:["channelNewData"],data(){return{CrmFrom:{adivInfo:{},channelConf:{ifHaveVar:!1,priorityOrder:0},channelId:"",channelName:""},CrmFromRules:{adivInfo:{adivId:[{required:!0,message:"请选择运营位",trigger:"change"}]},channelConf:{execContent:[{required:!0,message:"请输入推荐用语",trigger:"blur"}],priorityOrder:[{required:!0,message:"请输入优先等级",trigger:"blur"}],cepEventId:[{required:!0,message:"请选择复杂事件",trigger:"blur"}],ifHaveVar:[{required:!0,message:"请选择流量激发活动",trigger:"blur"}]}},timeIdList:[],adivList:[],isadivInfo:!1,variable:[{name:"APP名称",label:"$APP_NAME$"},{name:"内容热点",label:"$CONTENT_HOT_SPOT$"},{name:"内容标签",label:"$CONTENT_LABEL$"},{name:"内容主题",label:"$CONTENT_SUBJECT$"}],cepEventIdVisible:!1,TimeForm:{weekMask:"",dayMask:"",minute10Mask:""},curAdivInfo:{},execution:1}},mounted(){this.getOptionData();var e=Object.assign({},this.CrmFrom.channelConf);this.CrmFrom=JSON.parse(JSON.stringify(this.channelNewData)),this.CrmFrom.channelConf=Object.assign({},{...e,...this.channelNewData.channelConf});var t=new Date,a=t.getDate()-1,i="0000000000000000000000000000000";this.TimeForm={weekMask:this.CrmFrom.channelConf.executeTimeWeek||"1111111",dayMask:this.CrmFrom.channelConf.executeTimeMonth||this.replaceStr(i,a),minute10Mask:this.CrmFrom.channelConf.executeTimeDay||"000000000000000011111111111111111111111100000000"},this.isadivInfo=!0},methods:{async getOptionData(){await Object(c["i"])(ot,{enumType:"iop_time_id"}).then(e=>{this.timeIdList=e})},getConfiguration(e){if(1!==e.zt){this.CrmFrom.channelConf={priorityOrder:0,ifHaveVar:!1};var t=new Date,a=t.getDate()-1,i="0000000000000000000000000000000";this.TimeForm={weekMask:"1111111",dayMask:this.replaceStr(i,a),minute10Mask:"000000000000000011111111111111111111111100000000"}}this.execution++,this.$refs.configurationSheet.lookSchedulingInfo(e.configid)},changeAid(e){var t="";this.adivList.forEach(a=>{e===a.adivId&&(t=a.adivName)}),this.CrmFrom.adivInfo=Object.assign({},this.CrmFrom.adivInfo,{adivId:e,adivName:t})},changeTime(){this.timeIdList.forEach(e=>{e.enumKey===this.CrmFrom.timeId&&(this.CrmFrom.timeName=e.enumValue)})},SubInstall(){var e=!0;return this.$refs.CrmFrom.validate(t=>{t?(this.$emit("saveChannelData",this.CrmFrom),e=!0):e=!1}),e},configGsheet(e){this.CrmFrom.channelConf=Object.assign(this.CrmFrom.channelConf,e),this.CrmFrom=JSON.parse(JSON.stringify(this.CrmFrom))},onChange(e){this.CrmFrom.channelConf.executeTimeDay=e.day,this.CrmFrom.channelConf.executeTimeMonth=e.Month,this.CrmFrom.channelConf.executeTimeWeek=e.week},SubEvents(){this.CrmFrom.channelConf.cepEventId=this.$refs.complexEvents.radio,this.CrmFrom.channelConf=Object.assign({},this.CrmFrom.channelConf),this.cepEventIdVisible=!1},getadivObj(e){this.curAdivInfo=e},replaceStr(e,t){const a=e.split("");return a[t]="1"===a[t]?"0":"1",a.join("")}},created(){}},ct=nt,mt=(a("519e"),a("113b9"),Object(b["a"])(ct,Me,Oe,!1,null,"427977b0",null)),dt=mt.exports,ut=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"100px",model:e.CrmFrom,rules:e.CrmFromRules}},[t("el-form-item",{attrs:{label:"运营位：",prop:"adivId"}},[t("el-select",{attrs:{placeholder:"请选择运营位"},on:{change:e.changeAid},model:{value:e.CrmFrom.adivId,callback:function(t){e.$set(e.CrmFrom,"adivId",t)},expression:"CrmFrom.adivId"}},e._l(e.adivList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"物料：",prop:"material"}},[t("el-input",{staticStyle:{width:"60%"},on:{focus:e.preMaterial},model:{value:e.CrmFrom.material,callback:function(t){e.$set(e.CrmFrom,"material",t)},expression:"CrmFrom.material"}}),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.preview}},[e._v(" 预览 ")])],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"产品价格",prop:"proPrice"}},[t("el-input",{staticStyle:{width:"60%"},model:{value:e.CrmFrom.proPrice,callback:function(t){e.$set(e.CrmFrom,"proPrice",t)},expression:"CrmFrom.proPrice"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"URL链接：",prop:"urlLink"}},[t("el-input",{staticStyle:{width:"60%"},model:{value:e.CrmFrom.urlLink,callback:function(t){e.$set(e.CrmFrom,"urlLink",t)},expression:"CrmFrom.urlLink"}})],1),t("el-form-item",{attrs:{label:"优先级：",prop:"priorityOrder"}},[t("div",{staticClass:"block"},[t("el-slider",{attrs:{"show-input":""},model:{value:e.CrmFrom.priorityOrder,callback:function(t){e.$set(e.CrmFrom,"priorityOrder",t)},expression:"CrmFrom.priorityOrder"}})],1)]),t("el-form-item",{attrs:{label:"时机选择："}},[t("el-select",{attrs:{placeholder:"请选择"},on:{click:e.changeTime},model:{value:e.CrmFrom.timeId,callback:function(t){e.$set(e.CrmFrom,"timeId",t)},expression:"CrmFrom.timeId"}},e._l(e.timeIdList,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"时机描述："}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":""},model:{value:e.CrmFrom.timeDistindes,callback:function(t){e.$set(e.CrmFrom,"timeDistindes",t)},expression:"CrmFrom.timeDistindes"}})],1),t("el-form-item",[t("el-button",{on:{click:e.SubInstall}},[e._v("保存当前设置")])],1)],1),!0===e.gHandIsShow?t("group-hand-dialog"):e._e()],1)},pt=[],ht=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"物料列表",visible:e.dialogVisible,width:"60%","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入搜索内容"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1),t("el-table",{staticStyle:{width:"100%"}},[t("el-table-column",{staticStyle:{width:"30%"},attrs:{label:"物料编码"}}),t("el-table-column",{staticStyle:{width:"30%"},attrs:{label:"物料名称"}}),t("el-table-column",{staticStyle:{width:"30%"},attrs:{label:"目标地址"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},vt=[],bt={name:"GroupHandDialog",data(){return{dialogVisible:!0}},methods:{}},ft=bt,Ct=Object(b["a"])(ft,ht,vt,!1,null,null,null),gt=Ct.exports;const yt=x["a"].common.getSysEnum,Dt=x["a"].common.queryAdivInfo;var It={props:["channelId","channelData"],components:{GroupHandDialog:gt},data(){return{CrmFrom:{adivId:null,material:null,proPrice:null,urlLink:null,priorityOrder:null,timeId:null,timeDistindes:null},CrmFromRules:{adivId:[{required:!0,message:"请选择运营位",trigger:"blur,change"}],material:[{required:!0,message:"请选择物料",trigger:"blur"}],urlLink:[{required:!0,message:"请输入URL链接",trigger:"blur"}]},timeIdList:[],adivList:[],gHandIsShow:!1}},mounted(){var e;this.CrmFrom=null!==(e=this.channelData)&&void 0!==e?e:this.CrmFrom,this.getOptionData()},methods:{getOptionData(){Object(c["i"])(Dt,{channelId:this.channelId}).then(e=>{this.adivList=e}),Object(c["i"])(yt,{enumType:"iop_time_id"}).then(e=>{this.timeIdList=e})},changeAid(){this.adivList.forEach(e=>{(this.CrmFrom.adivId=e.adivId)&&(this.CrmFrom.adivName=e.adivName)})},changeTime(){this.timeIdList.forEach(e=>{e.enumKey===this.CrmFrom.timeId&&(this.CrmFrom.timeName=e.enumValue)})},preMaterial(){this.gHandIsShow=!this.gHandIsShow},preview(){this.$alert("没有可预览的材料",{confirmButtonText:"确定"})},SubInstall(){this.$refs.CrmFrom.validate(e=>{e&&this.$emit("saveChannelData",this.CrmFrom)})}}},Ft=It,kt=Object(b["a"])(Ft,ut,pt,!1,null,"680b9977",null),St=kt.exports,xt=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"100px",model:e.CrmFrom,rules:e.CrmFromRules}},[t("el-form-item",{attrs:{label:"运营位：",prop:"adivId"}},[t("el-select",{attrs:{placeholder:"请选择运营位"},on:{change:e.changeAid},model:{value:e.CrmFrom.adivId,callback:function(t){e.$set(e.CrmFrom,"adivId",t)},expression:"CrmFrom.adivId"}},e._l(e.adivList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"物料：",prop:"material"}},[t("el-input",{staticStyle:{width:"60%"},on:{focus:e.preMaterial},model:{value:e.CrmFrom.material,callback:function(t){e.$set(e.CrmFrom,"material",t)},expression:"CrmFrom.material"}}),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.preview}},[e._v(" 预览 ")])],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"产品价格",prop:"proPrice"}},[t("el-input",{staticStyle:{width:"60%"},model:{value:e.CrmFrom.proPrice,callback:function(t){e.$set(e.CrmFrom,"proPrice",t)},expression:"CrmFrom.proPrice"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"URL链接：",prop:"urlLink"}},[t("el-input",{staticStyle:{width:"60%"},model:{value:e.CrmFrom.urlLink,callback:function(t){e.$set(e.CrmFrom,"urlLink",t)},expression:"CrmFrom.urlLink"}})],1),t("el-form-item",{attrs:{label:"优先级：",prop:"priorityOrder"}},[t("div",{staticClass:"block"},[t("el-slider",{attrs:{"show-input":""},model:{value:e.CrmFrom.priorityOrder,callback:function(t){e.$set(e.CrmFrom,"priorityOrder",t)},expression:"CrmFrom.priorityOrder"}})],1)]),t("el-form-item",{attrs:{label:"时机选择："}},[t("el-select",{attrs:{placeholder:"请选择"},on:{click:e.changeTime},model:{value:e.CrmFrom.timeId,callback:function(t){e.$set(e.CrmFrom,"timeId",t)},expression:"CrmFrom.timeId"}},e._l(e.timeIdList,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"时机描述："}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":""},model:{value:e.CrmFrom.timeDistindes,callback:function(t){e.$set(e.CrmFrom,"timeDistindes",t)},expression:"CrmFrom.timeDistindes"}})],1),t("el-form-item",[t("el-button",{on:{click:e.SubInstall}},[e._v("保存当前设置")])],1)],1),!0===e.gHandIsShow?t("group-hand-dialog"):e._e()],1)},_t=[];const Lt=x["a"].common.getSysEnum,Tt=x["a"].common.queryAdivInfo;var Nt={props:["channelId","channelData"],components:{GroupHandDialog:gt},data(){return{CrmFrom:{adivId:null,material:null,proPrice:null,urlLink:null,priorityOrder:null,timeId:null,timeDistindes:null},CrmFromRules:{adivId:[{required:!0,message:"请选择运营位",trigger:"blur,change"}],material:[{required:!0,message:"请选择物料",trigger:"blur"}],urlLink:[{required:!0,message:"请输入URL链接",trigger:"blur"}]},timeIdList:[],adivList:[],gHandIsShow:!1}},mounted(){var e;this.CrmFrom=null!==(e=this.channelData)&&void 0!==e?e:this.CrmFrom,this.getOptionData()},methods:{getOptionData(){Object(c["i"])(Tt,{channelId:this.channelId}).then(e=>{this.adivList=e}),Object(c["i"])(Lt,{enumType:"iop_time_id"}).then(e=>{this.timeIdList=e})},changeAid(){this.adivList.forEach(e=>{(this.CrmFrom.adivId=e.adivId)&&(this.CrmFrom.adivName=e.adivName)})},changeTime(){this.timeIdList.forEach(e=>{e.enumKey===this.CrmFrom.timeId&&(this.CrmFrom.timeName=e.enumValue)})},preMaterial(){this.gHandIsShow=!this.gHandIsShow},preview(){this.$alert("没有可预览的材料",{confirmButtonText:"确定"})},SubInstall(){this.$refs.CrmFrom.validate(e=>{e&&this.$emit("saveChannelData",this.CrmFrom)})}}},wt=Nt,Mt=Object(b["a"])(wt,xt,_t,!1,null,"3b521391",null),Ot=Mt.exports,Pt=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"130px",model:e.CrmFrom,rules:e.CrmFromRules}},[t("el-form-item",{attrs:{label:"端口号码：",prop:"adivId"}},[t("el-select",{attrs:{placeholder:"请选择端口号码"},on:{change:e.changeAid},model:{value:e.CrmFrom.adivId,callback:function(t){e.$set(e.CrmFrom,"adivId",t)},expression:"CrmFrom.adivId"}},e._l(e.adivList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1),t("el-form-item",{attrs:{label:"短信类型：",prop:"adivId"}},[t("el-select",{attrs:{placeholder:"请选择短信类型"},on:{change:e.changeAid},model:{value:e.CrmFrom.adivId,callback:function(t){e.$set(e.CrmFrom,"adivId",t)},expression:"CrmFrom.adivId"}},e._l(e.adivList,(function(e){return t("el-option",{key:e.adivId,attrs:{label:e.adivName,value:e.adivId}})})),1)],1),t("el-form-item",{attrs:{label:"短信用语：",prop:"channelConf.smsContent"}},[t("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":""},model:{value:e.CrmFrom.channelConf.smsContent,callback:function(t){e.$set(e.CrmFrom.channelConf,"smsContent",t)},expression:"CrmFrom.channelConf.smsContent"}})],1),t("el-form-item",{attrs:{label:"短信用语变量："}},[t("ul",{staticClass:"variableLabl"},e._l(e.variable,(function(a){return t("li",{key:a.label},[e._v(" "+e._s(a.name)+" ")])})),0)]),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"物料：",prop:"material"}},[t("el-input",{staticStyle:{width:"60%"},on:{focus:e.preMaterial},model:{value:e.CrmFrom.material,callback:function(t){e.$set(e.CrmFrom,"material",t)},expression:"CrmFrom.material"}}),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.preview}},[e._v(" 预览 ")])],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"产品价格",prop:"proPrice"}},[t("el-input",{staticStyle:{width:"60%"},model:{value:e.CrmFrom.proPrice,callback:function(t){e.$set(e.CrmFrom,"proPrice",t)},expression:"CrmFrom.proPrice"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"URL链接：",prop:"urlLink"}},[t("el-input",{staticStyle:{width:"60%"},model:{value:e.CrmFrom.urlLink,callback:function(t){e.$set(e.CrmFrom,"urlLink",t)},expression:"CrmFrom.urlLink"}})],1),t("el-form-item",{attrs:{label:"优先级：",prop:"priorityOrder"}},[t("div",{staticClass:"block"},[t("el-slider",{attrs:{"show-input":""},model:{value:e.CrmFrom.priorityOrder,callback:function(t){e.$set(e.CrmFrom,"priorityOrder",t)},expression:"CrmFrom.priorityOrder"}})],1)]),t("el-form-item",{attrs:{label:"时机选择："}},[t("el-select",{attrs:{placeholder:"请选择"},on:{click:e.changeTime},model:{value:e.CrmFrom.timeId,callback:function(t){e.$set(e.CrmFrom,"timeId",t)},expression:"CrmFrom.timeId"}},e._l(e.timeIdList,(function(e){return t("el-option",{key:e.enumKey,attrs:{label:e.enumValue,value:e.enumKey}})})),1)],1),t("el-form-item",{attrs:{label:"时机描述："}},[t("el-input",{attrs:{type:"textarea",maxlength:"240","show-word-limit":""},model:{value:e.CrmFrom.timeDistindes,callback:function(t){e.$set(e.CrmFrom,"timeDistindes",t)},expression:"CrmFrom.timeDistindes"}})],1),t("el-form-item",[t("el-button",{on:{click:e.SubInstall}},[e._v("保存当前设置")])],1)],1),!0===e.gHandIsShow?t("group-hand-dialog"):e._e()],1)},$t=[];const At=x["a"].common.getSysEnum,jt=x["a"].common.queryAdivInfo;var qt={props:["channelId","channelData"],components:{GroupHandDialog:gt},data(){return{CrmFrom:{adivId:null,material:null,proPrice:null,urlLink:null,priorityOrder:null,timeId:null,timeDistindes:null,channelConf:{}},CrmFromRules:{adivId:[{required:!0,message:"请选择运营位",trigger:"blur,change"}],material:[{required:!0,message:"请选择物料",trigger:"blur"}],urlLink:[{required:!0,message:"请输入URL链接",trigger:"blur"}],channelConf:{execContent:[{required:!0,message:"请输入推荐用语",trigger:"blur"}],smsContent:[{required:!0,message:"请输入短信用语",trigger:"blur"}]}},timeIdList:[],adivList:[],gHandIsShow:!1,variable:[{name:"APP名称",label:"$APP_NAME$"},{name:"内容热点",label:"$CONTENT_HOT_SPOT$"},{name:"内容标签",label:"$CONTENT_LABEL$"},{name:"内容主题",label:"$CONTENT_SUBJECT$"}]}},mounted(){var e;this.CrmFrom=null!==(e=this.channelData)&&void 0!==e?e:this.CrmFrom,this.getOptionData()},methods:{getOptionData(){Object(c["i"])(jt,{channelId:this.channelId}).then(e=>{this.adivList=e}),Object(c["i"])(At,{enumType:"iop_time_id"}).then(e=>{this.timeIdList=e})},changeAid(){this.adivList.forEach(e=>{(this.CrmFrom.adivId=e.adivId)&&(this.CrmFrom.adivName=e.adivName)})},changeTime(){this.timeIdList.forEach(e=>{e.enumKey===this.CrmFrom.timeId&&(this.CrmFrom.timeName=e.enumValue)})},preMaterial(){this.gHandIsShow=!this.gHandIsShow},preview(){this.$alert("没有可预览的材料",{confirmButtonText:"确定"})},SubInstall(){this.$refs.CrmFrom.validate(e=>{e&&this.$emit("saveChannelData",this.CrmFrom)})}}},Et=qt,Vt=(a("1e83"),Object(b["a"])(Et,Pt,$t,!1,null,"28e0c4bf",null)),zt=Vt.exports,Bt=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"CrmFrom",attrs:{"label-width":"150px",model:e.CrmFrom,rules:e.CrmFromRules}},[e.isadivInfo?t("adivInfo",{attrs:{CrmFrom:e.CrmFrom.adivInfo,FromData:e.CrmFrom},on:{"update:CrmFrom":function(t){return e.$set(e.CrmFrom,"adivInfo",t)},"update:crm-from":function(t){return e.$set(e.CrmFrom,"adivInfo",t)},getConfiguration:e.getConfiguration}}):e._e(),t("el-form-item",{attrs:{label:"优先级：",prop:"channelConf.priorityOrder"}},[t("div",{staticClass:"block"},[t("el-slider",{attrs:{"show-input":""},model:{value:e.CrmFrom.channelConf.priorityOrder,callback:function(t){e.$set(e.CrmFrom.channelConf,"priorityOrder",t)},expression:"CrmFrom.channelConf.priorityOrder"}})],1)]),e.isadivInfo?t("configurationSheet",{ref:"configurationSheet",attrs:{CrmFrom:e.CrmFrom.channelConf},on:{configGsheet:e.configGsheet,"update:CrmFrom":function(t){return e.$set(e.CrmFrom,"channelConf",t)},"update:crm-from":function(t){return e.$set(e.CrmFrom,"channelConf",t)}}}):e._e()],1)],1)},Rt=[];const Ut=x["a"].common.getSysEnum;var Gt={components:{configurationSheet:ze,adivInfo:et},props:["channelNewData"],data(){return{CrmFrom:{adivInfo:{},channelConf:{},channelId:"",channelName:""},CrmFromRules:{adivInfo:{adivId:[{required:!0,message:"请选择运营位",trigger:"change"}]},channelConf:{execContent:[{required:!0,message:"请输入推荐用语",trigger:"blur"}],priorityOrder:[{required:!0,message:"请输入优先等级",trigger:"blur"}],ceshi:[{required:!0,message:"请输入优先等级",trigger:"blur"}]}},timeIdList:[],adivList:[],isadivInfo:!1}},mounted(){this.getOptionData(),this.CrmFrom=JSON.parse(JSON.stringify(this.channelNewData)),this.isadivInfo=!0},methods:{async getOptionData(){await Object(c["i"])(Ut,{enumType:"iop_time_id"}).then(e=>{this.timeIdList=e})},getConfiguration(e){1!==e.zt&&(this.CrmFrom.channelConf={priorityOrder:0}),this.$refs.configurationSheet.lookSchedulingInfo(e.configid)},changeAid(e){var t="";this.adivList.forEach(a=>{e===a.adivId&&(t=a.adivName)}),this.CrmFrom.adivInfo=Object.assign({},this.CrmFrom.adivInfo,{adivId:e,adivName:t})},changeTime(){this.timeIdList.forEach(e=>{e.enumKey===this.CrmFrom.timeId&&(this.CrmFrom.timeName=e.enumValue)})},SubInstall(){var e=!0;return this.$refs.CrmFrom.validate(t=>{t?(this.$emit("saveChannelData",this.CrmFrom),e=!0):e=!1}),e},configGsheet(e){this.CrmFrom.channelConf=Object.assign(this.CrmFrom.channelConf,e),this.CrmFrom=JSON.parse(JSON.stringify(this.CrmFrom))}},created(){}},Wt=Gt,Ht=Object(b["a"])(Wt,Bt,Rt,!1,null,"132c910f",null),Kt=Ht.exports,Jt=a("d39c"),Qt={components:{MpDialog:I,SelectButton:B,CrmOperationDesk:Y,MarketingCall:re,levelCall:he,remind:Fe,colorPlat:we,ShortMessage:dt,GroupHand:St,SparkAlliance:Ot,Frequenter:zt,DefaultItem:Kt},data(){return{visible:!1,SelectBuList:[],editableTabsValue:"",editableTabsInfo:{},editableTabs:[],CRMFrom:{},currentView:[],channelData:[],tabState:!1}},computed:{...Object(k["b"])("MarkPl",["getNodeData","getNodeDataId","getNodeGroupId","getNodeSameTypeData"])},created(){},methods:{async getChannelList(){await Object(c["i"])(Jt["a"].seapi.getOnlineChannels,{onlineStatus:"1"}).then(e=>{this.SelectBuList=[{channelCode:"601",channelId:"601",channelName:"CRM营业前台"}];let t=[];for(var a in this.getNodeData)t.push(this.getNodeData[a]);if(t.length>0){this.editableTabs=t;let e=this.editableTabs[0];this.SelectBuList.forEach(e=>{this.editableTabs.forEach(t=>{t.channelId===e.channelId&&(e.checked=!0)})}),t.map(e=>{this.currentView.push(Object(A["a"])(e.channelId))}),this.SelectBuList=JSON.parse(JSON.stringify(this.SelectBuList)),this.editableTabsValue=e.channelId}})},showMpDialog(){this.visible=!0,this.getChannelList()},saveChannelData(e){var t=this.editableTabs.map(t=>t.channelId===e.channelId?e:t);this.editableTabs=t},CurrentSettings(){return void 0===this.$refs["Component"+this.editableTabsValue]||this.$refs["Component"+this.editableTabsValue][0].SubInstall()},ChannelSubmit(){if(!this.CurrentSettings())return void this.$alert("请先完善渠道配置项信息!","添加节点失败",{confirmButtonText:"确定",customClass:"errorPrompt"});let e=this.editableTabs.map(e=>e.channelName);this.$store.commit("MarkPl/fnUpdateActiveNodeList",e),this.$store.commit("MarkPl/fuUpdateSceneNodeData",this.editableTabs),this.visible=!1,this.DialogClose();var t=!1;if(0===this.getNodeSameTypeData("4").length&&t){var a=JSON.parse(JSON.stringify(this.$store.state.MarkPl.ActiveNodeList)),i=Object(r["i"])("[[4]]");if("4"!==a[a.length-1][0].id){this.$store.commit("MarkPl/fnActiveNodeList",[...a,...i]);var s=JSON.parse(JSON.stringify(this.$store.state.MarkPl.SceneNodeData)),l=Object(r["d"])(i);this.$store.commit("MarkPl/fnSceneNodeData",[...s,...l])}}},DialogClose(){this.$emit("DialogClose")},TabClick(e){this.tabState},beforeLeave(){return this.tabState=!1,void 0===this.$refs["Component"+this.editableTabsValue]||0===this.$refs["Component"+this.editableTabsValue].length||(this.CurrentSettings()?(this.tabState=!0,!0):(this.$message.error("请先完成当前渠道配置项信息"),!1))},addTab(e){if(!this.CurrentSettings())return this.$message.error("请先完成当前渠道配置项信息"),void(e.channelId!==this.editableTabsValue&&(e.checked=!1));let t=this.editableTabs.filter(t=>t.channelId===e.channelId);if(t.length>0)return;let a=e.channelId;this.editableTabs.push({channelId:e.channelId,channelName:e.channelName,adivInfo:{},channelConf:{}}),this.editableTabsValue=a,this.editableTabsInfo=e,this.currentView.push(Object(A["a"])(a))},removeTab(e){let t=this.editableTabs,a=this.editableTabsValue;a===e&&t.forEach((i,s)=>{if(i.channelId===e){let e=t[s+1]||t[s-1];e&&(a=e.channelId)}}),this.editableTabs=t.filter(t=>t.channelId!==e),this.currentView=this.editableTabs.map(e=>Object(A["a"])(e.channelId)),0===this.editableTabs.length&&(a="0"),this.editableTabsValue=a,this.$refs["Selectbutton"].Unhighlight(e)}}},Yt=Qt,Zt=(a("ca38"),a("0835"),Object(b["a"])(Yt,P,$,!1,null,"37049281",null)),Xt=Zt.exports,ea=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ProductDialog"},[t("mp-dialog",{attrs:{title:"选客户",visible:e.visible,width:"760px",IsAscertain:!1},on:{"update:visible":function(t){e.visible=t},DialogClose:e.DialogClose}},[t("div",{attrs:{slot:"Dialogcontent"},slot:"Dialogcontent"},[t("label-screen",{attrs:{title:"已选客户群",ismutex:!1,isPulldown:!1,Label:e.Label,Default:e.LabelDefault},on:{close:e.handleClose}}),t("div",{staticClass:"search_box",staticStyle:{width:"auto"}},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入客户群名称/编号"},model:{value:e.queryFrom.keyWords,callback:function(t){e.$set(e.queryFrom,"keyWords","string"===typeof t?t.trim():t)},expression:"queryFrom.keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.getCustomerBaseList},slot:"suffix"})])],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"Cust"},[t("div",{staticClass:"CustList"},e._l(e.CustomerBaseList,(function(a){return t("div",{key:a.customGroupId,staticClass:"Mt",on:{click:function(t){return e.CustomerClick(a)}}},[t("customer-list",{attrs:{Default:e.BaseDefault,CustomerData:a,isSelect:-1!==e.CustomerisSelect.indexOf(a.customGroupId)},on:{PushContent:e.PushContent}})],1)})),0)]),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":e.pageData.pageSizeList,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("div",{staticClass:"Product-button"},[t("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.CustomerSub}},[e._v("确定")])],1)],1)]),t("chocustomer-detail",{ref:"chocustomerDetail"})],1)},ta=[],aa=function(){var e=this,t=e._self._c;return t("div",{staticClass:"customer",class:e.isSelect?"created":""},[t("div",{staticClass:"customer-flex"},[t("div",{staticClass:"title"},[t("span",[e._v(e._s(e.CustomerData[e.Default.title]))])]),t("div",{class:3===e.CustomerData.updateCycle?"type":2===e.CustomerData.updateCycle?"updatetype2":"updatetype1"},[e._v(" "+e._s(e.typeEumn[Number(e.CustomerData.updateCycle)-1])+" ")])]),t("div",{staticClass:"customer-flex line32"},[t("span",[e._v(" 客户规模："+e._s(e.CustomerData[e.Default.scale])+" ")])]),t("div",{staticClass:"customer-flex"},[t("div",[t("span",[e._v("创建人："+e._s(e.CustomerData[e.Default.founder]))])]),t("div",{staticClass:"PushContent",on:{click:function(t){return t.stopPropagation(),e.PushContent.apply(null,arguments)}}},[t("span",[e._v("详情>")])])])])},ia=[],sa={props:{isSelect:{type:Boolean,default:()=>!1},CustomerData:{type:Object,default:()=>({})},Default:{type:Object,default:()=>({id:"id",title:"title",scale:"scale",founder:"Founder",type:"type"})}},data(){return{typeEumn:["一次性","月","日"]}},methods:{PushContent(){this.$emit("PushContent",this.CustomerData)}}},ra=sa,la=(a("7ad6"),Object(b["a"])(ra,aa,ia,!1,null,"1b0882fb",null)),oa=la.exports,na=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"Selected"},[e._m(0),t("div",{staticClass:"title label"},[t("span",[e._v(e._s(e.title))])]),t("div",{staticClass:"label"},e._l(e.Label,(function(a){return t("el-tag",{key:a[e.Default.id],staticClass:"tag-success",attrs:{type:"success",closable:"","disable-transitions":""},on:{close:function(t){return e.handleClose(a)}}},[e._v(" "+e._s(a[e.Default.value])+" ")])})),1)])])},ca=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"Selected-icon label"},[t("i",{staticClass:"iconfont icongonggongtubiao-huitiaoliangcedianzhui"})])}],ma={props:{Label:{type:Array,default:()=>[]},Default:{type:Object,default:()=>({id:"id",value:"value"})},isPulldown:{type:Boolean,default:()=>!0},ismutex:{type:Boolean,default:()=>!0},title:{type:String,default:()=>"已选产品"}},data(){return{SetMeal:!1}},methods:{handleClose(e){this.$emit("close",e)}},created(){}},da=ma,ua=(a("a917"),a("4e90"),Object(b["a"])(da,na,ca,!1,null,"33341a1e",null)),pa=ua.exports,ha=function(){var e=this,t=e._self._c;return t("div",[t("mp-dialog",{attrs:{title:"客户群详情",visible:e.visible,width:"760px",IsAscertain:!1,isReturn:!0},on:{"update:visible":function(t){e.visible=t},"dialog-retrun":e.DialogRetrun}},[t("div",{attrs:{slot:"Dialogcontent"},slot:"Dialogcontent"},[t("div",[t("div",{staticClass:"productContent"},[t("span",[e._v(e._s(e.DetailsForm.CUSTOM_GROUP_NAME))])]),t("div",{staticClass:"tableTitle"},[t("h3",[e._v("基础信息")])]),t("vertical-table",{attrs:{tableData:e.tableData,DetailsFrom:e.DetailsForm,tableStyle:{width:"100%"}}})],1)])])],1)},va=[],ba=a("9e21"),fa=(a("4328"),{components:{MpDialog:I,VerticalTable:ba["a"]},data(){return{visible:!1,tableData:[{key:"客户群编码：",value:"customGroupId"},{key:"客户群名称：",value:"customGroupName"},{key:"客户群描述：",value:"customGroupDesc",iscolspan:!0},{key:"客户群创建人：",value:"createUserId"},{key:"客户群周期：",value:"updateCycle"},{key:"客户群创建时间：",value:"createTime"},{key:"客户群失效日期：",value:"failTime"},{key:"客户群状态：",value:"customStatusId"},{key:"客户群接收日期：",value:"effectiveTime"},{key:"客户群规模：\t",value:"customNum"},{key:"有无带属性：",value:"hasCustomAttrs"},{key:"属性名称：",value:"customAttrs",iscolspan:!0}],DetailsForm:{},custGroupId:""}},methods:{showMpDialog(e){this.custGroupId=e,this.visible=!0,this.viewCustGroupDetail()},async viewCustGroupDetail(){await Object(c["i"])(_["a"].mpapi.viewCustGroupDetail,{custgroupId:this.custGroupId}).then(e=>{this.DetailsForm=e})},DialogRetrun(){this.visible=!1}}}),Ca=fa,ga=(a("1dc8"),Object(b["a"])(Ca,ha,va,!1,null,"03d86c35",null)),ya=ga.exports,Da={name:"customerDialog",components:{MpDialog:I,LabelScreen:pa,CustomerList:oa,ChocustomerDetail:ya},data(){return{visible:!1,input:"",CustomerBaseList:[],BaseDefault:{id:"customGroupId",title:"customGroupName",scale:"customNum",founder:"createUserName",type:"custGroupUpdateCycle"},queryFrom:{keyWords:void 0,custType:3},pageData:{currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0},Label:[],LabelDefault:{id:"customGroupId",value:"customGroupName"},CustomerisSelect:[],loading:!0,isMultiple:!0}},computed:{...Object(k["b"])("MarkPl",["getNodeData"]),baseInformation:function(){return this.$store.state.MarkPl.ProcessData}},created(){},mounted(){},methods:{async getCustomerBaseList(){this.loading=!0,await Object(c["i"])(_["a"].mpapi.getMoreMyCustom,{...this.queryFrom,current:this.pageData.currentPage,size:this.pageData.pageSize}).then(e=>{this.CustomerBaseList=e.records,this.pageData.total=e.total,this.loading=!1})},handleSizeChange(e){this.pageData.pageSize=e,this.getCustomerBaseList()},handleCurrentChange(e){this.pageData.currentPage=e,this.getCustomerBaseList()},CustomerClick(e){this.isMultiple?(this.Label=this.Label.filter(t=>t.customGroupId!==e.customGroupId),this.Label.push(e),this.CustomerisSelect=this.Label.map(e=>e.customGroupId)):(this.CustomerisSelect=[e.customGroupId],this.Label=[e])},handleClose(e){this.Label.splice(this.Label.indexOf(e),1),this.CustomerisSelect.splice(this.CustomerisSelect.indexOf(e.customGroupId),1)},showMpDialog(){this.isMultiple=this.baseInformation.isCheckboxCust,"[]"!==JSON.stringify(this.getNodeData)&&(this.Label=JSON.parse(JSON.stringify(this.getNodeData)),this.CustomerisSelect=this.Label.map(e=>e.customGroupId)),this.getCustomerBaseList(),this.visible=!0},PushContent(e){this.$refs["chocustomerDetail"].showMpDialog(e.customGroupId)},CustomerSub(){if(this.Label.length>0){var e=this.Label.map(e=>e.customGroupName);this.$store.commit("MarkPl/fnUpdateActiveNodeList",e),this.$store.commit("MarkPl/fuUpdateSceneNodeData",this.Label),this.visible=!1,this.$emit("DialogClose")}else this.$message.error("请选择客户群")},DialogClose(){this.$store.commit("MarkPl/fnUpdateActiveNodeList",[]),this.$store.commit("MarkPl/fuUpdateSceneNodeData",[]),this.$emit("DialogClose")}}},Ia=Da,Fa=(a("f79d"),a("cb11"),Object(b["a"])(Ia,ea,ta,!1,null,"2c2abb16",null)),ka=Fa.exports,Sa=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ProductDialog"},[t("mp-dialog",{attrs:{TabsNav:e.TabsNav,IsAscertain:!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t},"tabs-click":e.TabsSwitch,DialogClose:e.DialogClose}},[t("div",{attrs:{slot:"Dialogcontent"},slot:"Dialogcontent"},[t("label-screen",{attrs:{Label:e.Label,Default:e.Default},on:{close:e.handleClose}}),t("div",{directives:[{name:"show",rawName:"v-show",value:"product"==e.Current,expression:"Current == 'product'"}]},[t("div",{staticClass:"search"},[t("div",{staticClass:"search_box",staticStyle:{width:"auto"}},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticClass:"input-search",attrs:{placeholder:"请输入内容编号/名称"},model:{value:e.ConditionFrom.keyWords,callback:function(t){e.$set(e.ConditionFrom,"keyWords","string"===typeof t?t.trim():t)},expression:"ConditionFrom.keyWords"}},[t("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.getProductListByKeyword},slot:"suffix"})])],1),t("div",{staticClass:"screen",on:{click:function(t){e.ScreenLabelstate=!e.ScreenLabelstate}}},[t("span",[e._v("更多筛选")]),t("i",{staticClass:"el-icon-arrow-down"})])]),t("el-collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.ScreenLabelstate,expression:"ScreenLabelstate"}],staticClass:"ScreenLabel"},[t("div",{staticClass:"category"},[t("query-form-cell",{attrs:{list:e.QueryFormCell,defaultSizeForm:e.sizeForm},on:{queryForm:e.QuerySelect}})],1)])]),t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"Mp-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"calc(100vh - 470px)"},on:{"row-click":e.AddProduct}},[t("el-table-column",{attrs:{type:"index",label:"序号"}}),t("el-table-column",{attrs:{prop:"date",label:"产品编号及名称","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"pointer",on:{click:function(t){return e.DetailsClick(a.row)}}},[t("p",{staticClass:"color2F8"},[e._v(" "+e._s(a.row.planName)+" ")]),t("p",{staticClass:"color2F8"},[e._v(" "+e._s(a.row.planId)+" ")])])]}}])}),t("el-table-column",{attrs:{prop:"typeName",label:"产品类别"}}),t("el-table-column",{attrs:{prop:"planSrvTypeName",label:"产品类型"}}),t("el-table-column",{attrs:{prop:"planStartdate",label:"生效时间","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"planEnddate",label:"失效时间","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{label:"操作"}},[[t("el-button",{attrs:{type:"text",size:"small"}},[e._v("添加")])]],2)],1)],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-sizes":e.pageData.pageSizeList,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("div",{staticClass:"Product-button"},[t("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.ProductSub}},[e._v("确定")])],1)],1)]),t("mp-dialog",{attrs:{title:"产品详情",isReturn:!0,isClose:!1,visible:e.ProductDetails,IsAscertain:!1},on:{"update:visible":function(t){e.ProductDetails=t},"dialog-retrun":e.DialogRetrun}},[t("div",{attrs:{slot:"Dialogcontent"},slot:"Dialogcontent"},[e.ProductDetails?t("product-content",{attrs:{planId:e.planId}}):e._e()],1)])],1)},xa=[],_a=a("108d"),La=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"productContent"}),e._m(0),t("vertical-table",{attrs:{tableData:e.tableData,DetailsFrom:e.DetailForm,showByRow:!0,tableStyle:{width:"100%"}}})],1)},Ta=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tableTitle"},[t("h3",[e._v("基础信息")])])}],Na={props:{productCode:{type:String,default:()=>""}},components:{VerticalTable:ba["a"]},data(){return{tableData:[{key:"场景名称：",value:"sceneName"},{key:"产品编码：",value:"productCode"},{key:"所属平台编码：",value:"platformCode"},{key:"产品名称：",value:"productName"},{key:"一级业务分类：",value:"firstBusinessClass"},{key:"二级业务分类：",value:"secondBusinessClass"},{key:"三级业务分类：",value:"thirdBusinessClass"},{key:"产品描述：",value:"productDesc"},{key:"产品类别：",value:"productType"},{key:"信息类别：",value:"informationType"},{key:"语种：",value:"language"},{key:"作者：",value:"author"},{key:"WAP方式：",value:"wapUrl",iscolspan:!0},{key:"WWW方式：",value:"wwwUrl",iscolspan:!0},{key:"客户端方式：",value:"clientUrl",iscolspan:!0},{key:"获取路径：",value:"url",iscolspan:!0},{key:"计费方式：",value:"billingMode"},{key:"计费值：",value:"billingValue"},{key:"适用范围：",value:"scope"},{key:"提供商标识：",value:"vendor"},{key:"发布时间：",value:"releaseTime"},{key:"更新时间：",value:"updateTime"},{key:"有效期：",value:"validPeriod"},{key:"发布状态：",vclientShortUrlalue:"releaseStatus"},{key:"适用操作系统：",value:"osType"},{key:"描述性标签：",value:"descriptiveLabel"},{key:"统计型标签：",value:"statisticalLabel"},{key:"精品分类：",value:"qualityClass"},{key:"限免生效时间：",value:"freeLimitStartTime"},{key:"限免失效时间：",value:"freeLimitEndTime"},{key:"推荐用语：",value:"recommendTerms",iscolspan:!0},{key:"推荐用语(热门视频):",value:"recommendTermsForVideo",iscolspan:!0},{key:"推荐用语(热门短视频):",value:"recommendTermsForSVideo",iscolspan:!0},{key:"热门综合前50名：",value:"top50Rank",iscolspan:!0},{key:"热门短视频前50名：",value:"top50RankForShortVideo",iscolspan:!0},{key:"WAPURL短地址：",value:"wapShortUrl",iscolspan:!0},{key:"客户端URL短地址：",value:"clientShortUrl",iscolspan:!0},{key:"WWWURL短地址：",value:"wwwShortUrl",iscolspan:!0}],DetailForm:{}}},created(){this.getqueryDetail()},methods:{async getqueryDetail(){await Object(c["i"])(_["a"].mpapi.queryConentDetailById,{productCode:this.productCode}).then(e=>{this.DetailForm=e})}}},wa=Na,Ma=(a("d3dc"),Object(b["a"])(wa,La,Ta,!1,null,"51e5d3fc",null)),Oa=(Ma.exports,function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"productContent"},[t("span",[e._v(e._s(e.DetailForm.PLAN_NAME||""))])]),e._m(0),t("vertical-table",{attrs:{tableData:e.tableData,DetailsFrom:e.DetailForm,tableStyle:{width:"100%"}}})],1)}),Pa=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tableTitle"},[t("h3",[e._v("基础信息")])])}],$a={props:{planId:{type:String,default:()=>""}},components:{VerticalTable:ba["a"]},data(){return{tableData:[{key:"单产品编码：",value:"planId"},{key:"单产品名称：",value:"planName"},{key:"生效时间：",value:"planStartDate"},{key:"单产品编码：",value:"planId"},{key:"失效时间：",value:"planEndDate"},{key:"产品类别：",value:"planType"},{key:"状态：",value:"status"},{key:"产品类型：",value:"planSrvType"},{key:"资费：",value:"productCharges"},{key:"描述：",value:"planDesc",iscolspan:!0},{key:"推荐用语：",value:"planComment",iscolspan:!0}],AdaptiveChannel:[],DetailForm:{}}},mounted(){this.getqueryDetail()},methods:{async getqueryDetail(){await Object(c["i"])(_["a"].mpapi.queryDetail,{planId:this.planId}).then(e=>{this.DetailForm=e})}}},Aa=$a,ja=(a("8341"),Object(b["a"])(Aa,Oa,Pa,!1,null,"77b8ea64",null)),qa=ja.exports,Ea={components:{MpDialog:I,LabelScreen:pa,ProductContent:qa,QueryFormCell:_a["a"]},data(){return{Current:"product",visible:!1,productSelectType:!0,TabsNav:{data:[{id:"1",label:"选产品",value:"product"}],default:"1"},Label:[],tableData:[],Default:{id:"planId",value:"planName"},QueryFormCell:[{label:"产品类别",values:[{label:"不限",value:""}],isDate:!1},{label:"产品类型",values:[{label:"不限",value:""}],isDate:!1}],sizeForm:{radioModel:["",""]},input:"",ContentData:[],radio:"",checkDataArr:[],checkIds:[],ConditionFrom:{channelId:"",isEliminateRule:"",keyWords:"",current:1,planIsOptimization:"",planClass:1,planSrvType:void 0,planTypeId:void 0},pageData:{currentPage:1,pageSize:10,pageSizeList:[10,20,30,40],total:0},ScreenLabelstate:!1,ProductDetails:!1,ContentDetails:!1,planId:"",productCode:"",loading:!1,ContenttotalSize:0,ContentFrom:{productName:"",productType:"",status:""},currentData:""}},computed:{...Object(k["b"])("MarkPl",["getNodeData"]),baseInformation:function(){return this.$store.state.MarkPl.ProcessData}},created(){if("{}"!==JSON.stringify(this.getNodeData))for(let e in this.getNodeData)this.Label.push(this.getNodeData[e]);this.Label.length>1&&(this.productSelectType=!0),this.getProductList(),this.queryDigitalProductContents(),this.queryPlanTypes()},methods:{async queryPlanTypes(){await Object(c["i"])(_["a"].mpapi.queryPlanTypes).then(e=>{e.plan_type.map(e=>{this.QueryFormCell[0].values.push({label:e.enumValue,value:e.enumKey})}),e.plan_srv_type.map(e=>{this.QueryFormCell[1].values.push({label:e.enumValue,value:e.enumKey})})})},async getProductList(){this.loading=!0,await Object(c["i"])(_["a"].mpapi.queryPlansByCondition,{...this.ConditionFrom,current:this.pageData.currentPage,size:this.pageData.pageSize}).then(e=>{this.tableData=e.records,this.pageData.total=e.total,this.loading=!1})},getProductListByKeyword(){this.pageData.currentPage=1,this.getProductList()},async queryDigitalProductContents(){this.loading=!0,await Object(c["i"])(_["a"].mpapi.queryDigitalProductContents,{...this.ContentFrom,current:this.pageData.currentPage,size:this.pageData.pageSize}).then(e=>{this.ContentData=e.records,this.ContenttotalSize=e.total,this.loading=!1})},queryDigitalProductContentsByKeyword(){this.pageData.currentPage=1,this.queryDigitalProductContents()},QuerySelect(e){this.ConditionFrom.planTypeId=e.form.radioModel[0],this.ConditionFrom.planSrvType=e.form.radioModel[1],this.getProductList()},handleSizeChange(e){this.pageData.pageSize=e,this.getProductList()},handleCurrentChange(e){this.pageData.currentPage=e,this.getProductList()},handleSizeChangeContent(e){this.pageData.pageSize=e,this.queryDigitalProductContents()},handleCurrentChangeContent(e){this.pageData.pageSize=e,this.queryDigitalProductContents()},DataRestore(){this.Current="product",this.visible=!1,this.ProductDetails=!1,this.ContentDetails=!1,this.TabsNav={data:[{id:"1",label:"选产品",value:"product"},{id:"2",label:"选内容",value:"content"}],default:"1"}},showMpDialog(){this.productSelectType=this.baseInformation.isCheckboxPro,this.visible=!0},TabsSwitch(e){let t={...this.TabsNav};t.default=e.id,this.TabsNav={...t},this.Current=e.value},handleClose(e){this.Label.splice(this.Label.indexOf(e),1),this.radio=""},ProductSub(){let e=[];this.Label.length>0?(this.$store.commit("MarkPl/fuUpdateSceneNodeData",this.Label),this.Label.forEach(t=>{e.push(t.planName)}),this.$store.commit("MarkPl/fnUpdateActiveNodeList",e),this.$emit("ProductSub",this.Label[0]),this.DialogClose(),this.visible=!1):this.$message.error("请选择产品")},DialogClose(){this.$emit("DialogClose")},AddProduct(e){switch(this.Current){case"product":this.productSelect(e,"planId","planName");break;case"productPackage":this.productSelect(e,"planId","planName");break;case"content":this.productSelect(e,"productCode","productName");break}},productSelect(e,t,a){this.currentData!==this.Current&&(this.Label=[]),this.currentData=JSON.parse(JSON.stringify(this.Current));let i={planId:e[t],planName:e[a]};this.productSelectType?(this.Label=this.Label.filter(e=>e.planId!==i.planId),this.Label.push(i)):(this.Label=[i],this.radio=i.planId)},DetailsClick(e){this.planId=e.planId,this.visible=!1,this.ProductDetails=!0},DetailsClickContent(e){this.productCode=e.productCode,this.visible=!1,this.ContentDetails=!0},DetailsContentRetrun(){this.ContentDetails=!1,this.visible=!0},DialogRetrun(){this.ProductDetails=!1,this.visible=!0}}},Va=Ea,za=(a("b11e"),a("166c"),Object(b["a"])(Va,Sa,xa,!1,null,"162648c9",null)),Ba=za.exports,Ra=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ActiveNode"},e._l(e.ActiveNode,(function(a,i){return t("ul",{key:i,staticClass:"lavender-box"},e._l(a,(function(s,r){return t("li",{key:r,class:`${e.Arrow(a,e.ActiveNode[i+1])} ${s.className}`,on:{click:function(t){return t.stopPropagation(),e.NodeClick(s,t,i,r)}}},[t("div",{staticClass:"lavender-header-after"}),t("div",{staticClass:"lavender-header"},[t("el-checkbox",{nativeOn:{click:function(t){return e.SkipProgress(t)}},model:{value:s.checked,callback:function(t){e.$set(s,"checked",t)},expression:"data.checked"}},[t("span",[e._v(e._s(s.label))])]),t("i",{staticClass:"el-icon-more"})],1),t("div",{staticClass:"ArrowBottom"}),t("div",[t("span",[e._v(e._s(s.content))])])])})),0)})),0)},Ua=[],Ga={name:"ActiveNode",props:{ActiveNode:{type:Array,default:()=>[]}},computed:{Arrow(){return function(e,t){return void 0===t?"":e.length===t.length?"arrow1":"arrow"+t.length}}},data(){return{checked:!1,index:0,index1:0}},methods:{NodeClick(e,t,a,i){t.stopPropagation(),this.index=a,this.index1=i,this.$emit("Node-click",e)},SkipProgress(e){"INPUT"!==e.target.tagName||e.stopPropagation()},cancelChecked(){this.ActiveNode[this.index][this.index1].checked=!1}},created(){}},Wa=Ga,Ha=(a("8213"),a("a351"),a("61f3"),Object(b["a"])(Wa,Ra,Ua,!1,null,"24a1cac4",null)),Ka=Ha.exports,Ja={components:{ActiveNode:Ka,ProductDialog:Ba,CustomerDialog:ka,ChannelDialog:Xt,ChannelBaseDialog:O},data(){return{MultiwaveList:{example_type:"1",example_content:"[[1], [2], [3]]",CAMPSEG_NAME:"产品导向最简流程",isOpenProcess:!0,isCheckboxPro:!0,isCheckboxCust:!0,isCheckboxChan:!0},Componentstate:{productDialog:!1,customerDialog:!1,channelDialog:!1,multiwaveDdialog:!1},chBaseDdialog:!1,baseCampInfo:{},childrenSchemes:[],componentKey:1}},computed:{ActiveNodeList:function(){return this.$store.state.MarkPl.ActiveNodeList}},created(){},mounted(){this.ActiveNodeCase()},methods:{ActiveNodeCase(){this.$store.commit("MarkPl/fnActiveNodeList",Object(r["i"])(this.MultiwaveList.example_content)),this.$store.commit("MarkPl/fnSceneNodeData",Object(r["d"])(this.ActiveNodeList))},nodeSave(e){this.componentKey++,this.chBaseDdialog=!0,this.$nextTick().then(()=>{this.$refs.chBaseDdialog.showMpDialog(e)})},NodeClick(e){this.$store.commit("MarkPl/fnCurrentNode",e);let t=Object(r["c"])(this.ActiveNodeList,e);t?this.$alert(`请先${t.label}！`,"配置失败",{confirmButtonText:"确定",customClass:"errorPrompt"}):(this.$set(e,"checked",!0),this.Componentstate[e.assembly]=!0,this.$nextTick().then(()=>{this.$refs[e.assembly].showMpDialog()}))},DialogClose(){var e=this.$store.state.MarkPl.CurrentNode;this.Componentstate[e.assembly]=!1,this.$refs.activeNode.cancelChecked()},DialogClosebase(){this.chBaseDdialog=!1}}},Qa=Ja,Ya=(a("4d67"),Object(b["a"])(Qa,i,s,!1,null,"106d761e",null));t["default"]=Ya.exports},"31b1":function(e,t,a){"use strict";const i="/plan-svc/api/action",s="/plan-svc/action",r="/approve-svc/",l="/element-svc/";t["a"]={channel:{queryIopTemplate:i+"/tactics/tacticsCreate/queryIopTemplate",queryTopics:i+"/topic/queryTopics",getTemplateData:r+"jx/cmpApprovalProcessConf/getApproveConfig",getApproveConfig:r+"cmpApprovalProcessConf/getApproveConfig",getNextApprovers:r+"jx/cmpApproveProcessInstance/getNodeApprover",saveChannel:i+"/tactics/tacticsCreate/save",deleteCustom:i+"/custgroup/custGroupManager/deleteCustom",getMoreMyCustom:i+"/custgroup/custGroupManager/getMoreMyCustom",viewCustGroupDetail:i+"/custgroup/custGroupManager/viewCustGroupDetail",queryMmsTemplates:s+"/mmsTemplates/queryMmsTemplates",deleteMmsTemplateLists:s+"/mmsTemplates/createTactics/deleteMmsTemplateLists",updateMmsTemplate:s+"/mmsTemplates/updateMmsTemplate",smsContentBatchDel:i+"/smsTemplates/smsContentBatchDel",smsContentDel:i+"/smsTemplates/smsContentDel",smsContentEdit:i+"/smsTemplates/smsContentEdit",smsContentSaveOrUpdate:i+"/smsTemplates/smsContentSaveOrUpdate",smsTemplateOffline:i+"/smsTemplates/smsTemplateOffline",smsTemplates:i+"/smsTemplates/smsTemplates",smsTemplateSaveOrUpdate:i+"/smsTemplates/smsTemplateSaveOrUpdate",delPlanExclusivity:l+"mcd-plan-exclusivity/delPlanExclusivity",exportPlanExcluTemplate:l+"mcd-plan-exclusivity/exportPlanExcluTemplate",getPlanExclusivityInfo:l+"mcd-plan-exclusivity/getPlanExclusivityInfo",getPlanExclusivityList:l+"mcd-plan-exclusivity/getPlanExclusivityList",queryPlanDefList:l+"mcd-plan-exclusivity/queryPlanDefList",queryPlanExclusivity:l+"mcd-plan-exclusivity/queryPlanExclusivity",saveOrUpdatePlanExclusivity:l+"mcd-plan-exclusivity/saveOrUpdatePlanExclusivity",savePlanExclusivity:l+"mcd-plan-exclusivity/savePlanExclusivity",updatePlanExclusivity:l+"mcd-plan-exclusivity/updatePlanExclusivity",uploadPlanExcluFile:l+"mcd-plan-exclusivity/uploadPlanExcluFile",approveRecord:l+"api/mcdDimMaterialApprove/jx/approveRecord",getMaterialApprover:l+"api/mcdDimMaterialApprove/jx/getMaterialApprover",commitProcess:"/approve-svc/cmpApproveProcessInstance/commitProcess",subMaterialApprove:l+"api/mcdDimMaterialApprove/jx/subMaterialApprove",queryCommunicationUsers:"/plan-svc/api/channelMaterial/jx/queryCommunicationUsers",queryCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/queryCommunicationTask",addCommunicationTask:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTask",addCommunicationTaskBatch:"/approve-svc/jx/cmpApproveProcessInstance/addCommunicationTaskBatch",communicationAppTask:"/approve-svc/jx/cmpApproveProcessInstance/communicationAppTask",queryChannelExecInfo:"/plan-svc/mcd/camp/channelExec/queryChannelExecInfo",queryChannelExecList:"/plan-svc/mcd/camp/channelExec/queryChannelExecList",deleteChannelPrompt:"/plan-svc/mcd/chan/prompt/deleteChannelPrompt",queryChannelPrompt:"/plan-svc/mcd/chan/prompt/queryChannelPrompt",saveOrUpdateChannelPrompt:"/plan-svc/mcd/chan/prompt/saveOrUpdateChannelPrompt",uploaChanPromptFile:"/plan-svc/mcd/chan/prompt/uploaChanPromptFile",chanAndPlanMarketingHistory:"/plan-svc/mcd/marketing/history/chanAndPlanMarketingHistory",custContactNumMarketingHistory:"/plan-svc/mcd/marketing/history/custContactNumMarketingHistory",custSuccessRateMarketingHistory:"/plan-svc/mcd/marketing/history/custSuccessRateMarketingHistory",planMarketingHistory:"/plan-svc/mcd/marketing/history/planMarketingHistory",caculateContactUserNum:"/pec-timing/mcd/user/contact/caculateContactUserNum",caculateOrderUserNum:"/pec-timing/mcd/user/contact/caculateOrderUserNum",queryCampScene:"/plan-svc/api/action/tactics/tacticsCreate/jx/queryCampScene"}}},"384c":function(e,t,a){},"3a71":function(e,t,a){},"3ad9":function(e,t,a){},"3c7a":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const i=[{id:"804",components:"Incoming"},{id:"805",components:"ProductApp"},{id:"906",components:"MutiplePositionComponent"},{id:"922",components:"MutiplePositionComponent"},{id:"961",components:"MutiplePositionComponent"},{id:"963",components:"MutiplePositionComponent"},{id:"965",components:"MutiplePositionComponent"},{id:"966",components:"MutiplePositionComponent"},{id:"962",components:"MutiplePositionComponent"},{id:"901",components:"ContentSMS"},{id:"932",components:"MobileVideo"},{id:"957",components:"IVRsales"},{id:"958",components:"PushNotification"},{id:"964",components:"FiveCloudCard"},{id:"960",components:"FiveMessage"},{id:"801",components:"ContentSMS"},{id:"910",components:"MessageEntrainment"},{id:"802",components:"OutboundMarking"},{id:"809",components:"CustomerPass"},{id:"808",components:"GridPass"},{id:"931",components:"Linestore"},{id:"924",components:"BelieveWithMe"},{id:"926",components:"FindOneLevel"},{id:"916",components:"MiguChannel"},{id:"917",components:"MiguChannel"},{id:"919",components:"MiguChannel"},{id:"920",components:"MiguChannel"},{id:"933",components:"EnterpriseWeChat"},{id:"811",components:"OutboundForEight"},{id:"810",components:"shortOffice"},{id:"968",components:"GuangDianTong"},{id:"969",components:"GovernmentEnterprise"},{id:"967",components:"ChinaMobileApp"},{id:"970",components:"Zhuangweisuixiao"}],s={id:"0",components:"DefaultItem"};function r(e){const t=i.find(t=>t.id===e);return void 0!==t?t.components:s.components}},"3e98":function(e,t,a){},"3f38":function(e,t,a){},"4bb9":function(e,t,a){},"4d67":function(e,t,a){"use strict";a("3e98")},"4e90":function(e,t,a){"use strict";a("62bb")},"519e":function(e,t,a){"use strict";a("5777")},5777:function(e,t,a){},5910:function(e,t,a){},"5a8d":function(e,t,a){},"5d1e":function(e,t,a){},"61f3":function(e,t,a){"use strict";a("5a8d")},"62bb":function(e,t,a){},"6c4a":function(e,t,a){"use strict";a("149e")},"6e35":function(e,t,a){"use strict";a("5d1e")},"6f3a":function(e,t,a){},"7ad6":function(e,t,a){"use strict";a("0009")},"7f15":function(e,t,a){},8213:function(e,t,a){"use strict";a("5910")},8341:function(e,t,a){"use strict";a("ba2d")},"8b7e":function(e,t,a){},"9b39":function(e,t,a){"use strict";a("0b96")},"9e21":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mailTable-layer",class:e.showByRow?"fs12":"",staticStyle:{"padding-top":"30px"}},[t("el-select",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请选择查看策略"},model:{value:e.DetailsFromIndex,callback:function(t){e.DetailsFromIndex=t},expression:"DetailsFromIndex"}},e._l(e.optionList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{staticClass:"mailTable",style:e.styleObject},e._l(e.rowCount,(function(a,i){return t("el-row",{key:i},[e.isAarray(a)?t("el-row",{staticClass:"ArrayMailTable"},e._l(a,(function(a,i){return t("el-col",{key:i,staticClass:"ArrayMailTable-row",attrs:{span:12}},[t("el-col",{staticClass:"key",attrs:{span:8}},[e._v(e._s(a.key))]),t("el-col",{staticClass:"value",attrs:{span:16}},[e._v(e._s(e.DetailsFromItem[a.value]))])],1)})),1):t("el-row",[t("el-col",{staticClass:"ArrayMailTable",attrs:{span:24}},[t("el-col",{staticClass:"key",attrs:{span:4}},[e._v(e._s(a.key))]),t("el-col",{staticClass:"value1",attrs:{span:20}},[e._v(e._s(e.DetailsFromItem[a.value]))])],1)],1)],1)})),1)],1)},s=[],r=(a("14d9"),{data(){return{styleObject:{},s_showByRow:!0,DetailsFromIndex:0}},props:["tableData","tableStyle","showByRow","DetailsFrom","optionKeyName"],computed:{isAarray:function(){return e=>Array.isArray(e)},optionList(){let e=[];return this.DetailsFrom.map((t,a)=>{e.push({label:t[this.optionKeyName],value:a})}),e},DetailsFromItem(){return this.DetailsFrom[this.DetailsFromIndex]},rowCount:function(){let e=[],t=[...this.tableData];for(let a=0;a<t.length;a++){let i=[];t[a].iscolspan||(i.push(t[a]),a+1<t.length&&!t[a+1].iscolspan&&(i.push(t[a+1]),a++)),0!==i.length?(i.length<2&&i.push([]),e.push(i)):e.push(t[a])}return e}},methods:{},created(){this.styleObject=this.tableStyle,void 0!==this.showByRow&&(this.s_showByRow=this.showByRow)}}),l=r,o=(a("cafa"),a("2877")),n=Object(o["a"])(l,i,s,!1,null,"15ce141f",null);t["a"]=n.exports},"9e43":function(e,t,a){},a351:function(e,t,a){"use strict";a("7f15")},a642:function(e,t,a){"use strict";a("15ea")},a917:function(e,t,a){"use strict";a("3ad9")},aa04:function(e,t,a){"use strict";a("c0cb")},b11e:function(e,t,a){"use strict";a("28b3")},ba2d:function(e,t,a){},c0cb:function(e,t,a){},ca38:function(e,t,a){"use strict";a("e80a")},cafa:function(e,t,a){"use strict";a("6f3a")},cb11:function(e,t,a){"use strict";a("9e43")},cd39:function(e,t,a){"use strict";a("3f38")},d39c:function(e,t,a){"use strict";const i="/element-svc/api",s="/preview-svc",r="/mcd-web/action";t["a"]={seapi:{querylistEnumValue:"/element-svc/mcd-plan-label/queryLabelByKey",loadImage:i+"/mcdDimMaterial/loadImage",queryTableList:"/element-svc/api/jx/mcdPlanDef/queryPlanDefPageList",saveStatus:i+"/mcdPlanDef/updatePlanDefStatus",queryDetail:"/element-svc/api/jx/mcdPlanDef/getPlanDetailById",mcdChannelList:i+"/mcdDimMaterial/queryChannel",mcdContList:i+"/mcdDimMaterial/queryContact",mcdPositList:i+"/mcdDimMaterial/queryPosition",getChannels:i+"/mcdDimChannel/pagelistDimChannel",queryContactByChannelId:i+"/iop/operatingPositionManager/queryContactByChannelId.do",queryPosition:i+"/iop/template/queryPosition",getOnlineChannels:i+"/mcdDimChannel/listDimChannel  ",getOnlineChannelsByUser:i+"/mcdDimChannel/jx/listDimChannel",getSysDics:"/plan-svc/action/iop/common/getSysDics",queryDigitalProductContents:i+"/iopDigitalProduct/queryDigitalProductPageList",queryConentDetailById:i+"/iopDigitalProduct/getDigitalProduct",updateDigitalProuctStatus:i+"/iopDigitalProduct/updateDigitalProductStatus",queryMaterialInfo:i+"/mcdDimMaterial/queryMaterialPageList",deleteMaterById:i+"/mcdDimMaterial/deleteMaterial",queryMaterialById:i+"/mcdDimMaterial/getMaterial",saveOrUpdateMaterial:i+"/mcdDimMaterial/saveOrUpdateMaterial",uploadMaterImg:i+"/mcdDimMaterial/uploadMaterialPicture",uploadMaterVideo:i+"/mcdDimMaterial/uploadMaterialVideo",uploadMaterFile:i+"/mcdDimMaterial/uploadMaterialsFile",queryIopContactList:i+"/jx/mcdDimContact/pagelistMcdDimContact",queryContactDetailById:i+"/jx/mcdDimContact/getDimContactDetail",listAllChannelName:i+"/mcdDimChannel/listAllChannelNameAndId",deleteContactById:i+"/mcdDimContact/removeContact",saveOrUpdateContact:i+"/jx/mcdDimContact/saveOrUpdateContact",validateContactName:i+"/mcdDimContact/getValidateContactName",displayChannelList:"/element-svc/api/mcdDimChannel/jx/pagelistDimChannel",validateChannelName:i+"/mcdDimChannel/getValidateChannelName",saveOrUpdateChannel:"/element-svc/api/mcdDimChannel/jx/saveOrUpdateDimChannel",deleteChannelById:i+"/mcdDimChannel/removeDimChannel",channelDetail:i+"/mcdDimChannel/getDimChannel",customerLike:"/preview-svc/jx/chnPre/queryPreData",channelDetail:"/element-svc/mcd-dim-channel-desc/query",uploaChanPromptFile:"/element-svc/api/mcdDimChannel/jx/uploaChanPromptFile",downloadChanPromptFile:"/plan-svc/mcd/chan/prompt/downloadChanPromptFile",queryDimChannelInfo:"/element-svc/api/mcdDimChannel/jx/queryDimChannelInfo",queryChannelEValData:"/groupmarket/enterprise/queryChannelEValData",queryIopOperatingPosition:i+"/mcdDimAdivInfo/pagelistAdivInfo",deleteOperatingPositionById:i+"/mcdDimAdivInfo/removeAdivInfo",queryOperPositionDetail:i+"/mcdDimAdivInfo/getAdivInfo",queryOpelistData:i+"/mcdDimAdivInfo/listChannelInfoAndContactInfo",queryCampsegInfoWithThisPosId:i+"/mcdDimAdivInfo/listpageCampsegInfoWithThisAdivId",getConfigList:i+"/mcdDimAttrConf/queryConfigList",validateOperationName:i+"/mcdDimAdivInfo/getValidateAdivInfoName",getValidateAdivInfoId:i+"/jx/mcdDimAdivInfo/getValidateAdivInfoId",saveOrUpdateOperPosition:i+"/mcdDimAdivInfo/saveOrUpdateAdivInfo",getChannelScheduleList:r+"/channelview/getChannelScheduleList",querySensitiveCust:s+"/mcd-channel-sensitive-cust-conf/querySensitiveCust",saveSensitiveCust:s+"/mcd-channel-sensitive-cust-conf/saveSensitiveCust",deleteSensitiveCust:s+"/mcd-channel-sensitive-cust-conf/deleteSensitiveCust",batchDeleteSensitiveCust:s+"/mcd-channel-sensitive-cust-conf/batchDeleteSensitiveCust",pagelistApproveMaterial:i+"/mcdDimMaterialApprove/pagelistApproveMaterial",approveRecord:i+"/mcdDimMaterialApprove/approveRecord",pagelistMyMaterial:i+"/mcdDimMaterialTemplate/pagelistMyMaterial",pagelistExcellentMaterial:i+"/mcdDimMaterialTemplate/pagelistExcellentMaterial",pagelistHotSpotMaterial:i+"/mcdDimMaterialTemplate/pagelistHotSpotMaterial",updateMaterialStatus:i+"/mcdDimMaterial/updateMaterialStatus",getMaterialApprover:i+"/mcdDimMaterialApprove/getMaterialApprover",getCmpApprovalProcess:i+"/mcdDimMaterialApprove/getCmpApprovalProcess",subMaterialApprove:i+"/mcdDimMaterialApprove/subMaterialApprove",addExcellentMaterialLibrary:i+"/mcdDimMaterialTemplate/addExcellentMaterialLibrary",removeExcellentMaterialLibrary:i+"/mcdDimMaterialTemplate/removeExcellentMaterialLibrary",createExcellentMaterial:i+"/mcdDimMaterialTemplate/createExcellentMaterial",createHotSpotMaterial:i+"/mcdDimMaterialTemplate/createHotSpotMaterial",removeMyMaterial:i+"/mcdDimMaterialTemplate/removeMyMaterial",getIntell:i+"/mcdDimMaterial/getIntelligentMatchingMaterialList"}}},d3dc:function(e,t,a){"use strict";a("e575")},db77:function(e,t,a){},e575:function(e,t,a){},e80a:function(e,t,a){},edb2:function(e,t,a){},ee2c:function(e,t,a){},f3ba:function(e,t,a){"use strict";const i="/plan-svc/api/home/";t["a"]={home:{queryPlanCount:i+"queryPlanCount",querySaleSituation:i+"jx/querySaleSituation",tacticsOverallAll:"/plan-svc/tacticOverview",queryTacticsByUserId:"/plan-svc/api/home/jx/queryTacticsByUserId",queryGoodAcitive:i+"",queryIopTemplate:"/plan-svc/action/iop/excellentTemplateManager/queryIopTemplate",excellentRecomCamp:"/plan-svc/api/home/jx/excellentRecomCamp"}}},f79d:function(e,t,a){"use strict";a("db77")},f81e:function(e,t,a){"use strict";a("fe77")},fb26:function(e,t,a){},fe77:function(e,t,a){}}]);