(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a269f08a"],{"227c":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"clientele-content"},[t("el-tabs",{attrs:{type:"card"},model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[t("el-tab-pane",{attrs:{label:"特殊名单",name:"SpecialList",lazy:!0}},[t("SpecialList")],1),t("el-tab-pane",{attrs:{label:"模型分析类型",name:"ModelAnalysis",lazy:!0}},[t("ModelAnalysis")],1)],1)],1)},i=[],s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"template-wrap-content"},[t("div",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id",stripe:"",height:500}},[t("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"45"}}),t("el-table-column",{attrs:{prop:"name",align:"center",label:"名单名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"field",align:"center",label:"字段名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"sortby",align:"center",label:"排序字段","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDetail(a)}}},[e._v("编辑")]),t("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40],"page-size":e.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.totalData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1,"destroy-on-close":"","append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名单名称:",prop:"name"}},[t("el-select",{attrs:{placeholder:"请选择",disabled:"修改特殊名单"==e.dialogTitle},on:{change:e.userNameChange},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},e._l(e.userTypeList,(function(e){return t("el-option",{key:e.enumKey,attrs:{value:e.enumValue}})})),1)],1),t("el-form-item",{attrs:{label:"字段名称:",prop:"field"}},[t("el-input",{attrs:{placeholder:"请输入字段名称"},model:{value:e.form.field,callback:function(t){e.$set(e.form,"field",t)},expression:"form.field"}})],1),t("el-form-item",{attrs:{label:"排序字段:",prop:"sortby"}},[t("el-input",{attrs:{placeholder:"请输入排序字段"},model:{value:e.form.sortby,callback:function(t){e.$set(e.form,"sortby",t)},expression:"form.sortby"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.save}},[e._v(" 确 定 ")])],1)],1)],1)},r=[],o=a("0fea"),n=a("a454"),d=a("5e05"),c=a("4e3f"),u={components:{QueryFormCell:c["a"]},data(){return{loading:!1,editLoading:!1,QueryFormList:[{label:"状态",values:[{label:"不限",value:""}]}],defaultSizeForm:{radioModel:[""]},current:1,size:10,totalData:[],dialogFormVisible:!1,userTypeList:[],dialogTitle:"",form:{field:"",name:"",sortby:"",type:""},rules:{field:[{required:!0,message:"请输入字段名称",trigger:"blur"}],name:[{required:!0,message:"请选择名单名称",trigger:"blur"}],sortby:[{required:!0,message:"请输入排序字段",trigger:"blur"}]}}},computed:{tableData(){return this.totalData.slice((this.current-1)*this.size,this.current*this.size)}},watch:{dialogFormVisible(e){e||(this.form={field:"",name:"",sortby:"",type:""})}},methods:{async getUserEnum(){this.userTypeList=[];try{const e=await Object(o["i"])(d["a"].common.getSysEnum,{enumType:"avoid_user_type"}),t=e.filter(e=>!this.totalData.some(t=>t.name==e.enumValue));this.userTypeList=t}catch(e){}},async getTableData(){try{this.loading=!0;const e=await Object(o["i"])(n["a"].preview.querySpecialList);this.totalData=e,this.current=1}catch(e){}finally{this.loading=!1}},add(){this.dialogTitle="新增特殊名单",this.dialogFormVisible=!0,this.getUserEnum();let e=0,t=0;this.totalData.forEach(a=>{let l=a.field.replace(/EXT_NUM/g,"")-0;l>t&&(t=l),a.sortby>e&&(e=a.sortby)}),this.form.sortby=e+1,this.form.field="EXT_NUM"+(t+1)},handleDetail(e){this.form={...e},this.dialogTitle="修改特殊名单",this.dialogFormVisible=!0},userNameChange(e){let t=this.userTypeList.find(t=>t.enumValue==e);this.form.type=t.enumKey},save(){this.$refs["form"].validate(async e=>{if(e)try{let e,t;this.editLoading=!0,"新增特殊名单"==this.dialogTitle?(e=n["a"].preview.saveSpecialList,t=[this.form]):(e=n["a"].preview.editSpecialList,t=this.form);const a=await Object(o["i"])(e,t);!0===a?(this.$message({type:"success",message:"操作成功!"}),this.getTableData(),this.dialogFormVisible=!1):this.$message({type:"error",message:"操作失败!"})}catch(t){}finally{this.editLoading=!1}})},handleDelete(e){this.$confirm("是否删除该名单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const t=await Object(o["g"])(n["a"].preview.delSpecialList+"/"+e.type);"SUCCESS"==t.status?(this.$message({type:"success",message:"操作成功!"}),this.getTableData()):this.$message({type:"error",message:"操作失败!"})}).catch(()=>{})},handleSizeChange(e){this.current=1,this.size=e},handleCurrentChange(e){this.current=e}},mounted(){this.getTableData()}},m=u,h=(a("f5ec"),a("2877")),p=Object(h["a"])(m,s,r,!1,null,"3ea77caa",null),b=p.exports,g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"template-wrap-content"},[t("div",{staticClass:"top-edit-part"},[t("QueryFormCell",{attrs:{list:e.QueryFormList,defaultSizeForm:e.defaultSizeForm},on:{queryForm:e.queryForm}})],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id",stripe:"",height:500}},[t("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"45"}}),t("el-table-column",{attrs:{prop:"modelId",align:"center",label:"模型ID","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"modelName",align:"center",label:"模型名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"modelStat",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[1==a.modelStat?t("el-tag",{attrs:{type:"success"}},[e._v("启用")]):t("el-tag",{attrs:{type:"info"}},[e._v("未启用")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.updateModel(a)}}},[e._v(" "+e._s(1==a.modelStat?"停用":"启用")+" ")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40],"page-size":e.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.totalData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},f=[],y={components:{QueryFormCell:c["a"]},data(){return{loading:!1,editLoading:!1,QueryFormList:[{label:"模型状态",values:[{label:"不限",value:""},{label:"启用",value:1},{label:"未启用",value:0}]}],defaultSizeForm:{radioModel:[""]},query:{modelStat:""},current:1,size:10,totalData:[]}},computed:{tableData(){return this.totalData.slice((this.current-1)*this.size,this.current*this.size)}},methods:{async getTableData(){try{this.loading=!0;const e=await Object(o["i"])(n["a"].preview.queryModelList,this.query);this.totalData=e,this.current=1}catch(e){}finally{this.loading=!1}},queryForm(e){this.query.modelStat=e.value,this.getTableData()},async updateModel(e){this.$confirm(`即将${1==e.modelStat?"停用":"启用"}该模型类型，是否继续？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const t=await Object(o["i"])(n["a"].preview.updateModelStat,{...e,modelStat:1==e.modelStat?0:1});!0===t?(this.$message({type:"success",message:"操作成功",duration:500}),this.getTableData()):this.$message({type:"error",message:t.message})}catch(t){}}).catch(()=>{})},handleSizeChange(e){this.current=1,this.size=e},handleCurrentChange(e){this.current=e}},mounted(){this.getTableData()}},v=y,z=(a("83bf"),Object(h["a"])(v,g,f,!1,null,"41420e49",null)),F=z.exports,w={components:{SpecialList:b,ModelAnalysis:F},data(){return{tabActive:"SpecialList"}}},M=w,x=(a("b389"),Object(h["a"])(M,l,i,!1,null,"4e08043e",null));t["default"]=x.exports},"2c9b":function(e,t,a){},"3aef":function(e,t,a){},"4e3f":function(e,t,a){"use strict";var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"query-form-cell-wrap"},[t("el-form",{ref:"form",attrs:{model:e.sizeForm,"label-width":e.labelWidth,"label-position":e.labelPosition,size:"mini"}},e._l(e.list,(function(a,l){return t("el-form-item",{key:l+"list",class:{disabled:a.disabled},attrs:{"label-width":a.labelWidth||e.labelWidth,label:a.label+"："}},[Array.isArray(a.values)?t("div",{staticClass:"fe-d-flex"},[t("div",{staticClass:"radio-box"},[a.dateType?e._e():t("el-radio-group",{attrs:{size:"mini",disabled:a.disabled},on:{change:function(t){return e.radioChange(e.sizeForm.radioModel[l],l)}},model:{value:e.sizeForm.radioModel[l],callback:function(t){e.$set(e.sizeForm.radioModel,l,t)},expression:"sizeForm.radioModel[index]"}},e._l(a.values,(function(a,l){return t("el-radio-button",{key:l+"listValues",attrs:{label:a.value}},[e._v(e._s(a.label)+" ")])})),1)],1),t("div",{staticClass:"date-box"},["date"===a.dateType?t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(t){e.$set(e.sizeForm.dateModel,l,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"month"===a.dateType?t("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(t){e.$set(e.sizeForm.dateModel,l,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"daterange"===a.dateType?t("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(t){e.$set(e.sizeForm.dateModel,l,t)},expression:"sizeForm.dateModel[index]"}}):e._e(),"datetimerange"===a.dateType?t("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:e.dateChange},model:{value:e.sizeForm.dateModel[l],callback:function(t){e.$set(e.sizeForm.dateModel,l,t)},expression:"sizeForm.dateModel[index]"}}):e._e()],1)]):t("div",{staticClass:"input-box"},[t("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],attrs:{placeholder:"请输入内容"},on:{change:e.inputChange},model:{value:e.sizeForm.radioModel[l],callback:function(t){e.$set(e.sizeForm.radioModel,l,t)},expression:"sizeForm.radioModel[index]"}})],1)])})),1)],1)},i=[],s={name:"QueryFormCell",props:{labelWidth:{type:String,default:()=>"82px"},labelPosition:{type:String,default:()=>"right"},defaultSizeForm:{type:Object,default:()=>({})},list:{type:Array,default:()=>[{label:"数据时间",values:[{label:"不限",value:"1"}],isDate:!0,dateType:"date"},{label:"接口类型",values:[{label:"不限",value:"不限"},{label:"文件接口",value:"文件接口"}],isDate:!1}]}},data(){return{sizeForm:{dateModel:["2021-05-08","",""],radioModel:["自定义","不限","不限","不限"]}}},watch:{defaultSizeForm:{handler:function(e){this.sizeForm=e},deep:!0,immediate:!0}},methods:{radioChange(e,t){this.sizeForm.dateModel&&this.$set(this.sizeForm.dateModel,t,"date"===this.list[t].dateType?"":["",""]),this.$emit("queryForm",{index:t,value:e,form:this.sizeForm})},dateChange(e){e?(this.$set(this.sizeForm.dateModel,0,e),this.$emit("queryForm",{value:e,form:this.sizeForm})):this.$emit("emptyFrom",this.sizeForm)},inputChange(e){e&&this.$emit("queryForm",{value:e,form:this.sizeForm})}}},r=s,o=(a("a28d"),a("2877")),n=Object(o["a"])(r,l,i,!1,null,null,null);t["a"]=n.exports},"83bf":function(e,t,a){"use strict";a("2c9b")},a28d:function(e,t,a){"use strict";a("cddb")},b389:function(e,t,a){"use strict";a("3aef")},c93d:function(e,t,a){},cddb:function(e,t,a){},f5ec:function(e,t,a){"use strict";a("c93d")}}]);