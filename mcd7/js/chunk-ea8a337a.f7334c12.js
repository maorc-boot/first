(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea8a337a"],{"0590":function(e,a,t){"use strict";t("c815")},"97e0":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"template-wrap-content"},[a("div",{staticClass:"top-edit-part"},[a("el-input",{directives:[{name:"clear-emoij",rawName:"v-clear-emoij"}],staticStyle:{width:"220px"},attrs:{placeholder:"标签名称或编号查询"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.keywordsSearch.apply(null,arguments)}},model:{value:e.keyWords,callback:function(a){e.keyWords="string"===typeof a?a.trim():a},expression:"keyWords"}},[a("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:e.keywordsSearch},slot:"suffix"})]),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.addLabel}},[e._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tTable",staticClass:"customTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id",stripe:"",height:500}},[a("el-table-column",{attrs:{label:"序号",type:"index","header-align":"center",align:"center",width:"45"}}),a("el-table-column",{attrs:{prop:"channelName",align:"center",label:"渠道"}}),a("el-table-column",{attrs:{prop:"custLabelNames",align:"center",label:"标签名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"custLabelIds",align:"center",label:"标签编号","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.row.channelId)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.query.current,"page-sizes":[10,20,30,40],"page-size":e.query.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1,"destroy-on-close":"","append-to-body":""},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"渠道:",prop:"channelId"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:"修改配置"==e.dialogTitle},on:{change:e.getChannelName},model:{value:e.form.channelId,callback:function(a){e.$set(e.form,"channelId",a)},expression:"form.channelId"}},e._l(e.channelList,(function(t){return a("el-option",{key:t.channelId,attrs:{label:t.channelName,value:t.channelId,disabled:e.tableData.some(e=>e.channelId==t.channelId)}})})),1)],1),a("el-form-item",{attrs:{label:"标签:",prop:"label"}},[a("div",{staticClass:"label-content"},e._l(e.labelList,(function(t){return a("div",{key:t.labelId,staticClass:"item",class:[e.form.labelList.some(e=>e.labelId==t.labelId)?"active":""],on:{click:function(a){return e.handleLabel(t)}}},[a("span",[e._v(e._s(t.labelName)+" "),a("br"),e._v(" "+e._s(t.labelId))])])})),0)])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:""},on:{click:function(a){e.dialogFormVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.save}},[e._v("确定")])],1)],1)],1)},i=[],n=(t("14d9"),t("0fea")),s=t("a454"),r=t("d39c"),o={data(){return{loading:!1,editLoading:!1,keyWords:"",query:{keyWords:"",current:1,size:10},total:0,tableData:[],dialogFormVisible:!1,dialogTitle:"",form:{channelId:"",channelName:"",labelList:[],custLabelIds:"",custLabelNames:""},rules:{channelId:[{required:!0,message:"请选择渠道",trigger:"change"}]},channelList:[{channelId:"802",channelName:"10085外呼"},{channelId:"808",channelName:"智慧网格"},{channelId:"811",channelName:"10088外呼"}],labelList:[]}},methods:{async getChannelList(){try{const e=await Object(n["i"])(r["a"].seapi.getOnlineChannels,{onlineStatus:"1"});this.channelList=e}catch(e){}},async getLabelList(e){try{const a=await Object(n["i"])(s["a"].custgroup.getLabelConfig+"/"+e);this.labelList=a}catch(a){this.labelList=[]}},async getTableData(){try{this.loading=!0;const{records:e,total:a}=await Object(n["i"])(s["a"].custgroup.getChannelLabelInfos,this.query);this.tableData=e,this.total=a}catch(e){}finally{this.loading=!1}},keywordsSearch(){this.query.current=1,this.query.keyWords=this.keyWords,this.getTableData()},async handleDetail(e){var a,t;this.form.labelList=[];let l=null===(a=e.custLabelIds)||void 0===a?void 0:a.split(","),i=null===(t=e.custLabelNames)||void 0===t?void 0:t.split(",");l.forEach((e,a)=>{this.form.labelList.push({labelId:e,labelName:i[a]})}),this.form={...this.form,...e},this.dialogTitle="修改配置",this.dialogFormVisible=!0,this.getLabelList(e.channelId)},getChannelName(){this.form.channelName=this.channelList.find(e=>e.channelId==this.form.channelId).channelName,this.getLabelList(this.form.channelId)},handleLabel(e){let a=this.form.labelList.findIndex(a=>a.labelId==e.labelId);if(a>-1)this.form.labelList.splice(a,1);else{if(10==this.form.labelList.length)return this.$message.warning("请最多配置10个标签！");this.form.labelList.push(e)}},addLabel(){let e=this.tableData.some(e=>"802"==e.channelId),a=this.tableData.some(e=>"808"==e.channelId),t=this.tableData.some(e=>"811"==e.channelId);if(e&&a&&t)return this.$message.warning("支持渠道已全部配置标签！");this.dialogTitle="新增配置",this.form={channelId:"",channelName:"",labelList:[],custLabelIds:"",custLabelNames:""},this.labelList=[],this.dialogFormVisible=!0,this.$nextTick(()=>{this.$refs["form"].clearValidate()})},save(){this.$refs["form"].validate(async e=>{if(e){this.form.custLabelIds=this.form.labelList.map(e=>e.labelId).join(","),this.form.custLabelNames=this.form.labelList.map(e=>e.labelName).join(",");try{this.editLoading=!0;let e="新增配置"==this.dialogTitle?s["a"].custgroup.saveChannelLabel:s["a"].custgroup.updateChannelLabel;const a=await Object(n["i"])(e,this.form);"SUCCESS"==a.status?(this.$message({type:"success",message:"操作成功!"}),this.getTableData(),this.dialogFormVisible=!1):this.$message({type:"error",message:"操作失败!"})}catch(a){}finally{this.editLoading=!1}}})},handleDelete(e){this.$confirm("是否删除该配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{status:a}=await Object(n["i"])(s["a"].custgroup.deleteChannelLabel+"/"+e);"SUCCESS"==a?(this.$message({type:"success",message:"操作成功!"}),this.getTableData()):this.$message({type:"error",message:"操作失败!"})}).catch(()=>{})},handleSizeChange(e){this.query.current=1,this.query.size=e,this.getTableData()},handleCurrentChange(e){this.query.current=e,this.getTableData()}},mounted(){this.getTableData()}},c=o,d=(t("0590"),t("2877")),m=Object(d["a"])(c,l,i,!1,null,"0f0fa5c2",null);a["default"]=m.exports},c815:function(e,a,t){},d39c:function(e,a,t){"use strict";const l="/element-svc/api",i="/preview-svc",n="/mcd-web/action";a["a"]={seapi:{querylistEnumValue:"/element-svc/mcd-plan-label/queryLabelByKey",loadImage:l+"/mcdDimMaterial/loadImage",queryTableList:"/element-svc/api/jx/mcdPlanDef/queryPlanDefPageList",saveStatus:l+"/mcdPlanDef/updatePlanDefStatus",queryDetail:"/element-svc/api/jx/mcdPlanDef/getPlanDetailById",mcdChannelList:l+"/mcdDimMaterial/queryChannel",mcdContList:l+"/mcdDimMaterial/queryContact",mcdPositList:l+"/mcdDimMaterial/queryPosition",getChannels:l+"/mcdDimChannel/pagelistDimChannel",queryContactByChannelId:l+"/iop/operatingPositionManager/queryContactByChannelId.do",queryPosition:l+"/iop/template/queryPosition",getOnlineChannels:l+"/mcdDimChannel/listDimChannel  ",getOnlineChannelsByUser:l+"/mcdDimChannel/jx/listDimChannel",getSysDics:"/plan-svc/action/iop/common/getSysDics",queryDigitalProductContents:l+"/iopDigitalProduct/queryDigitalProductPageList",queryConentDetailById:l+"/iopDigitalProduct/getDigitalProduct",updateDigitalProuctStatus:l+"/iopDigitalProduct/updateDigitalProductStatus",queryMaterialInfo:l+"/mcdDimMaterial/queryMaterialPageList",deleteMaterById:l+"/mcdDimMaterial/deleteMaterial",queryMaterialById:l+"/mcdDimMaterial/getMaterial",saveOrUpdateMaterial:l+"/mcdDimMaterial/saveOrUpdateMaterial",uploadMaterImg:l+"/mcdDimMaterial/uploadMaterialPicture",uploadMaterVideo:l+"/mcdDimMaterial/uploadMaterialVideo",uploadMaterFile:l+"/mcdDimMaterial/uploadMaterialsFile",queryIopContactList:l+"/jx/mcdDimContact/pagelistMcdDimContact",queryContactDetailById:l+"/jx/mcdDimContact/getDimContactDetail",listAllChannelName:l+"/mcdDimChannel/listAllChannelNameAndId",deleteContactById:l+"/mcdDimContact/removeContact",saveOrUpdateContact:l+"/jx/mcdDimContact/saveOrUpdateContact",validateContactName:l+"/mcdDimContact/getValidateContactName",displayChannelList:"/element-svc/api/mcdDimChannel/jx/pagelistDimChannel",validateChannelName:l+"/mcdDimChannel/getValidateChannelName",saveOrUpdateChannel:"/element-svc/api/mcdDimChannel/jx/saveOrUpdateDimChannel",deleteChannelById:l+"/mcdDimChannel/removeDimChannel",channelDetail:l+"/mcdDimChannel/getDimChannel",customerLike:"/preview-svc/jx/chnPre/queryPreData",channelDetail:"/element-svc/mcd-dim-channel-desc/query",uploaChanPromptFile:"/element-svc/api/mcdDimChannel/jx/uploaChanPromptFile",downloadChanPromptFile:"/plan-svc/mcd/chan/prompt/downloadChanPromptFile",queryDimChannelInfo:"/element-svc/api/mcdDimChannel/jx/queryDimChannelInfo",queryChannelEValData:"/groupmarket/enterprise/queryChannelEValData",queryIopOperatingPosition:l+"/mcdDimAdivInfo/pagelistAdivInfo",deleteOperatingPositionById:l+"/mcdDimAdivInfo/removeAdivInfo",queryOperPositionDetail:l+"/mcdDimAdivInfo/getAdivInfo",queryOpelistData:l+"/mcdDimAdivInfo/listChannelInfoAndContactInfo",queryCampsegInfoWithThisPosId:l+"/mcdDimAdivInfo/listpageCampsegInfoWithThisAdivId",getConfigList:l+"/mcdDimAttrConf/queryConfigList",validateOperationName:l+"/mcdDimAdivInfo/getValidateAdivInfoName",getValidateAdivInfoId:l+"/jx/mcdDimAdivInfo/getValidateAdivInfoId",saveOrUpdateOperPosition:l+"/mcdDimAdivInfo/saveOrUpdateAdivInfo",getChannelScheduleList:n+"/channelview/getChannelScheduleList",querySensitiveCust:i+"/mcd-channel-sensitive-cust-conf/querySensitiveCust",saveSensitiveCust:i+"/mcd-channel-sensitive-cust-conf/saveSensitiveCust",deleteSensitiveCust:i+"/mcd-channel-sensitive-cust-conf/deleteSensitiveCust",batchDeleteSensitiveCust:i+"/mcd-channel-sensitive-cust-conf/batchDeleteSensitiveCust",pagelistApproveMaterial:l+"/mcdDimMaterialApprove/pagelistApproveMaterial",approveRecord:l+"/mcdDimMaterialApprove/approveRecord",pagelistMyMaterial:l+"/mcdDimMaterialTemplate/pagelistMyMaterial",pagelistExcellentMaterial:l+"/mcdDimMaterialTemplate/pagelistExcellentMaterial",pagelistHotSpotMaterial:l+"/mcdDimMaterialTemplate/pagelistHotSpotMaterial",updateMaterialStatus:l+"/mcdDimMaterial/updateMaterialStatus",getMaterialApprover:l+"/mcdDimMaterialApprove/getMaterialApprover",getCmpApprovalProcess:l+"/mcdDimMaterialApprove/getCmpApprovalProcess",subMaterialApprove:l+"/mcdDimMaterialApprove/subMaterialApprove",addExcellentMaterialLibrary:l+"/mcdDimMaterialTemplate/addExcellentMaterialLibrary",removeExcellentMaterialLibrary:l+"/mcdDimMaterialTemplate/removeExcellentMaterialLibrary",createExcellentMaterial:l+"/mcdDimMaterialTemplate/createExcellentMaterial",createHotSpotMaterial:l+"/mcdDimMaterialTemplate/createHotSpotMaterial",removeMyMaterial:l+"/mcdDimMaterialTemplate/removeMyMaterial",getIntell:l+"/mcdDimMaterial/getIntelligentMatchingMaterialList"}}}}]);