(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ffc23718"],{5282:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this;e._self._c;return e._m(0)},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"login_container"},[t("img",{attrs:{src:s("713b"),alt:""}})])}],a=(s("14d9"),s("bc3a")),i=s.n(a),c=s("0557"),r=s("0fea"),d=s("5e05"),g={name:"AutoLogin",data(){return{}},created(){const{token:e,appAcctId:t}=this.$route.query;e&&t?this.loginFrom4A(e,t):(alert("缺少必要参数"),this.$router.push({path:"/Login"}))},methods:{loginFrom4A(e,t){const s=this.$loading({lock:!0,text:"自动登录中,请稍后",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o={clientId:"asiainfo_1",clientSecret:"123456",grantType:"password",token:e,appAcctId:t};i()({url:c["a"].commonConfig.baseURL+"/auth-svc/login/4A",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:o}).then(e=>{const{data:t,status:o}=e.data;if("SUCCESS"===o){for(let e in t)"token_type"==e&&(t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1)),window.sessionStorage.setItem(e,t[e]);this.savePageLog(),window.sessionStorage.setItem("loginType","4A"),this.encryptUserId(window.sessionStorage.getItem("userId")),window.sessionStorage.setItem("IOP_TOKEN",t.token_type+" "+t.access_token),s.close(),this.$router.push({path:"/Home"})}else alert(e.data.message),s.close(),window.close()})},async encryptUserId(e){try{const t=await Object(r["i"])(d["a"].common.encrypt+"?userId="+e);sessionStorage.setItem("desId",t)}catch{}},savePageLog(){Object(r["i"])(d["a"].common.savePageLog,{userId:window.sessionStorage.getItem("userId"),userName:window.sessionStorage.getItem("userNameCn"),logType:0,appAcctId:sessionStorage.getItem("appAcctId")})}}},p=g,l=(s("ed0c"),s("2877")),u=Object(l["a"])(p,o,n,!1,null,"f9d468b0",null);t["default"]=u.exports},"5f32":function(e,t,s){},"713b":function(e,t,s){e.exports=s.p+"img/login-left.26aec9ed.png"},ed0c:function(e,t,s){"use strict";s("5f32")}}]);