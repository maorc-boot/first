<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.asiainfo.biapp.pec.plan.jx.hmh5.dao.McdCustTitleDao">

    <select id="queryCustomizeTitleList"
            resultType="com.asiainfo.biapp.pec.plan.jx.hmh5.model.McdCustTitleList">
        SELECT phone_num, title, city_id, city_name, data_status,create_time,
               create_user_id, remarks, create_user_name
        FROM MCD_CUSTOMIZE_TITLE_CONFIG
        <where>
            <if test="query.attrPhone != null and query.attrPhone != ''">
                and PHONE_NUM like '%' || #{query.attrPhone} || '%'
            </if>
            <if test="query.attrCity != null and query.attrCity != ''">
                and CITY_ID = #{query.attrCity}
            </if>
            <if test="query.attrStartTime != null and query.attrStartTime != ''">
                and CREATE_TIME <![CDATA[>=]]> #{query.attrStartTime}
            </if>
            <if test="query.attrEndTime != null and query.attrEndTime != ''">
                and CREATE_TIME <![CDATA[<=]]> #{query.attrEndTime}
            </if>
            <if test="query.createUserName != null and query.createUserName != ''">
                and CREATE_USER_NAME LIKE '%' || #{query.createUserName} || '%'
            </if>
        </where>
        ORDER BY DATA_STATUS desc ,CREATE_TIME desc
    </select>
    <select id="queryExistCustTitleList" resultType="java.lang.String">
        select PHONE_NUM from MCD_CUSTOMIZE_TITLE_CONFIG
        where PHONE_NUM in
        <foreach collection="list" index="index" item="phone" open="(" separator="," close=")">
            #{phone}
        </foreach>
    </select>
</mapper>
